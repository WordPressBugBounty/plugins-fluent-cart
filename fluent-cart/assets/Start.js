import{a as h,c,o as l,f as s,d,F as M,h as x,t as o,w as m,u as S,b as A,e as g,g as w,r as dt,S as K,R as Y,x as wt,T as kt,n as N,m as Ct,l as Pt,i as H,p as ne,j as ie,aE as St,aF as At,y as $t,z as Mt,a2 as Dt,q as Tt}from"./chunks/vue.esm-bundler.js";import{d as le}from"./chunks/dayjs.min.js";import{u as Et,t as Lt}from"./chunks/timezone.js";import{_ as U}from"./chunks/DynamicIcon.js";import{B as F,I as ee,S as It}from"./chunks/Badge.js";import{S as O,u as Vt,c as xt,d as Bt}from"./chunks/Str.js";import{B as ct}from"./chunks/BundleProducts.js";import{_ as L}from"./chunks/_plugin-vue_export-helper.js";import{f as oe,b as Nt}from"./chunks/common.js";import{a as ut,C as Ut,d as pe,b as R,_ as Ht,c as Ft}from"./chunks/CopyToClipboard.js";import{b as mt,E as de,q as J,x as fe,y as be,A as ge,B as ye,C as ve,v as Ot}from"./chunks/index.js";import qt from"./chunks/ArrowDown.js";import Rt from"./chunks/ArrowUp.js";import{R as j}from"./chunks/Rest.js";import{n as V}from"./chunks/Notify.js";import{a as we,b as ke,c as Ce,d as Pe,E as Se,e as Ae,f as $e,g as Me,h as De,i as Te,j as Ee,k as Le,l as Ie,m as Ve,n as xe,o as Be,p as Ne,q as Ue,r as He,s as Fe,t as Oe,u as qe,v as Re,w as ze,x as Ye,y as je,B as Ke,C as We,D as Ze,F as Ge,G as Je,H as Qe,I as Xe,J as et,K as tt,L as at,N as st,O as it,P as rt,Q as nt,R as lt,S as ot}from"./chunks/index2.js";import{v as zt,i as Yt}from"./chunks/defaults.js";import"./chunks/Arr.js";import"./chunks/Translator.js";import"./chunks/index3.js";le.extend(Et);le.extend(Lt);function r(e){var t;e=((t=window.fluentcart_customer_profile_vars)==null?void 0:t.trans[e])||e;const a=Array.prototype.slice.call(arguments,1);if(a.length===0)return e;const n=/%(\d*\$?)s|%d/g;let b=0;return e=e.replace(n,(i,u)=>{if(u){const _=parseInt(u,10)-1;return _<a.length?a[_]:i}else return b<a.length?a[b++]:i}),e}function Q(e,a,n,b=null){let t=parseInt(n.toString().replace(/,/g,""),10);return t>1?r(a,n):r(t===0?b??e:e,n)}function z(e){const a=window.fluentcart_customer_profile_vars.datei18;e=e.toString();const b=(a.numericSystem||"0_1_2_3_4_5_6_7_8_9").split("_");return e.split("").map(i=>b[i]||i).join("")}function q(e,a="MMM DD"){a==="MMM DD"&&new Date(e).getFullYear()!==new Date().getFullYear()&&(a="MMM DD, YYYY");const n=window.fluentcart_customer_profile_vars.datei18,b=le(e).locale({name:"fluent_date_time",weekdays:Object.values(n.weekdays),weekdaysShort:Object.values(n.weekdaysShort),months:Object.values(n.months),monthsShort:Object.values(n.monthsShort),meridiem:(t,i,u)=>{const _=n.am||"AM",p=n.pm||"PM",v=t<12?_:p;return u?v.toLowerCase():v}}).format(a);return jt(b)}const jt=function(e,a){return e&&(window.fluentcart_customer_profile_vars.datei18,e=e.toString(),e.split("").map(b=>b!==" "?z(b):b).join(""))},Kt={class:"fct-customer-dashboard-table"},Wt={class:"order-content-only-mobile",role:"list"},Zt=["aria-label"],Gt={class:"item-header"},Jt={class:"sr-only"},Qt={class:"block truncate max-w-[100px]"},Xt={class:"text-system-light text-sm"},ea={class:"item-body"},ta={class:"fct-customer-orders-items fct-customer-orders-items-2"},aa={key:0},sa={class:"text-gray-800 text-sm"},ia={key:0,class:"fct-customer-orders-items-sub-title !max-w-full"},ra={class:"fct-popover-content"},na={class:"fct-product-orders-items"},la={class:"variation-title"},oa={key:0},da=["aria-label"],ca={class:"item-footer"},ua={class:"item-footer-content"},ma=["innerHTML"],ha={key:1,class:"text-center p-5",role:"note"},_a={class:"invoice-id-date"},pa={class:"block truncate max-w-[100px]"},fa={class:"text"},ba={class:"fct-customer-orders-items"},ga={key:0,class:"fct-customer-orders-items-sub-title"},ya={class:"fct-popover-content"},va={class:"fct-product-orders-items"},wa={class:"variation-title"},ka={key:0},Ca=["aria-label"],Pa=["innerHTML"],ht={__name:"OrderTable",props:{orders:{type:Array,required:!0},showTableHeader:{type:Boolean,default:!1},itemsColumnWidth:{type:Number,default:300},showInvoiceButton:{type:Boolean,default:!0}},setup(e){const a=i=>{const u=i.order_items.find(p=>p.payment_type==="subscription"),_=i.order_items.some(p=>p.payment_type==="adjustment");return i.order_items.filter(p=>!(p.payment_type==="signup_fee"||(p.payment_type==="adjustment"&&u&&(p.product.detail.featured_media=n(u)),_&&p.payment_type==="subscription")))},n=i=>{var u,_;return i.variants&&i.variants.media?(_=(u=i==null?void 0:i.variants)==null?void 0:u.media)==null?void 0:_.meta_value[0].url:i.variants&&!i.variants.media&&i.product.detail&&i.product.detail.featured_media&&i.product.detail.featured_media!==null&&typeof i.product.detail.featured_media=="object"?i.product.detail.featured_media.url:b},b=fluentcart_customer_profile_vars.placeholder_image,t=i=>{switch(i){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");default:return O.headline(i)}};return(i,u)=>{const _=h("router-link"),p=h("el-popover"),v=h("el-table-column"),k=h("el-table");return l(),c("div",Kt,[s("div",Wt,[e.orders.length>0?(l(!0),c(M,{key:0},x(e.orders,f=>(l(),c("div",{class:"order-content-only-mobile-item",key:f.id,role:"listitem","aria-label":i.$t("Order summary for order number %s",f.invoice_no)},[s("div",Gt,[s("h3",Jt,o(i.$t("Order Number")),1),d(_,{class:"link text-sm",to:{name:"view_order",params:{order_id:f.uuid}},"aria-label":i.$t("View order")+" #"+f.invoice_no},{default:m(()=>[s("span",Qt,"#"+o(f.invoice_no),1)]),_:2},1032,["to","aria-label"]),s("span",Xt,o(S(q)(f.created_at)),1)]),s("div",ea,[s("div",ta,[a(f).length===1?(l(),c("div",aa,[d(_,{to:{name:"view_order",params:{order_id:f.uuid}},class:"fct-customer-orders-items-title"},{default:m(()=>{var y,C;return[w(o((y=a(f)[0])==null?void 0:y.post_title)+" ",1),s("span",sa," – "+o((C=a(f)[0])==null?void 0:C.title),1)]}),_:2},1032,["to"]),f.renewals_count>0?(l(),c("span",ia,o(S(Q)("%s Renewal","%s Renewals",f.renewals_count)),1)):g("",!0)])):(l(),A(_,{key:1,to:{name:"view_order",params:{order_id:f.uuid}},"aria-label":i.$t("View order")+" #"+f.invoice_no},{default:m(()=>[w(o(S(r)("%s items",a(f).length)),1)]),_:2},1032,["to","aria-label"])),a(f).length>1?(l(),A(p,{key:2,placement:"top",width:360,trigger:"click"},{reference:m(()=>[s("div",{class:"fct-action-link-btn","aria-expanded":!1,"aria-label":i.$t("Show items for order %s",[f.invoice_no]),role:"button"},[d(U,{name:"ChevronDown"})],8,da)]),default:m(()=>[s("div",ra,[s("div",na,[(l(!0),c(M,null,x(a(f),y=>(l(),c("p",{key:y.id},[d(_,{to:{name:"view_order",params:{order_id:f.uuid}},class:"title"},{default:m(()=>[w(o(y.post_title),1)]),_:2},1032,["to"]),s("span",la,[s("b",null,o(S(z)(y.quantity)),1),w(" x "+o(y.title),1)])]))),128)),a(f).length===0?(l(),c("p",oa,o(S(r)("No products found!")),1)):g("",!0)])])]),_:2},1024)):g("",!0)])]),s("div",ca,[s("div",ua,[d(F,{type:f.status,size:"small"},{default:m(()=>[w(o(f.status),1)]),_:2},1032,["type"]),s("span",{innerHTML:i.formatNumber(f.total_amount,!0,!1,f.currency)},null,8,ma)])])],8,Zt))),128)):(l(),c("div",ha,o(S(r)("Your purchases will be shown here!")),1))]),d(k,{class:"order-content-only-desktop","empty-text":i.$t("Your purchases will be shown here!"),data:e.orders,"show-header":e.showTableHeader,role:"table","aria-label":i.$t("Customer order history")},{default:m(()=>[d(v,{label:"#",width:120},{default:m(f=>[s("div",_a,[d(_,{class:"link text-sm",to:{name:"view_order",params:{order_id:f.row.uuid}}},{default:m(()=>[s("span",pa,"#"+o(f.row.invoice_no),1)]),_:2},1032,["to"]),s("span",fa,o(S(q)(f.row.created_at)),1)])]),_:1}),d(v,{width:e.itemsColumnWidth,label:S(r)("Items"),"aria-label":i.$t("Order items")},{default:m(f=>[s("div",ba,[a(f.row).length===1?(l(),c(M,{key:0},[d(_,{to:{name:"view_order",params:{order_id:f.row.uuid}},class:"fct-customer-orders-items-title","aria-label":i.$t("View single item for this order")},{default:m(()=>{var y,C;return[w(o((y=a(f.row)[0])==null?void 0:y.post_title)+" ",1),s("span",null," – "+o((C=a(f.row)[0])==null?void 0:C.title),1)]}),_:2},1032,["to","aria-label"]),f.row.renewals_count>0?(l(),c("span",ga,o(S(Q)("%s Renewal","%s Renewals",S(z)(f.row.renewals_count))),1)):g("",!0)],64)):(l(),A(_,{key:1,to:{name:"view_order",params:{order_id:f.row.uuid}},"aria-label":S(r)("%s items in this order")+a(f.row).length},{default:m(()=>[w(o(S(r)("%s items",a(f.row).length)),1)]),_:2},1032,["to","aria-label"])),a(f.row).length>1?(l(),A(p,{key:2,placement:"top",width:360,trigger:"click"},{reference:m(()=>[s("div",{class:"fct-action-link-btn",role:"button","aria-expanded":!1,"aria-label":i.$t("Show all items for this order")},[d(U,{name:"ChevronDown"})],8,Ca)]),default:m(()=>[s("div",ya,[s("div",va,[(l(!0),c(M,null,x(a(f.row),y=>(l(),c("p",{key:y.id},[d(_,{to:{name:"view_order",params:{order_id:f.row.uuid}},class:"title","aria-label":i.$t("View item details:")+y.post_title},{default:m(()=>[w(o(y.post_title),1)]),_:2},1032,["to","aria-label"]),s("span",wa,[s("b",null,o(S(z)(y.quantity)),1),w(" x "+o(y.title),1)])]))),128)),a(f.row).length===0?(l(),c("p",ka,o(S(r)("No products found!")),1)):g("",!0)])])]),_:2},1024)):g("",!0)]),f.row.order_items?(l(!0),c(M,{key:0},x(f.row.order_items,y=>(l(),A(ct,{key:y.id,product:y},null,8,["product"]))),128)):g("",!0)]),_:1},8,["width","label","aria-label"]),d(v,{label:S(r)("Status"),width:"120","aria-label":i.$t("Order status")},{default:m(f=>[d(F,{type:f.row.status,size:"small"},{default:m(()=>[w(o(t(f.row.status)),1)]),_:2},1032,["type"])]),_:1},8,["label","aria-label"]),d(v,{label:S(r)("Amount"),width:"90","aria-label":i.$t("Total amount")},{default:m(f=>[s("span",{class:"text",innerHTML:i.formatNumber(f.row.total_amount,!0,!1,f.row.currency)},null,8,Pa)]),_:1},8,["label","aria-label"])]),_:1},8,["empty-text","data","show-header","aria-label"])])}}},Sa={name:"OrderTableLoader",props:{rowsRange:{type:Array,default:[1,2]}}},Aa={class:"fct-customer-dashboard-table"};function $a(e,a,n,b,t,i){const u=h("el-skeleton-item"),_=h("el-skeleton"),p=h("el-table-column"),v=h("el-table");return l(),c("div",Aa,[d(v,{data:n.rowsRange,"show-header":!1},{default:m(()=>[d(p,{label:"#",width:150},{default:m(()=>[d(_,{animated:"",class:"py-3"},{template:m(()=>[d(u,{varient:"p",class:"w-3/5"})]),_:1})]),_:1}),d(p,{width:300,label:e.$t("Items")},{default:m(()=>[d(_,{animated:""},{template:m(()=>[d(u,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),d(p,{label:e.$t("Status"),width:"120"},{default:m(()=>[d(_,{animated:""},{template:m(()=>[d(u,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),d(p,{label:e.$t("Amount"),width:"90"},{default:m(()=>[d(_,{animated:""},{template:m(()=>[d(u,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])]),_:1},8,["data"])])}const W=L(Sa,[["render",$a]]),Ma={name:"Dashboard",components:{OrderTable:ht,OrderTableLoader:W},data(){return{recentPurchasesTitleId:"recent-purchases-title",dashboardData:{orders:[],subscriptions:[],licenses:[]},sectionParts:{},loading:!1}},methods:{formatOrderItems:oe,fetchDashboardData(){this.loading=!0,this.$get("customer-profile").then(e=>{this.dashboardData=e.dashboard_data,this.dashboardData.orders.forEach(a=>{a.order_items=this.formatOrderItems(a.order_items)}),e.section_parts&&(this.sectionParts=e.section_parts)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchDashboardData()}},Da=["aria-labelledby","aria-busy"],Ta={class:"fct-customer-dashboard-header"},Ea=["id"],La={class:"actions"},Ia={key:0,"aria-live":"polite"},Va=["innerHTML"],xa=["innerHTML"];function Ba(e,a,n,b,t,i){const u=h("router-link"),_=h("OrderTableLoader"),p=h("OrderTable");return l(),c("div",{class:"fct-customer-dashboard fct-customer-dashboard-layout-width",role:"region","aria-labelledby":t.recentPurchasesTitleId,"aria-busy":t.loading},[s("div",null,[s("div",Ta,[s("h4",{id:t.recentPurchasesTitleId,class:"fct-customer-dashboard-title"},o(e.$t("Your Recent Purchases")),9,Ea),s("div",La,[t.dashboardData.orders.length?(l(),A(u,{key:0,class:"is-link",to:{name:"purchase-history"},"aria-label":e.$t("View all purchases")},{default:m(()=>[w(o(e.$t("View all")),1)]),_:1},8,["aria-label"])):g("",!0)])]),t.loading?(l(),c("div",Ia,[d(_,{"rows-range":[1,2]})])):g("",!0),t.sectionParts.before_orders_table?(l(),c("div",{key:1,innerHTML:t.sectionParts.before_orders_table},null,8,Va)):(l(),A(p,{key:2,orders:t.dashboardData.orders},null,8,["orders"])),t.sectionParts.after_orders_table?(l(),c("div",{key:3,innerHTML:t.sectionParts.after_orders_table},null,8,xa)):g("",!0)])],8,Da)}const Na=L(Ma,[["render",Ba]]),Ua={name:"EmptyState",props:["title","text"],data(){var e,a;return{shop_url:(a=(e=window.fluentcart_customer_profile_vars)==null?void 0:e.shop)==null?void 0:a.shop_url}}},Ha={class:"fct-customer-dashboard-empty-state",role:"status","aria-live":"polite","aria-atomic":"true"},Fa={class:"fct-customer-dashboard-empty-state-inner"},Oa={class:"fct-empty-icon-box","aria-hidden":"true"};function qa(e,a,n,b,t,i){const u=h("el-button");return l(),c("div",Ha,[s("div",Fa,[s("div",Oa,[dt(e.$slots,"icon")]),s("h4",null,o(n.title),1),s("p",null,o(n.text),1),d(u,{tag:"a",href:t.shop_url,rel:"noopener noreferrer","aria-label":e.$t("Back to Shopping Now")},{default:m(()=>[w(o(e.$t("Back to Shopping Now")),1)]),_:1},8,["href","aria-label"])])])}const te=L(Ua,[["render",qa]]),Ra={props:{table:{type:Object,required:!1},pagerSizes:{type:Boolean,default:!0},pagination:{required:!0,type:Object},extra_sizes:{required:!1,type:Array,default(){return[]}},hide_on_single:{required:!1,type:Boolean,default(){return!0}},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next, slot"},pager_count:{type:Number,default:5}},data(){return{currentPage:1,pickerObserver:null}},computed:{page_sizes(){const e=[];this.pagination.per_page<10&&e.push(this.pagination.per_page);const a=[10,20,50,80,100,120,150];return[...e,...a,...this.extra_sizes]},totalPage(){const e=this.pagination.per_page,a=this.pagination.total;return isNaN(a)||a<=0?0:Math.ceil(a/e)}},watch:{pagination:{immediate:!0,handler(e,a){setTimeout(()=>{this.translatePickerElements()},400)}}},methods:{translateNumber:z,translate:r,changePage(e){var n;let a=this.getCurrentPageCount(e,this.pagination.per_page);this.currentPage=e,this.pagination.current_page=e,this.$emit("currentPageChanged",{page:e,currentPageCount:a}),this.$emit("fetch"),(n=this.table)==null||n.handlePageChange(),setTimeout(()=>{this.translatePickerElements()},300)},changeSize(e){var a;this.currentPage=1,this.pagination.current_page=1,this.$emit("onPerPageChanged",e),this.$emit("fetch"),(a=this.table)==null||a.handlePerPageChange()},getCurrentPageCount(e,a){return(e<this.pagination.last_page?a:this.pagination.total%a)||a},translatePickerElements(){const e=document.querySelector(".el-pagination.is-background");if(!e)return;e.querySelectorAll("li.number").forEach(b=>{const t=b.textContent.trim();if(t&&/\d/.test(t)&&!b.dataset.translated){const i=z(t);b.style.setProperty("--translated-number",`"${i}"`),b.dataset.translated="1"}})}},mounted(){this.translatePickerElements()}},za={class:"pagination-wrap"},Ya={key:0,class:"pager-wrap"},ja={class:"text"},Ka={class:"el-pagination"},Wa={class:"text"};function Za(e,a,n,b,t,i){const u=h("el-option"),_=h("el-select"),p=h("el-pagination");return l(),c("div",za,[n.pagerSizes?(l(),c("div",Ya,[s("span",ja,o(i.translate("Page %1$s of %2$s",i.translateNumber(t.currentPage),i.translateNumber(i.totalPage))),1),s("div",Ka,[d(_,{onChange:i.changeSize,modelValue:n.pagination.per_page,"onUpdate:modelValue":a[0]||(a[0]=v=>n.pagination.per_page=v),placeholder:i.translate("Select")},{default:m(()=>[(l(!0),c(M,null,x(i.page_sizes,v=>(l(),A(u,{key:v,label:i.translate("%s / page",i.translateNumber(v)),value:v},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue","placeholder"])]),s("span",Wa,o(i.translate("Total %s",i.translateNumber(n.pagination.total))),1)])):g("",!0),d(p,{ref:"paginationRef","hide-on-single-page":n.hide_on_single,background:n.background,"current-page":n.pagination.current_page,layout:n.layout,onCurrentChange:i.changePage,"page-sizes":i.page_sizes,total:n.pagination.total,"page-count":n.pagination.last_page,"pager-count":n.pager_count,"page-size":n.pagination.per_page,"onUpdate:pageSize":a[1]||(a[1]=v=>n.pagination.per_page=v)},{default:m(v=>[w(o(v),1)]),_:1},8,["hide-on-single-page","background","current-page","layout","onCurrentChange","page-sizes","total","page-count","pager-count","page-size"])])}const ae=L(Ra,[["render",Za]]),Ga={name:"PurchaseHistory",components:{OrderTable:ht,Pagination:ae,IconButton:ee,DynamicIcon:U,OrderTableLoader:W,EmptyState:te},data(){return{purchaseHistoryTitleId:"purchase-history-title",search:"",showSearch:!1,orders:[],paginate:{current_page:1,per_page:10,total:0},loading:!0,app_loaded:!1}},methods:{formatOrderItems:oe,fetchOrders(){this.loading=!0,this.$get("customer-profile/orders",{per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.search}).then(e=>{this.orders=e.orders.data,this.paginate.total=e.orders.total,this.orders.forEach(a=>{a.order_items=this.formatOrderItems(a.order_items)})}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1,this.app_loaded=!0})}},mounted(){this.fetchOrders()}},Ja=["aria-labelledby","aria-busy"],Qa={class:"fct-customer-purchase-history-inner"},Xa={class:"fct-customer-dashboard-header"},es=["id"],ts={class:"actions"},as={class:"fct-collapsible-search-wrap"},ss={for:"purchase-search-input",class:"sr-only"},is={id:"search-help",class:"sr-only"},rs={key:0,"aria-live":"polite"},ns={key:1,"aria-live":"polite"};function ls(e,a,n,b,t,i){const u=h("el-input"),_=h("DynamicIcon"),p=h("IconButton"),v=h("OrderTableLoader"),k=h("OrderTable"),f=h("EmptyState"),y=h("pagination"),C=K("loading");return l(),c("div",{class:"fct-customer-purchase-history",role:"region","aria-labelledby":t.purchaseHistoryTitleId,"aria-busy":t.loading},[s("div",Qa,[s("div",null,[s("div",Xa,[s("h4",{id:t.purchaseHistoryTitleId,class:"fct-customer-dashboard-title"},o(e.$t("Purchase History")),9,es),s("div",ts,[s("div",as,[s("label",ss,o(e.$t("Search orders")),1),d(kt,{name:"fade-slide"},{default:m(()=>[t.showSearch?(l(),A(u,{key:0,id:"purchase-search-input",modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=$=>t.search=$),onKeyup:wt(i.fetchOrders,["enter"]),onClear:i.fetchOrders,placeholder:e.$t("Search and hit enter..."),clearable:"",size:"small","aria-describedby":"search-help"},null,8,["modelValue","onKeyup","onClear","placeholder"])):g("",!0)]),_:1}),s("small",is,o(e.$t("Press Enter to search")),1),d(p,{tag:"button",size:"small",onClick:a[1]||(a[1]=$=>t.showSearch=!t.showSearch),"aria-expanded":t.showSearch,"aria-label":t.showSearch?e.$t("Close search"):e.$t("Open search"),"aria-controls":"purchase-search-input"},{default:m(()=>[t.showSearch?(l(),A(_,{key:0,name:"Cross","aria-hidden":"true"})):(l(),A(_,{key:1,name:"Search","aria-hidden":"true"}))]),_:1},8,["aria-expanded","aria-label"])])])]),t.loading&&!t.app_loaded?(l(),c("div",rs,[d(v,{rowsRange:[1,2,3,4,5]})])):t.app_loaded?Y((l(),c("div",ns,[t.orders.length>0?(l(),A(k,{key:0,orders:t.orders,showTableHeader:!0},null,8,["orders"])):(l(),A(f,{key:1,title:e.$t("No purchases yet"),text:e.$t("Your purchases will be shown here!")},{icon:m(()=>a[2]||(a[2]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none","aria-hidden":"true"},[s("path",{opacity:"0.4",d:"M35 28.6021C35 30.9063 31.7573 32.2761 25.2718 35.0158C22.6663 36.1163 21.3637 36.6666 20 36.6666C18.6363 36.6666 17.3337 36.1163 14.7282 35.0158C8.24273 32.2761 5 30.9063 5 28.6021V11.6666L20 18.9246L35 11.6666V28.6021Z",fill:"#758195"}),s("path",{d:"M20 36.6666C18.6363 36.6666 17.3337 36.1163 14.7282 35.0158C8.24273 32.2761 5 30.9063 5 28.6021C5 27.957 5 16.7741 5 11.6666M20 36.6666C21.3637 36.6666 22.6663 36.1163 25.2718 35.0158C31.7573 32.2761 35 30.9063 35 28.6021V11.6666M20 36.6666V18.9246",stroke:"#758195","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M13.8765 16.1523L9.00787 13.7965C6.33595 12.5035 5 11.8571 5 10.8334C5 9.80966 6.33595 9.16321 9.00787 7.87029L13.8765 5.51441C16.8813 4.06039 18.3838 3.33337 20 3.33337C21.6162 3.33337 23.1187 4.06037 26.1235 5.51441L30.9922 7.87029C33.664 9.16321 35 9.80966 35 10.8334C35 11.8571 33.664 12.5035 30.9922 13.7965L26.1235 16.1523C23.1187 17.6064 21.6162 18.3334 20 18.3334C18.3838 18.3334 16.8813 17.6064 13.8765 16.1523Z",stroke:"#758195","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M10 20L13.3333 21.6667",stroke:"#758195","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M28.3327 6.66663L11.666 15",stroke:"#758195","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_:1},8,["title","text"]))])),[[C,t.loading]]):g("",!0)]),t.paginate&&t.paginate.total!==0?(l(),A(y,{key:0,hide_on_single:!0,pagination:t.paginate,onFetch:i.fetchOrders},null,8,["pagination","onFetch"])):g("",!0)])],8,Ja)}const os=L(Ga,[["render",ls]]),ds={name:"LicenseKey",methods:{translate:r},props:{license_key:String,show_mode:{type:String,default:"icon_with_text"},tooltip_text:{type:String,default:"Copy License Key"}},components:{CopyToClipboard:ut,IconButton:ee,DynamicIcon:U},computed:{Clipboard(){return Ut}},data(){return{}}},cs=["aria-label"],us={class:"license-key"},ms={class:"block",id:"license-key-value"};function hs(e,a,n,b,t,i){const u=h("CopyToClipboard");return l(),c("div",{class:"fct-license-key-wrap",role:"group","aria-label":i.translate("License Key")},[s("div",us,[s("span",ms,o(n.license_key),1)]),d(u,{text:n.license_key,showMode:n.show_mode,tooltipText:n.tooltip_text,"button-text":i.translate("Copy"),"aria-label":i.translate("Copy license key to clipboard"),"aria-describedby":"license-key-value"},null,8,["text","showMode","tooltipText","button-text","aria-label"])],8,cs)}const re=L(ds,[["render",hs]]),_s={class:"fct-customer-dashboard-table"},ps={class:"license-only-mobile"},fs={class:"item-header"},bs={key:0,class:"fct-expiration-info"},gs={key:0,class:"text-meta"},ys={key:1,class:"text-meta"},vs=["onClick","aria-label"],ws={class:"fct-customer-orders-items-title"},ks={class:"item-body"},Cs={class:"fct-customer-payment-meta-info"},Ps={class:"item-footer"},Ss={class:"fct-customer-orders-items-meta-wrap"},As={key:1,class:"text-meta"},$s={key:1,role:"alert",class:"text-center p-5"},Ms=["onClick","aria-label"],Ds={class:"fct-customer-orders-items-title"},Ts={class:"fct-customer-orders-items-meta-wrap"},Es={key:0,class:"text-meta"},Ls={key:1,class:"fct-btn-group pt-1"},Is={class:"fct-customer-payment-meta-info"},Vs={key:0,class:"text-meta"},xs={key:1,class:"text-meta"},ce={__name:"LicenseTable",props:{licenses:{type:Array,required:!0},showTableHeader:{type:Boolean,default:!1},itemsColumnWidth:{type:Number,default:300},is_simple:{type:Boolean,default:!1}},setup(e){const a=Vt(),n=b=>{switch(b){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");case"subscription":return r("Subscription");case"renewal":return r("Renewal");case"payment":return r("Payment");case"unshipped":return r("Unshipped");default:return O.headline(b)}};return(b,t)=>{const i=h("el-button"),u=h("el-table-column"),_=h("el-table");return l(),c("div",_s,[s("div",ps,[e.licenses.length>0?(l(!0),c(M,{key:0},x(e.licenses,p=>(l(),c("div",{class:"license-only-mobile-item",key:p.id},[s("div",fs,[(p==null?void 0:p.status)!=="disabled"&&!e.is_simple?(l(),c("div",bs,[p.expiration_date?(l(),c("div",gs,[(p==null?void 0:p.status)==="expired"?(l(),c(M,{key:0},[w(o(S(r)("Expired at: %s",S(q)(p.expiration_date,"MMM DD, YYYY"))),1)],64)):(l(),c(M,{key:1},[w(o(S(r)("Expires on: %s",S(q)(p.expiration_date,"MMM DD, YYYY"))),1)],64))])):(l(),c("div",ys,o(S(r)("Never Expires")),1))])):g("",!0),s("div",{class:"fct-customer-orders-items fct-customer-license-orders-items cursor-pointer",onClick:v=>S(a).push({name:"manage_license",params:{license_key:p.license_key}}),"aria-label":b.$t("View details for license: %s",p.title)},[s("div",ws,o(p.title),1)],8,vs)]),s("div",ks,[s("div",Cs,[d(re,{license_key:p==null?void 0:p.license_key,show_mode:"basic_copy_btn",tooltip_text:S(r)("Copy Key")},null,8,["license_key","tooltip_text"])])]),s("div",Ps,[s("div",Ss,[d(F,{type:p.status,"hide-icon":!0,"aria-label":b.$t("License status: %s",p.status)},{default:m(()=>[w(o(n(p.status)),1)]),_:2},1032,["type","aria-label"]),p.renewal_url?(l(),A(i,{key:0,link:"",tag:"a",href:p.renewal_url,target:"_blank",rel:"noopener noreferrer","aria-label":b.$t("Renew license: %s",p.title)},{default:m(()=>[w(o(S(r)("Renew License")),1)]),_:2},1032,["href","aria-label"])):g("",!0),p.status!=="expired"?(l(),c("div",As,o(p.subtitle),1)):g("",!0)])])]))),128)):(l(),c("div",$s,o(S(r)("No Licenses found")),1))]),d(_,{class:"license-only-desktop",data:e.licenses,"show-header":e.showTableHeader,role:"grid","aria-label":b.$t("Licenses table")},{default:m(()=>[d(u,{label:S(r)("Items"),width:e.itemsColumnWidth},{default:m(p=>[s("div",{class:"fct-customer-orders-items fct-customer-license-orders-items cursor-pointer",onClick:v=>S(a).push({name:"manage_license",params:{license_key:p.row.license_key}}),"aria-label":b.$t("View details for license: %s",p.row.title)},[s("div",Ds,o(p.row.title),1),s("div",Ts,[p.row.status!=="expired"?(l(),c("div",Es,o(p.row.subtitle),1)):g("",!0),d(F,{type:p.row.status,"hide-icon":!0,"aria-label":b.$t("License status: %s",p.row.status)},{default:m(()=>[w(o(n(p.row.status)),1)]),_:2},1032,["type","aria-label"]),p.row.renewal_url?(l(),c("div",Ls,[d(i,{link:"",tag:"a",href:p.row.renewal_url,target:"_blank",rel:"noopener noreferrer","aria-label":b.$t("Renew license: %s",p.row.title)},{default:m(()=>[w(o(S(r)("Renew License")),1)]),_:2},1032,["href","aria-label"])])):g("",!0)])],8,Ms)]),_:1},8,["label","width"]),d(u,{width:400,label:S(r)("License Info"),align:"right","class-name":"license-info-column"},{default:m(p=>{var v;return[s("div",Is,[p.row.status!=="disabled"&&!e.is_simple?(l(),c(M,{key:0},[p.row.expiration_date?(l(),c("div",Vs,[p.row.status==="expired"?(l(),c(M,{key:0},[w(o(S(r)("Expired at: %s",S(q)(p.row.expiration_date,"MMM DD, YYYY"))),1)],64)):(l(),c(M,{key:1},[w(o(S(r)("Expires on: %s",S(q)(p.row.expiration_date,"MMM DD, YYYY"))),1)],64))])):(l(),c("div",xs,o(S(r)("Never Expires")),1))],64)):g("",!0),d(re,{license_key:(v=p.row)==null?void 0:v.license_key,show_mode:"basic_copy_btn",tooltip_text:S(r)("Copy Key")},null,8,["license_key","tooltip_text"])])]}),_:1},8,["label"])]),_:1},8,["data","show-header","aria-label"])])}}},Bs={name:"Licenses",components:{LicenseTable:ce,Pagination:ae,OrderTableLoader:W,EmptyState:te},data(){return{licensesTitleId:"licenses-title",licenses:[],loading:!1,skeletonRowCount:10,paginate:{current_page:1,total:0,per_page:10},search:"",appLoaded:!1}},methods:{fetchLicenses(){this.loading=!0,this.paginate.per_page,this.paginate.current_page,this.$get("customer-profile/licenses",{per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.search}).then(e=>{this.licenses=e.licenses.data,this.paginate.total=e.licenses.total}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1,this.appLoaded=!0})}},mounted(){this.fetchLicenses()}},Ns=["aria-labelledby","aria-busy"],Us={class:"fct-customer-dashboard-license-inner"},Hs={class:"fct-customer-dashboard-header"},Fs=["id"],Os={key:0,"aria-live":"polite"};function qs(e,a,n,b,t,i){const u=h("OrderTableLoader"),_=h("LicenseTable"),p=h("EmptyState"),v=h("pagination"),k=K("loading");return l(),c("div",{class:"fct-customer-dashboard-license",role:"region","aria-labelledby":t.licensesTitleId,"aria-busy":t.loading},[s("div",Us,[s("div",null,[s("div",Hs,[s("h4",{id:t.licensesTitleId,class:"fct-customer-dashboard-title"},o(e.$t("Licenses")),9,Fs)]),t.loading&&!t.appLoaded?(l(),c("div",Os,[d(u,{"rows-range":[1,2,3,4]})])):t.appLoaded&&t.paginate.total?Y((l(),A(_,{key:1,licenses:t.licenses,showTableHeader:!0},null,8,["licenses"])),[[k,t.loading]]):(l(),A(p,{key:2,title:e.$t("No licenses yet"),text:e.$t("Looks like no licenses yet. Purchase something to view data.")},{icon:m(()=>a[0]||(a[0]=[s("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[s("path",{opacity:"0.4",d:"M20.928 2.08337C23.9908 2.08334 26.4168 2.08332 28.3157 2.33861C30.2697 2.60131 31.8512 3.15484 33.0985 4.40211C34.3458 5.64939 34.8993 7.23097 35.162 9.18501C35.4173 11.0837 35.4172 13.5097 35.4172 16.5726V23.4274C35.4172 26.4902 35.4173 28.9164 35.162 30.815C34.8993 32.769 34.3458 34.3507 33.0985 35.598C31.8512 36.8452 30.2697 37.3987 28.3157 37.6615C26.4168 37.9167 23.9908 37.9167 20.928 37.9167H19.0733C16.0105 37.9167 13.5843 37.9167 11.6856 37.6615C9.7315 37.3987 8.14992 36.8452 6.90264 35.5979C5.65537 34.3507 5.10185 32.769 4.83915 30.815C4.58389 28.9164 4.58394 26.4902 4.58399 23.4274L4.58405 16.5726C4.58405 13.5096 4.58405 11.0836 4.83934 9.18494C5.10207 7.23091 5.6556 5.64934 6.90287 4.40209C8.15014 3.15482 9.7317 2.60131 11.6857 2.33859C13.5844 2.08332 16.0104 2.08334 19.0733 2.08337H20.928Z",fill:"#758195"}),s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.666 11.6667C11.666 10.7462 12.4122 10 13.3327 10H26.666C27.5865 10 28.3327 10.7462 28.3327 11.6667C28.3327 12.5871 27.5865 13.3333 26.666 13.3333H13.3327C12.4122 13.3333 11.666 12.5871 11.666 11.6667ZM11.666 20C11.666 19.0795 12.4122 18.3333 13.3327 18.3333H26.666C27.5865 18.3333 28.3327 19.0795 28.3327 20C28.3327 20.9205 27.5865 21.6667 26.666 21.6667H13.3327C12.4122 21.6667 11.666 20.9205 11.666 20ZM11.666 28.3333C11.666 27.4128 12.4122 26.6667 13.3327 26.6667H19.9993C20.9198 26.6667 21.666 27.4128 21.666 28.3333C21.666 29.2538 20.9198 30 19.9993 30H13.3327C12.4122 30 11.666 29.2538 11.666 28.3333Z",fill:"#758195"})],-1)])),_:1},8,["title","text"]))]),t.paginate&&t.paginate.total!==0?(l(),A(v,{key:0,hide_on_single:!0,pagination:t.paginate,onFetch:i.fetchLicenses},null,8,["pagination","onFetch"])):g("",!0)])],8,Ns)}const Rs=L(Bs,[["render",qs]]),zs={props:{downloads:{type:Array,default:()=>[]},showTableHeader:{type:Boolean,default:!0}},components:{DynamicIcon:U},methods:{translate:r,readableFileSize(e){return It.readableFileSizeFromBytes(e)}}},Ys={class:"fct-customer-dashboard-table"},js={class:"fct-customer-downloads-file-info"},Ks=["aria-label"],Ws=["aria-label"],Zs=["href","aria-label"];function Gs(e,a,n,b,t,i){const u=h("el-table-column"),_=h("DynamicIcon"),p=h("el-table");return l(),c("div",Ys,[d(p,{data:Object.values(n.downloads),"show-header":n.showTableHeader,role:"grid","aria-label":e.$t("Downloads table")},{default:m(()=>[d(u,{label:e.$t("File Name")},{default:m(v=>{var k,f,y,C;return[s("div",js,[s("div",{class:"filename",role:"status","aria-label":`${i.translate("File name: %s",((k=v.row)==null?void 0:k.title)||"N/A")}`},o(((f=v.row)==null?void 0:f.title)||"N/A"),9,Ks),v.row.file_size?(l(),c("div",{key:0,class:"text",role:"status","aria-label":`${i.translate("File size: %s",i.readableFileSize((y=v.row)==null?void 0:y.file_size))}`},o(i.readableFileSize((C=v.row)==null?void 0:C.file_size)),9,Ws)):g("",!0)])]}),_:1},8,["label"]),d(u,{align:"right"},{default:m(v=>{var k;return[s("a",{target:"_blank",class:"el-button el-button--info is-plain el-button--x-small",href:v.row.download_url,"aria-label":`Download ${((k=v.row)==null?void 0:k.title)||"file"}`,rel:"noopener noreferrer"},[d(_,{name:"Download","aria-hidden":"true",role:"presentation"}),w(" "+o(e.$t("Download")),1)],8,Zs)]}),_:1})]),_:1},8,["data","show-header","aria-label"])])}const _t=L(zs,[["render",Gs]]),Js={components:{OrderTableLoader:W,Pagination:ae,DownloadsTable:_t,EmptyState:te},props:{isLimited:{type:Boolean,default:!1},per_page:{type:Number,default:10}},data(){return{downloadsTitleId:"downloads-title",downloads:[],loading:!1,appLoaded:!1,paginate:{current_page:1,per_page:this.per_page,total:0}}},methods:{fetchFiles(){this.loading=!0,this.$get("customer-profile/downloads",{per_page:this.paginate.per_page,page:this.paginate.current_page}).then(e=>{var a,n;this.downloads=(a=e.downloads)==null?void 0:a.data,this.paginate.total=(n=e.downloads)==null?void 0:n.total}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1,this.appLoaded=!0})}},mounted(){this.fetchFiles()}},Qs=["aria-labelledby","aria-busy"],Xs={class:"fct-customer-dashboard-header"},ei=["id"],ti={key:0,class:"actions"},ai={key:0,"aria-live":"polite"},si={key:1,class:"fct-customer-dashboard-downloads-table","aria-live":"polite"};function ii(e,a,n,b,t,i){var y;const u=h("router-link"),_=h("order-table-loader"),p=h("DownloadsTable"),v=h("EmptyState"),k=h("pagination"),f=K("loading");return l(),c("div",{class:"fct-customer-dashboard-download",role:"region","aria-labelledby":t.downloadsTitleId,"aria-busy":t.loading||!t.appLoaded},[s("div",Xs,[s("h4",{id:t.downloadsTitleId,class:"fct-customer-dashboard-title"},o(e.$t("Downloads")),9,ei),n.isLimited?(l(),c("div",ti,[d(u,{class:"is-link",to:{name:"downloads"},"aria-label":e.$t("View all downloads")},{default:m(()=>[w(o(e.$t("View all")),1)]),_:1},8,["aria-label"])])):g("",!0)]),t.appLoaded?t.appLoaded?Y((l(),c("div",si,[((y=t.downloads)==null?void 0:y.length)>0?(l(),A(p,{key:0,downloads:t.downloads},null,8,["downloads"])):(l(),A(v,{key:1,title:e.$t("No downloads yet"),text:e.$t("Your valid downloads will be shown here.")},{icon:m(()=>a[0]||(a[0]=[s("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[s("path",{opacity:"0.4",d:"M18.3328 5.41667C18.3328 4.49618 19.079 3.75 19.9995 3.75C20.92 3.75 21.6661 4.49618 21.6661 5.41667V22.998C22.0163 22.6323 22.378 22.2345 22.734 21.8245C23.4321 21.0203 24.0816 20.2106 24.5585 19.5996C24.796 19.2953 24.9885 19.0418 25.1216 18.8656C25.1881 18.7775 25.2401 18.7083 25.2746 18.6621C25.2916 18.6393 25.3036 18.6213 25.312 18.61C25.316 18.6046 25.3198 18.6013 25.3218 18.5986L25.3235 18.5953C25.8693 17.8541 26.913 17.6963 27.6541 18.2421C28.395 18.788 28.5541 19.8301 28.009 20.5713H28.0073V20.5745C28.0065 20.5756 28.0038 20.576 28.0025 20.5778C27.9996 20.5816 27.9961 20.5873 27.9911 20.5941C27.9808 20.608 27.9663 20.6285 27.9471 20.6543C27.9088 20.7058 27.8523 20.7798 27.7811 20.874C27.639 21.0623 27.4353 21.3301 27.1855 21.6503C26.6868 22.2893 25.9988 23.1465 25.2501 24.0088C24.5085 24.863 23.6738 25.76 22.8853 26.4566C22.4931 26.8031 22.0738 27.1363 21.6515 27.391C21.2748 27.618 20.6833 27.9166 19.9995 27.9166C19.3158 27.9166 18.7241 27.618 18.3475 27.391C17.9253 27.1363 17.506 26.8031 17.1138 26.4566C16.3253 25.76 15.4905 24.863 14.7489 24.0088C14.0002 23.1465 13.3122 22.2893 12.8137 21.6503C12.5637 21.3301 12.3601 21.0623 12.2179 20.874C12.1468 20.7798 12.0903 20.7058 12.0519 20.6543C12.0327 20.6285 12.0183 20.608 12.008 20.5941C12.0029 20.5871 11.9978 20.5816 11.995 20.5778C11.9939 20.5763 11.9924 20.5755 11.9917 20.5745V20.5713C11.4464 19.8301 11.6039 18.7863 12.3449 18.2406C13.086 17.6953 14.1299 17.8545 14.6756 18.5953L14.6773 18.5986C14.6792 18.6013 14.6831 18.6046 14.687 18.61C14.6954 18.6213 14.7074 18.6393 14.7245 18.6621C14.7589 18.7083 14.8109 18.7775 14.8775 18.8656C15.0106 19.0418 15.2031 19.2953 15.4406 19.5996C15.9174 20.2106 16.5669 21.0203 17.2651 21.8245C17.621 22.2345 17.9828 22.6323 18.3328 22.998V5.41667Z",fill:"black"}),s("path",{d:"M3.75 23.75V20.415L3.7614 19.987C3.98537 15.5864 7.6225 12.086 12.0785 12.0834H12.0833C13.0036 12.0834 13.7496 12.8299 13.75 13.75C13.75 14.6705 13.0038 15.4167 12.0833 15.4167H12.0801C9.32045 15.4185 7.08403 17.657 7.08333 20.4167V23.75C7.08333 25.7243 7.08512 27.1007 7.17612 28.1707C7.26538 29.2198 7.43154 29.8213 7.67417 30.2752C8.14029 31.1468 8.85484 31.8615 9.72657 32.3275C10.1803 32.5698 10.7808 32.7363 11.8294 32.8255C12.8993 32.9165 14.2758 32.9167 16.25 32.9167H23.75C25.7242 32.9167 27.1007 32.9148 28.1705 32.824C29.2195 32.7347 29.8197 32.5683 30.2734 32.3258C31.1455 31.8597 31.8597 31.1455 32.3259 30.2735C32.5684 29.8198 32.7347 29.2195 32.8239 28.1707C32.9149 27.1008 32.9167 25.7242 32.9167 23.75V20.4167C32.9167 17.6553 30.678 15.4167 27.9167 15.4167C26.9962 15.4167 26.25 14.6705 26.25 13.75C26.25 12.8296 26.9962 12.0834 27.9167 12.0834C32.519 12.0834 36.25 15.8143 36.25 20.4167V23.75C36.25 25.6665 36.2515 27.2083 36.1459 28.4522C36.0384 29.7167 35.8099 30.8252 35.2654 31.8442C34.4885 33.2973 33.2989 34.4883 31.8457 35.2653C30.8267 35.81 29.7167 36.0383 28.4522 36.1458C27.8305 36.1987 27.1344 36.2242 26.3542 36.237L23.75 36.25H16.25C14.3335 36.25 12.7917 36.2517 11.5479 36.1458C10.2831 36.0383 9.17335 35.8117 8.1543 35.267C6.70118 34.4902 5.51155 33.2988 4.7347 31.8457C4.19002 30.8268 3.96177 29.7183 3.85417 28.4538C3.74833 27.2097 3.75 25.6672 3.75 23.75Z",fill:"black"})],-1)])),_:1},8,["title","text"]))])),[[f,t.loading]]):g("",!0):(l(),c("div",ai,[d(_,{"rows-range":[1,2,3,4]})])),t.paginate.total>0?(l(),A(k,{key:2,hide_on_single:!0,pagination:t.paginate,onFetch:i.fetchFiles},null,8,["pagination","onFetch"])):g("",!0)],8,Qs)}const ri=L(Js,[["render",ii]]),ni={props:["license_key"],components:{Badge:F,DynamicIcon:U,IconButton:ee},data(){return{loading:!1,activations:[],activatedSitesModal:!1}},methods:{showActivatedSitesModal(){this.activatedSitesModal=!0,this.fetchActivatedSites()},fetchActivatedSites(){this.loading=!0,this.$get(`customer-profile/licenses/${this.license_key}/activations`).then(e=>{this.activations=e.activations}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1})},deactivate(e){this.$post(`customer-profile/licenses/${this.license_key}/deactivate_site`,{site_url:e.site_url}).then(a=>{this.$notify.success(a.message),this.activations=this.activations.filter(n=>n.site_url!==e.site_url)}).catch(a=>{this.handleError(a)})}}},li={id:"activated-sites-title",class:"sr-only"},oi={id:"activated-sites-description",class:"sr-only"},di=["aria-label"],ci=["id"],ui={id:"delete-confirm-title",class:"sr-only"},mi={role:"alert"};function hi(e,a,n,b,t,i){const u=h("el-button"),_=h("Badge"),p=h("el-table-column"),v=h("DynamicIcon"),k=h("IconButton"),f=h("el-popconfirm"),y=h("el-table"),C=h("el-dialog"),$=K("loading");return l(),c(M,null,[d(u,{text:"",class:"underline-link-button",onClick:i.showActivatedSitesModal,"aria-label":e.$t("View list of activated sites")},{default:m(()=>[w(o(e.$t("View List")),1)]),_:1},8,["onClick","aria-label"]),d(C,{modelValue:t.activatedSitesModal,"onUpdate:modelValue":a[0]||(a[0]=T=>t.activatedSitesModal=T),"append-to-body":!0,title:e.$t("License Activations"),"modal-class":"fct-activated-sites-modal",role:"dialog","aria-labelledby":"activated-sites-title","aria-describedby":"activated-sites-description"},{default:m(()=>{var T;return[s("h2",li,o(e.$t("License Activations")),1),s("p",oi,o(e.$t("List of sites where the license is activated")),1),Y((l(),c("div",{class:N(["fct-table-style-two fct-activated-sites-table",((T=t.activations)==null?void 0:T.length)>10?"scrollable":""]),"aria-live":"polite",id:"activated-sites-description"},[d(y,{data:t.activations,stripe:"",role:"grid","aria-label":e.$t("Table of activated sites")},{empty:m(()=>[s("span",mi,o(e.$t("No activations found for this license")),1)]),default:m(()=>[d(p,{label:e.$t("Site"),"min-width":270},{default:m(E=>[s("span",null,o(E.row.site_url),1),E.row.is_local!="0"?(l(),c("span",{key:0,style:{"margin-left":"10px"},role:"status","aria-label":e.$t("local")},[d(_,{status:"warning",size:"small","hide-icon":!0,text:e.$t("local")},null,8,["text"])],8,di)):g("",!0)]),_:1},8,["label"]),d(p,{label:e.$t("Status"),width:100},{default:m(E=>[d(_,{status:E.row.status,size:"small","hide-icon":!0,"aria-label":`${e.$t("Status")}: ${e.$t(E.row.status)}`},null,8,["status","aria-label"])]),_:1},8,["label"]),d(p,{width:60},{default:m(E=>[s("span",null,[d(f,{width:235,"confirm-button-text":e.$t("Confirm"),"cancel-button-text":e.$t("No, Thanks"),"icon-color":"red",title:e.$t("Are you sure to disconnect?"),onConfirm:D=>i.deactivate(E.row),"aria-labelledby":"delete-confirm-title"},{reference:m(()=>[d(k,{tag:"a",size:"x-small",hover:"danger","aria-label":e.$t("Delete activation for site"),"aria-describedby":`site-${E.$index}`},{default:m(()=>[d(v,{name:"TrashIcon"})]),_:2},1032,["aria-label","aria-describedby"])]),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"]),s("span",{id:`site-${E.$index}`,class:"sr-only"},o(E.row.site_url),9,ci),s("span",ui,o(e.$t("Are you sure to disconnect the site"))+" "+o(E.row.site_url)+"? ",1)])]),_:1})]),_:1},8,["data","aria-label"])],2)),[[$,t.loading]])]}),_:1},8,["modelValue","title"])],64)}const _i=L(ni,[["render",hi]]),pi={name:"UpgradePlan",components:{CopyToClipboard:ut,DynamicIcon:U},props:{variation_id:{type:[String,Number],required:!0},order_hash:{type:String,required:!0},buttonText:{type:String,default:"Upgrade"},buttonType:{type:String,default:"default"}},data(){return{upgradePlanModal:!1,selectedUpgradePath:"",upgradePaths:[],loading:!1}},computed:{currencySign(){return this.appVars.shop.currency_sign}},methods:{translate:r,showUpgradePlanModal(){this.fetchPaths(),this.upgradePlanModal=!0},fetchPaths(){this.loading=!0,this.$get(`customer-profile/orders/${this.order_hash}/upgrade-paths`,{variation_id:this.variation_id}).then(e=>{this.upgradePaths=e.upgradePaths}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1})},closeUpgradePlanModal(){this.upgradePlanModal=!1}}},fi={class:"fct-upgrade-plan"},bi={id:"upgrade-dialog-title",class:"sr-only"},gi={key:0,class:"fct-upgrade-variation-table pb-10"},yi={class:"upgrade-title"},vi={class:"plan-price"},wi={class:"plan-price"},ki={class:"upgrade-cost"},Ci={class:"upgrade-title"},Pi=["innerHTML"],Si={class:"upgrade-action"},Ai={key:1,role:"status","aria-live":"polite"},$i={key:2,role:"alert","aria-live":"assertive"};function Mi(e,a,n,b,t,i){const u=h("el-button"),_=h("el-table-column"),p=h("el-table"),v=h("el-skeleton"),k=h("el-dialog");return l(),c("div",fi,[d(u,{type:n.buttonType,size:"small",onClick:i.showUpgradePlanModal,"aria-label":n.buttonText},{default:m(()=>[w(o(n.buttonText),1)]),_:1},8,["type","onClick","aria-label"]),d(k,{modelValue:t.upgradePlanModal,"onUpdate:modelValue":a[0]||(a[0]=f=>t.upgradePlanModal=f),"append-to-body":!0,title:e.$t("Upgrade Options"),class:"fct-upgrade-plan-dialog fluent-cart-customer-profile-app",role:"dialog","aria-modal":"true","aria-labelledby":"upgrade-dialog-title"},{default:m(()=>[s("h2",bi,o(e.$t("Upgrade Options")),1),t.upgradePaths.length>0?(l(),c("div",gi,[d(p,{data:t.upgradePaths,"aria-label":i.translate("Upgrade options table")},{default:m(()=>[d(_,{label:i.translate("Package"),width:290,"aria-label":i.translate("Package")},{default:m(f=>[s("div",yi,o(f.row.title),1)]),_:1},8,["label","aria-label"]),d(_,{label:i.translate("Price"),width:100,"aria-label":i.translate("Price")},{default:m(f=>[s("div",vi,[s("div",wi,o(e.formatNumber(f.row.original_price,f.row.currency)),1)])]),_:1},8,["label","aria-label"]),d(_,{label:i.translate("Amount to pay"),width:200,"aria-label":i.translate("Amount to pay")},{default:m(f=>[s("div",ki,[s("div",Ci,[s("span",{innerHTML:f.row.payment_summary},null,8,Pi)])])]),_:1},8,["label","aria-label"]),d(_,{label:i.translate("Action"),width:110,"aria-label":i.translate("Action")},{default:m(f=>[s("div",Si,[d(u,{class:"el-button--x-small",tag:"a",href:f.row.upgrade_url,target:"_blank",rel:"noopener noreferrer","aria-label":e.$t("Upgrade to")+" "+f.row.title},{default:m(()=>[w(o(e.$t("Upgrade")),1)]),_:2},1032,["href","aria-label"])])]),_:1},8,["label","aria-label"])]),_:1},8,["data","aria-label"])])):t.loading?(l(),c("div",Ai,[d(v,{animated:!0,rows:2})])):(l(),c("div",$i,o(i.translate("No upgrade found for this purchase")),1))]),_:1},8,["modelValue","title"])])}const pt=L(pi,[["render",Mi]]),Di={name:"LicenseDetails",components:{UpgradePlan:pt,Badge:F,LicenseKey:re,ActivatedSites:_i},data(){return{licenseDetailsTitleId:"license-details-title",license:null,loading:!1,sectionParts:{}}},props:{license_key:{type:String,required:!0}},methods:{dateTimeI18:q,fetchLicense(){this.loading=!0,this.$get("customer-profile/licenses/"+this.license_key).then(e=>{this.license=e.license,e.section_parts&&(this.sectionParts=e.section_parts)}).catch(e=>{this.$notify.error(e)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchLicense()}},Ti=["aria-labelledby","aria-busy"],Ei={class:"fct-customer-dashboard-single-subscription"},Li=["aria-label"],Ii=["aria-labelledby"],Vi={key:0,class:"fct-renew-box mb-4"},xi={class:"text-center p-4"},Bi={class:"p-0 m-0 mb-3"},Ni=["href","aria-label"],Ui=["innerHTML"],Hi={class:"fct-single-order-box"},Fi={class:"fct-single-order-header"},Oi=["id"],qi={class:"fct-single-order-body"},Ri={class:"fct-single-order-box-inner"},zi={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},Yi={class:"left-content"},ji={class:"fct-product-info-card"},Ki={class:"fct-product-info-card-inner"},Wi={class:"product-info-content"},Zi={class:"title truncate-none"},Gi={class:"variation-title"},Ji={class:"right-content"},Qi={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},Xi={class:"left-content"},er={class:"title"},tr={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},ar={class:"left-content"},sr={class:"title"},ir={class:"flex items-center gap-2"},rr={key:0,class:"text"},nr={key:1,class:"text"},lr={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},or={class:"left-content"},dr={class:"title"},cr={class:"text"},ur=["innerHTML"],mr={class:"fct-single-order-footer mt-3"},hr={class:"flex items-center gap-3"},_r=["innerHTML"],pr=["innerHTML"],fr={key:1,class:"fct-customer-dashboard-loader","aria-live":"polite"},br={key:2,class:"fct-customer-dashboard-no-data",role:"alert"};function gr(e,a,n,b,t,i){var T,E,D,P,I,B;const u=h("el-breadcrumb-item"),_=h("el-breadcrumb"),p=h("el-alert"),v=h("Badge"),k=h("LicenseKey"),f=h("ActivatedSites"),y=h("UpgradePlan"),C=h("router-link"),$=h("el-skeleton");return l(),c("div",{class:"fct-customer-dashboard-manage-license-wrap fct-customer-dashboard-layout-width",role:"main","aria-labelledby":t.licenseDetailsTitleId,"aria-busy":t.loading},[s("div",Ei,[s("div",{class:"fct-customer-dashboard-breadcrumb mb-8",role:"navigation","aria-label":e.$t("Breadcrumb")},[d(_,null,{default:m(()=>[d(u,{class:"cursor-pointer",to:{path:"/licenses"}},{default:m(()=>[w(o(e.$t("Licenses")),1)]),_:1}),d(u,null,{default:m(()=>[w(o(n.license_key),1)]),_:1})]),_:1})],8,Li),t.license?(l(),c("div",{key:0,"aria-labelledby":t.licenseDetailsTitleId},[t.license.renewal_url&&t.license.status==="expired"?(l(),c("div",Vi,[d(p,{type:"error",closable:!1,role:"alert","aria-live":"assertive"},{default:m(()=>[s("div",xi,[s("p",Bi,"Your license has been expired at "+o(i.dateTimeI18(t.license.expiration_date))+". Please renew the license for getting updates and support.",1),s("a",{href:t.license.renewal_url,class:"el-button el-button--primary","aria-label":e.$t("Renew License")},o(e.$t("Renew License")),9,Ni)])]),_:1})])):g("",!0),t.sectionParts.before_summary?(l(),c("div",{key:1,innerHTML:t.sectionParts.before_summary},null,8,Ui)):g("",!0),s("article",Hi,[s("header",Fi,[s("h1",{id:t.licenseDetailsTitleId,class:"title"},o(e.$t("License Details")),9,Oi)]),s("div",qi,[s("div",Ri,[s("div",zi,[s("div",Yi,[s("div",ji,[s("div",Ki,[s("div",Wi,[s("div",Zi,o(t.license.title),1),s("div",Gi,o(t.license.subtitle),1)])])])]),s("div",Ji,[d(v,{status:t.license.status},null,8,["status"])])]),s("div",Qi,[s("div",Xi,[s("div",er,o(e.$t("License Key")),1),d(k,{license_key:n.license_key},null,8,["license_key"])])]),s("div",tr,[s("div",ar,[s("div",sr,o(e.$t("Activations")),1),s("div",ir,[!((T=t.license)!=null&&T.limit)||Number((E=t.license)==null?void 0:E.limit)===0?(l(),c("span",rr,o(e.$t("%s / Unlimited",(D=t.license)==null?void 0:D.activation_count)),1)):(l(),c("span",nr,o(e.$t("%1$s / %2$s",(P=t.license)==null?void 0:P.activation_count,(I=t.license)==null?void 0:I.limit)),1)),t.license.license_key?(l(),A(f,{key:2,license_key:(B=t.license)==null?void 0:B.license_key},null,8,["license_key"])):g("",!0)])]),a[0]||(a[0]=s("div",{class:"right-content"},null,-1))]),s("div",lr,[s("div",or,[s("div",dr,o(e.$t("Expiration Date")),1),s("div",cr,o(t.license.expiration_date?i.dateTimeI18(t.license.expiration_date):e.$t("Never Expires")),1)])]),t.sectionParts.end_of_details?(l(),c("div",{key:0,innerHTML:t.sectionParts.end_of_details},null,8,ur)):g("",!0)])]),s("footer",mr,[s("div",hr,[t.license.has_upgrades?(l(),A(y,{key:0,"button-type":"primary","button-text":e.$t("Upgrade Plan"),variation_id:t.license.variation_id,order_hash:t.license.order.uuid,"aria-label":e.$t("Upgrade Plan")},null,8,["button-text","variation_id","order_hash","aria-label"])):g("",!0),d(C,{class:"underline-link-button",to:{name:"view_order",params:{order_id:t.license.order.uuid}},"aria-label":e.$t("View Order")},{default:m(()=>[w(o(e.$t("View Order")),1)]),_:1},8,["to","aria-label"]),t.sectionParts.additional_actions?(l(),c("span",{key:1,innerHTML:t.sectionParts.additional_actions},null,8,_r)):g("",!0)])])]),t.sectionParts.after_summary?(l(),c("div",{key:2,innerHTML:t.sectionParts.after_summary},null,8,pr)):g("",!0)],8,Ii)):t.loading?(l(),c("div",fr,[d($,{rows:5,animated:""})])):(l(),c("div",br,[s("p",null,o(e.$t("License could not be loaded. Please try again.")),1)]))])],8,Ti)}const yr=L(Di,[["render",gr]]),vr={name:"PaymentInfo",props:{data:Object}},wr={"aria-labelledby":"payment-info-heading",role:"region"},kr={id:"payment-info-heading",class:"sr-only"},Cr=["innerHTML"];function Pr(e,a,n,b,t,i){var u,_;return l(),c("div",wr,[s("h2",kr,o(e.$t("Payment details")),1),(u=n.data)!=null&&u.payment_info?(l(),c("div",{key:0,class:"fct-customer-payment-info",innerHTML:(_=n.data)==null?void 0:_.payment_info},null,8,Cr)):g("",!0)])}const Sr=L(vr,[["render",Pr]]),Ar=["aria-label"],$r=["src","alt"],Mr=["src","alt"],Dr=["aria-label"],Tr=["aria-label"],Er={__name:"CardInfo",props:{data:Object,showPaymentInfo:Boolean},setup(e){const a=Ct(()=>window.fluentcart_customer_profile_vars.assets_path);return(n,b)=>{var t,i,u,_,p,v,k,f,y,C,$,T,E,D,P,I,B,Z,G;return e.data?(l(),c("div",{key:0,class:"fct-card-info",role:"status","aria-label":n.$t("Payment method information")},[((t=e.data)==null?void 0:t.current_payment_method)==="paypal"||((i=e.data)==null?void 0:i.payment_method)==="paypal"?(l(),c("img",{key:0,src:`${a.value}images/payment-methods/paypal-icon.svg`,alt:n.$t("PayPal logo"),role:"presentation"},null,8,$r)):(p=(_=(u=e.data)==null?void 0:u.billing_info)==null?void 0:_.details)!=null&&p.last_4||(v=e.data)!=null&&v.card_last_4?(l(),c(M,{key:1},[s("img",{src:`${a.value}images/credit-card/card.svg`,alt:n.$t("Credit card icon"),role:"presentation","aria-hidden":"true"},null,8,Mr),s("div",{class:"text","aria-label":n.$t("Credit card number")+" "+(((y=(f=(k=e.data)==null?void 0:k.billing_info)==null?void 0:f.details)==null?void 0:y.last_4)||((C=e.data)==null?void 0:C.card_last_4))}," **** "+o(((E=(T=($=e.data)==null?void 0:$.billing_info)==null?void 0:T.details)==null?void 0:E.last_4)||((D=e.data)==null?void 0:D.card_last_4)),9,Dr)],64)):((P=e.data)==null?void 0:P.current_payment_method)=="offline_payment"?(l(),c("div",{key:2,class:"text",role:"status","aria-label":`${S(O).headline((I=e.data)==null?void 0:I.current_payment_method)||S(O).headline((B=e.data)==null?void 0:B.payment_method)} payment method`},o(S(O).headline((Z=e.data)==null?void 0:Z.current_payment_method)||S(O).headline((G=e.data)==null?void 0:G.payment_method)),9,Tr)):g("",!0)],8,Ar)):g("",!0)}}},Lr={name:"SubscriptionTable",components:{PaymentInfo:Sr,CardInfo:Er,Badge:F},props:{subscriptions:{type:Array,required:!0},hideHeader:{type:Boolean,default:!1}},methods:{dateTimeI18:q,translate:r,subscriptionStatus(e){return e!=null&&e.overridden_status?e==null?void 0:e.overridden_status:e==null?void 0:e.status},getStatusText(e){switch(e){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");default:return O.headline(e)}}}},Ir={class:"fct-customer-dashboard-table"},Vr={class:"subscription-only-mobile"},xr={class:"item-header"},Br={key:0,class:"text","aria-live":"polite"},Nr={class:"item-body"},Ur=["onClick","aria-label"],Hr={class:"fct-customer-orders-items-title"},Fr={class:"item-footer"},Or={class:"item-footer-content"},qr={key:1,class:"text-center p-5",role:"alert","aria-live":"polite"},Rr=["onClick","aria-label"],zr={class:"fct-customer-orders-items-title"},Yr={class:"fct-customer-orders-items-meta-wrap"},jr={key:0,class:"text-meta","aria-live":"polite"},Kr={class:"fct-customer-payment-meta-info"};function Wr(e,a,n,b,t,i){const u=h("CardInfo"),_=h("Badge"),p=h("PaymentInfo"),v=h("el-table-column"),k=h("el-table");return l(),c("div",Ir,[s("div",Vr,[n.subscriptions.length>0?(l(!0),c(M,{key:0},x(n.subscriptions,f=>(l(),c("div",{class:"subscription-only-mobile-item",key:f.id},[s("div",xr,[d(u,{data:f,"show-payment-info":e.showPaymentInfo},null,8,["data","show-payment-info"]),f.status=="active"||f.status=="trialing"?(l(),c("div",Br,o(e.$t("Auto renews on %s",i.dateTimeI18(f.next_billing_date))),1)):g("",!0)]),s("div",Nr,[s("div",{class:"fct-customer-orders-items fct-customer-sub-orders-items cursor-pointer",onClick:y=>e.$router.push({name:"view_subscription",params:{subscription_uuid:f.uuid}}),"aria-label":e.$t("View subscription details for")+" "+f.item_name},[s("div",Hr,o(f.item_name),1)],8,Ur)]),s("div",Fr,[s("div",Or,[d(_,{status:i.subscriptionStatus(f),"hide-icon":!0,size:"small"},null,8,["status"]),d(p,{data:f},null,8,["data"])])])]))),128)):(l(),c("div",qr,o(i.translate("No subscription plans found!")),1))]),d(k,{class:"subscription-only-desktop",data:n.subscriptions,"show-header":!n.hideHeader,role:"table"},{default:m(()=>[d(v,{"min-width":200,label:e.$t("Item")},{default:m(f=>{var y;return[s("div",{class:"fct-customer-orders-items fct-customer-sub-orders-items cursor-pointer",onClick:C=>e.$router.push({name:"view_subscription",params:{subscription_uuid:f.row.uuid}}),"aria-label":e.$t("View subscription details for")+" "+f.row.item_name},[s("div",zr,o(f.row.item_name),1),s("div",Yr,[d(_,{"hide-icon":!0,type:(y=f.row)==null?void 0:y.overridden_status,size:"small","aria-hidden":"true"},{default:m(()=>{var C;return[w(o(i.getStatusText((C=f.row)==null?void 0:C.overridden_status)),1)]}),_:2},1032,["type"]),f.row.status=="active"||f.row.status=="trialing"?(l(),c("div",jr,o(e.$t("Auto renews on %s",i.dateTimeI18(f.row.next_billing_date,"DD MMM, YYYY"))),1)):g("",!0)])],8,Rr)]}),_:1},8,["label"]),d(v,{"min-width":"200",label:e.$t("Plan"),align:"right"},{default:m(f=>[s("div",Kr,[d(p,{data:f.row},null,8,["data"]),d(u,{data:f.row},null,8,["data"])])]),_:1},8,["label"])]),_:1},8,["data","show-header"])])}const ft=L(Lr,[["render",Wr]]),Zr={name:"SubscriptionPlans",components:{OrderTableLoader:W,Badge:F,Pagination:ae,SubscriptionTable:ft,EmptyState:te},props:{showLimit:{type:Number,default:10},showViewAllLink:{type:Boolean,default:!1}},data(){return{loading:!1,appLoaded:!1,subscriptions:[],canceling_subscription:!1,paginate:{current_page:1,per_page:10,total:0}}},methods:{subscriptionStatus(e){return e!=null&&e.overridden_status?e==null?void 0:e.overridden_status:e==null?void 0:e.status},modifySubscriptionResponse(e){return e.map(a=>{var n,b;return{...a,card_last_4:(b=(n=a==null?void 0:a.billingInfo)==null?void 0:n.card)==null?void 0:b.last_4}})},fetchSubscriptions(){this.loading=!0,this.$get("customer-profile/subscriptions",{per_page:this.paginate.per_page,page:this.paginate.current_page}).then(e=>{this.subscriptions=e.subscriptions.data,this.paginate.total=e.subscriptions.total}).finally(()=>{this.appLoaded=!0,this.loading=!1})},cancelSubscription(e,a,n){ElMessageBox.confirm(r("It will permanently cancel the active subscription from your payment provider. Are you sure to do that?"),r("Warning"),{type:"warning",cancelButtonText:r("No, keep this!"),confirmButtonText:r("Yes cancel this subscription!")}).then(()=>{this.canceling_subscription=!0,this.$put(`orders/${n}/subscriptions/${e}/cancel`,{data:{vendor_charge_id:a}}).then(()=>{this.canceling_subscription=!1,this.fetchSubscriptions()}).catch(b=>{this.canceling_subscription=!1,console.log(b)})})}},mounted(){this.fetchSubscriptions()}},Gr={class:"fct-customer-dashboard-subscriptions",role:"main","aria-labelledby":"subscriptions-title"},Jr={class:"fct-customer-dashboard-subscriptions-inner"},Qr={class:"fct-customer-dashboard-header"},Xr={id:"subscriptions-title",class:"fct-customer-dashboard-title"},en={key:1,class:"fct-customer-dashboard-loading","aria-live":"polite","aria-busy":"true"};function tn(e,a,n,b,t,i){const u=h("SubscriptionTable"),_=h("OrderTableLoader"),p=h("EmptyState"),v=h("pagination");return l(),c("div",Gr,[s("div",Jr,[s("header",Qr,[s("h4",Xr,o(e.$t("Subscription Plans")),1)]),t.subscriptions.length?(l(),A(u,{key:0,subscriptions:t.subscriptions,"aria-label":e.$t("Subscription plans table")},null,8,["subscriptions","aria-label"])):t.loading?(l(),c("div",en,[d(_,{"rows-range":[1,2,3,4,5]})])):(l(),A(p,{key:2,title:e.$t("No subscriptions yet"),text:e.$t("Once you subscribe to a plan, it will appear here."),role:"status"},{icon:m(()=>a[0]||(a[0]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none","aria-hidden":"true"},[s("path",{d:"M33.5429 11.9789C34.291 11.4426 35.3322 11.6143 35.8685 12.3624C37.4175 14.5232 38.3297 17.1585 38.3297 20.0001C38.3297 27.4066 32.172 33.3335 24.6727 33.3335H14.349V35C14.3491 35.419 14.1921 35.8383 13.8769 36.1623C13.235 36.8221 12.1798 36.8365 11.5201 36.1946L9.84873 34.5685C9.53043 34.259 9.11337 33.8536 8.86883 33.5373C8.65405 33.2595 8.03432 32.3905 8.48888 31.3226C8.93338 30.2785 9.96332 30.1015 10.3062 30.0543C10.7031 29.9996 11.2015 29.9998 11.6536 30.0001H11.7377H24.6727C30.4177 30.0001 34.9963 25.4803 34.9963 20.0001C34.9963 17.8841 34.3197 15.9231 33.1593 14.3045C32.623 13.5564 32.7949 12.5152 33.5429 11.9789Z",fill:"black"}),s("path",{opacity:"0.4",d:"M6.45682 28.0212C5.7087 28.5575 4.66751 28.3857 4.13121 27.6377C2.58217 25.4768 1.66992 22.8415 1.66992 20C1.66992 12.5934 7.82769 6.66658 15.327 6.66658H25.6507V5.00005C25.6507 4.58106 25.8075 4.16166 26.1228 3.83765C26.7647 3.17793 27.8198 3.16348 28.4797 3.8054L30.151 5.43163C30.4692 5.741 30.8863 6.1464 31.1308 6.46268C31.3457 6.74053 31.9653 7.60961 31.5108 8.67741C31.0663 9.72158 30.0363 9.89861 29.6935 9.94578C29.2965 10.0004 28.7982 10.0002 28.3462 9.99995L28.262 9.99991H15.327C9.58204 9.99991 5.00326 14.5198 5.00326 20C5.00326 22.1158 5.67996 24.0768 6.84032 25.6955C7.37662 26.4437 7.20492 27.4848 6.45682 28.0212Z",fill:"black"})],-1)])),_:1},8,["title","text"])),t.paginate.total?(l(),A(v,{key:3,hide_on_single:!0,pagination:t.paginate,onFetch:i.fetchSubscriptions,"aria-label":e.$t("Subscription pagination")},null,8,["pagination","onFetch","aria-label"])):g("",!0)])])}const an=L(Zr,[["render",tn]]),sn={name:"Badge",components:{DynamicIcon:U},props:{status:String,text:{type:String,default:null,required:!1},hideIcon:{type:Boolean,default:!1},size:String,highContrast:{type:Boolean,default:!1},type:String,icon:String},computed:{Str(){return O},computedStatus(){return this.status||this.type},badgeType(){switch(this.computedStatus){case"completed":case"paid":case"active":case"publish":case"shipped":case"success":case"licensed":case"succeeded":return"success";case"failed":case"error":case"canceled":case"expired":return"danger";case"partially_paid":case"intended":return"blue";case"scheduled":case"on-hold":case"pending":case"unpaid":case"warning":case"processing":case"future":return"warning";case"inactive":return"warning";case"dispute":return"warning";default:return"info"}},badgeSize(){return this.size?this.size:""},HighContrast(){return this.highContrast?"is-high-contrast":""}},methods:{getStatusText(){switch(this.computedStatus){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");default:return O.headline(this.computedStatus)}}}},rn={key:0};function nn(e,a,n,b,t,i){const u=h("DynamicIcon");return l(),c("span",{class:N(`badge ${i.badgeType} ${i.badgeSize} ${i.HighContrast}`)},[n.status?(l(),c(M,{key:0},[n.icon?(l(),c("span",rn,[d(u,{name:n.icon},null,8,["name"])])):g("",!0),n.text?(l(),c(M,{key:1},[w(o(n.text),1)],64)):(l(),c(M,{key:2},[w(o(i.getStatusText()),1)],64))],64)):dt(e.$slots,"default",{key:1})],2)}const ln=L(sn,[["render",nn]]),on=["id"],dn=["for"],cn=["id","type","aria-describedby","aria-required"],un=["src","id"],bt={__name:"InputField",props:{id:String,label:String,type:{type:String,default:"text"},imageUrl:{type:String,default:""},modelValue:{type:[String,Number],default:null}},emits:["update:modelValue","change","input"],setup(e,{emit:a}){const n=Pt().ctx,b=H(!1);H();const t=e,i=a,u=H(t.modelValue),_=f=>{b.value=f},p=f=>{n.$refs.input.value?b.value=!0:b.value=f},v=()=>{i("update:modelValue",u.value),i("change",u.value)},k=()=>{i("update:modelValue",u.value),i("input",u.value)};return ne(()=>t.modelValue,f=>{u.value=f}),ie(()=>{b.value=!!u.value}),ie(()=>{b.value=!!u.value}),(f,y)=>(l(),c("div",{class:N(["form-input-group",{"is-focused":b.value}]),id:e.id,role:"group"},[e.label?(l(),c("label",{key:0,for:e.id},o(e.label),9,dn)):g("",!0),Y(s("input",{id:e.id,type:e.type,ref:"input","onUpdate:modelValue":y[0]||(y[0]=C=>u.value=C),onFocus:y[1]||(y[1]=C=>_(!0)),onBlur:y[2]||(y[2]=C=>p(!1)),onChange:v,onInput:k,"aria-describedby":e.imageUrl?`${e.id}-icon`:null,"aria-required":f.required||!1},null,40,cn),[[St,u.value]]),e.imageUrl?(l(),c("img",{key:1,src:e.imageUrl,alt:"",id:`${e.id}-icon`,"aria-hidden":"true"},null,8,un)):g("",!0)],10,on))}},mn=["id"],hn={disabled:"",value:""},_n=["value"],pn={__name:"SelectField",props:{id:String,options:{type:Array,required:!0,default:()=>[]},modelValue:{type:[String,Number],default:null},placeholder:{type:String,default:"Please select an option"}},emits:["update:modelValue"],setup(e,{emit:a}){const n=e,b=a,t=H(n.modelValue);ne(()=>n.modelValue,u=>{t.value=u});const i=()=>{b("update:modelValue",t.value)};return(u,_)=>(l(),c("div",{class:"form-input-group",id:e.id},[Y(s("select",{"onUpdate:modelValue":_[0]||(_[0]=p=>t.value=p),onChange:i},[s("option",hn,o(e.placeholder),1),(l(!0),c(M,null,x(e.options,(p,v)=>(l(),c("option",{key:v,value:p.value},o(p.label),9,_n))),128))],544),[[At,t.value]])],8,mn))}},fn=()=>new Promise((e,a)=>{if(window.Stripe)e(window.Stripe);else{const n=document.createElement("script");n.src="https://js.stripe.com/v3/",n.async=!0,document.head.appendChild(n),n.onload=()=>{e(window.Stripe)},n.onerror=()=>{a(new Error("Failed to load Stripe script"))}}}),bn={components:{InputField:bt,SelectField:pn,ArrowDown:qt,ArrowUp:Rt},props:{subscription:{type:Object,required:!0},updateMethod:{type:Boolean,required:!0,default:!0}},data(){var e;return{currentPaymentMethod:"",cardNumber:null,cardExpiry:null,cardCvc:null,selectedAddress:"",updating:!1,switching:!1,reactivating:!1,invalidCard:!1,elementStates:{cardNumber:!1,cardExpiry:!1,cardCvc:!1},elementStyle:{base:{fontSize:"16px",color:"#32325d","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a"}},editing:!0,stripe:null,stripePubKey:(e=window.fluentcart_customer_profile_vars)==null?void 0:e.stripe_pub_key,loading:!1,errorMessage:"",successMessage:"",remainingAttempts:0,showRateLimitNote:!1}},computed:{getBillingAddresses(){return this.subscription.billing_addresses||[{}]}},methods:{translate:r,handleElementChange(e){this.elementStates[e.elementType]=e.complete,this.invalidCard=!(this.elementStates.cardNumber&&this.elementStates.cardExpiry&&this.elementStates.cardCvc)},async loadAndMountStripeElements(){this.loading=!0;let e=null;try{e=await fn()}catch(n){this.handleError((n==null?void 0:n.message)||r("Error in loading stripe")),this.loading=!1}this.stripe=e(this.stripePubKey);const a=this.stripe.elements();this.cardNumber=a.create("cardNumber",{style:this.elementStyle,showIcon:!0}),this.cardNumber.mount("#card-number"),this.cardExpiry=a.create("cardExpiry",{style:this.elementStyle}),this.cardExpiry.mount("#card-expiry"),this.cardCvc=a.create("cardCvc",{style:this.elementStyle}),this.cardCvc.mount("#card-cvc"),this.loading=!1,this.cardNumber.on("change",this.handleElementChange),this.cardExpiry.on("change",this.handleElementChange),this.cardCvc.on("change",this.handleElementChange)},processNewPaymentMethod(){this.save()},async save(){this.updating=!0;const e=await this.createPaymentMethod();e&&this.currentPaymentMethod=="stripe"?this.updatePaymentMethodInStripe(e,"verify"):e&&this.currentPaymentMethod!="stripe"&&this.switchPaymentMethod(e,"verify")},async switchPaymentMethod(e,a="verify",n=""){var b;this.switching=!0,this.errorMessage="";try{const t=await this.$post("customer-profile/subscriptions/"+((b=this.subscription)==null?void 0:b.uuid)+"/switch-payment-method",{data:{newPaymentMethod:"stripe",currentPaymentMethod:this.currentPaymentMethod,vendorPaymentMethod:e,verification_status:a,customer_id:n},_fluentCart_rest_nonce:window.fluentCartRestVars.rest.nonce});if((t==null?void 0:t.status)==="requires_action"){const{setupIntent:i,error:u}=await this.stripe.confirmCardSetup(t==null?void 0:t.client_secret,{payment_method:e.id});if(u){this.errorMessage=u.message||r("Card verification failed"),this.switching=!1;return}i.status==="succeeded"?await this.switchPaymentMethod(e,"verified",t==null?void 0:t.customer_id):(this.errorMessage=r("Card verification failed"),this.switching=!1)}else(t==null?void 0:t.status)==="failed"?(this.resetData(),this.errorMessage=(t==null?void 0:t.message)||r("Card verification failed"),this.switching=!1,this.handleError(this.errorMessage)):(t==null?void 0:t.status)==="success"?(this.resetData(),this.handleSuccess(r("Payment method updated Successfully!")),this.successMessage=r("Payment method updated Successfully!"),this.closeUpdatePaymentModal(),this.$emit("fetchSubscription")):(this.resetData(),this.errorMessage=(t==null?void 0:t.message)||r("Something went wrong"),this.handleError((error==null?void 0:error.message)||r("Error in switching payment method")))}catch(t){this.resetData(),this.errorMessage=(t==null?void 0:t.message)||r("Something went wrong"),this.handleError((t==null?void 0:t.message)||r("Error in switching payment method")),this.switching=!1}finally{this.switching=!1}},async createPaymentMethod(){const e=this.getBillingAddresses.find(a=>a.id==this.selectedAddress);try{const{paymentMethod:a,error:n}=await this.stripe.createPaymentMethod({type:"card",card:this.cardNumber,billing_details:{name:e.name,email:e.email,phone:e.phone,address:{country:e.country,line1:e.address_1,line2:e.address_2,city:e.city,state:e.state,postal_code:e.postcode}}});return a}catch(a){this.errorMessage=(a==null?void 0:a.message)||r("Error in creating payment method"),this.resetData(),this.handleError(this.errorMessage)}},async updatePaymentMethodInStripe(e,a="verify"){this.updating=!0,this.errorMessage="";try{console.log("update...payment method",this.updateMethod,this.subscription);const n=await this.$post(`customer-profile/subscriptions/${this.subscription.uuid}/update-payment-method`,{data:{newPaymentMethod:e,method:"stripe",vendor_subscription_id:this.subscription.vendor_subscription_id,verification_status:a},_fluentCart_rest_nonce:window.fluentCartRestVars.rest.nonce});if((n==null?void 0:n.status)==="requires_action"){const{setupIntent:b,error:t}=await this.stripe.confirmCardSetup(n==null?void 0:n.client_secret,{payment_method:e.id});if(t){this.errorMessage=t.message||r("Card verification failed"),this.updating=!1;return}b.status==="succeeded"?await this.updatePaymentMethodInStripe(e,"verified"):(this.errorMessage=r("Card verification failed"),this.updating=!1)}else(n==null?void 0:n.status)==="failed"?(this.errorMessage=(n==null?void 0:n.message)||r("Card verification failed"),this.resetData(),this.handleError(this.errorMessage)):(n==null?void 0:n.status)==="success"?(this.handleSuccess(r("Payment method updated Successfully!")),this.resetData(),this.closeUpdatePaymentModal(),this.$emit("fetchSubscription")):(this.errorMessage=(n==null?void 0:n.message)||r("Something went wrong"),this.resetData(),this.handleError((error==null?void 0:error.message)||r("Error in updating payment method")))}catch(n){this.errorMessage=(n==null?void 0:n.message)||r("Something went wrong"),this.handleError((n==null?void 0:n.message)||r("Error in updating payment method")),this.updating=!1}},resetData(){this.cardNumber.clear(),this.cardExpiry.clear(),this.cardCvc.clear(),this.updating=!1,this.switching=!1,this.reactivating=!1,this.editing=!1,this.errorMessage=""},closeUpdatePaymentModal(){this.resetData(),this.$emit("close")},async fetchRemainingAttempts(){if(this.currentPaymentMethod==="stripe")try{const e=await this.$get(`customer-profile/subscriptions/${this.subscription.uuid}/setup-intent-attempts`);(e==null?void 0:e.remaining)!==void 0&&(e==null?void 0:e.remaining)!==null&&(this.remainingAttempts=e.remaining,this.showRateLimitNote=!0)}catch(e){console.error("Failed to fetch rate limit info",e)}}},mounted(){var a,n;this.$nextTick(()=>{this.loadAndMountStripeElements()}),console.log("update...payment method mounted",this.updateMethod),this.invalidCard=!0,this.currentPaymentMethod=(a=this.subscription)==null?void 0:a.current_payment_method;const e=(n=this.getBillingAddresses)==null?void 0:n.find(b=>b.is_primary);e&&(this.selectedAddress=e.id),this.fetchRemainingAttempts()}},gn={role:"form","aria-labelledby":"stripe-payment-heading"},yn={id:"stripe-payment-heading",class:"sr-only"},vn={class:"stripe-card-form"},wn={class:"form-group"},kn={class:"form-row col-2"},Cn={class:"form-group"},Pn={for:"card-expiry"},Sn={class:"form-group"},An={for:"card-cvc"},$n={key:0,class:"rate-limit-text"},Mn={key:1,class:"rate-limit-text"},Dn={class:"fct-update-payment-form-item"},Tn={class:"form-heading"},En={class:"form-input-container"},Ln={for:"billing-select",class:"sr-only"},In={id:"billing-help",class:"sr-only"},Vn={key:1},xn={class:"text-red-500"},Bn={key:1,class:"error-message",role:"alert","aria-live":"assertive"},Nn={key:2,class:"success-message",role:"alert","aria-live":"assertive"},Un={class:"dialog-footer"};function Hn(e,a,n,b,t,i){const u=h("el-option"),_=h("el-select"),p=h("el-button"),v=K("loading");return l(),c("div",gn,[s("h2",yn,o(i.translate("Stripe Payment Method")),1),Y((l(),c("div",vn,[s("div",wn,[s("label",null,o(i.translate("Card Number")),1),a[2]||(a[2]=s("div",{id:"card-number",class:"stripe-element","aria-describedby":"card-errors"},null,-1))]),s("div",kn,[s("div",Cn,[s("label",Pn,o(i.translate("MM/YY")),1),a[3]||(a[3]=s("div",{id:"card-expiry",class:"stripe-element","aria-describedby":"card-errors"},null,-1))]),s("div",Sn,[s("label",An,o(i.translate("CVC")),1),a[4]||(a[4]=s("div",{id:"card-cvc",class:"stripe-element","aria-describedby":"card-errors"},null,-1))])]),a[5]||(a[5]=s("div",{id:"card-errors",class:"sr-only",role:"alert","aria-live":"assertive"},null,-1))])),[[v,t.loading]]),t.showRateLimitNote&&t.remainingAttempts>=0?(l(),c("div",{key:0,class:N(["rate-limit-notice",{"rate-limit-notice-warning":t.remainingAttempts===0}]),role:"note"},[t.remainingAttempts>0?(l(),c("p",$n,[w(o(i.translate("You can update your card"))+" ",1),s("strong",null,o(t.remainingAttempts),1),w(" "+o(i.translate("more time"))+o(t.remainingAttempts!==1?"s":"")+" "+o(i.translate("today"))+". ",1)])):(l(),c("p",Mn,o(i.translate("You have reached your 24 hours limit for updating card. Please try again tomorrow.")),1))],2)):g("",!0),s("div",Dn,[s("h3",Tn,o(i.translate("Billing Address")),1),s("div",En,[i.getBillingAddresses.length?(l(),c(M,{key:0},[s("label",Ln,o(i.translate("Select billing address")),1),d(_,{id:"billing-select",modelValue:t.selectedAddress,"onUpdate:modelValue":a[0]||(a[0]=k=>t.selectedAddress=k),placeholder:i.translate("Select"),"aria-describedby":"billing-help"},{default:m(()=>[(l(!0),c(M,null,x(i.getBillingAddresses,k=>(l(),A(u,{key:k.id,label:e.getAddress(k.formatted_address),value:k.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),s("small",In,o(i.translate("Choose an existing billing address or add a new one in profile settings.")),1)],64)):(l(),c("span",Vn,[s("span",xn,o(i.translate("No billing address found,")),1),w(" "+o(i.translate("please add a new address from"))+" ",1),s("span",{class:"cursor-pointer text-system-dark underline font-medium",onClick:a[1]||(a[1]=k=>e.$router.push({name:"profile"})),role:"link",tabindex:"0"},o(i.translate("here")),1)]))])]),t.errorMessage?(l(),c("div",Bn,o(t.errorMessage),1)):g("",!0),t.successMessage?(l(),c("div",Nn,o(t.successMessage),1)):g("",!0),s("div",Un,[d(p,{size:"small",onClick:i.closeUpdatePaymentModal,"aria-label":i.translate("Cancel")},{default:m(()=>[w(o(i.translate("Cancel")),1)]),_:1},8,["onClick","aria-label"]),d(p,{size:"small",type:"primary",onClick:i.processNewPaymentMethod,loading:t.updating||t.switching,disabled:t.updating||t.switching||t.invalidCard,"aria-disabled":t.updating||t.switching||t.invalidCard,"aria-label":n.updateMethod?i.translate("Update"):i.translate("Reactivate")},{default:m(()=>[w(o(n.updateMethod?i.translate("Update"):i.translate("Reactivate")),1)]),_:1},8,["onClick","loading","disabled","aria-disabled","aria-label"])])])}const Fn=L(bn,[["render",Hn],["__scopeId","data-v-e47bd421"]]),On=()=>new Promise((e,a)=>{var n;if(window.paypal)e(window.paypal);else{const b=document.createElement("script");b.src=`https://www.paypal.com/sdk/js?client-id=${(n=window.fluentcart_customer_profile_vars)==null?void 0:n.paypal_client_id}&vault=true&intent=subscription`,b.async=!0,b.setAttribute("data-partner-attribution-id","FLUENTCART_SP_PPCP"),document.head.appendChild(b),b.onload=()=>{e(window.paypal)},b.onerror=()=>{a(new Error("Failed to load PayPal script"))}}}),qn={name:"Paypal",props:{subscription:{type:Object,required:!0},updateMethod:{type:Boolean,required:!0,default:!0}},emits:["close","fetchSubscription"],data(){var e;return{updatePaymentUrl:"",paypalClientId:(e=window.fluentcart_customer_profile_vars)==null?void 0:e.paypal_client_id,selectedAddress:"",loading:!1,planId:null,switching:!1,reactivating:!1,reason:"",errorMessage:"",successMessage:""}},computed:{getBillingAddresses(){return this.subscription.billing_addresses}},methods:{translate:r,closeUpdatePaymentModal(){this.$emit("close")},async loadPaypal(){this.loading=!0;let e=null;try{e=await On()}catch(a){this.handleError((a==null?void 0:a.message)||"Error in loading paypal"),this.loading=!1}this.paypal=e,await this.loadPaypalButtons(),this.loading=!1},async getPlanId(){return this.updateMethod?await this.getPlanIdForUpdate():""},async getPlanIdForUpdate(){try{const e=await this.$post("customer-profile/subscriptions/"+this.subscription.uuid+"/get-or-create-plan",{data:{method:"paypal",reason:this.reason},_fluentCart_rest_nonce:window.fluentCartRestVars.rest.nonce});return(!e||!e.plan||!e.plan.id)&&(this.errorMessage=r("Invalid plan ID response!"),this.handleError(this.errorMessage)),e}catch(e){throw this.errorMessage=(e==null?void 0:e.message)||"Error in getPlanId",this.handleError(this.errorMessage),e}},async confirmNewPaypalSubscriptionSwitch(e,a){this.loading=!0,this.$post("customer-profile/subscriptions/"+this.subscription.uuid+"/confirm-subscription-switch",{data:{newVendorSubscriptionId:e,vendorOrderId:a,method:"paypal"},_fluentCart_rest_nonce:window.fluentCartRestVars.rest.nonce}).then(n=>{(n==null?void 0:n.status)==="success"?(this.handleSuccess(r("PayPal subscription updated successfully")),this.loading=!1,this.$emit("close"),this.$emit("fetchSubscription")):(n!=null&&n.message&&(this.errorMessage=n==null?void 0:n.message),this.loading=!1,this.handleError(this.errorMessage))}).catch(n=>{this.errorMessage=(n==null?void 0:n.message)||r("Error in confirming new paypal subscription"),this.handleError(this.errorMessage),this.loading=!1,this.$emit("close")})},async loadPaypalButtons(){const e=this.$refs.paypalButtonContainer;let a=null,n=null,b=null;e.innerHTML="";let t=this;try{await window.paypal.Buttons({style:{shape:"pill",layout:"vertical",label:"paypal",size:"responsive",disableMaxWidth:!0},createSubscription:async function(u,_){return _.subscription.create({plan_id:a,custom_id:t.subscription.uuid})},onApprove:function(u,_){u.subscriptionID&&(n=u.subscriptionID,b=u.orderID,t.confirmNewPaypalSubscriptionSwitch(n,b))},onClick:async function(u,_){try{const p=await t.getPlanId();if(!p||!p.plan||!p.plan.id)return _.reject();a=p.plan.id}catch{return _.reject()}},onError:u=>{var _,p;(_=this.paymentLoader)==null||_.changeLoaderStatus("error"),(p=this.paymentLoader)==null||p.hideLoader(),alert("PayPal error: "+u.toString())}}).render(e)}catch(i){console.error("PayPal Buttons failed to render:",i)}finally{this.loading=!1}}},mounted(){var a;this.$nextTick(()=>{this.loadPaypal()});const e=(a=this.getBillingAddresses)==null?void 0:a.find(n=>n.is_primary);e&&(this.selectedAddress=e.id),this.updateMethod&&(this.reason="update_payment_method")}},Rn={role:"region","aria-labelledby":"paypal-section-heading"},zn={id:"paypal-section-heading",class:"sr-only"},Yn=["aria-label"],jn={key:0,class:"error-message",role:"alert","aria-live":"assertive"},Kn={key:1,class:"success-message",role:"status","aria-live":"polite"},Wn={class:"dialog-footer"};function Zn(e,a,n,b,t,i){const u=h("el-button"),_=K("loading");return l(),c("div",Rn,[s("h2",zn,o(i.translate("PayPal Payment")),1),s("div",null,[Y(s("div",{id:"paypal-button-container",ref:"paypalButtonContainer","aria-live":"polite","aria-label":i.translate("PayPal payment button")},null,8,Yn),[[_,t.loading]])]),t.errorMessage?(l(),c("div",jn,o(t.errorMessage),1)):g("",!0),t.successMessage?(l(),c("div",Kn,o(t.successMessage),1)):g("",!0),s("div",Wn,[d(u,{size:"small",onClick:i.closeUpdatePaymentModal,"aria-label":i.translate("Cancel")},{default:m(()=>[w(o(i.translate("Cancel")),1)]),_:1},8,["onClick","aria-label"])])])}const Gn=L(qn,[["render",Zn],["__scopeId","data-v-4b354d7c"]]),Jn={name:"UpdatePaymentInfos",components:{InputField:bt,Stripe:Fn,Paypal:Gn},props:{subscription:{type:Object,required:!0},updateMethod:{type:Boolean,required:!0,default:!0},buttonText:{type:String,default:"Update Payment Method"}},data(){return{updatePaymentModal:!1,selectedPaymentMethod:this.subscription.current_payment_method,selectedAddress:"",stripePubKey:window.fluentcart_customer_profile_vars.stripe_pub_key,stripe:null,cardNumber:null,cardExpiry:null,cardCvc:null,loading:!1,error:"",updating:!1,invalidInput:!1}},computed:{getAllPaymentMethods(){var e;return((e=window.fluentcart_customer_profile_vars)==null?void 0:e.payment_methods)||[]},filteredPaymentMethods(){return this.subscription.can_switch_payment_method===!0?(this.getAllPaymentMethods||[]).filter(e=>{var a,n;return((n=(a=this.subscription)==null?void 0:a.switchable_payment_methods)==null?void 0:n.includes(e.slug))||e.slug===this.subscription.current_payment_method}):(this.getAllPaymentMethods||[]).filter(e=>e.slug===this.subscription.current_payment_method)}},methods:{translate:r,showUpdatePaymentModal(){this.updatePaymentModal=!0},closeUpdatePaymentModal(){this.updatePaymentModal=!1},fetchSubscription(){this.$emit("fetch")}},mounted(){}},Qn={id:"update-payment-title",class:"sr-only"},Xn={class:"fct-update-payment-method"},el={class:"fct-update-payment-method-header"},tl={id:"payment-methods-label",class:"sr-only"},al=["src","alt","title"],sl={id:"update-payment-description",class:"sr-only"},il={class:"fct-update-payment-method-body"},rl={class:"fct-update-payment-method-form"},nl={key:0,class:"fct-update-payment-method-stripe"},ll={key:1,class:"fct-update-payment-method-paypal"};function ol(e,a,n,b,t,i){const u=h("el-button"),_=h("el-radio"),p=h("el-radio-group"),v=h("Stripe"),k=h("Paypal"),f=h("el-dialog");return l(),c("div",null,[n.updateMethod?(l(),A(u,{key:0,onClick:i.showUpdatePaymentModal,text:"",class:"underline-link-button","aria-label":n.buttonText},{default:m(()=>[w(o(n.buttonText),1)]),_:1},8,["onClick","aria-label"])):(l(),A(u,{key:1,onClick:i.showUpdatePaymentModal,text:"",class:"underline-link-button","aria-label":i.translate("Reactivate")},{default:m(()=>[w(o(i.translate("Reactivate")),1)]),_:1},8,["onClick","aria-label"])),d(f,{modelValue:t.updatePaymentModal,"onUpdate:modelValue":a[1]||(a[1]=y=>t.updatePaymentModal=y),title:i.translate("Update Payment"),role:"dialog","aria-modal":"true","aria-labelledby":"update-payment-title","aria-describedby":"update-payment-description"},{default:m(()=>[s("h2",Qn,o(i.translate("Update Payment")),1),s("div",Xn,[s("div",el,[s("label",tl,o(i.translate("Select payment method")),1),d(p,{class:"fct-update-payment-method-radio",modelValue:t.selectedPaymentMethod,"onUpdate:modelValue":a[0]||(a[0]=y=>t.selectedPaymentMethod=y),role:"radiogroup","aria-labelledby":"payment-methods-label"},{default:m(()=>[(l(!0),c(M,null,x(i.filteredPaymentMethods,(y,C)=>(l(),A(_,{value:y.slug,key:y.slug,border:"","aria-label":`${y.title} payment method`},{default:m(()=>[s("img",{src:y.logo,alt:`${y.title} logo`,class:N(y.slug),title:y.title},null,10,al),w(" "+o(y.title),1)]),_:2},1032,["value","aria-label"]))),128))]),_:1},8,["modelValue"])]),s("div",sl,o(i.translate("Update your payment method to continue with the subscription.")),1),s("div",il,[s("div",rl,[t.selectedPaymentMethod=="stripe"?(l(),c("div",nl,[d(v,{subscription:n.subscription,onClose:i.closeUpdatePaymentModal,onFetchSubscription:i.fetchSubscription,updateMethod:n.updateMethod},null,8,["subscription","onClose","onFetchSubscription","updateMethod"])])):g("",!0),t.selectedPaymentMethod=="paypal"?(l(),c("div",ll,[d(k,{subscription:n.subscription,onClose:i.closeUpdatePaymentModal,onFetchSubscription:i.fetchSubscription,updateMethod:n.updateMethod},null,8,["subscription","onClose","onFetchSubscription","updateMethod"])])):g("",!0)])])])]),_:1},8,["modelValue","title"])])}const dl=L(Jn,[["render",ol]]),cl={name:"TransactionPaymentMethod",props:{transaction:{type:Object,required:!0}},computed:{assetUrl(){return this.appVars.assets_path}}},ul={class:"fct-transaction-payment-method",role:"status"},ml={key:0,class:"flex gap-2 items-center"},hl=["src","alt"],_l=["aria-label"],pl=["aria-label"],fl=["src","alt"],bl={key:0,class:"text"},gl=["aria-label"],yl={key:2,class:"text text-capitalize","aria-label":"Payment method: {{ transaction.payment_method }}"};function vl(e,a,n,b,t,i){return l(),c("div",ul,[n.transaction.payment_method==="paypal"?(l(),c("div",ml,[s("img",{src:`${i.assetUrl}images/payment-methods/paypal-icon.svg`,alt:e.$t("PayPal logo")},null,8,hl),s("span",{class:"text-gray-700 text-sm","aria-label":e.$t("Transaction ID:")+n.transaction.vendor_charge_id||""},o(n.transaction.vendor_charge_id||""),9,_l)])):parseInt(n.transaction.card_last_4)?(l(),c("div",{key:1,class:"flex gap-2 items-center",role:"img","aria-label":e.$t("Credit card payment method")},[s("img",{src:`${i.assetUrl}images/credit-card/card.svg`,alt:e.$t("Credit Card logo")},null,8,fl),n.transaction.card_brand?(l(),c("span",bl,o(n.transaction.card_brand),1)):g("",!0),s("span",{class:"text","aria-label":e.$t("Credit card ending in")+" "+n.transaction.card_last_4}," **** "+o(n.transaction.card_last_4),9,gl)],8,pl)):(l(),c("span",yl,o(n.transaction.payment_method),1))])}const wl=L(cl,[["render",vl]]),kl={class:"fct-global-address-component"},Cl={class:"fct-global-address-component-row"},Pl={class:"city"},Sl={class:"postcode"},gt={__name:"AddressComponent",props:$t({use_additional_address_fields:{type:Boolean,required:!1,default:!1},validationErrors:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=Mt(e,"modelValue"),n=H([]),b=()=>{j.get("address-info/countries").then(C=>{n.value=C.data}).catch(C=>{console.log(C,"errors")}).finally(()=>{})},t=H({}),i=H(!1),u=H(!0),_=H(!0),p=H(r("Zip Code")),v=H(r("State")),k=C=>{if(a.state="",i.value=!0,!C){i.value=!1;return}if(t.value[C]){y(t.value[C]),i.value=!1;return}j.get("address-info/get-country-info",{country_code:C}).then($=>{t.value[C]=$,y($)}).catch($=>{console.log($,"errors")}).finally(()=>{i.value=!1})},f=H([]),y=C=>{var $,T,E,D,P,I;f.value=(C==null?void 0:C.states)||[],_.value=((T=($=C==null?void 0:C.address_locale)==null?void 0:$.state)==null?void 0:T.hidden)!==!0,u.value=f.value.length>1,p.value=((D=(E=C==null?void 0:C.address_locale)==null?void 0:E.postcode)==null?void 0:D.label)||r("Zip Code"),v.value=((I=(P=C==null?void 0:C.address_locale)==null?void 0:P.state)==null?void 0:I.label)||r("State")};return ne(()=>a.value.country,(C,$)=>{k(C)}),ie(()=>{b(),setTimeout(()=>{a.value.country&&k(a.value.country)},400)}),(C,$)=>(l(),c("div",kl,[d(pe,{class:N(e.validationErrors.hasOwnProperty("country")?"is-error":""),required:"",options:n.value,modelValue:a.value.country,"onUpdate:modelValue":$[0]||($[0]=T=>a.value.country=T),filterable:"",onOnChange:$[1]||($[1]=T=>{a.value.state="",k(T)}),clearable:!0,label:S(r)("Select Country")},null,8,["class","options","modelValue","label"]),d(Ht,{visible:!i.value&&_.value,accordion:"",class:"address_locale"},{default:m(()=>[u.value?(l(),A(pe,{key:0,filterable:"",modelValue:a.value.state,"onUpdate:modelValue":$[2]||($[2]=T=>a.value.state=T),options:f.value,label:S(r)(v.value),clearable:!0},null,8,["modelValue","options","label"])):(l(),A(R,{key:1,modelValue:a.value.state,"onUpdate:modelValue":$[3]||($[3]=T=>a.value.state=T),label:S(r)(v.value)},null,8,["modelValue","label"]))]),_:1},8,["visible"]),e.use_additional_address_fields?(l(),c(M,{key:0},[d(R,{modelValue:a.value.address_1,"onUpdate:modelValue":$[4]||($[4]=T=>a.value.address_1=T),class:N(e.validationErrors.hasOwnProperty("address_1")?"is-error":""),label:S(r)("Street address")},null,8,["modelValue","class","label"]),d(R,{modelValue:a.value.address_2,"onUpdate:modelValue":$[5]||($[5]=T=>a.value.address_2=T),label:S(r)("Apt, suite, unit")},null,8,["modelValue","label"])],64)):g("",!0),s("div",Cl,[s("div",Pl,[d(R,{modelValue:a.value.city,"onUpdate:modelValue":$[6]||($[6]=T=>a.value.city=T),class:N(e.validationErrors.hasOwnProperty("city")?"is-error":""),label:S(r)("City/Town")},null,8,["modelValue","class","label"])]),s("div",Sl,[d(R,{class:N(e.validationErrors.hasOwnProperty("postcode")?"is-error":""),required:"",modelValue:a.value.postcode,"onUpdate:modelValue":$[7]||($[7]=T=>a.value.postcode=T),label:S(r)(p.value)},null,8,["class","modelValue","label"])])])]))}},Al={name:"TransactionsTable",components:{AddressComponent:gt,MaterialInput:R,Badge:F,DynamicIcon:U,TransactionPaymentMethod:wl},props:{transactions:{type:Array,default:()=>[]},showTableHeader:{type:Boolean,default:!0}},data(){return{isEditingBillingAddressModal:!1,validationErrors:{},billingAddressData:{name:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",vat_tax_id:""},formFields:[{key:"name",label:r("Name/Business Name"),required:!0}],selectedTransaction:null,updatingAddress:!1,address_id:null}},methods:{translate:r,dateTimeI18:q,handleTransactionCommand(e,a){e==="edit_billing_address"&&(this.selectedTransaction=a,this.isEditingBillingAddressModal=!0)},fetchBillingAddress(){this.$get(`customer-profile/orders/${this.selectedTransaction.uuid}/billing-address`).then(e=>{this.billingAddressData=e.data,this.billingAddressData.address_1=e.data.address_1,this.billingAddressData.address_2=e.data.address_2,this.billingAddressData.city=e.data.city,this.billingAddressData.state=e.data.state,this.billingAddressData.postcode=e.data.postcode,this.billingAddressData.country=e.data.country,this.billingAddressData.name=e.data.name,this.billingAddressData.vat_tax_id=e.data.vat_tax_id,this.address_id=e.data.address_id}).catch(e=>{e.message&&this.handleError(e)}).finally(()=>{})},updateBillingAddress(){this.updatingAddress=!0,this.$put(`customer-profile/orders/${this.selectedTransaction.uuid}/billing-address`,{name:this.billingAddressData.name,address_1:this.billingAddressData.address_1,address_2:this.billingAddressData.address_2,city:this.billingAddressData.city,state:this.billingAddressData.state,postcode:this.billingAddressData.postcode,country:this.billingAddressData.country,vat_tax_id:this.billingAddressData.vat_tax_id,transaction_uuid:this.selectedTransaction.uuid,address_id:this.address_id}).then(e=>{this.handleSuccess(e.message),this.isEditingBillingAddressModal=!1,this.$emit("billing-address-updated",e.formatted_address)}).catch(e=>{this.handleError(e),this.validationErrors=e}).finally(()=>{this.updatingAddress=!1})},handleCloseModal(){this.isEditingBillingAddressModal=!1,this.selectedTransaction=null},getStatusText(e){switch(e){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");case"subscription":return r("Subscription");case"renewal":return r("Renewal");case"payment":return r("Payment");default:return O.headline(e)}}}},$l=["aria-label"],Ml=["datetime"],Dl=["innerHTML","aria-label"],Tl={class:"flex items-center gap-2 justify-between"},El=["href","aria-label"],Ll=["aria-label"],Il={class:"fct-customer-dashboard-add-address-form-wrap"},Vl={class:"fct-compact-form"},xl={class:"dialog-footer"};function Bl(e,a,n,b,t,i){const u=h("el-table-column"),_=h("Badge"),p=h("TransactionPaymentMethod"),v=h("DynamicIcon"),k=h("el-dropdown-item"),f=h("el-dropdown-menu"),y=h("el-dropdown"),C=h("el-table"),$=h("MaterialInput"),T=h("AddressComponent"),E=h("el-button"),D=h("el-dialog");return l(),c("div",null,[d(C,{data:n.transactions,"aria-label":e.$t("Transactions Table")},{default:m(()=>[d(u,{label:"#",width:150},{default:m(P=>[s("span",{class:"text truncate","aria-label":e.$t("Invoice Number")+" "+P.row.invoice_no},"#"+o(P.row.invoice_no),9,$l)]),_:1}),d(u,{label:e.$t("Date"),width:120},{default:m(P=>[s("time",{class:"text truncate",datetime:P.row.created_at},o(i.dateTimeI18(P.row.created_at)),9,Ml)]),_:1},8,["label"]),d(u,{label:e.$t("Amount"),width:"90"},{default:m(P=>[s("span",{class:"text",innerHTML:e.formatNumber(P.row.total,!0,!1,P.row.currency),"aria-label":e.$t("Amount")},null,8,Dl)]),_:1},8,["label"]),d(u,{label:e.$t("Status"),width:110},{default:m(P=>[d(_,{type:P.row.status,size:"small","aria-label":e.$t("Status")+": "+P.row.status},{default:m(()=>[w(o(i.getStatusText(P.row.status)),1)]),_:2},1032,["type","aria-label"])]),_:1},8,["label"]),d(u,{label:e.$t("Type"),width:100},{default:m(P=>[d(_,{type:P.row.order_type,size:"small","aria-label":e.$t("Order Type")+": "+P.row.order_type},{default:m(()=>[w(o(i.getStatusText(P.row.order_type)),1)]),_:2},1032,["type","aria-label"])]),_:1},8,["label"]),d(u,{label:e.$t("Payment Method"),"min-width":160},{default:m(P=>[d(p,{transaction:P.row},null,8,["transaction"])]),_:1},8,["label"]),d(u,{width:125},{default:m(P=>[s("div",Tl,[s("a",{href:P.row.receipt_url,target:"_blank",class:"underline-link-button","aria-label":e.$t("Download Receipt for Invoice")+" "+P.row.invoice_no,rel:"noopener noreferrer"},[d(v,{name:"Download",class:"w-4 h-4","aria-hidden":"true"}),w(" "+o(e.$t("Receipt")),1)],8,El),d(y,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:I=>i.handleTransactionCommand(I,P.row),"aria-label":e.$t("More Actions")},{dropdown:m(()=>[d(f,null,{default:m(()=>[d(k,{command:"edit_billing_address"},{default:m(()=>[w(o(i.translate("Edit Billing Address")),1)]),_:1})]),_:1})]),default:m(()=>[s("span",{class:"more-btn w-4 h-4 flex items-center justify-center cursor-pointer","aria-haspopup":"true","aria-label":e.$t("More Actions")},[d(v,{name:"More",class:"w-1","aria-hidden":"true"})],8,Ll)]),_:2},1032,["onCommand","aria-label"])])]),_:1})]),_:1},8,["data","aria-label"]),d(D,{modelValue:t.isEditingBillingAddressModal,"onUpdate:modelValue":a[2]||(a[2]=P=>t.isEditingBillingAddressModal=P),title:i.translate("Edit Billing Address"),"append-to-body":!0,"modal-class":"fct-transaction-billing-address-modal",onOpen:i.fetchBillingAddress,class:"fluent-cart-customer-profile-app fct-customer-root-container","aria-modal":"true",role:"dialog"},{footer:m(()=>[s("div",xl,[d(E,{type:"info",soft:"",onClick:i.handleCloseModal},{default:m(()=>[w(o(i.translate("Cancel")),1)]),_:1},8,["onClick"]),d(E,{type:"primary",loading:t.updatingAddress,onClick:i.updateBillingAddress},{default:m(()=>[w(o(i.translate("Update Address")),1)]),_:1},8,["loading","onClick"])])]),default:m(()=>[s("div",Il,[s("div",Vl,[(l(!0),c(M,null,x(t.formFields,(P,I)=>(l(),A($,{key:I,required:P.required,label:P.label,modelValue:t.billingAddressData[P.key],"onUpdate:modelValue":B=>t.billingAddressData[P.key]=B,class:N(t.validationErrors[P.key]?"is-error":"")},null,8,["required","label","modelValue","onUpdate:modelValue","class"]))),128)),d(T,{use_additional_address_fields:"",modelValue:t.billingAddressData,"onUpdate:modelValue":a[0]||(a[0]=P=>t.billingAddressData=P),validationErrors:t.validationErrors},null,8,["modelValue","validationErrors"]),d($,{label:i.translate("Vat Tax ID"),modelValue:t.billingAddressData.vat_tax_id,"onUpdate:modelValue":a[1]||(a[1]=P=>t.billingAddressData.vat_tax_id=P),class:N(t.validationErrors.vat_tax_id?"is-error":"")},null,8,["label","modelValue","class"])])])]),_:1},8,["modelValue","title","onOpen"])])}const yt=L(Al,[["render",Bl]]),Nl={name:"SingleSubscription",props:{subscription_uuid:String},components:{TransactionsTable:yt,IconButton:ee,UpdatePaymentInfos:dl,UpgradePlan:pt,DynamicIcon:U,Badge:ln,LicenseTable:ce},data(){return{subscription:null,loading:!0,cancelling:!1}},computed:{isCancelable(){var e,a;return!(((e=this.subscription)==null?void 0:e.bill_times)>1||((a=this.subscription)==null?void 0:a.status)==="canceled")},ArrowRight(){return mt}},methods:{dateTimeI18:q,fetchSubscription(){this.loading=!0,this.$get(`customer-profile/subscriptions/${this.subscription_uuid}`).then(e=>{this.subscription=e.subscription}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1})},pluralizeTranslate:Q,cancelSubscription(){this.cancelling=!0,this.$post(`customer-profile/subscriptions/${this.subscription.uuid}/cancel-auto-renew`,{method:this.subscription.current_payment_method}).then(e=>{this.$notify.success(e.message)}).catch(e=>{this.handleError(e)}).finally(()=>{this.cancelling=!1,this.fetchSubscription()})},subscriptionStatus(){var e,a,n;return(e=this.subscription)!=null&&e.overridden_status?(a=this.subscription)==null?void 0:a.overridden_status:(n=this.subscription)==null?void 0:n.status}},mounted(){this.fetchSubscription()}},Ul={class:"fct-customer-dashboard-single-subcription-wrap fct-customer-dashboard-layout-width",role:"main","aria-labelledby":"subscription-overview-title"},Hl={class:"fct-customer-dashboard-single-subscription"},Fl={class:"fct-customer-dashboard-breadcrumb mb-8"},Ol={key:0,class:"fct-renew-box mb-4"},ql={class:"text-center p-4"},Rl={class:"p-0 m-0 mb-3"},zl=["href","aria-label"],Yl={class:"p-0 m-0 mb-3"},jl=["href","aria-label"],Kl={class:"fct-single-order-box mb-11 lg:mb-6",role:"region","aria-labelledby":"subscription-details-title"},Wl={class:"fct-single-order-header"},Zl={id:"subscription-details-title",class:"title"},Gl={class:"fct-single-order-body"},Jl={class:"fct-single-order-box-inner"},Ql={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},Xl={class:"left-content"},eo={class:"fct-product-info-card"},to={class:"fct-product-info-card-inner"},ao={class:"product-info-content"},so={class:"title truncate-none"},io={class:"variation-title"},ro={class:"right-content !w-auto"},no={id:"cancel-popover-title",class:"sr-only"},lo={class:"flex justify-end gap-2"},oo=["aria-label"],co={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},uo={class:"left-content"},mo={class:"title"},ho=["aria-label","innerHTML"],_o={key:0,class:"fct-customer-dashboard-content-table-item border-0 pb-0"},po={class:"left-content"},fo={class:"title"},bo=["aria-label"],go={class:"fct-customer-dashboard-content-table-item border-0 pb-0"},yo={class:"left-content"},vo={class:"title"},wo=["aria-label"],ko=["aria-label"],Co={key:1},Po={class:"fct-single-order-footer mt-3"},So={class:"flex items-center gap-3"},Ao={key:1,class:"fct-single-order-box",role:"region","aria-labelledby":"licenses-title"},$o={class:"fct-single-order-header"},Mo={id:"licenses-title",class:"title"},Do={class:"fct-single-order-box",role:"region","aria-labelledby":"transactions-title"},To={class:"fct-single-order-header"},Eo={id:"transactions-title",class:"title"},Lo={class:"fct-customer-dashboard-table"},Io={key:1,"aria-live":"polite"};function Vo(e,a,n,b,t,i){var ue,me,he,_e;const u=h("el-breadcrumb-item"),_=h("el-breadcrumb"),p=h("el-alert"),v=h("Badge"),k=h("DynamicIcon"),f=h("IconButton"),y=h("el-button"),C=h("el-popover"),$=h("el-dropdown-item"),T=h("el-dropdown-menu"),E=h("el-dropdown"),D=h("UpgradePlan"),P=h("UpdatePaymentInfos"),I=h("router-link"),B=h("LicenseTable"),Z=h("TransactionsTable"),G=h("el-skeleton");return l(),c("div",Ul,[s("div",Hl,[s("div",Fl,[d(_,{"separator-icon":i.ArrowRight,role:"navigation","aria-label":e.$t("Breadcrumb")},{default:m(()=>[d(u,{class:"cursor-pointer",to:{path:"/subscriptions"}},{default:m(()=>[w(o(e.$t("Subscription Plans")),1)]),_:1}),d(u,{"aria-current":"page"},{default:m(()=>[w(o(e.$t("Overview")),1)]),_:1})]),_:1},8,["separator-icon","aria-label"])]),t.subscription?(l(),c(M,{key:0},[t.subscription.reactivate_url?(l(),c("div",Ol,[d(p,{type:"error",closable:!1,role:"alert"},{default:m(()=>[s("div",ql,[t.subscription.status==="expired"?(l(),c(M,{key:0},[s("p",Rl,o(e.$t("Your subscription has expired at %s. Please renew to keep things running smoothly.",i.dateTimeI18(t.subscription.expire_at))),1),s("a",{href:t.subscription.reactivate_url,class:"el-button el-button--primary","aria-label":e.$t("Renew Subscription Plan")},o(e.$t("Renew Subscription Plan")),9,zl)],64)):(l(),c(M,{key:1},[s("p",Yl,o(e.$t("Your subscription status is now: %s. Please reactivate to keep things running smoothly.",t.subscription.status)),1),s("a",{href:t.subscription.reactivate_url,class:"el-button el-button--primary","aria-label":e.$t("Reactivate Subscription Plan")},o(e.$t("Reactivate Subscription Plan")),9,jl)],64))])]),_:1})])):g("",!0),s("article",Kl,[s("header",Wl,[s("h1",Zl,o(e.$t("Subscription Plan Details")),1)]),s("div",Gl,[s("div",Jl,[s("div",Ql,[s("div",Xl,[s("div",eo,[s("div",to,[s("div",ao,[s("div",so,[w(o(t.subscription.title)+" ",1),d(v,{status:i.subscriptionStatus(),size:"small"},null,8,["status"])]),s("div",io,o(t.subscription.subtitle),1)])])])]),s("div",ro,[i.isCancelable?(l(),A(E,{key:0,trigger:"click","hide-on-click":!1,"popper-class":"fct-dropdown",role:"menu","aria-haspopup":"true","aria-expanded":"false"},{dropdown:m(()=>[d(T,{role:"menu"},{default:m(()=>[d($,{role:"menuitem"},{default:m(()=>[d(C,{"popper-class":"fluent-cart-customer-profile-app",trigger:"click",placement:"bottom",width:260,ref:"popoverRef",role:"dialog","aria-modal":"true","aria-labelledby":"cancel-popover-title"},{reference:m(()=>[s("span",{"aria-label":e.$t("Cancel Subscription")},o(e.$t("Cancel Subscription")),9,oo)]),default:m(()=>[s("h3",no,o(e.$t("Cancel Subscription")),1),s("div",null,o(e.$t("Confirm cancellation? Your access stays active until current billing cycle ends.")),1),s("div",lo,[d(y,{class:"el-button--x-small",text:"",onClick:a[0]||(a[0]=su=>e.$refs.popoverRef.hide()),"aria-label":e.$t("Cancel")},{default:m(()=>[w(o(e.$t("Cancel")),1)]),_:1},8,["aria-label"]),d(y,{class:"el-button--x-small",type:"primary",loading:t.cancelling,onClick:i.cancelSubscription,"aria-label":e.$t("Yes, Proceed")},{default:m(()=>[w(o(e.$t("Yes, Proceed")),1)]),_:1},8,["loading","onClick","aria-label"])])]),_:1},512)]),_:1})]),_:1})]),default:m(()=>[d(f,{tag:"button",size:"x-small",class:"simple-icon-btn","aria-label":e.$t("Subscription options")},{default:m(()=>[d(k,{name:"More",class:"w-[5px]","aria-hidden":"true"})]),_:1},8,["aria-label"])]),_:1})):g("",!0)])]),s("div",co,[s("div",uo,[s("div",mo,o(e.$t("Billing Terms")),1),s("span",{class:"text","aria-label":e.$t("Billing Terms"),innerHTML:t.subscription.payment_info},null,8,ho)])]),t.subscription.status=="active"||t.subscription.status=="trialing"?(l(),c("div",_o,[s("div",po,[s("div",fo,o(e.$t("Next Charge")),1),s("span",{class:"text","aria-label":e.$t("Next Charge")},o(i.dateTimeI18(t.subscription.next_billing_date)),9,bo)])])):g("",!0),s("div",go,[s("div",yo,[s("div",vo,o(e.$t("Payment Method")),1),s("span",{class:"text","aria-label":e.$t("Payment Method")},[(ue=t.subscription.billing_info.details)!=null&&ue.last_4?(l(),c("span",{key:0,"aria-label":e.$t("Credit Card ending in")+" "+((me=t.subscription.billing_info.details)==null?void 0:me.last_4)}," **** "+o((he=t.subscription.billing_info.details)==null?void 0:he.last_4),9,ko)):(l(),c("span",Co,o(t.subscription.current_payment_method),1))],8,wo)])])])]),s("footer",Po,[s("div",So,[(_e=t.subscription)!=null&&_e.can_upgrade?(l(),A(D,{key:0,"button-type":"primary","button-text":e.$t("Upgrade Plan"),variation_id:t.subscription.variation_id,order_hash:t.subscription.order.uuid},null,8,["button-text","variation_id","order_hash"])):g("",!0),t.subscription.can_update_payment_method?(l(),A(P,{key:1,subscription:t.subscription,buttonText:e.$t("Update Payment Method"),onFetch:i.fetchSubscription,updateMethod:!0},null,8,["subscription","buttonText","onFetch"])):g("",!0),d(I,{class:"underline-link-button",to:{name:"view_order",params:{order_id:t.subscription.order.uuid}},"aria-label":e.$t("View Order")},{default:m(()=>[w(o(e.$t("View Order")),1)]),_:1},8,["to","aria-label"])])])]),t.subscription.licenses&&t.subscription.licenses.length?(l(),c("article",Ao,[s("header",$o,[s("h2",Mo,o(i.pluralizeTranslate("Connected License","Connected Licenses",t.subscription.licenses.length)),1)]),d(B,{is_simple:!0,licenses:t.subscription.licenses,showTableHeader:!1},null,8,["licenses"])])):g("",!0),s("article",Do,[s("header",To,[s("h2",Eo,o(e.$t("Related Transactions")),1)]),s("div",Lo,[d(Z,{transactions:t.subscription.transactions,"show-table-header":!0},null,8,["transactions"])])])],64)):t.loading?(l(),c("div",Io,[d(G,{rows:5,animated:!0})])):g("",!0)])])}const xo=L(Nl,[["render",Vo]]),Bo={class:"fct-purchase-history-route-wrap"},No=Object.assign({name:"PurchaseHistoryRoute"},{__name:"PurchaseHistoryRoute",setup(e){return(a,n)=>{const b=h("router-view");return l(),c("div",Bo,[d(b)])}}}),Uo={name:"AccountDetails.vue",props:["profileDetails"],components:{MaterialInput:R},data(){return{accountDetailsDescId:"account-details-desc"}},methods:{translate:r}},Ho={class:"fct-form-container",role:"region","aria-labelledby":"account-details-heading"},Fo={class:"form-left"},Oo={id:"account-details-heading",class:"form-heading"},qo=["id"],Ro={class:"form-right"},zo={class:"sr-only"},Yo={class:"fct-compact-form",id:"account-details"};function jo(e,a,n,b,t,i){const u=h("MaterialInput");return l(),c("div",Ho,[s("div",Fo,[s("h3",Oo,o(i.translate("Account Details")),1),s("p",{id:t.accountDetailsDescId,class:"form-desc"},o(i.translate("Manage and update your personal information.")),9,qo)]),s("div",Ro,[s("span",zo,o(i.translate("Account Details")),1),s("div",Yo,[d(u,{"aria-describedby":t.accountDetailsDescId,label:i.translate("First Name"),modelValue:n.profileDetails.first_name,"onUpdate:modelValue":a[0]||(a[0]=_=>n.profileDetails.first_name=_)},null,8,["aria-describedby","label","modelValue"]),d(u,{"aria-describedby":t.accountDetailsDescId,label:i.translate("Last Name"),modelValue:n.profileDetails.last_name,"onUpdate:modelValue":a[1]||(a[1]=_=>n.profileDetails.last_name=_)},null,8,["aria-describedby","label","modelValue"]),d(u,{"aria-describedby":t.accountDetailsDescId,label:i.translate("Email"),disabled:"",modelValue:n.profileDetails.email,"onUpdate:modelValue":a[2]||(a[2]=_=>n.profileDetails.email=_)},null,8,["aria-describedby","label","modelValue"])])])])}const Ko=L(Uo,[["render",jo]]),Wo={name:"AddressModal",props:["modalAction","newAddressData","showModal","profileDetails","isEditAddress"],emits:["fetch"],components:{DynamicIcon:U,AddressComponent:gt,MaterialInput:R},data(){return{addressModalTitleId:"address-modal-title",validationErrors:{},addAddressLoading:!1,addNewAddressModalVisible:!1,localIsEditAddress:!1,localAddressData:{label:"",name:"",email:"",company_name:"",phone:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:""},formRules:{name:[r("Name is required.")],email:[r("Email is required.")],country:[r("Country is required.")],postcode:[r("Postcode is required.")]},formFields:[{key:"label",label:r("Address label e.g Home, Office"),required:!1},{key:"name",label:r("Name"),required:!0},{key:"email",label:r("Email"),required:!0},{key:"company_name",label:r("Company Name"),required:!1},{key:"phone",label:r("Phone"),required:!1}]}},watch:{showModal(){this.addNewAddressModalVisible=this.showModal},newAddressData:{handler(e){e&&this.isEditAddress&&(this.localAddressData={...e})},deep:!0,immediate:!0},isEditAddress:{handler(e){e||this.resetFormDataAndValidation()},immediate:!0}},methods:{translate:r,validateForm(){const e={};return Object.keys(this.formRules).forEach(a=>{(!this.localAddressData[a]||this.localAddressData[a].trim()==="")&&(e[a]={required:this.formRules[a][0]})}),this.validationErrors=e,Object.keys(e).length===0},addAddress(){if(this.validateForm()){this.addAddressLoading=!0;let e={type:this.modalAction,customer_id:this.profileDetails.id},a={...this.localAddressData,...e};this.$post("customer-profile/create-address",{type:a.type,label:a.label,name:a.name,phone:a.phone,email:a.email,country:a.country,state:a.state,address_1:a.address_1,address_2:a.address_2,city:a.city,postcode:a.postcode,company_name:a.company_name}).then(n=>{V.success(n),this.closeModal(),this.addAddressLoading=!1,this.resetFormDataAndValidation(),this.$emit("fetch")}).catch(n=>{n.status_code=="422"?V.validationErrors(n):V.error(n==null?void 0:n.data),this.validationErrors=n==null?void 0:n.data}).finally(()=>{this.addAddressLoading=!1})}else V.error(r("Please fill in all the required fields."))},editAddress(){if(this.validateForm()){this.addAddressLoading=!0;let e={...this.localAddressData};this.$post("customer-profile/edit-address",{id:e.id,label:e.label,name:e.name,phone:e.phone,email:e.email,country:e.country,state:e.state,address_1:e.address_1,address_2:e.address_2,city:e.city,postcode:e.postcode,type:e.type,company_name:e.company_name}).then(a=>{V.success(a),this.closeModal(),this.addAddressLoading=!1,this.resetFormDataAndValidation(),this.$emit("fetch")}).catch(a=>{V.error(a)}).finally(()=>{this.addAddressLoading=!1})}else V.error(r("Please fill in all the required fields."))},openModal(){this.addNewAddressModalVisible=!0},closeModal(){this.addNewAddressModalVisible=!1},getModalTitle(){return this.localIsEditAddress?r("Edit address"):this.modalAction==="billing"?r("Add new billing address"):this.modalAction==="shipping"?r("Add new shipping address"):r("Add new address")},handleAddNewAddressModal(e,a=null){e==="edit"&&a?(this.localAddressData={...a},this.localIsEditAddress=!0):(this.resetFormDataAndValidation(),this.localIsEditAddress=!1),this.addNewAddressModalVisible=!0},resetFormDataAndValidation(){Object.keys(this.localAddressData).forEach(e=>{this.localAddressData[e]=""}),this.validationErrors={}}}},Zo={class:"fct-customer-dashboard-add-address-form-wrap"},Go=["id"],Jo={class:"fct-compact-form"},Qo={id:"addressFormDescId",class:"sr-only"},Xo={key:0,class:"form-error-wrap",role:"alert","aria-live":"assertive","aria-atomic":"true"},ed={class:"dialog-footer"};function td(e,a,n,b,t,i){const u=h("el-button"),_=h("MaterialInput"),p=h("AddressComponent"),v=h("el-dialog");return l(),c(M,null,[d(u,{size:"small",onClick:a[0]||(a[0]=k=>i.handleAddNewAddressModal()),"aria-label":i.translate("Add New Address"),"aria-haspopup":"dialog"},{default:m(()=>[w(o(i.translate("Add New Address")),1)]),_:1},8,["aria-label"]),d(v,{modelValue:t.addNewAddressModalVisible,"onUpdate:modelValue":a[3]||(a[3]=k=>t.addNewAddressModalVisible=k),"append-to-body":!0,title:i.getModalTitle(),onClosed:i.resetFormDataAndValidation,class:"fluent-cart-customer-profile-app fct-customer-root-container",role:"dialog","aria-modal":"true","aria-labelledby":t.addressModalTitleId,"aria-describedby":e.addressFormDescId,tabindex:"-1"},{footer:m(()=>[s("div",ed,[d(u,{type:"info",soft:"",onClick:a[2]||(a[2]=k=>t.addNewAddressModalVisible=!1),"aria-label":i.translate("Cancel")},{default:m(()=>[w(o(i.translate("Cancel")),1)]),_:1},8,["aria-label"]),t.localIsEditAddress?(l(),A(u,{key:0,type:"primary",loading:t.addAddressLoading,onClick:i.editAddress,"aria-label":i.translate("Update Address")},{default:m(()=>[w(o(i.translate("Update Address")),1)]),_:1},8,["loading","onClick","aria-label"])):(l(),A(u,{key:1,type:"primary",loading:t.addAddressLoading,onClick:i.addAddress,"aria-label":i.translate("Add Address")},{default:m(()=>[w(o(i.translate("Add Address")),1)]),_:1},8,["loading","onClick","aria-label"]))])]),default:m(()=>[s("div",Zo,[s("h2",{id:t.addressModalTitleId,class:"sr-only"},o(i.getModalTitle()),9,Go),s("form",Jo,[(l(!0),c(M,null,x(t.formFields,(k,f)=>(l(),A(_,{key:f,required:k.required,label:k.label,modelValue:t.localAddressData[k.key],"onUpdate:modelValue":y=>t.localAddressData[k.key]=y,class:N(t.validationErrors[k.key]?"is-error":""),"aria-invalid":!!t.validationErrors[k.key],"aria-describedby":t.validationErrors[k.key]?`${k.key}-error`:null},null,8,["required","label","modelValue","onUpdate:modelValue","class","aria-invalid","aria-describedby"]))),128)),d(p,{use_additional_address_fields:"",modelValue:t.localAddressData,"onUpdate:modelValue":a[1]||(a[1]=k=>t.localAddressData=k),validationErrors:t.validationErrors},null,8,["modelValue","validationErrors"])]),s("div",Qo,o(i.translate("Form to add or edit address. Required fields are marked with an asterisk.")),1),Object.keys(t.validationErrors).length?(l(),c("div",Xo,[(l(!0),c(M,null,x(t.validationErrors,k=>(l(),c("p",null,o(k.required||k.email||k.max),1))),256))])):g("",!0)])]),_:1},8,["modelValue","title","onClosed","aria-labelledby","aria-describedby"])],64)}const ad=L(Wo,[["render",td]]),sd={name:"AddressSection",props:{profileDetails:Object,addressType:String,title:String,description:String},emits:["fetch","setAddressPrimary","deleteAddress"],data(){return{addressSectionTitleId:`address-section-title-${this.addressType}`,isEditAddress:!1,newAddressData:{label:"",name:"",email:"",phone:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:""}}},components:{DynamicIcon:U,Badge:F,AddressModal:ad},computed:{addresses(){return this.profileDetails[`${this.addressType}_address`]||[]},sortedAddresses(){return this.addresses.sort((e,a)=>a.is_primary-e.is_primary)}},methods:{translate:r,handleAddressCommand(e){const{action:a,data:n}=e;a==="edit"?(this.isEditAddress=!0,this.newAddressData={...n},this.$refs.modalRef.handleAddNewAddressModal("edit",n)):a==="default"?this.$emit("setAddressPrimary",n):a==="remove"&&de.confirm(r("Are you sure you want to delete this address?"),r("Warning"),{customClass:"fluent-cart-customer-profile-app",confirmButtonText:r("Yes, Delete!"),cancelButtonText:r("Cancel"),cancelButtonClass:"el-button--small",confirmButtonClass:"el-button--small",type:"warning"}).then(()=>{this.$emit("deleteAddress",n)}).catch(()=>{})}}},id=["aria-labelledby"],rd={class:"form-left"},nd=["id"],ld={class:"form-desc"},od={class:"form-right"},dd=["aria-label"],cd={key:0,class:"title"},ud={class:"text"},md={class:"fct-address-action"},hd=["aria-label"],_d={key:1,class:"text-sm text-system-mid",role:"status","aria-live":"polite"};function pd(e,a,n,b,t,i){const u=h("AddressModal"),_=h("Badge"),p=h("DynamicIcon"),v=h("el-dropdown-item"),k=h("el-dropdown-menu"),f=h("el-dropdown");return l(),c("div",{class:"fct-form-container",role:"region","aria-labelledby":t.addressSectionTitleId},[s("div",rd,[s("h3",{id:t.addressSectionTitleId,class:"form-heading"},o(n.title),9,nd),s("p",ld,o(n.description),1),d(u,{ref:"modalRef",modalAction:n.addressType,onFetch:a[0]||(a[0]=y=>e.$emit("fetch")),isEditAddress:t.isEditAddress,newAddressData:t.newAddressData,profileDetails:n.profileDetails},null,8,["modalAction","isEditAddress","newAddressData","profileDetails"])]),s("div",od,[i.addresses.length?(l(),c("ul",{key:0,class:"fct-customer-address-list",role:"list","aria-label":`${n.addressType} addresses`},[(l(!0),c(M,null,x(i.sortedAddresses,y=>(l(),c("li",{class:N(`fct-customer-address-block ${y.is_primary==="1"?"default-address":""}`),key:y.id,role:"listitem"},[y.label?(l(),c("div",cd,[w(o(y.label)+" ",1),y.is_primary==="1"?(l(),A(_,{key:0,"hide-icon":!0,highContrast:"",size:"small","aria-label":i.translate("Default")},{default:m(()=>[w(o(i.translate("Default")),1)]),_:1},8,["aria-label"])):g("",!0)])):g("",!0),s("p",ud,o(e.getAddress(y.formatted_address,"")),1),s("div",md,[d(f,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:i.handleAddressCommand},{dropdown:m(()=>[d(k,{role:"menu"},{default:m(()=>[d(v,{command:{action:"edit",data:y},role:"menuitem"},{default:m(()=>[w(o(i.translate("Edit")),1)]),_:2},1032,["command"]),y.is_primary!=="1"?(l(),c(M,{key:0},[d(v,{command:{action:"default",data:y},role:"menuitem"},{default:m(()=>[w(o(i.translate("Set as default")),1)]),_:2},1032,["command"]),d(v,{command:{action:"remove",data:y},class:"item-destructive",role:"menuitem"},{default:m(()=>[w(o(i.translate("Delete")),1)]),_:2},1032,["command"])],64)):g("",!0)]),_:2},1024)]),default:m(()=>[s("button",{class:"more-btn","aria-label":i.translate("Address options"),"aria-haspopup":"true","aria-expanded":"false"},[d(p,{name:"More","aria-hidden":"true"})],8,hd)]),_:2},1032,["onCommand"])])],2))),128))],8,dd)):(l(),c("div",_d,o(i.translate("No %1$s address found, please add a new address.",n.addressType)),1))])],8,id)}const vt=L(sd,[["render",pd]]),fd={name:"BillingAddress",props:["profileDetails"],emits:["fetch","setAddressPrimary","deleteAddress"],components:{AddressSection:vt}};function bd(e,a,n,b,t,i){const u=h("AddressSection");return l(),A(u,{profileDetails:n.profileDetails,addressType:"billing",title:e.$t("Billing Address"),description:e.$t("Provide or update the address where your billing statements and invoices will be sent."),onFetch:a[0]||(a[0]=_=>e.$emit("fetch")),onSetAddressPrimary:a[1]||(a[1]=_=>e.$emit("setAddressPrimary",_)),onDeleteAddress:a[2]||(a[2]=_=>e.$emit("deleteAddress",_))},null,8,["profileDetails","title","description"])}const gd=L(fd,[["render",bd]]),yd={name:"ShippingAddress",props:["profileDetails"],emits:["fetch","setAddressPrimary","deleteAddress"],components:{AddressSection:vt}};function vd(e,a,n,b,t,i){const u=h("AddressSection");return l(),A(u,{profileDetails:n.profileDetails,addressType:"shipping",title:e.$t("Shipping Address"),description:e.$t("Provide or update the address where your orders will be delivered."),onFetch:a[0]||(a[0]=_=>e.$emit("fetch")),onSetAddressPrimary:a[1]||(a[1]=_=>e.$emit("setAddressPrimary",_)),onDeleteAddress:a[2]||(a[2]=_=>e.$emit("deleteAddress",_))},null,8,["profileDetails","title","description"])}const wd=L(yd,[["render",vd]]),kd={name:"UserProfile",components:{DynamicIcon:U,Badge:F,MaterialInput:R,AddressComponent:Ft,AccountDetails:Ko,BillingAddress:gd,ShippingAddress:wd},data(){return{validationErrors:{},isProfileChanged:!1,originalProfileDetails:{},loading:!1,addAddressLoading:!1,profileDetails:null,billingAddress:null,shippingAddress:null,addNewAddressModalVisible:!1,isEditAddress:!1,modalAction:"billing",newEmail:"",emailConfirmationData:{},emailChangeTokenExpiry:""}},watch:{"profileDetails.first_name":{handler(e,a){this.checkProfileChanges()}},"profileDetails.last_name":{handler(e,a){this.checkProfileChanges()}}},methods:{translate:r,updateCustomerProfile(){this.loading=!0,this.$post("customer-profile/update",{first_name:this.profileDetails.first_name,last_name:this.profileDetails.last_name,email:this.profileDetails.email}).then(e=>{this.isProfileChanged=!1,V.success(e.message),this.fetch()}).catch(e=>{V.error(e)}).finally(()=>{this.loading=!1})},setAddressPrimary(e){let a=e;a.customer_id,this.$post("customer-profile/make-primary-address",{addressId:a.id,type:a.type}).then(n=>{V.success(n),this.fetch()}).catch(n=>{V.success(n)})},deleteAddress(e){let a=e;a.customer_id,this.$post("customer-profile/delete-address",{addressId:a.id}).then(n=>{V.success(n),this.fetch()}).catch(n=>{V.error(n)})},fetch(){this.loading=!0,this.$get("customer-profile/profile").then(e=>{var a,n;this.originalProfileDetails=JSON.parse(JSON.stringify(e.data)),this.profileDetails=e==null?void 0:e.data,this.newEmail=(a=e==null?void 0:e.data)==null?void 0:a.new_email,this.emailChangeTokenExpiry=(n=e==null?void 0:e.data)==null?void 0:n.email_change_token_expiry,this.isProfileChanged=!1}).finally(()=>{this.loading=!1})},editAddress(){if(this.validateForm()){this.addAddressLoading=!0;let e={...this.newAddressData};this.$post("customer-profile/edit-address",{id:e.id,label:e.label,name:e.name,phone:e.phone,email:e.email,country:e.country,state:e.state,address_1:e.address_1,address_2:e.address_2,city:e.city,postcode:e.postcode,type:e.type}).then(a=>{V.success(a),this.fetch(),this.addAddressLoading=!1}).catch(a=>{V.error(a)}).finally(()=>{this.addNewAddressModalVisible=!1,this.resetFormDataAndValidation()})}else V.error(r("Please fill in all the required fields."))},checkProfileChanges(){if(this.profileDetails&&this.originalProfileDetails&&Object.keys(this.originalProfileDetails).length>0){const e=this.profileDetails.first_name!==this.originalProfileDetails.first_name,a=this.profileDetails.last_name!==this.originalProfileDetails.last_name;this.isProfileChanged=e||a}}},mounted(){this.fetch()}},Cd={key:0,"aria-live":"polite","aria-hidden":"true",class:"border border-solid border-gray-outline rounded fct-customer-dashboard-layout-width"},Pd={class:"fct-form-container"},Sd={class:"form-left"},Ad={class:"form-right"},$d={class:"fct-form-container"},Md={class:"form-left"},Dd={class:"form-right"},Td={class:"fct-form-container"},Ed={class:"form-left"},Ld={class:"form-right"},Id={key:1,class:"fct-customer-dashboard-user-profile fct-customer-dashboard-layout-width","aria-live":"polite"},Vd={class:"fct-form-footer text-right"};function xd(e,a,n,b,t,i){const u=h("el-skeleton-item"),_=h("el-skeleton"),p=h("AccountDetails"),v=h("BillingAddress"),k=h("ShippingAddress"),f=h("el-button");return l(),c(M,null,[t.loading?(l(),c("div",Cd,[d(_,{class:"px-5 py-5",loading:t.loading,rows:2,animated:""},{template:m(()=>[s("div",Pd,[s("div",Sd,[d(u,{variant:"p",class:"w-[200px] mr-5"}),d(u,{variant:"p",class:"w-[240px] mr-5"})]),s("div",Ad,[d(u,{variant:"p",class:"w-[200px]"}),d(u,{variant:"p",class:"w-[300px]"})])]),s("div",$d,[s("div",Md,[d(u,{variant:"p",class:"w-[200px] mr-5"}),d(u,{variant:"p",class:"w-[240px] mr-5"})]),s("div",Dd,[d(u,{variant:"p",class:"w-[200px]"}),d(u,{variant:"p",class:"w-[300px]"})])]),s("div",Td,[s("div",Ed,[d(u,{variant:"p",class:"w-[200px] mr-5"}),d(u,{variant:"p",class:"w-[240px] mr-5"})]),s("div",Ld,[d(u,{variant:"p",class:"w-[200px]"}),d(u,{variant:"p",class:"w-[300px]"})])])]),_:1},8,["loading"])])):g("",!0),t.profileDetails&&!t.loading?(l(),c("div",Id,[d(p,{profileDetails:t.profileDetails},null,8,["profileDetails"]),t.profileDetails.not_a_customer?g("",!0):(l(),c(M,{key:0},[d(v,{profileDetails:t.profileDetails,onFetch:i.fetch,onSetAddressPrimary:i.setAddressPrimary,onDeleteAddress:i.deleteAddress},null,8,["profileDetails","onFetch","onSetAddressPrimary","onDeleteAddress"]),d(k,{profileDetails:t.profileDetails,onFetch:i.fetch,onSetAddressPrimary:i.setAddressPrimary,onDeleteAddress:i.deleteAddress},null,8,["profileDetails","onFetch","onSetAddressPrimary","onDeleteAddress"]),s("footer",Vd,[d(f,{type:"primary",size:"small",onClick:i.updateCustomerProfile,disabled:!t.isProfileChanged,"aria-label":i.translate("Save Profile")},{default:m(()=>[w(o(i.translate("Save Profile")),1)]),_:1},8,["onClick","disabled","aria-label"])])],64))])):g("",!0)],64)}const Bd=L(kd,[["render",xd]]),Nd={name:"SingleOrderDetails",props:{order_id:{type:[String,Number],required:!0}},watch:{order_id(){this.fetchOrder()}},components:{OrderTableLoader:W,TransactionsTable:yt,LicenseTable:ce,SubscriptionTable:ft,Badge:F,DownloadsTable:_t,BundleProducts:ct},data(){return{orderTitleId:"order-title",order:null,loading:!0,placeholderImage:window.fluentcart_customer_profile_vars.placeholder_image,sectionParts:{}}},computed:{ArrowRight(){return mt}},methods:{formatOrderItems:oe,orderBillingAddressUpdated(e){this.order.billing_address_text=e},getImage(e){return e.variant_image?e.variant_image:e.image?e.image:this.placeholderImage},fetchOrder(){this.$get("customer-profile/orders/"+this.order_id).then(e=>{this.order=e.order,this.order.order_items=this.formatOrderItems(e.order.order_items),e.section_parts&&(this.sectionParts=e.section_parts)}).catch(e=>{var a,n,b;if((a=e==null?void 0:e.data)!=null&&a.parent_order&&((b=(n=e==null?void 0:e.data)==null?void 0:n.parent_order)!=null&&b.uuid)){this.$router.push({name:"view_order",params:{order_id:e.data.parent_order.uuid}});return}this.handleError(e)}).finally(()=>{this.loading=!1})},pluralizeTranslate:Q,getStatusText(e){switch(e){case"completed":return r("Completed");case"paid":return r("Paid");case"active":return r("Active");case"publish":return r("Published");case"draft":return r("Draft");case"shipped":return r("Shipped");case"success":return r("Success");case"licensed":return r("Licensed");case"succeeded":return r("Succeeded");case"failed":return r("Failed");case"error":return r("Error");case"canceled":return r("Canceled");case"expired":return r("Expired");case"partially_paid":return r("Partially Paid");case"intended":return r("Intended");case"scheduled":return r("Scheduled");case"on-hold":return r("On Hold");case"pending":return r("Pending");case"unpaid":return r("Unpaid");case"warning":return r("Warning");case"processing":return r("Processing");case"future":return r("Future");case"inactive":return r("Inactive");case"dispute":return r("Dispute");case"disabled":return r("Disabled");case"beta":return r("Beta");case"subscription":return r("Subscription");case"renewal":return r("Renewal");case"payment":return r("Payment");case"unshipped":return r("Unshipped");default:return O.headline(e)}},translateNumber:z},mounted(){this.fetchOrder()}},Ud=["aria-labelledby","aria-busy"],Hd=["aria-label"],Fd=["id"],Od={key:0},qd={class:"fct-single-order-box",role:"region","aria-labelledby":"order-summary-title"},Rd=["innerHTML"],zd={class:"fct-single-order-body"},Yd={class:"fct-customer-dashboard-order-items","aria-labelledby":"order-summary-title"},jd={class:"fct-order-summary-wrap"},Kd={class:"fct-order-summary-header"},Wd={id:"order-summary-title",class:"fct-order-summary-header-title"},Zd=["aria-label"],Gd={class:"fct-order-summary-body"},Jd={class:"fct-order-summary-items",role:"list"},Qd={class:"fct-product-info-card"},Xd={class:"fct-product-info-card-inner"},ec={class:"media"},tc=["href","aria-label"],ac=["src","alt"],sc={class:"product-info-content"},ic={class:"title"},rc=["href","aria-label"],nc={key:0,class:"text-gray-600"},lc={class:"variation-title"},oc={key:0,class:"product-subscription-info flex flex-col gap-1 mt-1"},dc=["innerHTML","aria-label"],cc=["aria-label"],uc={key:0,class:"text-sm"},mc={key:0,class:"fct-order-summary-order-calculation"},hc={key:0,class:"tr"},_c={key:1,class:"tr"},pc={key:2,class:"tr"},fc={key:3,class:"tr"},bc={key:4,class:"tr"},gc={key:5,class:"tr"},yc={class:"fct-order-summary-footer"},vc={class:"fct-order-summary-footer-inner"},wc=["aria-level"],kc=["innerHTML"],Cc={key:0,class:"fct-single-order-box",role:"region","aria-labelledby":"subscription-title"},Pc={class:"fct-single-order-header"},Sc={id:"subscription-title",class:"title"},Ac=["innerHTML"],$c={key:1,class:"fct-single-order-box",role:"region","aria-labelledby":"downloads-title"},Mc={class:"fct-single-order-header"},Dc={id:"downloads-title",class:"title"},Tc=["innerHTML"],Ec={key:2,class:"fct-single-order-box",role:"region","aria-labelledby":"licenses-title"},Lc={class:"fct-single-order-header"},Ic={id:"licenses-title",class:"title"},Vc=["innerHTML"],xc={key:3,class:"fct-single-order-box",role:"region","aria-labelledby":"transactions-title"},Bc=["innerHTML"],Nc={class:"fct-single-order-header"},Uc={id:"transactions-title",class:"title"},Hc={class:"fct-customer-dashboard-table"},Fc=["innerHTML"],Oc={key:4,class:"fct-single-order-box pb-5 lg:pb-0",role:"region","aria-labelledby":"addresses-title"},qc={id:"addresses-title",class:"sr-only"},Rc={class:"fct-customer-dashboard-address mb-5 lg:mb-0","aria-labelledby":"billing-title"},zc={id:"billing-title",class:"title"},Yc=["innerHTML"],jc={class:"fct-customer-dashboard-address","aria-labelledby":"shipping-title"},Kc={id:"shipping-title",class:"title"},Wc=["innerHTML"],Zc=["innerHTML"],Gc={key:1,"aria-live":"polite"};function Jc(e,a,n,b,t,i){const u=h("el-breadcrumb-item"),_=h("el-breadcrumb"),p=h("Badge"),v=h("BundleProducts"),k=h("SubscriptionTable"),f=h("DownloadsTable"),y=h("LicenseTable"),C=h("TransactionsTable"),$=h("el-col"),T=h("el-row"),E=h("OrderTableLoader");return l(),c("div",{class:"fct-customer-dashboard-single-order-wrap",role:"main","aria-labelledby":t.orderTitleId,"aria-busy":t.loading},[s("div",{class:"fct-customer-dashboard-breadcrumb mb-4",role:"navigation","aria-label":e.$t("Breadcrumb navigation")},[d(_,{"separator-icon":i.ArrowRight},{default:m(()=>[d(u,{to:{name:"purchase-history"}},{default:m(()=>[w(o(e.$t("Purchase History")),1)]),_:1}),d(u,{"aria-current":"page"},{default:m(()=>{var D;return[w("#"+o((D=t.order)==null?void 0:D.invoice_no),1)]}),_:1})]),_:1},8,["separator-icon"])],8,Hd),t.order?(l(),c(M,{key:0},[s("h1",{id:t.orderTitleId,class:"sr-only"},[w(o(e.$t("Order Details"))+" ",1),t.order.invoice_no?(l(),c("span",Od,"#"+o(t.order.invoice_no),1)):g("",!0)],8,Fd),s("article",qd,[t.sectionParts.before_summary?(l(),c("div",{key:0,innerHTML:t.sectionParts.before_summary},null,8,Rd)):g("",!0),s("div",zd,[s("section",Yd,[s("div",jd,[s("header",Kd,[s("h2",Wd,o(e.$t("Summary")),1),t.order?(l(),c("div",{key:0,"aria-label":e.$t("Order status information"),class:"fct-order-status-badges"},[d(p,{type:t.order.payment_status},{default:m(()=>[w(o(i.getStatusText(t.order.payment_status)),1)]),_:1},8,["type"]),t.order.fulfillment_type=="physical"?(l(),c(M,{key:0},[d(p,{class:"ml-2",type:t.order.status},{default:m(()=>[w(o(i.getStatusText(t.order.status)),1)]),_:1},8,["type"]),d(p,{class:"ml-2",type:t.order.shipping_status},{default:m(()=>[w(o(i.getStatusText(t.order.shipping_status)),1)]),_:1},8,["type"])],64)):g("",!0)],8,Zd)):g("",!0)]),s("div",Gd,[s("ul",Jd,[(l(!0),c(M,null,x(t.order.order_items,(D,P)=>{var I;return l(),c("li",{key:P,class:"fct-order-summary-item",role:"listitem"},[s("div",Qd,[s("div",Xd,[s("div",ec,[s("a",{target:"_blank",href:D.url,rel:"noopener noreferrer","aria-label":e.$t("View product")+" "+D.title},[s("img",{src:i.getImage(D),alt:e.$t("Product image for")+" "+D.title,loading:"lazy"},null,8,ac)],8,tc)]),s("div",sc,[s("div",ic,[s("a",{target:"_blank",href:D.url,rel:"noopener noreferrer","aria-label":e.$t("View product")+" "+D.title},[D.quantity>1?(l(),c("span",nc,o(i.translateNumber(D.quantity))+" x",1)):g("",!0),w(" "+o(D.post_title),1)],8,rc)]),s("div",lc,o(D.title),1),D.meta_lines&&D.meta_lines.length>0?(l(),c("div",oc,[(l(!0),c(M,null,x(D.meta_lines,B=>(l(),c("span",{class:"block leading-none text-xs",innerHTML:B.label+": "+B.value,"aria-label":B.label+": "+B.value},null,8,dc))),256))])):g("",!0),(I=D==null?void 0:D.bundle_items)!=null&&I.length?(l(),A(v,{key:1,class:"!mt-2.5",product:D},null,8,["product"])):g("",!0)])])]),s("div",{class:"fct-order-total text-right","aria-label":e.$t("Subtotal for this item")},[w(o(e.formatNumber(D.subtotal))+" ",1),D.extra_amount?(l(),c("span",uc,[a[0]||(a[0]=s("br",null,null,-1)),w(" + "+o(e.formatNumber(D.extra_amount)),1)])):g("",!0)],8,cc)])}),128))]),t.order.manual_discount_total+t.order.coupon_discount_total>0||t.order.shipping_total>0||t.order.manual_discount_total+t.order.coupon_discount_total>0||t.order.tax_total>0?(l(),c("div",mc,[t.order.manual_discount_total+t.order.coupon_discount_total||t.order.subtotal>0?(l(),c("div",hc,[w(o(e.$t("Subtotal"))+" ",1),s("span",null,o(e.formatNumber(t.order.subtotal))+" "+o(parseInt(t.order.tax_behavior)==2?e.$t("(Inc. Tax)"):""),1)])):g("",!0),t.order.shipping_total>0?(l(),c("div",_c,[w(o(e.$t("Shipping"))+" ",1),s("span",null,o(e.formatNumber(t.order.shipping_total)),1)])):g("",!0),t.order.tax_total>0?(l(),c("div",pc,[w(o(e.$t("Tax"))+" "+o(t.order.tax_behavior==2?e.$t("(Included)"):e.$t("(Excluded)"))+" ",1),s("span",null,o(e.formatNumber(t.order.tax_total)),1)])):g("",!0),t.order.shipping_tax>0?(l(),c("div",fc,[w(o(e.$t("Shipping Tax"))+" "+o(t.order.tax_behavior==2?e.$t("(Included)"):e.$t("(Excluded)"))+" ",1),s("span",null,o(e.formatNumber(t.order.shipping_tax)),1)])):g("",!0),t.order.coupon_discount_total>0?(l(),c("div",bc,[w(o(e.$t("Coupon Discount"))+" ",1),s("span",null,"-"+o(e.formatNumber(t.order.coupon_discount_total)),1)])):g("",!0),t.order.manual_discount_total>0?(l(),c("div",gc,[w(o(e.$t("Upgrade Discount"))+" ",1),s("span",null,"-"+o(e.formatNumber(t.order.manual_discount_total)),1)])):g("",!0)])):g("",!0)]),s("footer",yc,[s("div",vc,[s("div",{class:"tr","aria-level":e.$t("Total amount for the order")},[w(o(e.$t("Total"))+" ",1),s("span",null,o(e.formatNumber(t.order.total_amount)),1)],8,wc)])])])])]),t.sectionParts.after_summary?(l(),c("div",{key:1,innerHTML:t.sectionParts.after_summary},null,8,kc)):g("",!0)]),t.order.subscriptions&&t.order.subscriptions.length&&t.order.payment_status!=="pending"?(l(),c("article",Cc,[s("header",Pc,[s("h2",Sc,o(e.$t("Subscription Plan")),1)]),d(k,{hideHeader:!0,subscriptions:t.order.subscriptions},null,8,["subscriptions"]),t.sectionParts.after_subscriptions?(l(),c("div",{key:0,innerHTML:t.sectionParts.after_subscriptions},null,8,Ac)):g("",!0)])):g("",!0),t.order.downloads&&Object.entries(t.order.downloads).length&&t.order.payment_status!=="pending"?(l(),c("article",$c,[s("header",Mc,[s("h2",Dc,o(i.pluralizeTranslate("Download","Downloads",Object.entries(t.order.downloads).length)),1)]),d(f,{"show-table-header":!1,downloads:t.order.downloads},null,8,["downloads"]),t.sectionParts.after_downloads?(l(),c("div",{key:0,innerHTML:t.sectionParts.after_downloads},null,8,Tc)):g("",!0)])):g("",!0),t.order.licenses&&t.order.licenses.length?(l(),c("article",Ec,[s("header",Lc,[s("h2",Ic,o(i.pluralizeTranslate("License","Licenses",t.order.licenses.length)),1)]),d(y,{licenses:t.order.licenses,is_simple:!0,showTableHeader:!1},null,8,["licenses"]),t.sectionParts.after_licenses?(l(),c("div",{key:0,innerHTML:t.sectionParts.after_licenses},null,8,Vc)):g("",!0)])):g("",!0),t.order.transactions&&t.order.transactions.length?(l(),c("article",xc,[t.sectionParts.before_transactions?(l(),c("div",{key:0,innerHTML:t.sectionParts.before_transactions},null,8,Bc)):g("",!0),s("header",Nc,[s("h2",Uc,o(e.$t("Related Transactions")),1)]),s("div",Hc,[d(C,{transactions:t.order.transactions,"show-table-header":!0,onBillingAddressUpdated:i.orderBillingAddressUpdated},null,8,["transactions","onBillingAddressUpdated"])]),t.sectionParts.after_transactions?(l(),c("div",{key:1,innerHTML:t.sectionParts.after_transactions},null,8,Fc)):g("",!0)])):g("",!0),t.order.billing_address_text||t.order.shipping_address_text?(l(),c("article",Oc,[s("h2",qc,o(e.$t("Order addresses")),1),d(T,{gutter:30},{default:m(()=>[d($,{md:12,sm:24},{default:m(()=>[s("section",Rc,[s("h3",zc,o(e.$t("Billing Address")),1),s("div",{class:"text",innerHTML:t.order.billing_address_text},null,8,Yc)])]),_:1}),t.order.fulfillment_type=="physical"?(l(),A($,{key:0,md:12,sm:24},{default:m(()=>[s("section",jc,[s("h3",Kc,o(e.$t("Shipping Address")),1),s("div",{class:"text",innerHTML:t.order.shipping_address_text},null,8,Wc)])]),_:1})):g("",!0)]),_:1})])):g("",!0),t.sectionParts.end_of_order?(l(),c("div",{key:5,innerHTML:t.sectionParts.end_of_order},null,8,Zc)):g("",!0)],64)):t.loading?(l(),c("div",Gc,[d(E,{class:"mb-4","rows-range":[1,2,3]}),d(E,{class:"mb-4","rows-range":[1,2]}),d(E,{"rows-range":[1,2,3]})])):g("",!0)],8,Ud)}const Qc=L(Nd,[["render",Jc]]),Xc={class:"fct-customer-app"},eu=Object.assign({name:"CustomerDashboardApp"},{__name:"App",setup(e){return(a,n)=>{const b=h("router-view");return l(),c("div",Xc,[d(b)])}}});function tu(e){e.component(J.name,J),e.component(we.name,we),e.component(ke.name,ke),e.component(Ce.name,Ce),e.component(fe.name,fe),e.component(Pe.name,Pe),e.component(be.name,be),e.component(Se.name,Se),e.component(ge.name,ge),e.component(Ae.name,Ae),e.component($e.name,$e),e.component(Me.name,Me),e.component(De.name,De),e.component(Te.name,Te),e.component(Ee.name,Ee),e.component(Le.name,Le),e.component(Ie.name,Ie),e.component(Ve.name,Ve),e.component(xe.name,xe),e.component(Be.name,Be),e.component(ye.name,ye),e.component(Ne.name,Ne),e.component(Ue.name,Ue),e.component(He.name,He),e.component(Fe.name,Fe),e.component(Oe.name,Oe),e.component(qe.name,qe),e.component(Re.name,Re),e.component(ze.name,ze),e.component(Ye.name,Ye),e.component(je.name,je),e.component(Ke.name,Ke),e.component(We.name,We),e.component(Ze.name,Ze),e.component(Ge.name,Ge),e.component(Je.name,Je),e.component(Qe.name,Qe),e.component(Xe.name,Xe),e.component(et.name,et),e.component(tt.name,tt),e.component(at.name,at),e.component(st.name,st),e.component(it.name,it),e.component(rt.name,rt),e.component(nt.name,nt),e.component(lt.name,lt),e.component(ve.name,ve),e.component(ot.name,ot),e.config.globalProperties.$notify=J,e.config.globalProperties.$confirm=de.confirm,e.config.globalProperties.$message=Ot}const au=[{path:"/",name:"dashboard",component:Na,meta:{active_menu:"dashboard",title:"dashboard"}},{path:"/purchase-history",name:"purchase-history",component:os,meta:{active_menu:"purchase-history",title:"Purchase History"}},{path:"/order",component:No,children:[{name:"view_order",path:":order_id",component:Qc,props:!0,meta:{active_menu:"purchase-history",title:"View Order"}}]},{path:"/subscriptions",name:"subscriptions",component:an,meta:{active_menu:"subscriptions",title:"Subscriptions"}},{name:"view_subscription",path:"/subscription/:subscription_uuid",component:xo,props:!0,meta:{active_menu:"subscriptions",title:"View Subscription"}},{path:"/downloads",name:"downloads",component:ri,meta:{active_menu:"downloads",title:"Downloads"}},{path:"/licenses",name:"licenses",component:Rs,meta:{active_menu:"licenses",title:"Licenses"}},{name:"manage_license",path:"/licenses/:license_key/view",component:yr,props:!0,meta:{active_menu:"licenses",title:"Manage License"}},{name:"profile",path:"/profile",component:Bd,meta:{active_menu:"profile",title:"Profile"}}],X=xt({routes:au,history:Bt(window.fluentcart_customer_profile_vars.app_slug)});X.afterEach(e=>{var n;const a=(n=e.meta)==null?void 0:n.active_menu;if(document.querySelectorAll(".fct-customer-navs li").forEach(b=>{b.classList.remove("active_customer_menu")}),a){const b=document.querySelector(".fct-customer-nav-item-"+a);b&&b.classList.add("active_customer_menu")}});const se=document.querySelectorAll("[data-fluent-cart-customer-profile-app]");if(se&&se.length>0){const e=se[0],a=Dt({});tu(a),a.config.globalProperties.$notify=J,a.config.globalProperties.$confirm=de.confirm,a.config.globalProperties.appVars=window.fluentcart_customer_profile_vars,a.directive("loading",zt),a.mixin({methods:{$get:j.get,$post:j.post,$put:j.put,$del:j.delete,formatNumber(t,i=!0,u=!1){if(!t&&u)return"";const _=window.fluentcart_customer_profile_vars.shop,p=_.currency_sign||"",v=_.currency_position;let k=window.fluentcart_customer_profile_vars.wp_locale.replace("_","-");const f=_.decimal_separator||null;if(f?k=f==="comma"?"de-DE":"en-US":k="en-US",t?t=(t/100).toFixed(2):t="0.00",!i)return t;let y=new Intl.NumberFormat(k,{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return y=z(y),i?v==="before"?`${p}${y}`:`${y}${p}`:y},$t:r,handleError(t){let i="";typeof t=="string"?i=t:t&&t.message&&(i=t.message),i||(i="Something is wrong!"),this.$notify({type:"error",title:"Error",offset:30,message:i,dangerouslyUseHTMLString:!0,duration:1e3})},handleSuccess(t){let i="Success";typeof t=="string"?i=t:t&&t.message?i=t.message:i=convertToText(t),i||(i="Success!"),this.$notify({type:"success",title:"Success",offset:30,message:i,dangerouslyUseHTMLString:!0,duration:1e3})},registerCopyAction(){Tt(()=>{document.querySelectorAll(".copyable-content").forEach(u=>{u.addEventListener("click",function(){const _=this.textContent;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(_).then(()=>{}).catch(p=>{console.error("Failed to copy text: ",p),i(_)}):i(_)})});function i(u){let _=document.createElement("input");_.value=u,document.body.appendChild(_),_.select(),_.setSelectionRange(0,99999);try{document.execCommand("copy")}catch(p){console.error("Fallback: Could not copy text: ",p)}document.body.removeChild(_)}})},getAddress(t,i="billing",u=!1){if(!t)return"";let _=[];return!u&&t.name&&_.push(t.name),t.company_name&&_.push(t.company_name),t.address_1&&_.push(t.address_1),t.address_2&&_.push(t.address_2),t.city&&_.push(t.city),t.state&&_.push(t.state),t.postcode&&_.push(t.postcode),t.country&&_.push(t.country),t.phone&&_.push(t.phone),_.join(", ")||"No "+i+" address provided"},readableFileSize(t){if(!t&&t!==0)return"";const i=["Bytes","KB","MB","GB","TB"],u=Math.floor(Math.log2(t)/10);return`${+(t/1024**u).toFixed(2)} ${i[u]}`},formatDate:Nt}});const n=window.fluentcart_customer_profile_vars.el_strings,b=window.fluentcart_customer_profile_vars.datei18;n.el.datepicker.weeks=Object.values(b.weekdaysShort),n.el.datepicker.months=Object.values(b.monthsShort),a.use(Yt,{locale:n}),a.use(X).component("app",eu).mount(e)}document.addEventListener("DOMContentLoaded",()=>{let e=window.fluentcart_customer_profile_vars.app_url;document.querySelectorAll("a.fct_route").forEach(a=>{a.addEventListener("click",n=>{const b=a.getAttribute("href");if(!b)return;const t=b.replace(e,"");try{if(X.resolve(t).matched.length>0)return n.preventDefault(),X.push(t),!0}catch(i){console.error("Navigation error:",i)}})})});
