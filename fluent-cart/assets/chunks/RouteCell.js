var re=Object.defineProperty;var ce=(t,a,e)=>a in t?re(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var q=(t,a,e)=>ce(t,typeof a!="symbol"?a+"":a,e);import{M as ue}from"./Model.js";import{a as p,c as r,o as s,f as o,e as v,r as x,d,t as g,w as m,g as $,u as B,F as S,h as w,X as de,N as he,i as T,n as I,b as _,m as j,j as R,q as z,D as me,Q as W,y as te,z as ae,S as fe,R as le,x as E,U as ge,a1 as pe,K as Q}from"./vue.esm-bundler.js";import{S as F,I as D,T as se}from"./Badge.js";import{R as G}from"./Rest.js";import{a as H,u as be}from"./Str.js";import{U as K}from"./Url.js";import{t as N,A as ve,a as Y}from"./Translator.js";import{d as L}from"./dayjs.min.js";import{u as ye,t as _e}from"./timezone.js";import{n as M}from"./Notify.js";import{_ as P}from"./DynamicIcon.js";import{_ as O}from"./_plugin-vue_export-helper.js";import{v as Ce,E as ke}from"./index.js";import{U as $e}from"./Utils.js";import{A as Se}from"./Arr.js";const Te={name:"ProFeatureNotice",methods:{translate:N},components:{DynamicIcon:P},props:{title:{type:String},text:{type:String}}},Ae={class:"fct-pro-feature-notice-wrap"},Fe={class:"fct-pro-feature-content"},Ve={class:"fct-pro-feature-icon"},we={key:0,class:"fct-pro-feature-title"},Pe={key:1,class:"fct-pro-feature-text"};function xe(t,a,e,n,i,l){const u=p("DynamicIcon"),h=p("el-button");return s(),r("div",Ae,[o("div",Fe,[o("div",Ve,[d(u,{name:"Crown"})]),e.title?(s(),r("h4",we,g(e.title),1)):v("",!0),e.text?(s(),r("p",Pe,g(e.text),1)):v("",!0),x(t.$slots,"default"),d(h,{type:"primary",tag:"a",href:"https://fluentcart.com/discount-deal",target:"_blank"},{default:m(()=>[d(u,{name:"Crown"}),$(" "+g(l.translate("Upgrade to Pro")),1)]),_:1})])])}const Ie=O(Te,[["render",xe]]),Ne={class:"fluent-cart-admin-pages"},Oe={class:"fct-pro-feature-title"},De=["innerHTML"],Ue={key:0,class:"fct-feature-list"},Ee=["innerHTML"],ze={__name:"Features",props:{featureName:String,featureDescription:String,features:Array,onClose:Function},setup(t){return(a,e)=>(s(),r("div",Ne,[d(Ie,null,{default:m(()=>[o("h4",Oe,g(B(N)("%s requires FluentCart Pro",t.featureName)),1),t.featureDescription?(s(),r("p",{key:0,class:"fct-pro-feature-text",innerHTML:t.featureDescription},null,8,De)):v("",!0)]),_:1}),t.features.length?(s(),r("ul",Ue,[(s(!0),r(S,null,w(t.features,n=>(s(),r("li",{key:n,innerHTML:n},null,8,Ee))),128))])):v("",!0)]))}};class Be{constructor(){q(this,"$message",Ce);q(this,"duration",1e3)}success(a){this.show(a,"success")}error(a){this.show(a,"error")}info(a){this.show(a,"info")}show(a,e="success",n=40,i=1e3){this.$message({type:e,offset:n,message:a,dangerouslyUseHTMLString:!0,duration:i??this.duration})}showFeaturesCTA(a,e,n,i){let l=null;i&&(l=i.appContext),ke({title:N("Pro Feature"),message:de(ze,{featureName:a,featureDescription:e,features:n}),customClass:"fluent-cart-pro-cta",showCancelButton:!1,showConfirmButton:!1,showFooter:!1,showClose:!0},l)}}const je=new Be;class sl extends ue{constructor(e={}){super();q(this,"data",{callbacks:{onDataLoaded:null},tableData:[],search:"",advanceFilters:[[]],searching:!1,selectedView:"",sorting:{sortBy:"id",sortType:"DESC"},paginate:{current_page:1,per_page:10,last_page:1,total:0,from:1,to:10},filterType:"simple",columns:[],loading:!1,inputRef:T(null),nextPageCount:10,user_tz:null,showDeleteBulkAction:!1});he(()=>{this.setupInitialData(),L.extend(ye),L.extend(_e),this.data.user_tz=L.tz.guess(),this.data.vueInstance=e.instance,e.fetch!==!1&&this.fetch()})}onDataLoaded(e){this.data.callbacks.onDataLoaded=e}setupInitialData(){this.setupInitialTab(),this.setupInitialColumnVisibility(),this.setupInitialFilterType(),this.setupInitialAdvanceFilter(),this.setupInitialSearch(),this.setupInitialPagination()}setupInitialSearch(){this.isRouteSearchApplied()&&(this.data.search=this.isRouteSearchApplied(),this.data.searching=!0)}setupInitialPagination(){const e=F.get(this.getPerPageStorageName()),n=F.get(this.getCurrentPageStorageName());this.data.paginate.per_page=parseInt(e)||10,this.data.paginate.current_page=parseInt(n)||1}setupInitialTab(){var u;const n=(u=H().query.active_view)==null?void 0:u.toString(),i=this.getTabsCount()?this.getTabs():{};if(n&&i.hasOwnProperty(n)){this.data.selectedView=n;return}const l=F.get(this.getTabStorageName());i.hasOwnProperty(l)?this.data.selectedView=l:this.data.selectedView=this.getDefaultView()}handleTabChanged(e){e!==this.data.selectedView&&(this.data.selectedView=e,this.data.paginate.current_page=1,this.setCurrentPage(1),F.set(this.getTabStorageName(),this.data.selectedView),K.pushToVueUrl(null,{active_view:this.data.selectedView}),this.fetch())}getSelectedTab(){return this.data.selectedView}setupInitialColumnVisibility(){let e=F.get(this.getColumnStorageName());if(Array.isArray(e))this.data.columns=e;else{let n=[];for(let i of this.getToggleableColumns())n.push(i.value);this.data.columns=n}}isSearching(){return this.data.searching!==!1}openSearch(){this.data.searching=!0,F.set(this.getToggleSearchingStorageName(),this.data.searching),this.fetch()}closeSearch(){this.data.searching=!1,this.data.search="",F.set(this.getToggleSearchingStorageName(),this.data.searching),this.fetch()}showBulkDeleteAction(e=null){this.data.showDeleteBulkAction=e,F.set(this.getDeleteBulkActionStorageName(),this.data.showDeleteBulkAction)}useFullWidthSearch(){return!1}handleSortChange(){this.fetch()}isUsingSimpleFilter(){return this.data.filterType==="simple"}setupInitialFilterType(){if(!this.isProActive()){this.data.filterType="simple";return}(this.isRouteActiveViewApplied()||this.isRouteSearchApplied())&&(this.data.filterType="simple");const e=F.get(this.getFilterTypeStorageName());if(["simple","advanced"].includes(e)){if(e==="advanced"&&!this.isAdvanceFilterEnabled())return;this.data.filterType=e}const n=F.get(this.getToggleSearchingStorageName());n&&(this.data.searching=n);const i=F.get(this.getDeleteBulkActionStorageName());i&&(this.data.showDeleteBulkAction=i)}onFilterTypeChanged(e){e==="advanced"&&(this.data.searching=!1,this.data.search=""),e==="simple"&&this.fetch(),F.set(this.getFilterTypeStorageName(),this.data.filterType)}setupInitialAdvanceFilter(){let e=F.get(this.getAdvancedFilterStorageName());typeof e=="string"&&(e=[[]]),this.data.advanceFilters=e}isProActive(){return ve.get("app_config.isProActive")}applyAdvancedFilter(e=!1){if(!this.isProActive()){e||je.showFeaturesCTA(N("Advanced Filter"),N("Advanced filter is only available in pro version"),[],this.data.vueInstance),this.storeAdvanceFilter();return}this.setCurrentPage(1),this.fetch(),this.storeAdvanceFilter()}storeAdvanceFilter(){F.set(this.getAdvancedFilterStorageName(),this.data.advanceFilters)}isUsingAdvanceFilter(){return this.data.filterType==="advanced"}addAdvanceFilterGroup(){this.data.advanceFilters.push([])}removeAdvanceFilterGroup(e){this.data.advanceFilters.length>1&&this.data.advanceFilters.splice(e,1),this.storeAdvanceFilter()}clearAdvanceFilter(){this.data.advanceFilters=[[]],this.applyAdvancedFilter()}getAdvanceFilterOptions(){return null}isAdvanceFilterEnabled(){return this.getAdvanceFilterOptions()!==null}buildQueryParams(){const e={filter_type:this.data.filterType,per_page:this.data.paginate.per_page,page:this.data.paginate.current_page,sort_by:this.data.sorting.sortBy,sort_type:this.data.sorting.sortType,with:this.with(),scopes:this.scopes()};return this.isUsingAdvanceFilter()?e.advanced_filters=JSON.stringify(this.data.advanceFilters):(e.search=this.data.search,e.active_view=this.data.selectedView),e}search(){K.pushToVueUrl(null,{search:this.data.search}),this.fetch()}fetch(){this.data.loading=!0;let e=this.buildQueryParams();e.user_tz=this.data.user_tz,G.get(this.getFetchUrl(),e).then(n=>{const i=this.parseResponse(n);this.data.tableData=i.data,this.data.paginate.total=i.total,this.data.paginate.last_page=i.last_page,this.data.paginate.from=i.from,this.data.paginate.to=i.to,this.data.loading=!1,this.data.nextPageCount=this.guessNextPageCount(i),typeof this.data.callbacks.onDataLoaded=="function"&&this.data.callbacks.onDataLoaded(n)}).catch(n=>{var i;n.status_code=="422"?M.validationErrors(n):M.error((i=n.data)==null?void 0:i.message),this.data.tableData=[]}).finally(()=>{this.data.loading=!1})}getTableData(){return this.data.tableData}isLoading(){return this.data.loading===!0}getDefaultView(){return"all"}handleColumnVisibilityChange(){F.set(this.getColumnStorageName(),this.data.columns)}handlePerPageChange(){F.set(this.getPerPageStorageName(),this.data.paginate.per_page),this.fetch()}handlePageChange(){this.fetch(),this.setCurrentPage()}setCurrentPage(e){F.set(this.getCurrentPageStorageName(),e||this.data.paginate.current_page)}getCurrentPage(){F.get(this.getCurrentPageStorageName())}getColumnStorageName(){return`${this.getTableName()}_columns`}getTabStorageName(){return`${this.getTableName()}_tab`}getFilterTypeStorageName(){return`${this.getTableName()}_filter_type`}getAdvancedFilterStorageName(){return`${this.getTableName()}_advanced_filter`}getPerPageStorageName(){return`${this.getTableName()}_per_page`}getCurrentPageStorageName(){return`${this.getTableName()}_current_page`}getToggleSearchingStorageName(){return`${this.getTableName()}_toggle_searching`}getDeleteBulkActionStorageName(){return`${this.getTableName()}_delete_bulk_action`}isColumnVisible(e){return this.data.columns.includes(e)}getSearchHint(){throw new Error("Override getSearchHint method")}getFetchUrl(){throw new Error("Override getFetchUrl method")}getTabs(){throw new Error("Override getTabs method")}getTabsCount(){return this.getTabs()===null?0:Object.values(this.getTabs()).length}getToggleableColumns(){throw new Error("Override getToggleableColumns method")}getSortableColumns(){throw new Error("Override getSortableColumns method")}getTableName(){throw new Error("Override getTableName method")}parseResponse(e){throw new Error("Override parseResponse method")}with(){return[]}scopes(){return[]}isRouteActiveViewApplied(){return H().query.active_view||!1}isRouteSearchApplied(){return H().query.search||!1}guessNextPageCount(e){const{total:n,to:i,per_page:l,current_page:u,last_page:h}=e;if(u>=h)return 1;const c=n-i;return Math.max(1,Math.min(l,c))}get nextPageCount(){return this.data.nextPageCount}guessTitle(){let e=this.getTableName();return e=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase(),e=e.replace(/_?table$/,""),e.split("_").map(n=>n.charAt(0).toLowerCase()+n.slice(1)).join(" ")}isFiltering(){return this.isUsingAdvanceFilter()?(this.data.advanceFilters||[]).some(e=>Array.isArray(e)&&e.length>0)?"advanced":!1:this.data.search!==""?"search":this.data.selectedView!=="all"?"tab":!1}emptyMessageFiltered(e){return e==="search"||e==="tab"?N("No %s found based on your search",this.guessTitle()):N("No %s found based on your filter",this.guessTitle())}getEmptyMessage(){return N("No %s found",this.guessTitle())}get emptyMessage(){const e=this.isFiltering();if(e)return this.emptyMessageFiltered(e);this.getEmptyMessage()}getCustomColumns(){return{}}}const qe={name:"Card",props:{border:{type:Boolean}}};function Me(t,a,e,n,i,l){return s(),r("div",{class:I(`fct-card ${e.border?"fct-card-border":""}`)},[x(t.$slots,"default")],2)}const nl=O(qe,[["render",Me]]),Re={name:"CardHeader",components:{DynamicIcon:P},props:{title:{type:String},text:{type:String},border_bottom:{type:Boolean},icon:{type:String},title_size:{type:String},img:{type:String}}},He={key:0,class:"flex-1"},Le=["src"],Ge={key:1,class:"fct-card-header-text"},We={key:1,class:"fct-card-header-actions"};function Qe(t,a,e,n,i,l){const u=p("dynamic-icon");return s(),r("div",{class:I(`fct-card-header ${e.border_bottom?"border-bottom":""}`)},[e.title||e.text||t.$slots.title?(s(),r("div",He,[e.title||e.text?(s(),r(S,{key:0},[e.title?(s(),r("h2",{key:0,class:I(`fct-card-header-title ${e.title_size?"is-"+e.title_size:""}`)},[e.icon?(s(),_(u,{key:0,name:e.icon},null,8,["name"])):v("",!0),e.img?(s(),r("img",{key:1,src:e.img,alt:""},null,8,Le)):v("",!0),$(" "+g(e.title),1)],2)):v("",!0),e.text?(s(),r("p",Ge,g(e.text),1)):v("",!0)],64)):v("",!0),t.$slots.title?x(t.$slots,"title",{key:1}):v("",!0)])):v("",!0),t.$slots.action?(s(),r("div",We,[x(t.$slots,"action")])):v("",!0),x(t.$slots,"default")],2)}const il=O(Re,[["render",Qe]]),Ke={name:"CardBody"},Ye={class:"fct-card-body"};function Ze(t,a,e,n,i,l){return s(),r("div",Ye,[x(t.$slots,"default")])}const ol=O(Ke,[["render",Ze]]),Je={props:{table:{type:Object,required:!1},pagerSizes:{type:Boolean,default:!0},pagination:{required:!0,type:Object},extra_sizes:{required:!1,type:Array,default(){return[]}},hide_on_single:{required:!1,type:Boolean,default(){return!0}},background:{type:Boolean,default:!0},layout:{type:String,default:"prev, pager, next, slot"},pager_count:{type:Number,default:5}},data(){return{currentPage:1,pickerObserver:null}},computed:{page_sizes(){const t=[];this.pagination.per_page<10&&t.push(this.pagination.per_page);const a=[10,20,50,80,100,120,150];return[...t,...a,...this.extra_sizes]},totalPage(){const t=this.pagination.per_page,a=this.pagination.total;return isNaN(a)||a<=0?0:Math.ceil(a/t)}},watch:{pagination:{immediate:!0,handler(t,a){setTimeout(()=>{this.translatePickerElements()},400)}}},methods:{translateNumber:Y,translate:N,changePage(t){var e;let a=this.getCurrentPageCount(t,this.pagination.per_page);this.currentPage=t,this.pagination.current_page=t,this.$emit("currentPageChanged",{page:t,currentPageCount:a}),this.$emit("fetch"),(e=this.table)==null||e.handlePageChange(),setTimeout(()=>{this.translatePickerElements()},300)},changeSize(t){var a;this.currentPage=1,this.pagination.current_page=1,this.$emit("onPerPageChanged",t),this.$emit("fetch"),(a=this.table)==null||a.handlePerPageChange()},getCurrentPageCount(t,a){return(t<this.pagination.last_page?a:this.pagination.total%a)||a},translatePickerElements(){const t=document.querySelector(".el-pagination.is-background");if(!t)return;t.querySelectorAll("li.number").forEach(n=>{const i=n.textContent.trim();if(i&&/\d/.test(i)&&!n.dataset.translated){const l=Y(i);n.style.setProperty("--translated-number",`"${l}"`),n.dataset.translated="1"}})}},mounted(){this.translatePickerElements()}},Xe={class:"pagination-wrap"},et={key:0,class:"pager-wrap"},tt={class:"text"},at={class:"el-pagination"},lt={class:"text"};function st(t,a,e,n,i,l){const u=p("el-option"),h=p("el-select"),c=p("el-pagination");return s(),r("div",Xe,[e.pagerSizes?(s(),r("div",et,[o("span",tt,g(l.translate("Page %1$s of %2$s",l.translateNumber(i.currentPage),l.translateNumber(l.totalPage))),1),o("div",at,[d(h,{onChange:l.changeSize,modelValue:e.pagination.per_page,"onUpdate:modelValue":a[0]||(a[0]=f=>e.pagination.per_page=f),placeholder:l.translate("Select")},{default:m(()=>[(s(!0),r(S,null,w(l.page_sizes,f=>(s(),_(u,{key:f,label:l.translate("%s / page",l.translateNumber(f)),value:f},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue","placeholder"])]),o("span",lt,g(l.translate("Total %s",l.translateNumber(e.pagination.total))),1)])):v("",!0),d(c,{ref:"paginationRef","hide-on-single-page":e.hide_on_single,background:e.background,"current-page":e.pagination.current_page,layout:e.layout,onCurrentChange:l.changePage,"page-sizes":l.page_sizes,total:e.pagination.total,"page-count":e.pagination.last_page,"pager-count":e.pager_count,"page-size":e.pagination.per_page,"onUpdate:pageSize":a[1]||(a[1]=f=>e.pagination.per_page=f)},{default:m(f=>[$(g(f),1)]),_:1},8,["hide-on-single-page","background","current-page","layout","onCurrentChange","page-sizes","total","page-count","pager-count","page-size"])])}const nt=O(Je,[["render",st]]),it={class:"filter-popover-item"},ot={class:"filter-popover-title"},Z={__name:"ColumnVisibility",props:{table:Object},setup(t){return(a,e)=>{const n=p("el-checkbox"),i=p("el-checkbox-group"),l=p("el-tooltip"),u=p("el-popover");return s(),_(u,{trigger:"click",placement:"bottom-start",width:"240","popper-class":"filter-popover"},{reference:m(()=>[o("span",null,[d(l,{effect:"light",content:a.$t("Toggle columns"),placement:"top","popper-class":"fct-tooltip"},{default:m(()=>[d(D,{tag:"button"},{default:m(()=>[d(P,{name:"ColumnIcon"})]),_:1})]),_:1},8,["content"])])]),default:m(()=>[o("div",it,[o("h3",ot,g(a.$t("Columns")),1),d(i,{onChange:e[0]||(e[0]=()=>{t.table.handleColumnVisibilityChange()}),class:"fct-checkbox-blocks",modelValue:t.table.data.columns,"onUpdate:modelValue":e[1]||(e[1]=h=>t.table.data.columns=h)},{default:m(()=>[(s(!0),r(S,null,w(t.table.getToggleableColumns(),h=>(s(),_(n,{key:h.value,value:h.value,label:h.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1})}}},rt={class:"filter-popover-item"},ct={class:"filter-popover-title"},J={__name:"ColumnSort",props:{table:Object},setup(t){return(a,e)=>{const n=p("el-radio"),i=p("el-radio-group"),l=p("el-radio-button"),u=p("el-tooltip"),h=p("el-popover");return s(),_(h,{trigger:"click",placement:"bottom-start",width:"240","popper-class":"filter-popover"},{reference:m(()=>[o("span",null,[d(u,{effect:"light",content:a.$t("Sort"),placement:"top","popper-class":"fct-tooltip"},{default:m(()=>[d(D,{tag:"button"},{default:m(()=>[d(P,{name:"ArrowUpDown"})]),_:1})]),_:1},8,["content"])])]),default:m(()=>[o("div",rt,[o("h3",ct,g(a.$t("Sort By")),1),d(i,{onChange:e[0]||(e[0]=()=>{t.table.handleSortChange()}),class:"fct-radios-blocks",modelValue:t.table.data.sorting.sortBy,"onUpdate:modelValue":e[1]||(e[1]=c=>t.table.data.sorting.sortBy=c)},{default:m(()=>[(s(!0),r(S,null,w(t.table.getSortableColumns(),c=>(s(),_(n,{key:c.value,value:c.value,label:c.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),e[4]||(e[4]=o("hr",null,null,-1)),d(i,{onChange:e[2]||(e[2]=()=>{t.table.handleSortChange()}),size:"small",modelValue:t.table.data.sorting.sortType,"onUpdate:modelValue":e[3]||(e[3]=c=>t.table.data.sorting.sortType=c)},{default:m(()=>[d(l,{value:"ASC"},{default:m(()=>[$(g(a.$t("Ascending")),1)]),_:1}),d(l,{value:"DESC"},{default:m(()=>[$(g(a.$t("Descending")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})}}},ut={__name:"FluidTab",props:{activeIndex:null,hasIcon:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},setup(t,{expose:a}){const e=t,n=T(null),i=T(0),l=T(0),u=T(0),h=T(0),c=T(null),f=j(()=>({left:`${i.value}px`,top:`${l.value}px`,width:`${u.value}px`,height:`${h.value}px`})),y=b=>{if(!n.value||!b)return;const V=n.value.getBoundingClientRect(),{left:U,width:ne,height:ie,top:oe}=b.getBoundingClientRect();i.value=U-V.left,l.value=oe-V.top,u.value=ne,h.value=ie,c.value=b},C=b=>{if(!n.value)return;const V=n.value.children;V[b]&&y(V[b])},k=()=>{z(()=>{if(!n.value)return;const b=n.value.children,V=Array.from(b).find(U=>U.classList.contains("active"));V&&y(V)})},A=b=>c.value===b;return a({setActiveByActiveClass:k,setActiveByIndex:C}),W("setActiveItem",y),W("isActiveItem",A),window.addEventListener("resize",()=>{c.value&&y(c.value)}),R(()=>{z(()=>{e.activeIndex?C(e.activeIndex-1):k()})}),(b,V)=>(s(),r("div",{class:I(`fct-fluid-tab ${t.hasIcon?"is-icon":""} ${t.small?"small":""}`),ref_key:"tab",ref:n},[o("div",{class:"fct-fluid-tab-active-bar",style:me(f.value)},null,4),x(b.$slots,"default")],2))}},dt={name:"FluidTabItem",props:{label:String,requiredConfirmation:{type:Boolean,default:!1},onClick:{type:Function,default:null}},inject:["setActiveItem","isActiveItem"],data(){return{isActive:!1}},mounted(){this.updateActive()},methods:{clicked(){if(this.requiredConfirmation){typeof this.onClick=="function"&&this.onClick(this.updateActive);return}this.updateActive(),this.$emit("click")},updateActive(){var t;(t=this.$refs)!=null&&t.btn&&this.setActiveItem(this.$refs.btn),this.isActive=this.isActiveItem(this.$refs.btn)}},updated(){this.isActive=this.isActiveItem(this.$refs.btn)}};function ht(t,a,e,n,i,l){return s(),r("span",{class:"fct-fluid-tab-item",onClick:a[0]||(a[0]=(...u)=>l.clicked&&l.clicked(...u)),ref:"btn"},[e.label?(s(),r(S,{key:0},[$(g(e.label),1)],64)):x(t.$slots,"default",{key:1})],512)}const X=O(dt,[["render",ht]]),mt={key:0},ft={class:"select-label"},gt={class:"select-desc"},pt={__name:"FilterTabs",props:{table:Object},setup(t){const a=t,e=T(""),n=j(()=>{const u=a.table.getTabs(),h=Object.entries(u),c=a.table.getSelectedTab();h.find(([k])=>k===c);let f=h.slice(0,4);const y=Object.fromEntries(f),C=Object.fromEntries(h.filter(([k])=>!y.hasOwnProperty(k)));return{visibleTabs:y,excludedTabs:C}}),i=T(null);R(()=>{n.value.excludedTabs.hasOwnProperty(a.table.getSelectedTab())&&(e.value=a.table.getSelectedTab())});const l=()=>{setTimeout(()=>{const u=Object.keys(n.value.visibleTabs).indexOf(a.table.getSelectedTab());let h=u!==-1?u+1:-1;i.value.setActiveByIndex(h)},50)};return(u,h)=>{const c=p("el-option"),f=p("el-select");return s(),_(ut,{class:I(t.table.isUsingAdvanceFilter()?"is-disabled":""),ref_key:"fluidTab",ref:i},{default:m(()=>[(s(!0),r(S,null,w(n.value.visibleTabs,(y,C)=>(s(),_(X,{key:C,label:y,class:I(t.table.getSelectedTab()===C?"active":""),onClick:()=>{t.table.isUsingAdvanceFilter()||(t.table.handleTabChanged(C),n.value.excludedTabs.hasOwnProperty(a.table.getSelectedTab())||(e.value=""))}},null,8,["label","class","onClick"]))),128)),Object.keys(n.value.excludedTabs).length>0?(s(),_(X,{key:0,class:"fct-fluid-tab-select-wrap"},{default:m(()=>[d(f,{placeholder:B(N)("More views"),modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=y=>e.value=y),onChange:h[1]||(h[1]=y=>{t.table.isUsingAdvanceFilter()||t.table.handleTabChanged(y)}),onVisibleChange:h[2]||(h[2]=y=>{y||l()}),class:I(["w-[120px]",{active:e.value}]),"popper-class":"fct-fluid-tab-select"},{default:m(()=>[(s(!0),r(S,null,w(n.value.excludedTabs,(y,C)=>(s(),_(c,{key:C,label:y.title||y,value:C},{default:m(()=>[typeof y=="object"?(s(),r("div",mt,[o("div",ft,g(y.title),1),o("div",gt,g(y.description),1)])):(s(),r(S,{key:1},[$(g(y),1)],64))]),_:2},1032,["label","value"]))),128))]),_:1},8,["placeholder","modelValue","class"])]),_:1})):v("",!0)]),_:1},8,["class"])}}},bt={key:0,class:"fct-alert-icon"},vt={__name:"Alert",props:{type:{type:String,default:""},content:{type:String,default:""},icon:{type:String,default:""},closable:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:a}){const e=t,n=j(()=>({"fct-alert":!0,"fct-alert-info":e.type==="info","fct-alert-success":e.type==="success","fct-alert-warning":e.type==="warning","fct-alert-error":e.type==="error"})),i=a,l=()=>{i("close")};return(u,h)=>(s(),r("div",{class:I(n.value)},[t.icon?(s(),r("div",bt,[d(P,{name:t.icon},null,8,["name"])])):v("",!0),u.$slots.content?x(u.$slots,"content",{key:1}):(s(),r(S,{key:2},[$(g(t.content),1)],64)),t.closable?(s(),r("div",{key:3,class:"fct-alert-close",onClick:l},[d(P,{name:"Cross"})])):v("",!0),x(u.$slots,"default")],2))}},yt={class:"fct-search-guide-wrap"},_t={class:"fct-search-guide-example"},Ct={class:"fct-search-guide-list"},kt={class:"fct-search-guide-example"},$t={class:"fct-search-guide-examples-list"},St={key:0},Tt=["onClick"],At={class:"example-query"},Ft={class:"click-hint"},Vt={class:"fct-search-guide-example"},wt={class:"fct-search-guide-examples-list"},Pt=["onClick"],xt={class:"example-query"},It={class:"example-description"},Nt={key:0,class:"example-description"},Ot={key:0,class:"click-hint"},ee={__name:"SearchGuide",props:{table:{type:Object,required:!0}},setup(t){const a=T(!1),e=T("examples"),n=t,i=l=>{n.table.data.search=l,n.table.search(),a.value=!1};return(l,u)=>{const h=p("el-button"),c=p("el-tag"),f=p("el-tab-pane"),y=p("el-tabs"),C=p("el-dialog");return s(),r(S,null,[d(h,{class:"fct-search-guide-btn",link:"",size:"small",onClick:u[0]||(u[0]=k=>a.value=!0)},{default:m(()=>[$(g(l.$t("Search Help")),1)]),_:1}),d(C,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=k=>a.value=k),title:l.$t("Search Operators Guide"),"append-to-body":!0,class:"fct-search-guide-dialog"},{default:m(()=>[o("div",yt,[o("div",_t,[o("h5",null,g(l.$t("Available Operators")),1),o("ul",Ct,[o("li",null,[d(c,{type:"info"},{default:m(()=>[$("> "+g(l.$t("Greater Than")),1)]),_:1})]),o("li",null,[d(c,{type:"info"},{default:m(()=>[$("< "+g(l.$t("Less Than")),1)]),_:1})]),o("li",null,[d(c,{type:"info"},{default:m(()=>[$(">= "+g(l.$t("Greater Than or Equal")),1)]),_:1})]),o("li",null,[d(c,{type:"info"},{default:m(()=>[$("<= "+g(l.$t("Less Than or Equal")),1)]),_:1})]),o("li",null,[d(c,{type:"info"},{default:m(()=>[$("= "+g(l.$t("Equal")),1)]),_:1})]),o("li",null,[d(c,{type:"info"},{default:m(()=>[$("!= "+g(l.$t("Not Equal")),1)]),_:1})])])]),d(vt,{icon:"InformationFill",type:"info",content:l.$t("Note: For plain text searches, simply type your query without operators. The system will search across all text fields.")},null,8,["content"]),d(y,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=k=>e.value=k),class:"demo-tabs"},{default:m(()=>[d(f,{label:l.$t("Examples"),name:"examples"},{default:m(()=>[o("div",kt,[o("div",$t,[(s(!0),r(S,null,w(t.table.getSearchGuideOptions(),(k,A)=>{var b;return s(),r(S,{key:A},[(b=k.examples)!=null&&b.length?(s(),r("h5",St,g(B(N)("Field: ")+A),1)):v("",!0),(s(!0),r(S,null,w(k.examples,(V,U)=>(s(),r("div",{key:U,class:"fct-search-guide-example-item",onClick:()=>{i(V)}},[o("div",null,[o("div",At,g(V),1)]),o("div",Ft,g(l.$t("Click to try")),1)],8,Tt))),128))],64)}),128))])])]),_:1},8,["label"]),d(f,{label:l.$t("Fields"),name:"fields"},{default:m(()=>[o("div",Vt,[o("div",wt,[(s(!0),r(S,null,w(t.table.getSearchGuideOptions(),(k,A)=>{var b;return s(),r("div",{key:A,class:"fct-search-guide-example-item",onClick:()=>{Array.isArray(k.examples)&&k.examples.length>0&&i(k.examples[0])}},[o("div",null,[o("div",xt,g(A),1),o("div",It,g(k.description),1),k.note?(s(),r("div",Nt,g(k.note),1)):v("",!0)]),(b=k.examples)!=null&&b.length?(s(),r("div",Ot,g(l.$t("Click to try")),1)):v("",!0)],8,Pt)}),128))])])]),_:1},8,["label"])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])],64)}}},Dt={class:"relative"},Ut={key:0,class:"absolute top-0 left-0 w-full h-full"},Et={class:"h-full w-full"},zt={__name:"RemoteTreeSelect",props:te({table:{type:Object,required:!0},itemConfig:{type:Object,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=t,e=ae(t,"modelValue"),n=T(""),i=T(a.itemConfig.options??[]),l=T(!1),u=async()=>{n.value.toString().length===0&&i.value.length>0||(l.value=!0,G.get("advance_filter/get-filter-options",{search:n.value,remote_data_key:a.itemConfig.remote_data_key,include_ids:e.value,limit:a.itemConfig.limit}).then(c=>{i.value=c.options}).catch(c=>{M.error(c)}).finally(()=>{l.value=!1}))},h=c=>{n.value=c,u()};return R(()=>{typeof i.value=="object"&&Object.values(i.value).length>0||u()}),(c,f)=>{const y=p("el-tree-select"),C=fe("loading");return s(),r("div",Dt,[d(y,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=k=>e.value=k),data:i.value,multiple:"",filterable:"","check-strictly":t.itemConfig.check_strictly||!1,"show-checkbox":"","reserve-keyword":!1,"filter-method":B($e).debounce(h,500),"render-after-expand":!0,size:"small",onChange:f[1]||(f[1]=()=>{t.table.applyAdvancedFilter()})},null,8,["modelValue","data","check-strictly","filter-method"]),l.value?(s(),r("div",Ut,[le(o("div",Et,null,512),[[C,!0]])])):v("",!0)])}}},Bt={__name:"SelectItem",props:te({table:{type:Object,required:!0},itemConfig:{type:Object,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=t,e=ae(t,"modelValue"),n=T({}),i=T(!1),l=j(()=>a.itemConfig.remote?n.value:a.itemConfig.options||{}),u=async c=>{a.itemConfig.remote&&(i.value=!0,G.get("advance_filter/get-filter-options",{search:c,remote_data_key:a.itemConfig.remote_data_key,include_ids:e.value,limit:a.itemConfig.limit}).then(f=>{n.value=f.options}).catch(f=>{M.error(f),n.value={}}).finally(()=>{i.value=!1}))},h=()=>{a.table.applyAdvancedFilter()};return R(()=>{u("")}),(c,f)=>{const y=p("el-option"),C=p("el-select");return t.itemConfig.options||t.itemConfig.remote?(s(),_(C,{key:0,onChange:h,"remote-method":u,size:"small",modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=k=>e.value=k),multiple:t.itemConfig.is_multiple,placeholder:B(N)("Select Option"),remote:!0,filterable:t.itemConfig.remote,"remote-show-suffix":t.itemConfig.remote,loading:i.value},{default:m(()=>[(s(!0),r(S,null,w(l.value,(k,A)=>(s(),_(y,{key:A,value:A,label:k},null,8,["value","label"]))),128))]),_:1},8,["modelValue","multiple","placeholder","filterable","remote-show-suffix","loading"])):v("",!0)}}},jt={name:"FilterItem",props:["item","filterLabels","table"],components:{SelectItem:Bt,RemoteTreeSelect:zt,DynamicIcon:P,IconButton:D},data(){return{}},computed:{operatorOptionsNative(){var i,l,u;const t=((i=this.itemConfig)==null?void 0:i.type)||"text",a=(l=this.itemConfig)==null?void 0:l.filter_type,e=(u=this.itemConfig)==null?void 0:u.operators;if(a==="custom"&&e)return e;const n={text:{"=":this.$t("Equal"),"!=":this.$t("Doesn't equal"),contains:this.$t("Includes"),not_contains:this.$t("Doesn't includes")},numeric:{">":this.$t("Greater Than"),"<":this.$t("Less Than"),"=":this.$t("Equal"),"!=":this.$t("Doesn't equal")},remote_tree_select:{contains:this.$t("Includes"),not_contains:this.$t("Doesn't includes")},dates:{before:this.$t("Before"),after:this.$t("After"),date_equal:this.$t("At the date"),days_before:this.$t("Days before"),days_within:this.$t("Within days")}};return t==="selections"?this.itemConfig.is_multiple?{in:{title:this.$t("Includes any of"),description:this.$t("At least one matches")},in_all:{title:this.$t("Includes all of"),description:this.$t("All must match")},not_in:{title:this.$t("Exclude if any"),description:this.$t("Exclude if one matches")},not_in_all:{title:this.$t("Exclude if all"),description:this.$t("Exclude only if all match")}}:this.itemConfig.is_only_in?{in:this.$t("Includes in")}:{"=":this.$t("Is"),"!=":this.$t("Is Not")}:Se.get(n,t,{})},operatorOptions(){return this.operatorOptionsNative},itemConfig(){const t=this.item.source.join("-");return this.filterLabels[t]||{}}},methods:{removeItem(){this.$emit("removeItem")},getProviderLabel(t){return t=t.replace(/_/g," ").replace(/-/g," "),t.charAt(0).toUpperCase()+t.slice(1)},operatorSelected(t){!t&&this.item.operator&&setTimeout(()=>{jQuery(this.$el).find(".fct-filter-value input").focus()},200)},applyFilter(){setTimeout(()=>{this.table.applyAdvancedFilter()},200)}},mounted(){if(!this.item.operator){const t=Object.keys(this.operatorOptions);t.length&&(this.item.operator=t[0],jQuery(this.$el).find(".fct-filter-value input").focus(),jQuery(this.$el).find(".fct-filter-operator .el-select").trigger("click"))}}},qt={class:"w-[250px] fct-filter-label"},Mt={class:"fct-filter-operator w-[190px]"},Rt={key:0,class:"fct-operator-description p-2"},Ht={style:{"padding-left":"8px"}},Lt={class:"fct-filter-value"},Gt={class:"w-[40px] text-right fct-filter-action"};function Wt(t,a,e,n,i,l){const u=p("el-option"),h=p("el-select"),c=p("el-input"),f=p("el-date-picker"),y=p("SelectItem"),C=p("RemoteTreeSelect"),k=p("DynamicIcon"),A=p("IconButton");return s(),r("tr",null,[o("td",qt,[$(g(l.getProviderLabel(l.itemConfig.provider))+" ",1),a[8]||(a[8]=o("span",{class:"fct-provider-separator"},"/",-1)),$(" "+g(l.itemConfig.label),1)]),o("td",Mt,[d(h,{size:"small",placeholder:t.$t("Select Operator"),modelValue:e.item.operator,"onUpdate:modelValue":a[0]||(a[0]=b=>e.item.operator=b),onVisibleChange:l.operatorSelected,onChange:a[1]||(a[1]=()=>{const b=typeof e.item.value=="object"?Object.values(e.item.value):e.item.value;(Array.isArray(b)&&b>0||b.toString().length>0)&&e.table.applyAdvancedFilter()})},{default:m(()=>[(s(!0),r(S,null,w(l.operatorOptions,(b,V)=>(s(),r(S,{key:V},[typeof b=="string"?(s(),_(u,{key:0,value:V,label:b},null,8,["value","label"])):(s(),_(u,{key:1,style:{height:"auto"},value:V,label:b.title},{default:m(()=>[b.description?(s(),r("p",Rt,[o("span",null,[$(g(b.title)+" ",1),a[9]||(a[9]=o("br",null,null,-1)),o("span",Ht,"- "+g(b.description),1)])])):v("",!0)]),_:2},1032,["value","label"]))],64))),128))]),_:1},8,["placeholder","modelValue","onVisibleChange"])]),o("td",Lt,[!l.itemConfig.type||l.itemConfig.type==="text"?(s(),_(c,{key:0,size:"small",placeholder:t.$t("Condition Value"),type:"text",modelValue:e.item.value,"onUpdate:modelValue":a[2]||(a[2]=b=>e.item.value=b),onKeydown:E(l.applyFilter,["enter"])},null,8,["placeholder","modelValue","onKeydown"])):l.itemConfig.type==="numeric"?(s(),_(c,{key:1,size:"small",type:"number",placeholder:t.$t("Condition Value"),modelValue:e.item.value,"onUpdate:modelValue":a[3]||(a[3]=b=>e.item.value=b),onKeydown:E(l.applyFilter,["enter"])},null,8,["placeholder","modelValue","onKeydown"])):l.itemConfig.type==="dates"?(s(),r(S,{key:2},[e.item.operator==="days_before"||e.item.operator==="days_within"?(s(),_(c,{key:0,size:"small",type:"number",placeholder:t.$t("Days"),modelValue:e.item.value,"onUpdate:modelValue":a[4]||(a[4]=b=>e.item.value=b),onKeydown:E(l.applyFilter,["enter"])},null,8,["placeholder","modelValue","onKeydown"])):e.item.operator?(s(),_(f,{key:1,onChange:l.applyFilter,type:"datetime","value-format":"YYYY-MM-DDTHH:mm:ssZ",size:"small",modelValue:e.item.value,"onUpdate:modelValue":a[5]||(a[5]=b=>e.item.value=b)},null,8,["onChange","modelValue"])):v("",!0)],64)):v("",!0),l.itemConfig.type==="selections"?(s(),_(y,{key:3,table:e.table,"item-config":l.itemConfig,modelValue:e.item.value,"onUpdate:modelValue":a[6]||(a[6]=b=>e.item.value=b)},null,8,["table","item-config","modelValue"])):v("",!0),l.itemConfig.type==="remote_tree_select"?(s(),_(C,{key:4,table:e.table,"item-config":l.itemConfig,modelValue:e.item.value,"onUpdate:modelValue":a[7]||(a[7]=b=>e.item.value=b)},null,8,["table","item-config","modelValue"])):v("",!0)]),o("td",Gt,[d(A,{onClick:l.removeItem,size:"x-small",bg:"info",tag:"button"},{default:m(()=>[d(k,{name:"Delete"})]),_:1},8,["onClick"])])])}const Qt=O(jt,[["render",Wt]]),Kt={name:"_CascaderPanel",props:{options:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},components:{TransitionAccordion:se},emits:["update:modelValue","change"],data(){return{openPanel:null}},methods:{toggleOpen(t){this.openPanel=this.openPanel===t?null:t},selectOption(t,a){const e=[t,a];this.$emit("update:modelValue",e),this.$emit("change",e),this.openPanel=null}}},Yt={class:"fct-cascader-panel"},Zt=["onClick"],Jt={class:"fct-cascader-content"},Xt=["onClick"];function ea(t,a,e,n,i,l){const u=p("TransitionAccordion");return s(),r("div",Yt,[(s(!0),r(S,null,w(e.options,h=>(s(),r("div",{key:h.value,class:"fct-cascader-option"},[o("div",{class:"fct-cascader-button",onClick:c=>l.toggleOpen(h.value)},g(h.label),9,Zt),d(u,{visible:i.openPanel===h.value},{default:m(()=>[le(o("ul",Jt,[(s(!0),r(S,null,w(h.children,c=>(s(),r("li",{class:"fct-cascader-item",key:c.value,onClick:f=>l.selectOption(h.value,c.value)},g(c.label),9,Xt))),128))],512),[[ge,i.openPanel===h.value]])]),_:2},1032,["visible"])]))),128))])}const ta=O(Kt,[["render",ea]]),aa={class:"fct-advanced-filters"},la={key:0,class:"w-full"},sa={class:"fct-advanced-filter-intro"},na={class:"fct-cascader-panel-wrap"},ia={class:"px-2"},oa={__name:"_Filters",props:{table:{required:!0},items:{type:Array,default:()=>[]},filtersLength:{type:Number},filterOptions:{type:Array,default:()=>[]},filterIndex:{type:Number,required:!0}},setup(t){const a=t,e=T(null),n=T([]),i=T(!1),l=j(()=>{const c={};return a.filterOptions.forEach(f=>{f.children&&f.children.forEach(y=>{c[`${f.value}-${y.value}`]={provider:f.value,...y}})}),c}),u=c=>{if(n.value.length===2){const f=a.filterOptions.find(C=>C.value===c[0]),y=f==null?void 0:f.children.find(C=>C.value===c[1]);y&&(a.items.push({source:[...n.value],filter_type:y.filter_type,operator:"",value:"",column:y.column,relation:y.relation}),i.value=!1,z(()=>{e.value&&e.value.hide()}),n.value=[])}},h=c=>{z(()=>{a.items.splice(c,1),a.table.applyAdvancedFilter(!0)})};return(c,f)=>{const y=p("el-cascader-panel"),C=p("el-button"),k=p("el-popover");return s(),r("div",aa,[t.items.length?(s(),r("table",la,[o("tbody",null,[(s(!0),r(S,null,w(t.items,(A,b)=>(s(),_(Qt,{table:t.table,key:b,filterLabels:l.value,item:A,onRemoveItem:V=>h(b)},null,8,["table","filterLabels","item","onRemoveItem"]))),128))])])):v("",!0),o("div",sa,[d(k,{placement:"right",width:"450","popper-class":"fct-advanced-filter-popover",trigger:"click",ref_key:"popoverRef",ref:e},{reference:m(()=>[d(C,{class:"el-button--x-small"},{default:m(()=>[d(P,{name:"Plus"}),$(" "+g(c.$t("Add")),1)]),_:1})]),default:m(()=>[o("div",na,[d(ta,{options:t.filterOptions,modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=A=>n.value=A),onChange:u},null,8,["options","modelValue"]),d(y,{style:{width:"100%"},options:t.filterOptions,modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=A=>n.value=A),onChange:u},null,8,["options","modelValue"])])]),_:1},512),o("span",ia,g(c.$t("Add new properties")),1),t.items.length===0?(s(),_(D,{key:0,onClick:f[2]||(f[2]=()=>{t.table.removeAdvanceFilterGroup(t.filterIndex)}),class:"float-end",size:"x-small",bg:"info",tag:"button",disabled:t.filtersLength<=1},{default:m(()=>[d(P,{name:"Delete"})]),_:1},8,["disabled"])):v("",!0)])])}}},ra={class:"fct-advanced-filter-container"},ca={class:"fct-advanced-filter-wrap"},ua={key:0,class:"fct-condition-or-wrap"},da={class:"fct-condition-or"},ha={class:"fct-condition-or-wrap"},ma={class:"fct-advanced-filter-footer justify-end"},fa={__name:"AdvancedFilter",props:{table:Object},setup(t){return(a,e)=>{const n=p("el-button");return s(),_(se,{visible:t.table.isUsingAdvanceFilter()},{default:m(()=>[o("div",ra,[o("div",ca,[(s(!0),r(S,null,w(t.table.data.advanceFilters,(i,l)=>(s(),r("div",{class:"fct-advanced-filter",key:l},[d(oa,{filterIndex:l,table:t.table,items:i,filtersLength:t.table.data.advanceFilters.length,filterOptions:t.table.getAdvanceFilterOptions()},null,8,["filterIndex","table","items","filtersLength","filterOptions"]),l<t.table.data.advanceFilters.length-1?(s(),r("div",ua,[o("div",da,g(a.$t("or")),1)])):v("",!0)]))),128))]),o("div",ha,[o("div",{class:"fct-condition-or",onClick:e[0]||(e[0]=i=>t.table.addAdvanceFilterGroup())},[d(P,{name:"Plus"}),$(" "+g(a.$t("or")),1)])]),o("div",ma,[d(n,{onClick:e[1]||(e[1]=()=>t.table.clearAdvanceFilter()),text:"",class:"el-button--x-small"},{default:m(()=>[$(g(a.$t("Reset")),1)]),_:1}),d(n,{onClick:e[2]||(e[2]=()=>t.table.applyAdvancedFilter()),type:"primary",class:"el-button--x-small"},{default:m(()=>[$(g(a.$t("Apply")),1)]),_:1})])])]),_:1},8,["visible"])}}},ga={class:"fct-filter-tabs-mobile"},pa={key:0},ba={class:"select-label"},va={class:"select-desc"},ya={__name:"FilterTabsMobile",props:{table:Object},setup(t){const a=t,e=T(a.table.getSelectedTab()),n=i=>{a.table.isUsingAdvanceFilter()||a.table.handleTabChanged(i)};return(i,l)=>{const u=p("el-option"),h=p("el-select");return s(),r("div",ga,[d(h,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),onChange:l[1]||(l[1]=c=>{n(c)}),"popper-class":"fct-fluid-tab-select",size:"small"},{default:m(()=>[(s(!0),r(S,null,w(t.table.getTabs(),(c,f)=>(s(),_(u,{key:f,label:c.title||c,value:f},{default:m(()=>[typeof c=="object"?(s(),r("div",pa,[o("div",ba,g(c.title),1),o("div",va,g(c.description),1)])):(s(),r(S,{key:1},[$(g(c),1)],64))]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])}}},_a={class:"fct-card"},Ca={class:"fct-card-header-top"},ka={class:"fct-card-header-left flex-1"},$a={class:"fct-mobile-header-actions md:hidden"},Sa={class:"fct-btn-group sm"},Ta={key:1},Aa={class:"text-xs text-system-light pt-1 dark:text-gray-300"},Fa={class:"fct-card-header-actions"},Va={key:0,class:"fct-advanced-filter-toggle-wrapper"},wa={class:"fct-btn-group sm hidden md:flex"},Pa={key:0,class:"filter-search-wrap"},xa={class:"search-bar"},Ia={class:"text-xs text-system-light pt-2 dark:text-gray-300"},Na={class:"fct-card-body"},Oa={class:"fct-table-wrapper-inner"},Da={key:0,class:"block md:hidden"},rl={__name:"TableWrapper",props:{table:Object,classicTabStyle:!1,hasMobileSlot:!1},setup(t){const a=t,e=pe("search-input"),n=()=>{a.table.openSearch(),z(()=>{e.value.focus()})};return(i,l)=>{var y;const u=p("el-tooltip"),h=p("el-input"),c=p("el-switch"),f=p("el-button");return s(),r("div",{class:I(["fct-table-wrapper",t.hasMobileSlot?"fct-table-wrapper-mobile":""])},[o("div",_a,[o("div",{class:I(["fct-card-header",t.table.useFullWidthSearch()?"is-full-width-search":""])},[o("div",Ca,[o("div",ka,[t.table.getTabsCount()&&!t.table.isUsingAdvanceFilter()?(s(),_(pt,{key:0,class:I(`hide-animation-on-mobile hidden md:inline-flex ${t.classicTabStyle?"classic-tab-style":""}`),table:t.table},null,8,["class","table"])):v("",!0),o("div",$a,[t.table.getTabsCount()&&!t.table.isUsingAdvanceFilter()?(s(),_(ya,{key:0,table:t.table},null,8,["table"])):v("",!0),o("div",Sa,[!t.table.isSearching()&!t.table.useFullWidthSearch()?(s(),_(u,{key:0,effect:"light",content:i.$t("Search"),placement:"top","popper-class":"fct-tooltip"},{default:m(()=>[d(D,{tag:"button",onClick:Q(n,["prevent"]),disabled:!t.table.isUsingSimpleFilter()},{default:m(()=>[d(P,{name:"Search"})]),_:1},8,["disabled"])]),_:1},8,["content"])):v("",!0),t.table.getToggleableColumns().length?(s(),_(Z,{key:1,table:t.table},null,8,["table"])):v("",!0),t.table.getSortableColumns().length?(s(),_(J,{key:2,table:t.table},null,8,["table"])):v("",!0)])]),t.table.useFullWidthSearch()&&!t.table.isUsingAdvanceFilter()?(s(),r("div",Ta,[o("div",{class:I(`search-bar is-transparent ${t.table.isUsingAdvanceFilter()?"is-unable-advanced-filter":""}`)},[d(h,{placeholder:i.$t("Search"),ref:"search-input",onClear:l[0]||(l[0]=()=>{t.table.search()}),onKeyup:l[1]||(l[1]=E(()=>{t.table.search()},["enter"])),modelValue:t.table.data.search,"onUpdate:modelValue":l[2]||(l[2]=C=>t.table.data.search=C),type:"text",clearable:""},{prefix:m(()=>[d(P,{name:"Search"})]),_:1},8,["placeholder","modelValue"])],2),o("div",Aa,[$(g(t.table.getSearchHint())+" ",1),(y=t.table.getSearchGuideOptions())!=null&&y.length?(s(),_(ee,{key:0,table:t.table},null,8,["table"])):v("",!0)])])):v("",!0)]),o("div",Fa,[t.table.isAdvanceFilterEnabled()?(s(),r("div",Va,[d(c,{class:"fct-advanced-filter-toggle",onChange:l[3]||(l[3]=C=>{t.table.onFilterTypeChanged(C)}),"active-value":"advanced","inactive-value":"simple",modelValue:t.table.data.filterType,"onUpdate:modelValue":l[4]||(l[4]=C=>t.table.data.filterType=C),"active-text":i.$t("Advanced Filter"),size:"small"},null,8,["modelValue","active-text"])])):v("",!0),o("div",wa,[!t.table.isSearching()&!t.table.useFullWidthSearch()?(s(),_(u,{key:0,effect:"light",content:i.$t("Search"),placement:"top","popper-class":"fct-tooltip"},{default:m(()=>[d(D,{tag:"button",onClick:Q(n,["prevent"]),disabled:!t.table.isUsingSimpleFilter()},{default:m(()=>[d(P,{name:"Search"})]),_:1},8,["disabled"])]),_:1},8,["content"])):v("",!0),t.table.getToggleableColumns().length?(s(),_(Z,{key:1,table:t.table},null,8,["table"])):v("",!0),t.table.getSortableColumns().length?(s(),_(J,{key:2,table:t.table},null,8,["table"])):v("",!0)])])]),d(fa,{table:t.table},null,8,["table"]),t.table.isSearching()&&!t.table.useFullWidthSearch()?(s(),r("div",Pa,[o("div",xa,[d(h,{ref:"search-input",onClear:l[5]||(l[5]=()=>{t.table.search()}),onKeyup:l[6]||(l[6]=E(()=>{t.table.search()},["enter"])),modelValue:t.table.data.search,"onUpdate:modelValue":l[7]||(l[7]=C=>t.table.data.search=C),type:"text",placeholder:i.$t("Search"),clearable:""},{prefix:m(()=>[d(P,{name:"Search"})]),_:1},8,["modelValue","placeholder"]),o("div",Ia,[$(g(t.table.getSearchHint())+" ",1),d(ee,{table:t.table},null,8,["table"])])]),d(f,{text:"",onClick:l[8]||(l[8]=()=>{t.table.closeSearch()})},{default:m(()=>[$(g(i.$t("Cancel")),1)]),_:1})])):v("",!0)],2),o("div",Na,[o("div",Oa,[o("div",{class:I({"hidden md:block":t.hasMobileSlot,block:!t.hasMobileSlot})},[x(i.$slots,"default")],2),t.hasMobileSlot?(s(),r("div",Da,[x(i.$slots,"mobile")])):v("",!0),d(nt,{table:t.table,hide_on_single:!1,pagination:t.table.data.paginate},null,8,["table","pagination"])])])])],2)}}},Ua={name:"PageHeading",components:{DynamicIcon:P},props:{title:{type:String},icon:{type:String},to:{type:Object}}},Ea={class:"page-heading-wrap"},za={key:1,class:"page-title"},Ba={key:2,class:"actions"};function ja(t,a,e,n,i,l){const u=p("DynamicIcon"),h=p("router-link");return s(),r("div",Ea,[t.$slots.title?x(t.$slots,"title",{key:0}):(s(),r("h1",za,[e.to?(s(),_(h,{key:0,to:e.to},{default:m(()=>[e.icon?(s(),_(u,{key:0,name:e.icon},null,8,["name"])):v("",!0)]),_:1},8,["to"])):v("",!0),$(" "+g(e.title),1)])),t.$slots.action?(s(),r("div",Ba,[x(t.$slots,"action")])):v("",!0)])}const cl=O(Ua,[["render",ja]]),qa={class:"table-cell"},ul={__name:"RouteCell",props:{to:{type:Object,required:!0},params:{type:Object,default:()=>({})}},setup(t){const a=t;return be(),(e,n)=>{const i=p("router-link");return s(),_(i,{class:"link block cursor-pointer route-cell",to:a.to},{default:m(()=>[o("div",qa,[x(e.$slots,"default")])]),_:3},8,["to"])}}};export{il as C,X as F,cl as P,sl as T,ul as _,rl as a,ut as b,ol as c,nl as d,vt as e,Ie as f,nt as g,je as m};
