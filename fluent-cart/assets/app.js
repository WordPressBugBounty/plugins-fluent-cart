var ef=Object.defineProperty;var tf=(e,t,a)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var me=(e,t,a)=>tf(e,typeof t!="symbol"?t+"":t,a);import{c as _,r as Ta,o as A,a as b,b as U,w as r,d as o,u as f,e as x,f as i,g as O,t as m,F as H,h as X,i as T,j as he,k as Re,l as Je,m as q,n as oe,p as fe,q as de,s as ft,v as Ql,x as Ma,y as _a,z as xa,A as af,B as gt,C as $a,D as sa,E as sf,G as Ga,H as Kn,I as Ss,T as Nn,J as Dl,K as je,L as nf,V as _u,M as of,N as Ns,O as lf,P as rf,Q as Li,R as pt,S as Qt,U as zr,W as Af,X as jr,Y as df,Z as Dn,_ as uf,$ as cf,a0 as pf,a1 as ff,a2 as hf}from"./chunks/vue.esm-bundler.js";import{u as Va,S as rt,a as oa,o as gu,c as mf,b as _f}from"./chunks/Str.js";import{_ as z,a as Ze}from"./chunks/DynamicIcon.js";import{T as yn,_ as wt,a as bn,C as Ae,b as Oi,F as ll,c as le,d as re,e as ja,P as Hi,f as vu,m as gf}from"./chunks/RouteCell.js";import{t as p,a as nt,A as De,p as ao}from"./chunks/Translator.js";import{A as ve}from"./chunks/Arr.js";import{_ as Te,P as Ua}from"./chunks/Empty.js";import{_ as tt,a as Ri,p as so,b as yu,c as bu,L as Pi,d as Il,O as wu,e as $l,P as Ki}from"./chunks/OrderCustomerInformation.js";import{C as Be,f as lt,a as vf,p as yf,b as bf,g as wf,c as Cf,d as Bf}from"./chunks/productService.js";import{_ as Lt,a as Ni,b as Gi,c as kf,S as Cu,d as Bu,e as Ff,f as ku}from"./chunks/CancelSubscription.js";import{_ as be}from"./chunks/_plugin-vue_export-helper.js";import{I as we,S as ze,B as ut}from"./chunks/Badge.js";import{c as xf,h as Ls,a as qo,g as Fu,f as Uf,b as Ps,$ as Kt,d as Sf}from"./chunks/common.js";import{M as Xt}from"./chunks/Model.js";import{R as se}from"./chunks/Rest.js";import{d as ke}from"./chunks/dayjs.min.js";import{a as zi,d as Ts,b as la,i as ca,c as Ef,s as Qf,e as rl,f as ji,r as Yi,E as os,g as xu,w as Df,h as Tl,l as If,j as il,t as $f,k as Tf,m as Mf,n as Vf,u as Lf,p as Of,o as Hf,z as Rf}from"./chunks/index.js";import{_ as xs,T as pe,m as Vt,a as Xa,i as at,r as Pf,L as Yr,b as Uu,d as Su,c as Eu}from"./chunks/dateShortCuts.js";import{n as Y}from"./chunks/Notify.js";import{S as ea,u as Ao,_ as Kf,c as Nf}from"./chunks/countries.js";import{u as Gs,L as Ge,_ as Ml}from"./chunks/NotFound.js";import{A as mn}from"./chunks/Asset.js";import{E as Gf}from"./chunks/index2.js";import{U as qr}from"./chunks/Url.js";import{u as Qu,t as Du}from"./chunks/timezone.js";import{e as no,i as qi,U as Wi,p as zf}from"./chunks/Utils.js";import{_ as na,a as ma,C as Vl}from"./chunks/CopyToClipboard.js";import{_ as wn,P as Iu}from"./chunks/ProductVariationSelector.js";import{B as Xi}from"./chunks/BundleProducts.js";import{E as Ws,v as jf,i as Yf}from"./chunks/defaults.js";import qf from"./chunks/Screenshot.js";import{u as Wf}from"./chunks/useElementPlusComponents.js";import"./chunks/index3.js";class Xf extends yn{getTabs(){return null}getToggleableColumns(){return[{label:p("Lifetime Value (LTV)"),value:"ltv"},{label:p("Customer Since"),value:"customer_since"},{label:p("Last Purchase Date"),value:"last_purchase_date"}]}getSortableColumns(){return[{label:p("Customer ID"),value:"id"},{label:p("Name"),value:"first_name"},{label:p("Purchases"),value:"purchase_count"},{label:p("Lifetime Value (LTV)"),value:"ltv"},{label:p("Last Purchase Date"),value:"last_purchase_date"},{label:p("Customer Since"),value:"created_at"}]}getSearchHint(){return p("Search by, #ID, First Name, Last Name and Email")}getFetchUrl(){return"customers"}parseResponse(t){return t.customers}getTableName(){return"customers"}getAdvanceFilterOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.advance")}getSearchGuideOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.customer_filter_options.guide")}useFullWidthSearch(){return!0}}function $u(e){return Xf.init(e)}const Jf={name:"CardFooter"},Zf={class:"fct-card-footer"};function eh(e,t,a,s,n,l){return A(),_("div",Zf,[Ta(e.$slots,"default")])}const Ji=be(Jf,[["render",eh]]),th={class:"table-cell"},ah={class:"fct-product-info-card w-full"},sh={class:"fct-product-info-media"},nh={class:"fct-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},oh={class:"fct-product-info-name flex flex-col items-start gap-3"},lh={class:"table-cell"},rh={class:"table-cell"},ih={class:"table-cell"},Ah={class:"table-cell"};const dh={__name:"CustomersLoader",props:{nextPageCount:{type:Number,default:0},customerTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=Array.from({length:t.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=b("el-table-column"),d=b("el-skeleton-item"),u=b("el-table"),c=b("el-skeleton");return A(),U(c,{animated:""},{template:r(()=>[o(u,{data:f(a),class:"w-full compact-table responsive"},{empty:r(()=>n[0]||(n[0]=[])),default:r(()=>[x("",!0),o(l,{label:s.$t("Customer"),width:"300"},{default:r(()=>[i("div",th,[i("div",ah,[i("div",sh,[o(d,{varient:"image",class:"w-10 h-10.5 rounded-full flex-none"})]),i("div",nh,[i("div",oh,[o(d,{varient:"p",class:"max-w-[190px]"}),o(d,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),o(l,{label:s.$t("Address"),width:"300"},{default:r(()=>[i("div",lh,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),o(l,{label:s.$t("Purchases"),width:"150"},{default:r(()=>[i("div",rh,[o(d,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),e.customerTable.isColumnVisible("last_purchase_date")?(A(),U(l,{key:1,label:s.$t("Last Purchase Date"),width:"200"},{default:r(()=>[i("div",ih,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.customerTable.isColumnVisible("customer_since")?(A(),U(l,{key:2,label:s.$t("Customer Since"),width:"150"},{default:r(()=>[i("div",Ah,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),(e.customerTable.isColumnVisible("actions"),x("",!0))]),_:1},8,["data"])]),_:1})}}},uh={key:0,class:"fct-customer-card"},ch={class:"fct-customer-avatar"},ph=["src"],fh={class:"fct-customer-details"},hh={class:"fct-customer-name"},mh={class:"fct-customer-id"},_h={class:"fct-customer-email"},gh=["innerHTML"],vh={key:1},yh={__name:"CustomersTable",props:{table:{type:Object,required:!0}},setup(e){return(t,a)=>{const s=b("el-table-column"),n=b("el-table");return A(),U(n,{data:e.table.getTableData(),class:"w-full compact-table"},{empty:r(()=>[o(Te,{icon:"Empty/ListView","has-dark":!0,text:f(p)("No customer found!")},null,8,["text"])]),default:r(()=>[x("",!0),o(s,{label:f(p)("Customer"),width:"300"},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>{var u,c,h,v,y;return[(u=l.row)!=null&&u.id?(A(),_("div",uh,[i("div",ch,[i("span",null,[i("img",{src:(c=l.row)==null?void 0:c.photo,alt:"avatar"},null,8,ph)])]),i("div",fh,[i("div",hh,[O(m(((h=l.row)==null?void 0:h.full_name)||f(p)("No Name"))+" ",1),i("span",mh,"#"+m(f(nt)((v=l.row)==null?void 0:v.id)),1)]),i("div",_h,m((y=l.row)==null?void 0:y.email),1)])])):x("",!0)]}),_:2},1032,["to"])]}),_:1},8,["label"]),o(s,{label:f(p)("Address"),width:"300"},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>[O(m(t.getOrderAddress(l.row)),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),o(s,{label:f(p)("Purchases"),width:90},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>[O(m(f(nt)(l.row.purchase_count)),1)]),_:2},1032,["to"])]}),_:1},8,["label"]),e.table.isColumnVisible("ltv")?(A(),U(s,{key:1,label:f(p)("LTV"),width:100},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>[i("span",{innerHTML:f(Be).formatNumber(l.row.ltv,!0,!1)},null,8,gh)]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0),e.table.isColumnVisible("last_purchase_date")?(A(),U(s,{key:2,label:f(p)("Last Purchase Date"),width:"200"},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>[l.row.last_purchase_date?(A(),U(Lt,{key:0,"date-time":l.row.last_purchase_date},null,8,["date-time"])):(A(),_("span",vh,"---"))]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0),e.table.isColumnVisible("customer_since")?(A(),U(s,{key:3,label:f(p)("Customer Since"),width:"150"},{default:r(l=>{var d;return[o(wt,{class:"hover:no-underline",to:{name:"view_customer",params:{customer_id:(d=l.row)==null?void 0:d.id}}},{default:r(()=>[o(Lt,{"date-time":l.row.created_at},null,8,["date-time"])]),_:2},1032,["to"])]}),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},bh={class:"fct-customer-table-mobile-wrap"},wh=["onClick"],Ch={class:"fct-customer-table-mobile-header"},Bh={key:0,class:"fct-customer-table-customer-col fct-customer-card"},kh={class:"fct-customer-avatar"},Fh=["src"],xh={class:"fct-customer-details"},Uh={class:"fct-customer-name"},Sh={class:"fct-customer-id"},Eh={class:"fct-customer-email"},Qh={class:"fct-customer-table-purchases-col"},Dh={class:"fct-customer-table-mobile-body"},Ih={class:"fct-customer-table-mobile-body-list"},$h={key:0,class:"fct-customer-table-ltv-col"},Th={class:"label"},Mh=["innerHTML"],Vh={key:1,class:"fct-customer-table-last-purchase-date-col"},Lh={class:"label"},Oh={class:"value"},Hh={key:2,class:"fct-customer-table-customer-since-col"},Rh={class:"label"},Ph={class:"value"},Kh={class:"fct-customer-table-mobile-footer"},Nh={class:"fct-customer-table-address-col"},Gh={key:0,class:"py-6 text-center"},zh={__name:"CustomersTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:p("No customers found.")}},setup(e){return(t,a)=>(A(),_("div",bh,[(A(!0),_(H,null,X(e.table.getTableData(),(s,n)=>(A(),_("div",{key:s.id,class:"fct-customer-table-mobile-row",onClick:l=>t.$router.push({name:"view_customer",params:{customer_id:s.id}})},[i("div",Ch,[s!=null&&s.id?(A(),_("div",Bh,[i("div",kh,[i("img",{src:s==null?void 0:s.photo,alt:"avatar"},null,8,Fh)]),i("div",xh,[i("div",Uh,[O(m((s==null?void 0:s.full_name)||f(p)("No Name"))+" ",1),i("span",Sh,"#"+m(s==null?void 0:s.id),1)]),i("div",Eh,m(s==null?void 0:s.email),1)])])):x("",!0),i("div",Qh,m(s.purchase_count)+" "+m(s.purchase_count>1?f(p)("Purchases"):f(p)("Purchase")),1)]),i("div",Dh,[i("ul",Ih,[e.table.isColumnVisible("ltv")?(A(),_("li",$h,[i("div",Th,m(f(p)("LTV:")),1),i("div",{class:"value",innerHTML:f(Be).formatNumber(s.ltv,!0,!1)},null,8,Mh)])):x("",!0),e.table.isColumnVisible("last_purchase_date")?(A(),_("li",Vh,[i("div",Lh,m(f(p)("Last Purchase Date:")),1),i("div",Oh,[o(Lt,{"date-time":s.last_purchase_date},null,8,["date-time"])])])):x("",!0),e.table.isColumnVisible("customer_since")?(A(),_("li",Hh,[i("div",Rh,m(f(p)("Customer Since:")),1),i("div",Ph,[o(Lt,{"date-time":s.created_at},null,8,["date-time"])])])):x("",!0)])]),i("div",Kh,[i("div",Nh,[o(z,{name:"LocationPin"}),O(" "+m(t.getOrderAddress(s)),1)])])],8,wh))),128)),e.table.getTableData().length===0?(A(),_("div",Gh,[o(Te,{icon:"Empty/Order","has-dark":"",text:e.emptyText},null,8,["text"])])):x("",!0)]))}},jh={},Yh={class:"px-4 py-3"},qh={class:"flex items-center justify-between mb-3"},Wh={class:"flex items-center justify-between mb-3"},Xh={class:"flex items-center justify-between mb-3"},Jh={class:"flex items-center justify-between mb-3"};function Zh(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),U(s,{animated:""},{template:r(()=>[i("div",Yh,[i("div",qh,[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",Wh,[o(a,{varient:"p",class:"w-[50px]"}),o(a,{varient:"p",class:"w-[80px]"})]),i("div",Xh,[o(a,{varient:"p",class:"w-[120px]"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",Jh,[o(a,{varient:"p",class:"w-[100px]"}),o(a,{varient:"p",class:"w-[100px]"})]),o(a,{varient:"p",class:"w-[230px]"})])]),_:1})}const em=be(jh,[["render",Zh]]),tm={class:"fct-all-customers-page fct-layout-width"},am={class:"fct-all-customers-wrap"},sm={key:1},nm={__name:"AllCustomers",setup(e){const t=$u(),a=T({showModal:!1,action:"create",title:p("Create New Customer"),customer:{}}),s=T(!1),n=()=>{s.value=window.innerWidth<768};return he(()=>{n(),window.addEventListener("resize",n)}),Re(()=>{window.removeEventListener("resize",n)}),(l,d)=>{const u=b("el-button");return A(),_("div",tm,[o(tt,{permission:"customers/manage"},{default:r(()=>[o(Ua,{title:f(p)("Customers")},{action:r(()=>[o(u,{type:"primary",onClick:d[0]||(d[0]=c=>a.value.showModal=!0)},{default:r(()=>[O(m(f(p)("Add Customer")),1)]),_:1})]),_:1},8,["title"])]),_:1}),o(tt,{permission:"customers/view"},{default:r(()=>[i("div",am,[o(bn,{table:f(t),"has-mobile-slot":!0},{mobile:r(()=>[f(t).isLoading()?(A(),U(em,{key:0})):x("",!0),o(zh,{table:f(t)},null,8,["table"])]),default:r(()=>[f(t).isLoading()?(A(),U(dh,{key:0,customerTable:f(t),"next-page-count":f(t).nextPageCount},null,8,["customerTable","next-page-count"])):(A(),_("div",sm,[o(yh,{table:f(t)},null,8,["table"])]))]),_:1},8,["table"])])]),_:1}),o(tt,{permission:"customers/manage"},{default:r(()=>[o(Ri,{"onUpdate:customerModal":d[1]||(d[1]=()=>{a.value.showModal=!1,a.value.customer={},f(t).fetch()}),customerModalInfos:a.value,customer_id:a.value.customer_id,customer:a.value.customer,onCloseModal:d[2]||(d[2]=c=>a.value.showModal=!1)},null,8,["customerModalInfos","customer_id","customer"])]),_:1})])}}};class om extends yn{getTabs(){return{all:p("All"),completed:p("Completed"),processing:p("Processing"),"on-hold":p("On Hold"),paid:p("Paid"),subscription:p("Subscription"),renewal:p("Renewal"),refunded:p("Refunded"),partially_refunded:p("Partially Refunded"),upgraded_from:{title:p("Upgraded From"),description:p("Orders upgraded from another order")},upgraded_to:{title:p("Upgraded To"),description:p("Orders upgraded to another order")}}}getToggleableColumns(){return[{label:p("Customer"),value:"customer"},{label:p("Items"),value:"order_items"},{label:p("Order Status"),value:"status"},{label:p("Order Type"),value:"type"},{label:p("Actions"),value:"actions"}]}getSortableColumns(){return[{label:p("Order ID"),value:"id"},{label:p("Total"),value:"total_amount"},{label:p("Payment Status"),value:"payment_status"},{label:p("Order Status"),value:"status"}]}getSearchHint(){return p("Search by invoice no, customer name, or customer email.")}getFetchUrl(){return"orders"}parseResponse(t){return t.orders}getTableName(){return"order_table"}getAdvanceFilterOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.order_filter_options.advance")}getSearchGuideOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.order_filter_options.guide")}getCustomColumns(){return ve.get(window,"fluentCartAdminApp.filter_options.order_filter_options.columns")||{}}with(){return["customer.primary_billing_address","order_items"]}}function Tu(e){return om.init(e)}const lm={class:"fct-order-stats-card"},rm={class:"fct-order-stats-card-head"},im={class:"fct-order-stats-card-head-content"},Am={class:"text"},dm={key:0,class:"value"},um={class:"fct-order-stats-card-body"},cm={key:0,class:"change-wrap"},pm={key:0,class:"change-title"},fm={key:1,class:"change-title"},hm={key:1,class:"change-wrap"},mm={class:"change-title"},_m={__name:"StatCard",props:{direction:String,stat:Object,statRanges:Object,currentRange:String|Number,statKey:String|Number,loading:Boolean},setup(e){const t=Je().ctx,a=e,s=q(()=>{switch(a.statKey){case"total_orders":return"warning";case"paid_orders":return"blue";case"total_paid_order_items":return"danger";case"total_paid_amounts":return"secondary";default:return"info"}}),n=q(()=>d.value===0?"":d.value>0?"success":"danger"),l=c=>c.is_cents?t.formatNumber(c.current_count):nt(c.current_count),d=q(()=>{let c=xf(a.stat.current_count,a.stat.compare_count)??0;return c===""?0:c}),u=q(()=>a.statRanges[a.currentRange].label);return(c,h)=>{const v=b("el-skeleton"),y=b("el-skeleton-item");return A(),_("div",lm,[i("div",rm,[o(we,{size:"large",bg:s.value,soft:""},{default:r(()=>[Ta(c.$slots,"icon")]),_:3},8,["bg"]),i("div",im,[o(v,{loading:e.loading,animated:"",rows:0},null,8,["loading"]),i("span",Am,m(e.stat.title),1),e.loading?x("",!0):(A(),_("div",dm,m(l(e.stat)),1))])]),i("div",um,[o(v,{loading:e.loading,animated:""},{template:r(()=>[o(y,{variant:"p",class:"w-1/2 h-4"})]),_:1},8,["loading"]),!e.loading&&e.currentRange!=="all_time"?(A(),_("div",cm,[i("span",{class:oe("change "+n.value)},[d.value!==0?(A(),U(z,{key:0,name:d.value>0?"CaretUp":"CaretDown"},null,8,["name"])):x("",!0),O(" "+m(d.value===0?c.$t("Same as previous"):Math.abs(d.value)+"%"),1)],2),d.value>0?(A(),_("span",pm,m(f(p)("More than %s",u.value==="Today"?c.$t("Yesterday"):c.$t(u.value))),1)):d.value<0?(A(),_("span",fm,m(f(p)("Less than %s",u.value==="Today"?c.$t("Yesterday"):c.$t(u.value))),1)):x("",!0)])):x("",!0),!e.loading&&e.currentRange==="all_time"?(A(),_("div",hm,[i("span",mm,m(c.$t("All Time")),1)])):x("",!0)])])}}};class Mu{constructor(){me(this,"_attributes",{})}attribute(t,a){return this._attributes[t]=a,this}setAttribute(t){return this._attributes=typeof t=="object"?t:this._attributes,this}}class Bs{static install(t,a,s={},n=!1){const l=new a(...Object.values(s));Object.keys(l).forEach(d=>{(n||!t.hasOwnProperty(d))&&(t[d]=l[d])}),Object.getOwnPropertyNames(a.prototype).forEach(d=>{d!=="constructor"&&typeof l[d]=="function"&&(n||typeof t[d]!="function")&&(t[d]=l[d].bind(t))})}}class gm extends Xt{constructor(){super(...arguments);me(this,"data",{salesGrowthChart:[],countryHeatMap:[],fluctuations:[],dashBoardStats:[],recentOrders:[],unfulfilledOrders:[],recentActivities:[],topSoldProducts:[],currencySign:De.get("shop.currency_sign"),isBusy:{recentActivities:!1,fluctuations:!1,dashBoardStats:!1,recentOrders:!1,unfulfilledOrders:!1,countryHeatMap:!1,salesGrowthChart:!0,topSoldProducts:!0}})}get controllerKey(){return"ReportingController"}beforeInit(){}makeRequest(a,s,n,l){this.data.isBusy[l]=!0,typeof s!="object"&&(s={});const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null||(this.data[n]=l[s])}).catch(l=>{}).finally(()=>{this.data.isBusy[n]=!1})}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}getSalesGrowthChart(a={}){return this.makeRequest("sales-growth-chart",a,"salesGrowthChart","salesGrowthChart")}getCountryHeatMap(a={}){return this.makeRequest("country-heat-map",a,"countryHeatMap","countryHeatMap")}getRecentOrders(a={}){return this.makeRequest("get-recent-orders",a,"recentOrders","recentOrders")}getUnfulfilledOrders(a={}){return this.makeRequest("get-unfulfilled-orders",a,"unfulfilledOrders","unfulfilledOrders")}getRecentActivities(a={}){return this.makeRequest("get-recent-activities",a,"recentActivities","recentActivities")}getSummary(a={}){return this.makeRequest("get-dashboard-summary",a,"summaryData","summaryData")}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}}const Rt=gm.init(),vm={},ym={class:"fct-order-stats-row"},bm={class:"p-4 bg-gray-25 rounded dark:bg-primary-500"},wm={class:"flex items-center gap-2 mb-3"},Cm={class:"right flex flex-col flex-1 gap-2"};function Bm(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),_("div",ym,[(A(),_(H,null,X(4,n=>o(s,{animated:"",key:n},{template:r(()=>[i("div",bm,[i("div",wm,[o(a,{variant:"p",class:"rounded w-10 h-10 block"}),i("div",Cm,[o(a,{variant:"p",class:"rounded w-4/5 block"}),o(a,{variant:"p",class:"rounded w-1/2 block"})])]),i("div",null,[o(a,{variant:"p",class:"rounded w-2/3 block"})])])]),_:2},1024)),64))])}const km=be(vm,[["render",Bm]]),Fm={class:"fct-order-stats-wrap"},xm={class:"fct-order-stats-actions flex items-center gap-2.5"},Um={class:"fct-order-stats-body"},Sm={key:1,class:"fct-order-stats-row"},Em={class:"flex justify-end mt-2"},Qm=Object.assign({name:"OrderStatBar"},{__name:"OrderStatBar",setup(e){const t=T(ze.get("order_stat_collapse",!1)),a=T(""),s=Je().ctx,n=T(!1),l=T(!0),d=T(!1),u=T("-7 days"),c=Va(),h=T({"-0 days":{label:p("Today"),desc:p("Compared to yesterday")},"-7 days":{label:p("Last 7 days"),desc:p("Compared to the previous 7 days")},"-30 days":{label:p("Last 30 days"),desc:p("Compared to the previous 30 days")},this_month:{label:p("This Month"),desc:p("Compared to the previous Month")},all_time:{label:p("All Time"),desc:p("See All time Sales Stat")}}),v=async g=>{if(u.value!==g)try{u.value=g,a.value="collapse",t.value===!0&&(t.value=!1,ze.set("order_stat_collapse",t.value)),await Promise.all([s.Storage().set("order_quick_stat_bar_range",u.value),y()])}catch(B){console.error("Error in handleStatRangeChanged:",B)}},y=()=>{d.value=!1,l.value=!0;const g={"-0 days":[ke().startOf("day").format("YYYY-MM-DD"),ke().endOf("day").format("YYYY-MM-DD")],"-7 days":[ke().subtract(7,"days").startOf("day").format("YYYY-MM-DD"),ke().endOf("day").format("YYYY-MM-DD")],"-30 days":[ke().subtract(30,"days").startOf("day").format("YYYY-MM-DD"),ke().endOf("day").format("YYYY-MM-DD")],this_month:[ke().startOf("month").format("YYYY-MM-DD"),ke().endOf("day").format("YYYY-MM-DD")],all_time:[null,null]},[B,w]=g[u.value]||[ke().startOf("month"),ke().endOf("day")],C={startDate:B,endDate:w,paymentStatus:"all"};Rt.getDashboardStats({params:{...C}}).then(()=>{n.value=Rt.data.dashBoardStats}).catch(F=>{console.error("Error fetching dashboard stats:",F)}).finally(()=>{l.value=!1})};return he(()=>{u.value=ze.get("order_quick_stat_bar_range","-0 days");let g=ze.get("order_quick_stat_bar_collapse_item");a.value=g===null?"collapse":g,y()}),(g,B)=>{const w=b("el-button");return A(),_("div",Fm,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Order Stats Overview"),border_bottom:""},{action:r(()=>[i("div",xm,[o(Oi,{class:"hide-animation-on-mobile"},{default:r(()=>[(A(!0),_(H,null,X(h.value,(C,F)=>(A(),U(ll,{title:`${f(p)("Order Stats Overview of")} ${C.label}`,tabindex:"0",key:F,onClick:S=>v(F),class:oe(F===u.value?"active":"")},{default:r(()=>[O(m(C.label),1)]),_:2},1032,["title","onClick","class"]))),128))]),_:1})])]),_:1},8,["title"]),o(le,null,{default:r(()=>[i("div",Um,[l.value?(A(),U(km,{key:0})):(A(),_("div",Sm,[(A(!0),_(H,null,X(n.value,(C,F)=>(A(),_("div",{key:F,class:"fct-order-stats-col cursor-pointer",onClick:B[0]||(B[0]=S=>f(c).push({name:"reports_orders"}))},[(A(),U(_m,{key:F,stat:C,"current-range":u.value,"stat-ranges":h.value,loading:l.value,"stat-key":F},{icon:r(()=>[o(z,{name:C.icon},null,8,["name"])]),_:2},1032,["stat","current-range","stat-ranges","loading","stat-key"]))]))),128))])),i("div",Em,[o(w,{text:"",class:"underline-link-button",onClick:B[1]||(B[1]=C=>f(c).push({name:"reports_orders"}))},{default:r(()=>[O(m(f(p)("See Full Report")),1)]),_:1})])])]),_:1})]),_:1})])}}}),Dm={class:"table-cell"},Im={class:"table-cell"},$m={class:"table-cell"},Tm={class:"table-cell"},Mm={class:"table-cell items-center gap-1"},Vm={class:"table-cell"},Lm={class:"table-cell"},Om={class:"table-cell"},Hm={__name:"OrdersLoader",props:{nextPageCount:{type:Number,default:0},orderTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=n=>t.orderTable.columns.includes(n),s=Array.from({length:t.nextPageCount},(n,l)=>l+1);return(n,l)=>{const d=b("el-table-column"),u=b("el-skeleton-item"),c=b("el-table"),h=b("el-skeleton");return A(),U(h,{animated:""},{template:r(()=>[o(c,{data:f(s),class:"w-full compact-table responsive"},{empty:r(()=>l[0]||(l[0]=[])),default:r(()=>[x("",!0),o(d,{label:n.$t("# Date"),width:140},{default:r(()=>[i("div",Dm,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),a("customer")?(A(),U(d,{key:1,width:"100",label:n.$t("Customer")},{default:r(()=>[i("div",Im,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("order_items")?(A(),U(d,{key:2,label:n.$t("Items"),width:"250"},{default:r(()=>[i("div",$m,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),o(d,{width:"100",label:n.$t("Total")},{default:r(()=>[i("div",Tm,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"]),o(d,{width:"150",label:n.$t("Payment Status")},{default:r(()=>[i("div",Mm,[o(u,{varient:"p",class:"w-4/5"}),o(u,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"]),a("status")?(A(),U(d,{key:3,width:"150",label:n.$t("Status")},{default:r(()=>[i("div",Vm,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("type")?(A(),U(d,{key:4,width:"110",label:n.$t("Order Type")},{default:r(()=>[i("div",Lm,[o(u,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),a("actions")?(A(),U(d,{key:5,width:"60",label:""},{default:r(()=>[i("div",Om,[o(u,{varient:"p",class:"w-3/5"})])]),_:1})):x("",!0)]),_:1},8,["data"])]),_:1})}}},Rm={},Pm={class:"px-4 py-3"},Km={class:"grid grid-cols-3 gap-5 mt-5"};function Nm(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),U(s,{animated:""},{template:r(()=>[i("div",Pm,[(A(),_(H,null,X(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",Km,[(A(),_(H,null,X(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const Gm=be(Rm,[["render",Nm]]),zm={class:"fct-all-orders-page fct-layout-width"},jm={class:"fct-all-orders-wrap"},Ym={__name:"AllOrders",setup(e){const t=Tu({instance:Je()}),a=T(!1),s=T(!1),n=()=>{s.value=window.innerWidth<768},l=u=>{u==="show_order_stats"&&(ze.set("show_order_stats",!a.value),a.value=!a.value),u==="show_delete_bulk_action"&&t.showBulkDeleteAction(!0),u==="hide_delete_bulk_action"&&t.showBulkDeleteAction(!1)},d=()=>{const u=ze.get("show_order_stats");u&&(a.value=u)};return he(()=>{d(),n(),window.addEventListener("resize",n)}),Re(()=>{window.removeEventListener("resize",n)}),(u,c)=>{const h=b("el-icon"),v=b("el-button"),y=b("el-dropdown-item"),g=b("el-dropdown-menu"),B=b("el-dropdown");return A(),_("div",zm,[o(Ua,{title:f(p)("Orders")},{action:r(()=>[o(tt,{permission:"reports/view"},{default:r(()=>[o(B,{trigger:"click","popper-class":"fct-dropdown",onCommand:l,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[o(y,{command:"show_order_stats"},{default:r(()=>[a.value?(A(),_(H,{key:1},[o(z,{name:"EyeOff"}),O(" "+m(f(p)("Hide Order Stats")),1)],64)):(A(),_(H,{key:0},[o(z,{name:"Eye"}),O(" "+m(f(p)("Show Order Stats")),1)],64))]),_:1}),f(t).data.showDeleteBulkAction?x("",!0):(A(),U(y,{key:0,command:"show_delete_bulk_action"},{default:r(()=>[o(z,{name:"Eye"}),O(" "+m(f(p)("Show Bulk Actions")),1)]),_:1})),f(t).data.showDeleteBulkAction?(A(),U(y,{key:1,command:"hide_delete_bulk_action"},{default:r(()=>[o(z,{name:"EyeOff"}),O(" "+m(f(p)("Hide Bulk Actions")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[o(v,null,{default:r(()=>[O(m(f(p)("More actions"))+" ",1),o(h,null,{default:r(()=>[o(f(zi))]),_:1})]),_:1})]),_:1})]),_:1}),o(tt,{permission:"orders/create"},{default:r(()=>[o(v,{tag:"router-link",type:"primary",to:{name:"add_order"}},{default:r(()=>[O(m(f(p)("Create Order")),1)]),_:1})]),_:1})]),_:1},8,["title"]),o(tt,{permission:"reports/view"},{default:r(()=>[a.value?(A(),U(Qm,{key:0})):x("",!0)]),_:1}),o(tt,{permission:"orders/view"},{default:r(()=>[i("div",jm,[o(bn,{table:f(t),classicTabStyle:!0,hasMobileSlot:!0},{mobile:r(()=>[f(t).isLoading()?(A(),U(Gm,{key:0})):x("",!0),f(t).isLoading()?x("",!0):(A(),U(Gi,{key:1,table:f(t),orders:f(t).getTableData(),columns:f(t).data.columns,"empty-text":f(t).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),default:r(()=>[f(t).isLoading()?(A(),U(Hm,{key:0,orderTable:f(t),"next-page-count":f(t).nextPageCount},null,8,["orderTable","next-page-count"])):(A(),U(Ni,{key:1,table:f(t),orders:f(t).getTableData(),columns:f(t).data.columns,"empty-text":f(t).emptyMessage},null,8,["table","orders","columns","empty-text"]))]),_:1},8,["table"])])]),_:1})])}}},qm={class:"setting-wrap"},Wm={class:"setting-wrap-inner"},Xm={class:"setting-confirmation-content"},Jm={class:"custom-wp-editor-wrapper"},Zm={class:"setting-save-action"},e_={__name:"InvoicePacking",setup(e){const t=T([]),a=T([]),s=T(!1),n=T(!1);Gs().onSave(()=>{h()});const d=T([p("Invoice Template"),p("Packing Slip Template"),p("Delivery Slip Template"),p("Shipping Slip Template"),p("Dispatch Slip Template")]),u=()=>{s.value=!0,se.get("templates/print-templates").then(v=>{t.value=v.templates,s.value=!1}).catch(v=>{Y.error(v)}).finally(()=>{s.value=!1})},c=()=>{s.value=!0,se.get("settings/confirmation/shortcode",{}).then(v=>{a.value=v.data}).catch(v=>{Y.error(v)}).finally(()=>{s.value=!1})},h=()=>{n.value=!0,se.put("templates/print-templates",{templates:t.value}).then(v=>{Y.success(v.message)}).catch(v=>{Y.error(v)}).finally(()=>{n.value=!1})};return he(()=>{u(),c()}),(v,y)=>{const g=b("el-skeleton");return b("el-button"),A(),_("div",qm,[o(ea,{heading:f(p)("Invoice & Packing"),"show-save-button":!1},null,8,["heading"]),i("div",Wm,[o(ja,{class:"mb-5",type:"information",content:f(p)("It will be available soon!")},null,8,["content"]),s.value?(A(!0),_(H,{key:0},X(d.value,(B,w)=>(A(),U(re,{key:w},{default:r(()=>[o(Ae,{title:B,border_bottom:""},null,8,["title"]),o(le,null,{default:r(()=>[o(g,{animated:"",rows:6})]),_:1})]),_:2},1024))),128)):x("",!0),!s.value&&t.value.length>0?(A(),_(H,{key:1},[(A(!0),_(H,null,X(t.value,(B,w)=>(A(),U(re,{key:w},{default:r(()=>[o(Ae,{title:B.title+" (Under Development)",border_bottom:""},null,8,["title"]),o(le,null,{default:r(()=>[i("div",Xm,[i("div",Jm,[o(xs,{"short-codes":a.value,modelValue:B.content,"onUpdate:modelValue":C=>B.content=C,onUpdate:C=>{B.content=C}},null,8,["short-codes","modelValue","onUpdate:modelValue","onUpdate"])])])]),_:2},1024)]),_:2},1024))),128)),i("div",Zm,[x("",!0)])],64)):x("",!0)])])}}},t_={name:"CustomersRoute"},a_={class:"fca_customers_route"};function s_(e,t,a,s,n,l){const d=b("router-view");return A(),_("div",a_,[o(d)])}const n_=be(t_,[["render",s_]]);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wr=function(e,t){return Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(a[n]=s[n])},Wr(e,t)};function La(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Wr(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var Xr=function(){return Xr=Object.assign||function(t){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},Xr.apply(this,arguments)};function Zt(e,t,a,s){function n(l){return l instanceof a?l:new a(function(d){d(l)})}return new(a||(a=Promise))(function(l,d){function u(v){try{h(s.next(v))}catch(y){d(y)}}function c(v){try{h(s.throw(v))}catch(y){d(y)}}function h(v){v.done?l(v.value):n(v.value).then(u,c)}h((s=s.apply(e,[])).next())})}function Yt(e,t){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,n,l,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(h){return function(v){return c([h,v])}}function c(h){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(l=h[0]&2?n.return:h[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,h[1])).done)return l;switch(n=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,n=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){a=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){a.label=h[1];break}if(h[0]===6&&a.label<l[1]){a.label=l[1],l=h;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(h);break}l[2]&&a.ops.pop(),a.trys.pop();continue}h=t.call(e,a)}catch(v){h=[6,v],n=0}finally{s=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function _o(e,t,a){if(arguments.length===2)for(var s=0,n=t.length,l;s<n;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||t)}var As=function(){function e(t,a,s,n){this.left=t,this.top=a,this.width=s,this.height=n}return e.prototype.add=function(t,a,s,n){return new e(this.left+t,this.top+a,this.width+s,this.height+n)},e.fromClientRect=function(t,a){return new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height)},e.fromDOMRectList=function(t,a){var s=Array.from(a).find(function(n){return n.width!==0});return s?new e(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Ll=function(e,t){return As.fromClientRect(e,t.getBoundingClientRect())},o_=function(e){var t=e.body,a=e.documentElement;if(!t||!a)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,a.scrollWidth),Math.max(t.offsetWidth,a.offsetWidth),Math.max(t.clientWidth,a.clientWidth)),n=Math.max(Math.max(t.scrollHeight,a.scrollHeight),Math.max(t.offsetHeight,a.offsetHeight),Math.max(t.clientHeight,a.clientHeight));return new As(0,0,s,n)},Ol=function(e){for(var t=[],a=0,s=e.length;a<s;){var n=e.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var l=e.charCodeAt(a++);(l&64512)===56320?t.push(((n&1023)<<10)+(l&1023)+65536):(t.push(n),a--)}else t.push(n)}return t},kt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var a=e.length;if(!a)return"";for(var s=[],n=-1,l="";++n<a;){var d=e[n];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(n+1===a||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},UA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var go=0;go<UA.length;go++)l_[UA.charCodeAt(go)]=go;var SA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",In=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vo=0;vo<SA.length;vo++)In[SA.charCodeAt(vo)]=vo;var r_=function(e){var t=e.length*.75,a=e.length,s,n=0,l,d,u,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),v=Array.isArray(h)?h:new Uint8Array(h);for(s=0;s<a;s+=4)l=In[e.charCodeAt(s)],d=In[e.charCodeAt(s+1)],u=In[e.charCodeAt(s+2)],c=In[e.charCodeAt(s+3)],v[n++]=l<<2|d>>4,v[n++]=(d&15)<<4|u>>2,v[n++]=(u&3)<<6|c&63;return h},i_=function(e){for(var t=e.length,a=[],s=0;s<t;s+=2)a.push(e[s+1]<<8|e[s]);return a},A_=function(e){for(var t=e.length,a=[],s=0;s<t;s+=4)a.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return a},Hs=5,Zi=11,nr=2,d_=Zi-Hs,Vu=65536>>Hs,u_=1<<Hs,or=u_-1,c_=1024>>Hs,p_=Vu+c_,f_=p_,h_=32,m_=f_+h_,__=65536>>Zi,g_=1<<d_,v_=g_-1,EA=function(e,t,a){return e.slice?e.slice(t,a):new Uint16Array(Array.prototype.slice.call(e,t,a))},y_=function(e,t,a){return e.slice?e.slice(t,a):new Uint32Array(Array.prototype.slice.call(e,t,a))},b_=function(e,t){var a=r_(e),s=Array.isArray(a)?A_(a):new Uint32Array(a),n=Array.isArray(a)?i_(a):new Uint16Array(a),l=24,d=EA(n,l/2,s[4]/2),u=s[5]===2?EA(n,(l+s[4])/2):y_(s,Math.ceil((l+s[4])/4));return new w_(s[0],s[1],s[2],s[3],d,u)},w_=function(){function e(t,a,s,n,l,d){this.initialValue=t,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=d}return e.prototype.get=function(t){var a;if(t>=0){if(t<55296||t>56319&&t<=65535)return a=this.index[t>>Hs],a=(a<<nr)+(t&or),this.data[a];if(t<=65535)return a=this.index[Vu+(t-55296>>Hs)],a=(a<<nr)+(t&or),this.data[a];if(t<this.highStart)return a=m_-__+(t>>Zi),a=this.index[a],a+=t>>Hs&v_,a=this.index[a],a=(a<<nr)+(t&or),this.data[a];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),QA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yo=0;yo<QA.length;yo++)C_[QA.charCodeAt(yo)]=yo;var B_="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",DA=50,k_=1,Lu=2,Ou=3,F_=4,x_=5,IA=7,Hu=8,$A=9,vs=10,Jr=11,TA=12,Zr=13,U_=14,$n=15,ei=16,bo=17,Un=18,S_=19,MA=20,ti=21,Sn=22,lr=23,Xs=24,Aa=25,Tn=26,Mn=27,Js=28,E_=29,Ms=30,Q_=31,wo=32,Co=33,ai=34,si=35,ni=36,oo=37,oi=38,Wo=39,Xo=40,rr=41,Ru=42,D_=43,I_=[9001,65288],Pu="!",Ne="",Bo="",li=b_(B_),as=[Ms,ni],ri=[k_,Lu,Ou,x_],Ku=[vs,Hu],VA=[Mn,Tn],$_=ri.concat(Ku),LA=[oi,Wo,Xo,ai,si],T_=[$n,Zr],M_=function(e,t){t===void 0&&(t="strict");var a=[],s=[],n=[];return e.forEach(function(l,d){var u=li.get(l);if(u>DA?(n.push(!0),u-=DA):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(d),a.push(ei);if(u===F_||u===Jr){if(d===0)return s.push(d),a.push(Ms);var c=a[d-1];return $_.indexOf(c)===-1?(s.push(s[d-1]),a.push(c)):(s.push(d),a.push(Ms))}if(s.push(d),u===Q_)return a.push(t==="strict"?ti:oo);if(u===Ru||u===E_)return a.push(Ms);if(u===D_)return l>=131072&&l<=196605||l>=196608&&l<=262141?a.push(oo):a.push(Ms);a.push(u)}),[s,a,n]},ir=function(e,t,a,s){var n=s[a];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var l=a;l<=s.length;){l++;var d=s[l];if(d===t)return!0;if(d!==vs)break}if(n===vs)for(var l=a;l>0;){l--;var u=s[l];if(Array.isArray(e)?e.indexOf(u)!==-1:e===u)for(var c=a;c<=s.length;){c++;var d=s[c];if(d===t)return!0;if(d!==vs)break}if(u!==vs)break}return!1},OA=function(e,t){for(var a=e;a>=0;){var s=t[a];if(s===vs)a--;else return s}return 0},V_=function(e,t,a,s,n){if(a[s]===0)return Ne;var l=s-1;if(Array.isArray(n)&&n[l]===!0)return Ne;var d=l-1,u=l+1,c=t[l],h=d>=0?t[d]:0,v=t[u];if(c===Lu&&v===Ou)return Ne;if(ri.indexOf(c)!==-1)return Pu;if(ri.indexOf(v)!==-1||Ku.indexOf(v)!==-1)return Ne;if(OA(l,t)===Hu)return Bo;if(li.get(e[l])===Jr||(c===wo||c===Co)&&li.get(e[u])===Jr||c===IA||v===IA||c===$A||[vs,Zr,$n].indexOf(c)===-1&&v===$A||[bo,Un,S_,Xs,Js].indexOf(v)!==-1||OA(l,t)===Sn||ir(lr,Sn,l,t)||ir([bo,Un],ti,l,t)||ir(TA,TA,l,t))return Ne;if(c===vs)return Bo;if(c===lr||v===lr)return Ne;if(v===ei||c===ei)return Bo;if([Zr,$n,ti].indexOf(v)!==-1||c===U_||h===ni&&T_.indexOf(c)!==-1||c===Js&&v===ni||v===MA||as.indexOf(v)!==-1&&c===Aa||as.indexOf(c)!==-1&&v===Aa||c===Mn&&[oo,wo,Co].indexOf(v)!==-1||[oo,wo,Co].indexOf(c)!==-1&&v===Tn||as.indexOf(c)!==-1&&VA.indexOf(v)!==-1||VA.indexOf(c)!==-1&&as.indexOf(v)!==-1||[Mn,Tn].indexOf(c)!==-1&&(v===Aa||[Sn,$n].indexOf(v)!==-1&&t[u+1]===Aa)||[Sn,$n].indexOf(c)!==-1&&v===Aa||c===Aa&&[Aa,Js,Xs].indexOf(v)!==-1)return Ne;if([Aa,Js,Xs,bo,Un].indexOf(v)!==-1)for(var y=l;y>=0;){var g=t[y];if(g===Aa)return Ne;if([Js,Xs].indexOf(g)!==-1)y--;else break}if([Mn,Tn].indexOf(v)!==-1)for(var y=[bo,Un].indexOf(c)!==-1?d:l;y>=0;){var g=t[y];if(g===Aa)return Ne;if([Js,Xs].indexOf(g)!==-1)y--;else break}if(oi===c&&[oi,Wo,ai,si].indexOf(v)!==-1||[Wo,ai].indexOf(c)!==-1&&[Wo,Xo].indexOf(v)!==-1||[Xo,si].indexOf(c)!==-1&&v===Xo||LA.indexOf(c)!==-1&&[MA,Tn].indexOf(v)!==-1||LA.indexOf(v)!==-1&&c===Mn||as.indexOf(c)!==-1&&as.indexOf(v)!==-1||c===Xs&&as.indexOf(v)!==-1||as.concat(Aa).indexOf(c)!==-1&&v===Sn&&I_.indexOf(e[u])===-1||as.concat(Aa).indexOf(v)!==-1&&c===Un)return Ne;if(c===rr&&v===rr){for(var B=a[l],w=1;B>0&&(B--,t[B]===rr);)w++;if(w%2!==0)return Ne}return c===wo&&v===Co?Ne:Bo},L_=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var a=M_(e,t.lineBreak),s=a[0],n=a[1],l=a[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(u){return[Aa,Ms,Ru].indexOf(u)!==-1?oo:u}));var d=t.wordBreak==="keep-all"?l.map(function(u,c){return u&&e[c]>=19968&&e[c]<=40959}):void 0;return[s,n,d]},O_=function(){function e(t,a,s,n){this.codePoints=t,this.required=a===Pu,this.start=s,this.end=n}return e.prototype.slice=function(){return kt.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),H_=function(e,t){var a=Ol(e),s=L_(a,t),n=s[0],l=s[1],d=s[2],u=a.length,c=0,h=0;return{next:function(){if(h>=u)return{done:!0,value:null};for(var v=Ne;h<u&&(v=V_(a,l,n,++h,d))===Ne;);if(v!==Ne||h===u){var y=new O_(a,v,c,h);return c=h,{value:y,done:!1}}return{done:!0,value:null}}}},R_=1,P_=2,uo=4,HA=8,Al=10,RA=47,Gn=92,K_=9,N_=32,ko=34,En=61,G_=35,z_=36,j_=37,Fo=39,xo=40,Qn=41,Y_=95,aa=45,q_=33,W_=60,X_=62,J_=64,Z_=91,eg=93,tg=61,ag=123,Uo=63,sg=125,PA=124,ng=126,og=128,KA=65533,Ar=42,Os=43,lg=44,rg=58,ig=59,lo=46,Ag=0,dg=8,ug=11,cg=14,pg=31,fg=127,Pa=-1,Nu=48,Gu=97,zu=101,hg=102,mg=117,_g=122,ju=65,Yu=69,qu=70,gg=85,vg=90,Wt=function(e){return e>=Nu&&e<=57},yg=function(e){return e>=55296&&e<=57343},Zs=function(e){return Wt(e)||e>=ju&&e<=qu||e>=Gu&&e<=hg},bg=function(e){return e>=Gu&&e<=_g},wg=function(e){return e>=ju&&e<=vg},Cg=function(e){return bg(e)||wg(e)},Bg=function(e){return e>=og},So=function(e){return e===Al||e===K_||e===N_},dl=function(e){return Cg(e)||Bg(e)||e===Y_},NA=function(e){return dl(e)||Wt(e)||e===aa},kg=function(e){return e>=Ag&&e<=dg||e===ug||e>=cg&&e<=pg||e===fg},ms=function(e,t){return e!==Gn?!1:t!==Al},Eo=function(e,t,a){return e===aa?dl(t)||ms(t,a):dl(e)?!0:!!(e===Gn&&ms(e,t))},dr=function(e,t,a){return e===Os||e===aa?Wt(t)?!0:t===lo&&Wt(a):Wt(e===lo?t:e)},Fg=function(e){var t=0,a=1;(e[t]===Os||e[t]===aa)&&(e[t]===aa&&(a=-1),t++);for(var s=[];Wt(e[t]);)s.push(e[t++]);var n=s.length?parseInt(kt.apply(void 0,s),10):0;e[t]===lo&&t++;for(var l=[];Wt(e[t]);)l.push(e[t++]);var d=l.length,u=d?parseInt(kt.apply(void 0,l),10):0;(e[t]===Yu||e[t]===zu)&&t++;var c=1;(e[t]===Os||e[t]===aa)&&(e[t]===aa&&(c=-1),t++);for(var h=[];Wt(e[t]);)h.push(e[t++]);var v=h.length?parseInt(kt.apply(void 0,h),10):0;return a*(n+u*Math.pow(10,-d))*Math.pow(10,c*v)},xg={type:2},Ug={type:3},Sg={type:4},Eg={type:13},Qg={type:8},Dg={type:21},Ig={type:9},$g={type:10},Tg={type:11},Mg={type:12},Vg={type:14},Qo={type:23},Lg={type:1},Og={type:25},Hg={type:24},Rg={type:26},Pg={type:27},Kg={type:28},Ng={type:29},Gg={type:31},ii={type:32},Wu=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Ol(t))},e.prototype.read=function(){for(var t=[],a=this.consumeToken();a!==ii;)t.push(a),a=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case ko:return this.consumeStringToken(ko);case G_:var a=this.peekCodePoint(0),s=this.peekCodePoint(1),n=this.peekCodePoint(2);if(NA(a)||ms(s,n)){var l=Eo(a,s,n)?P_:R_,d=this.consumeName();return{type:5,value:d,flags:l}}break;case z_:if(this.peekCodePoint(0)===En)return this.consumeCodePoint(),Eg;break;case Fo:return this.consumeStringToken(Fo);case xo:return xg;case Qn:return Ug;case Ar:if(this.peekCodePoint(0)===En)return this.consumeCodePoint(),Vg;break;case Os:if(dr(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case lg:return Sg;case aa:var u=t,c=this.peekCodePoint(0),h=this.peekCodePoint(1);if(dr(u,c,h))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Eo(u,c,h))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===aa&&h===X_)return this.consumeCodePoint(),this.consumeCodePoint(),Hg;break;case lo:if(dr(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case RA:if(this.peekCodePoint(0)===Ar)for(this.consumeCodePoint();;){var v=this.consumeCodePoint();if(v===Ar&&(v=this.consumeCodePoint(),v===RA))return this.consumeToken();if(v===Pa)return this.consumeToken()}break;case rg:return Rg;case ig:return Pg;case W_:if(this.peekCodePoint(0)===q_&&this.peekCodePoint(1)===aa&&this.peekCodePoint(2)===aa)return this.consumeCodePoint(),this.consumeCodePoint(),Og;break;case J_:var y=this.peekCodePoint(0),g=this.peekCodePoint(1),B=this.peekCodePoint(2);if(Eo(y,g,B)){var d=this.consumeName();return{type:7,value:d}}break;case Z_:return Kg;case Gn:if(ms(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case eg:return Ng;case tg:if(this.peekCodePoint(0)===En)return this.consumeCodePoint(),Qg;break;case ag:return Tg;case sg:return Mg;case mg:case gg:var w=this.peekCodePoint(0),C=this.peekCodePoint(1);return w===Os&&(Zs(C)||C===Uo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case PA:if(this.peekCodePoint(0)===En)return this.consumeCodePoint(),Ig;if(this.peekCodePoint(0)===PA)return this.consumeCodePoint(),Dg;break;case ng:if(this.peekCodePoint(0)===En)return this.consumeCodePoint(),$g;break;case Pa:return ii}return So(t)?(this.consumeWhiteSpace(),Gg):Wt(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):dl(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:kt(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],a=this.consumeCodePoint();Zs(a)&&t.length<6;)t.push(a),a=this.consumeCodePoint();for(var s=!1;a===Uo&&t.length<6;)t.push(a),a=this.consumeCodePoint(),s=!0;if(s){var n=parseInt(kt.apply(void 0,t.map(function(c){return c===Uo?Nu:c})),16),l=parseInt(kt.apply(void 0,t.map(function(c){return c===Uo?qu:c})),16);return{type:30,start:n,end:l}}var d=parseInt(kt.apply(void 0,t),16);if(this.peekCodePoint(0)===aa&&Zs(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var u=[];Zs(a)&&u.length<6;)u.push(a),a=this.consumeCodePoint();var l=parseInt(kt.apply(void 0,u),16);return{type:30,start:d,end:l}}else return{type:30,start:d,end:d}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===xo?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===xo?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===Fo||a===ko){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa||this.peekCodePoint(0)===Qn)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Qo)}for(;;){var n=this.consumeCodePoint();if(n===Pa||n===Qn)return{type:22,value:kt.apply(void 0,t)};if(So(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Pa||this.peekCodePoint(0)===Qn?(this.consumeCodePoint(),{type:22,value:kt.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Qo);if(n===ko||n===Fo||n===xo||kg(n))return this.consumeBadUrlRemnants(),Qo;if(n===Gn)if(ms(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Qo;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;So(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Qn||t===Pa)return;ms(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var a=5e4,s="";t>0;){var n=Math.min(a,t);s+=kt.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),s},e.prototype.consumeStringToken=function(t){var a="",s=0;do{var n=this._value[s];if(n===Pa||n===void 0||n===t)return a+=this.consumeStringSlice(s),{type:0,value:a};if(n===Al)return this._value.splice(0,s),Lg;if(n===Gn){var l=this._value[s+1];l!==Pa&&l!==void 0&&(l===Al?(a+=this.consumeStringSlice(s),s=-1,this._value.shift()):ms(n,l)&&(a+=this.consumeStringSlice(s),a+=kt(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},e.prototype.consumeNumber=function(){var t=[],a=uo,s=this.peekCodePoint(0);for((s===Os||s===aa)&&t.push(this.consumeCodePoint());Wt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(s===lo&&Wt(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),a=HA;Wt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),n=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===Yu||s===zu)&&((n===Os||n===aa)&&Wt(l)||Wt(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),a=HA;Wt(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Fg(t),a]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),a=t[0],s=t[1],n=this.peekCodePoint(0),l=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Eo(n,l,d)){var u=this.consumeName();return{type:15,number:a,flags:s,unit:u}}return n===j_?(this.consumeCodePoint(),{type:16,number:a,flags:s}):{type:17,number:a,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Zs(t)){for(var a=kt(t);Zs(this.peekCodePoint(0))&&a.length<6;)a+=kt(this.consumeCodePoint());So(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(a,16);return s===0||yg(s)||s>1114111?KA:s}return t===Pa?KA:t},e.prototype.consumeName=function(){for(var t="";;){var a=this.consumeCodePoint();if(NA(a))t+=kt(a);else if(ms(a,this.peekCodePoint(0)))t+=kt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),t}},e}(),Xu=function(){function e(t){this._tokens=t}return e.create=function(t){var a=new Wu;return a.write(t),new e(a.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var a=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var a=this.consumeComponentValue();if(a.type===32)return t;t.push(a),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var a={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||jg(s,t))return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var a={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return a;this.reconsumeToken(s),a.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?ii:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),co=function(e){return e.type===15},Cn=function(e){return e.type===17},ot=function(e){return e.type===20},zg=function(e){return e.type===0},Ai=function(e,t){return ot(e)&&e.value===t},Ju=function(e){return e.type!==31},_n=function(e){return e.type!==31&&e.type!==4},Ja=function(e){var t=[],a=[];return e.forEach(function(s){if(s.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(a),a=[];return}s.type!==31&&a.push(s)}),a.length&&t.push(a),t},jg=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Us=function(e){return e.type===17||e.type===15},Et=function(e){return e.type===16||Us(e)},Zu=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Nt={type:17,number:0,flags:uo},eA={type:16,number:50,flags:uo},ys={type:16,number:100,flags:uo},Vn=function(e,t,a){var s=e[0],n=e[1];return[dt(s,t),dt(typeof n<"u"?n:s,a)]},dt=function(e,t){if(e.type===16)return e.number/100*t;if(co(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},ec="deg",tc="grad",ac="rad",sc="turn",Hl={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case ec:return Math.PI*t.number/180;case tc:return Math.PI/200*t.number;case ac:return t.number;case sc:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},nc=function(e){return e.type===15&&(e.unit===ec||e.unit===tc||e.unit===ac||e.unit===sc)},oc=function(e){var t=e.filter(ot).map(function(a){return a.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Nt,Nt];case"to top":case"bottom":return Ba(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Nt,ys];case"to right":case"left":return Ba(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ys,ys];case"to bottom":case"top":return Ba(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ys,Nt];case"to left":case"right":return Ba(270)}return 0},Ba=function(e){return Math.PI*e/180},ks={name:"color",parse:function(e,t){if(t.type===18){var a=Yg[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return a(e,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),n=t.value.substring(1,2),l=t.value.substring(2,3);return bs(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),n=t.value.substring(1,2),l=t.value.substring(2,3),d=t.value.substring(3,4);return bs(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),parseInt(d+d,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),n=t.value.substring(2,4),l=t.value.substring(4,6);return bs(parseInt(s,16),parseInt(n,16),parseInt(l,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),n=t.value.substring(2,4),l=t.value.substring(4,6),d=t.value.substring(6,8);return bs(parseInt(s,16),parseInt(n,16),parseInt(l,16),parseInt(d,16)/255)}}if(t.type===20){var u=ls[t.value.toUpperCase()];if(typeof u<"u")return u}return ls.TRANSPARENT}},Fs=function(e){return(255&e)===0},Mt=function(e){var t=255&e,a=255&e>>8,s=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+s+","+a+","+t/255+")":"rgb("+n+","+s+","+a+")"},bs=function(e,t,a,s){return(e<<24|t<<16|a<<8|Math.round(s*255)<<0)>>>0},GA=function(e,t){if(e.type===17)return e.number;if(e.type===16){var a=t===3?1:255;return t===3?e.number/100*a:Math.round(e.number/100*a)}return 0},zA=function(e,t){var a=t.filter(_n);if(a.length===3){var s=a.map(GA),n=s[0],l=s[1],d=s[2];return bs(n,l,d,1)}if(a.length===4){var u=a.map(GA),n=u[0],l=u[1],d=u[2],c=u[3];return bs(n,l,d,c)}return 0};function ur(e,t,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(t-e)*a*6+e:a<1/2?t:a<2/3?(t-e)*6*(2/3-a)+e:e}var jA=function(e,t){var a=t.filter(_n),s=a[0],n=a[1],l=a[2],d=a[3],u=(s.type===17?Ba(s.number):Hl.parse(e,s))/(Math.PI*2),c=Et(n)?n.number/100:0,h=Et(l)?l.number/100:0,v=typeof d<"u"&&Et(d)?dt(d,1):1;if(c===0)return bs(h*255,h*255,h*255,1);var y=h<=.5?h*(c+1):h+c-h*c,g=h*2-y,B=ur(g,y,u+1/3),w=ur(g,y,u),C=ur(g,y,u-1/3);return bs(B*255,w*255,C*255,v)},Yg={hsl:jA,hsla:jA,rgb:zA,rgba:zA},zn=function(e,t){return ks.parse(e,Xu.create(t).parseComponentValue())},ls={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qg={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(a){if(ot(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Wg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rl=function(e,t){var a=ks.parse(e,t[0]),s=t[1];return s&&Et(s)?{color:a,stop:s}:{color:a,stop:null}},YA=function(e,t){var a=e[0],s=e[e.length-1];a.stop===null&&(a.stop=Nt),s.stop===null&&(s.stop=ys);for(var n=[],l=0,d=0;d<e.length;d++){var u=e[d].stop;if(u!==null){var c=dt(u,t);c>l?n.push(c):n.push(l),l=c}else n.push(null)}for(var h=null,d=0;d<n.length;d++){var v=n[d];if(v===null)h===null&&(h=d);else if(h!==null){for(var y=d-h,g=n[h-1],B=(v-g)/(y+1),w=1;w<=y;w++)n[h+w-1]=B*w;h=null}}return e.map(function(C,F){var S=C.color;return{color:S,stop:Math.max(Math.min(1,n[F]/t),0)}})},Xg=function(e,t,a){var s=t/2,n=a/2,l=dt(e[0],t)-s,d=n-dt(e[1],a);return(Math.atan2(d,l)+Math.PI*2)%(Math.PI*2)},Jg=function(e,t,a){var s=typeof e=="number"?e:Xg(e,t,a),n=Math.abs(t*Math.sin(s))+Math.abs(a*Math.cos(s)),l=t/2,d=a/2,u=n/2,c=Math.sin(s-Math.PI/2)*u,h=Math.cos(s-Math.PI/2)*u;return[n,l-h,l+h,d-c,d+c]},Qa=function(e,t){return Math.sqrt(e*e+t*t)},qA=function(e,t,a,s,n){var l=[[0,0],[0,t],[e,0],[e,t]];return l.reduce(function(d,u){var c=u[0],h=u[1],v=Qa(a-c,s-h);return(n?v<d.optimumDistance:v>d.optimumDistance)?{optimumCorner:u,optimumDistance:v}:d},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},Zg=function(e,t,a,s,n){var l=0,d=0;switch(e.size){case 0:e.shape===0?l=d=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(a),Math.abs(a-n)):e.shape===1&&(l=Math.min(Math.abs(t),Math.abs(t-s)),d=Math.min(Math.abs(a),Math.abs(a-n)));break;case 2:if(e.shape===0)l=d=Math.min(Qa(t,a),Qa(t,a-n),Qa(t-s,a),Qa(t-s,a-n));else if(e.shape===1){var u=Math.min(Math.abs(a),Math.abs(a-n))/Math.min(Math.abs(t),Math.abs(t-s)),c=qA(s,n,t,a,!0),h=c[0],v=c[1];l=Qa(h-t,(v-a)/u),d=u*l}break;case 1:e.shape===0?l=d=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(a),Math.abs(a-n)):e.shape===1&&(l=Math.max(Math.abs(t),Math.abs(t-s)),d=Math.max(Math.abs(a),Math.abs(a-n)));break;case 3:if(e.shape===0)l=d=Math.max(Qa(t,a),Qa(t,a-n),Qa(t-s,a),Qa(t-s,a-n));else if(e.shape===1){var u=Math.max(Math.abs(a),Math.abs(a-n))/Math.max(Math.abs(t),Math.abs(t-s)),y=qA(s,n,t,a,!1),h=y[0],v=y[1];l=Qa(h-t,(v-a)/u),d=u*l}break}return Array.isArray(e.size)&&(l=dt(e.size[0],s),d=e.size.length===2?dt(e.size[1],n):l),[l,d]},ev=function(e,t){var a=Ba(180),s=[];return Ja(t).forEach(function(n,l){if(l===0){var d=n[0];if(d.type===20&&d.value==="to"){a=oc(n);return}else if(nc(d)){a=Hl.parse(e,d);return}}var u=Rl(e,n);s.push(u)}),{angle:a,stops:s,type:1}},Do=function(e,t){var a=Ba(180),s=[];return Ja(t).forEach(function(n,l){if(l===0){var d=n[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){a=oc(n);return}else if(nc(d)){a=(Hl.parse(e,d)+Ba(270))%Ba(360);return}}var u=Rl(e,n);s.push(u)}),{angle:a,stops:s,type:1}},tv=function(e,t){var a=Ba(180),s=[],n=1,l=0,d=3,u=[];return Ja(t).forEach(function(c,h){var v=c[0];if(h===0){if(ot(v)&&v.value==="linear"){n=1;return}else if(ot(v)&&v.value==="radial"){n=2;return}}if(v.type===18){if(v.name==="from"){var y=ks.parse(e,v.values[0]);s.push({stop:Nt,color:y})}else if(v.name==="to"){var y=ks.parse(e,v.values[0]);s.push({stop:ys,color:y})}else if(v.name==="color-stop"){var g=v.values.filter(_n);if(g.length===2){var y=ks.parse(e,g[1]),B=g[0];Cn(B)&&s.push({stop:{type:16,number:B.number*100,flags:B.flags},color:y})}}}}),n===1?{angle:(a+Ba(180))%Ba(360),stops:s,type:n}:{size:d,shape:l,stops:s,position:u,type:n}},lc="closest-side",rc="farthest-side",ic="closest-corner",Ac="farthest-corner",dc="circle",uc="ellipse",cc="cover",pc="contain",av=function(e,t){var a=0,s=3,n=[],l=[];return Ja(t).forEach(function(d,u){var c=!0;if(u===0){var h=!1;c=d.reduce(function(y,g){if(h)if(ot(g))switch(g.value){case"center":return l.push(eA),y;case"top":case"left":return l.push(Nt),y;case"right":case"bottom":return l.push(ys),y}else(Et(g)||Us(g))&&l.push(g);else if(ot(g))switch(g.value){case dc:return a=0,!1;case uc:return a=1,!1;case"at":return h=!0,!1;case lc:return s=0,!1;case cc:case rc:return s=1,!1;case pc:case ic:return s=2,!1;case Ac:return s=3,!1}else if(Us(g)||Et(g))return Array.isArray(s)||(s=[]),s.push(g),!1;return y},c)}if(c){var v=Rl(e,d);n.push(v)}}),{size:s,shape:a,stops:n,position:l,type:2}},Io=function(e,t){var a=0,s=3,n=[],l=[];return Ja(t).forEach(function(d,u){var c=!0;if(u===0?c=d.reduce(function(v,y){if(ot(y))switch(y.value){case"center":return l.push(eA),!1;case"top":case"left":return l.push(Nt),!1;case"right":case"bottom":return l.push(ys),!1}else if(Et(y)||Us(y))return l.push(y),!1;return v},c):u===1&&(c=d.reduce(function(v,y){if(ot(y))switch(y.value){case dc:return a=0,!1;case uc:return a=1,!1;case pc:case lc:return s=0,!1;case rc:return s=1,!1;case ic:return s=2,!1;case cc:case Ac:return s=3,!1}else if(Us(y)||Et(y))return Array.isArray(s)||(s=[]),s.push(y),!1;return v},c)),c){var h=Rl(e,d);n.push(h)}}),{size:s,shape:a,stops:n,position:l,type:2}},sv=function(e){return e.type===1},nv=function(e){return e.type===2},tA={name:"image",parse:function(e,t){if(t.type===22){var a={url:t.value,type:0};return e.cache.addImage(t.value),a}if(t.type===18){var s=fc[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function ov(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!fc[e.name])}var fc={"linear-gradient":ev,"-moz-linear-gradient":Do,"-ms-linear-gradient":Do,"-o-linear-gradient":Do,"-webkit-linear-gradient":Do,"radial-gradient":av,"-moz-radial-gradient":Io,"-ms-radial-gradient":Io,"-o-radial-gradient":Io,"-webkit-radial-gradient":Io,"-webkit-gradient":tv},lv={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var a=t[0];return a.type===20&&a.value==="none"?[]:t.filter(function(s){return _n(s)&&ov(s)}).map(function(s){return tA.parse(e,s)})}},rv={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(a){if(ot(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},iv={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ja(t).map(function(a){return a.filter(Et)}).map(Zu)}},Av={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ja(t).map(function(a){return a.filter(ot).map(function(s){return s.value}).join(" ")}).map(dv)}},dv=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},fn;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(fn||(fn={}));var uv={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ja(t).map(function(a){return a.filter(cv)})}},cv=function(e){return ot(e)||Et(e)},Pl=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},pv=Pl("top"),fv=Pl("right"),hv=Pl("bottom"),mv=Pl("left"),Kl=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,a){return Zu(a.filter(Et))}}},_v=Kl("top-left"),gv=Kl("top-right"),vv=Kl("bottom-right"),yv=Kl("bottom-left"),Nl=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},bv=Nl("top"),wv=Nl("right"),Cv=Nl("bottom"),Bv=Nl("left"),Gl=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,a){return co(a)?a.number:0}}},kv=Gl("top"),Fv=Gl("right"),xv=Gl("bottom"),Uv=Gl("left"),Sv={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ev={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Qv={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).reduce(function(a,s){return a|Dv(s.value)},0)}},Dv=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Iv={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$v={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},ul;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ul||(ul={}));var Tv={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return ul.STRICT;case"normal":default:return ul.NORMAL}}},Mv={name:"line-height",initialValue:"normal",prefix:!1,type:4},WA=function(e,t){return ot(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Et(e)?dt(e,t):t},Vv={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:tA.parse(e,t)}},Lv={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},di={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},zl=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ov=zl("top"),Hv=zl("right"),Rv=zl("bottom"),Pv=zl("left"),Kv={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Nv={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},jl=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Gv=jl("top"),zv=jl("right"),jv=jl("bottom"),Yv=jl("left"),qv={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Wv={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xv={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Ai(t[0],"none")?[]:Ja(t).map(function(a){for(var s={color:ls.TRANSPARENT,offsetX:Nt,offsetY:Nt,blur:Nt},n=0,l=0;l<a.length;l++){var d=a[l];Us(d)?(n===0?s.offsetX=d:n===1?s.offsetY=d:s.blur=d,n++):s.color=ks.parse(e,d)}return s})}},Jv={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Zv={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var a=ay[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return a(t.values)}return null}},ey=function(e){var t=e.filter(function(a){return a.type===17}).map(function(a){return a.number});return t.length===6?t:null},ty=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),a=t[0],s=t[1];t[2],t[3];var n=t[4],l=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var d=t[12],u=t[13];return t[14],t[15],t.length===16?[a,s,n,l,d,u]:null},ay={matrix:ey,matrix3d:ty},XA={type:16,number:50,flags:uo},sy=[XA,XA],ny={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var a=t.filter(Et);return a.length!==2?sy:[a[0],a[1]]}},oy={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},jn;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(jn||(jn={}));var ly={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return jn.BREAK_ALL;case"keep-all":return jn.KEEP_ALL;case"normal":default:return jn.NORMAL}}},ry={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(Cn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},hc={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},iy={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Cn(t)?t.number:1}},Ay={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dy={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(ot).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},uy={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var a=[],s=[];return t.forEach(function(n){switch(n.type){case 20:case 0:a.push(n.value);break;case 17:a.push(n.number.toString());break;case 4:s.push(a.join(" ")),a.length=0;break}}),a.length&&s.push(a.join(" ")),s.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},cy={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},py={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Cn(t))return t.number;if(ot(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},fy={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(ot).map(function(a){return a.value})}},hy={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},$t=function(e,t){return(e&t)!==0},my={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var a=t[0];return a.type===20&&a.value==="none"?[]:t}},_y={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var a=t[0];if(a.type===20&&a.value==="none")return null;for(var s=[],n=t.filter(Ju),l=0;l<n.length;l++){var d=n[l],u=n[l+1];if(d.type===20){var c=u&&Cn(u)?u.number:1;s.push({counter:d.value,increment:c})}}return s}},gy={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var a=[],s=t.filter(Ju),n=0;n<s.length;n++){var l=s[n],d=s[n+1];if(ot(l)&&l.value!=="none"){var u=d&&Cn(d)?d.number:0;a.push({counter:l.value,reset:u})}}return a}},vy={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(co).map(function(a){return hc.parse(e,a)})}},yy={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var a=t[0];if(a.type===20&&a.value==="none")return null;var s=[],n=t.filter(zg);if(n.length%2!==0)return null;for(var l=0;l<n.length;l+=2){var d=n[l].value,u=n[l+1].value;s.push({open:d,close:u})}return s}},JA=function(e,t,a){if(!e)return"";var s=e[Math.min(t,e.length-1)];return s?a?s.open:s.close:""},by={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&Ai(t[0],"none")?[]:Ja(t).map(function(a){for(var s={color:255,offsetX:Nt,offsetY:Nt,blur:Nt,spread:Nt,inset:!1},n=0,l=0;l<a.length;l++){var d=a[l];Ai(d,"inset")?s.inset=!0:Us(d)?(n===0?s.offsetX=d:n===1?s.offsetY=d:n===2?s.blur=d:s.spread=d,n++):s.color=ks.parse(e,d)}return s})}},wy={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var a=[0,1,2],s=[];return t.filter(ot).forEach(function(n){switch(n.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),a.forEach(function(n){s.indexOf(n)===-1&&s.push(n)}),s}},Cy={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},By={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return co(t)?t.number:0}},ky=function(){function e(t,a){var s,n;this.animationDuration=Ue(t,vy,a.animationDuration),this.backgroundClip=Ue(t,qg,a.backgroundClip),this.backgroundColor=Ue(t,Wg,a.backgroundColor),this.backgroundImage=Ue(t,lv,a.backgroundImage),this.backgroundOrigin=Ue(t,rv,a.backgroundOrigin),this.backgroundPosition=Ue(t,iv,a.backgroundPosition),this.backgroundRepeat=Ue(t,Av,a.backgroundRepeat),this.backgroundSize=Ue(t,uv,a.backgroundSize),this.borderTopColor=Ue(t,pv,a.borderTopColor),this.borderRightColor=Ue(t,fv,a.borderRightColor),this.borderBottomColor=Ue(t,hv,a.borderBottomColor),this.borderLeftColor=Ue(t,mv,a.borderLeftColor),this.borderTopLeftRadius=Ue(t,_v,a.borderTopLeftRadius),this.borderTopRightRadius=Ue(t,gv,a.borderTopRightRadius),this.borderBottomRightRadius=Ue(t,vv,a.borderBottomRightRadius),this.borderBottomLeftRadius=Ue(t,yv,a.borderBottomLeftRadius),this.borderTopStyle=Ue(t,bv,a.borderTopStyle),this.borderRightStyle=Ue(t,wv,a.borderRightStyle),this.borderBottomStyle=Ue(t,Cv,a.borderBottomStyle),this.borderLeftStyle=Ue(t,Bv,a.borderLeftStyle),this.borderTopWidth=Ue(t,kv,a.borderTopWidth),this.borderRightWidth=Ue(t,Fv,a.borderRightWidth),this.borderBottomWidth=Ue(t,xv,a.borderBottomWidth),this.borderLeftWidth=Ue(t,Uv,a.borderLeftWidth),this.boxShadow=Ue(t,by,a.boxShadow),this.color=Ue(t,Sv,a.color),this.direction=Ue(t,Ev,a.direction),this.display=Ue(t,Qv,a.display),this.float=Ue(t,Iv,a.cssFloat),this.fontFamily=Ue(t,uy,a.fontFamily),this.fontSize=Ue(t,cy,a.fontSize),this.fontStyle=Ue(t,hy,a.fontStyle),this.fontVariant=Ue(t,fy,a.fontVariant),this.fontWeight=Ue(t,py,a.fontWeight),this.letterSpacing=Ue(t,$v,a.letterSpacing),this.lineBreak=Ue(t,Tv,a.lineBreak),this.lineHeight=Ue(t,Mv,a.lineHeight),this.listStyleImage=Ue(t,Vv,a.listStyleImage),this.listStylePosition=Ue(t,Lv,a.listStylePosition),this.listStyleType=Ue(t,di,a.listStyleType),this.marginTop=Ue(t,Ov,a.marginTop),this.marginRight=Ue(t,Hv,a.marginRight),this.marginBottom=Ue(t,Rv,a.marginBottom),this.marginLeft=Ue(t,Pv,a.marginLeft),this.opacity=Ue(t,iy,a.opacity);var l=Ue(t,Kv,a.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Ue(t,Nv,a.overflowWrap),this.paddingTop=Ue(t,Gv,a.paddingTop),this.paddingRight=Ue(t,zv,a.paddingRight),this.paddingBottom=Ue(t,jv,a.paddingBottom),this.paddingLeft=Ue(t,Yv,a.paddingLeft),this.paintOrder=Ue(t,wy,a.paintOrder),this.position=Ue(t,Wv,a.position),this.textAlign=Ue(t,qv,a.textAlign),this.textDecorationColor=Ue(t,Ay,(s=a.textDecorationColor)!==null&&s!==void 0?s:a.color),this.textDecorationLine=Ue(t,dy,(n=a.textDecorationLine)!==null&&n!==void 0?n:a.textDecoration),this.textShadow=Ue(t,Xv,a.textShadow),this.textTransform=Ue(t,Jv,a.textTransform),this.transform=Ue(t,Zv,a.transform),this.transformOrigin=Ue(t,ny,a.transformOrigin),this.visibility=Ue(t,oy,a.visibility),this.webkitTextStrokeColor=Ue(t,Cy,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ue(t,By,a.webkitTextStrokeWidth),this.wordBreak=Ue(t,ly,a.wordBreak),this.zIndex=Ue(t,ry,a.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Fs(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return $t(this.display,4)||$t(this.display,33554432)||$t(this.display,268435456)||$t(this.display,536870912)||$t(this.display,67108864)||$t(this.display,134217728)},e}(),Fy=function(){function e(t,a){this.content=Ue(t,my,a.content),this.quotes=Ue(t,yy,a.quotes)}return e}(),ZA=function(){function e(t,a){this.counterIncrement=Ue(t,_y,a.counterIncrement),this.counterReset=Ue(t,gy,a.counterReset)}return e}(),Ue=function(e,t,a){var s=new Wu,n=a!==null&&typeof a<"u"?a.toString():t.initialValue;s.write(n);var l=new Xu(s.read());switch(t.type){case 2:var d=l.parseComponentValue();return t.parse(e,ot(d)?d.value:t.initialValue);case 0:return t.parse(e,l.parseComponentValue());case 1:return t.parse(e,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(t.format){case"angle":return Hl.parse(e,l.parseComponentValue());case"color":return ks.parse(e,l.parseComponentValue());case"image":return tA.parse(e,l.parseComponentValue());case"length":var u=l.parseComponentValue();return Us(u)?u:Nt;case"length-percentage":var c=l.parseComponentValue();return Et(c)?c:Nt;case"time":return hc.parse(e,l.parseComponentValue())}break}},xy="data-html2canvas-debug",Uy=function(e){var t=e.getAttribute(xy);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ui=function(e,t){var a=Uy(e);return a===1||t===a},Za=function(){function e(t,a){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,ui(a,3))debugger;this.styles=new ky(t,window.getComputedStyle(a,null)),fi(a)&&(this.styles.animationDuration.some(function(s){return s>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=Ll(this.context,a),ui(a,4)&&(this.flags|=16)}return e}(),Sy="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ln=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $o=0;$o<ed.length;$o++)Ln[ed.charCodeAt($o)]=$o;var Ey=function(e){var t=e.length*.75,a=e.length,s,n=0,l,d,u,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),v=Array.isArray(h)?h:new Uint8Array(h);for(s=0;s<a;s+=4)l=Ln[e.charCodeAt(s)],d=Ln[e.charCodeAt(s+1)],u=Ln[e.charCodeAt(s+2)],c=Ln[e.charCodeAt(s+3)],v[n++]=l<<2|d>>4,v[n++]=(d&15)<<4|u>>2,v[n++]=(u&3)<<6|c&63;return h},Qy=function(e){for(var t=e.length,a=[],s=0;s<t;s+=2)a.push(e[s+1]<<8|e[s]);return a},Dy=function(e){for(var t=e.length,a=[],s=0;s<t;s+=4)a.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return a},Rs=5,aA=11,cr=2,Iy=aA-Rs,mc=65536>>Rs,$y=1<<Rs,pr=$y-1,Ty=1024>>Rs,My=mc+Ty,Vy=My,Ly=32,Oy=Vy+Ly,Hy=65536>>aA,Ry=1<<Iy,Py=Ry-1,td=function(e,t,a){return e.slice?e.slice(t,a):new Uint16Array(Array.prototype.slice.call(e,t,a))},Ky=function(e,t,a){return e.slice?e.slice(t,a):new Uint32Array(Array.prototype.slice.call(e,t,a))},Ny=function(e,t){var a=Ey(e),s=Array.isArray(a)?Dy(a):new Uint32Array(a),n=Array.isArray(a)?Qy(a):new Uint16Array(a),l=24,d=td(n,l/2,s[4]/2),u=s[5]===2?td(n,(l+s[4])/2):Ky(s,Math.ceil((l+s[4])/4));return new Gy(s[0],s[1],s[2],s[3],d,u)},Gy=function(){function e(t,a,s,n,l,d){this.initialValue=t,this.errorValue=a,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=d}return e.prototype.get=function(t){var a;if(t>=0){if(t<55296||t>56319&&t<=65535)return a=this.index[t>>Rs],a=(a<<cr)+(t&pr),this.data[a];if(t<=65535)return a=this.index[mc+(t-55296>>Rs)],a=(a<<cr)+(t&pr),this.data[a];if(t<this.highStart)return a=Oy-Hy+(t>>aA),a=this.index[a],a+=t>>Rs&Py,a=this.index[a],a=(a<<cr)+(t&pr),this.data[a];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var To=0;To<ad.length;To++)zy[ad.charCodeAt(To)]=To;var jy=1,fr=2,hr=3,sd=4,nd=5,Yy=7,od=8,mr=9,_r=10,ld=11,rd=12,id=13,Ad=14,gr=15,qy=function(e){for(var t=[],a=0,s=e.length;a<s;){var n=e.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){var l=e.charCodeAt(a++);(l&64512)===56320?t.push(((n&1023)<<10)+(l&1023)+65536):(t.push(n),a--)}else t.push(n)}return t},Wy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var a=e.length;if(!a)return"";for(var s=[],n=-1,l="";++n<a;){var d=e[n];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(n+1===a||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},Xy=Ny(Sy),va="",vr="",Jy=function(e){return Xy.get(e)},Zy=function(e,t,a){var s=a-2,n=t[s],l=t[a-1],d=t[a];if(l===fr&&d===hr)return va;if(l===fr||l===hr||l===sd||d===fr||d===hr||d===sd)return vr;if(l===od&&[od,mr,ld,rd].indexOf(d)!==-1||(l===ld||l===mr)&&(d===mr||d===_r)||(l===rd||l===_r)&&d===_r||d===id||d===nd||d===Yy||l===jy)return va;if(l===id&&d===Ad){for(;n===nd;)n=t[--s];if(n===Ad)return va}if(l===gr&&d===gr){for(var u=0;n===gr;)u++,n=t[--s];if(u%2===0)return va}return vr},e1=function(e){var t=qy(e),a=t.length,s=0,n=0,l=t.map(Jy);return{next:function(){if(s>=a)return{done:!0,value:null};for(var d=va;s<a&&(d=Zy(t,l,++s))===va;);if(d!==va||s===a){var u=Wy.apply(null,t.slice(n,s));return n=s,{value:u,done:!1}}return{done:!0,value:null}}}},t1=function(e){for(var t=e1(e),a=[],s;!(s=t.next()).done;)s.value&&a.push(s.value.slice());return a},a1=function(e){var t=123;if(e.createRange){var a=e.createRange();if(a.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height=t+"px",s.style.display="block",e.body.appendChild(s),a.selectNode(s);var n=a.getBoundingClientRect(),l=Math.round(n.height);if(e.body.removeChild(s),l===t)return!0}}return!1},s1=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var a=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,n=Ol(s.data).map(function(c){return kt(c)}),l=0,d={},u=n.every(function(c,h){a.setStart(s,l),a.setEnd(s,l+c.length);var v=a.getBoundingClientRect();l+=c.length;var y=v.x>d.x||v.y>d.y;return d=v,h===0?!0:y});return e.body.removeChild(t),u},n1=function(){return typeof new Image().crossOrigin<"u"},o1=function(){return typeof new XMLHttpRequest().responseType=="string"},l1=function(e){var t=new Image,a=e.createElement("canvas"),s=a.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),a.toDataURL()}catch{return!1}return!0},dd=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},r1=function(e){var t=e.createElement("canvas"),a=100;t.width=a,t.height=a;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,a,a);var n=new Image,l=t.toDataURL();n.src=l;var d=ci(a,a,0,0,n);return s.fillStyle="red",s.fillRect(0,0,a,a),ud(d).then(function(u){s.drawImage(u,0,0);var c=s.getImageData(0,0,a,a).data;s.fillStyle="red",s.fillRect(0,0,a,a);var h=e.createElement("div");return h.style.backgroundImage="url("+l+")",h.style.height=a+"px",dd(c)?ud(ci(a,a,0,0,h)):Promise.reject(!1)}).then(function(u){return s.drawImage(u,0,0),dd(s.getImageData(0,0,a,a).data)}).catch(function(){return!1})},ci=function(e,t,a,s,n){var l="http://www.w3.org/2000/svg",d=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return d.setAttributeNS(null,"width",e.toString()),d.setAttributeNS(null,"height",t.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(u),u.appendChild(n),d},ud=function(e){return new Promise(function(t,a){var s=new Image;s.onload=function(){return t(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Pt={get SUPPORT_RANGE_BOUNDS(){var e=a1(document);return Object.defineProperty(Pt,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Pt.SUPPORT_RANGE_BOUNDS&&s1(document);return Object.defineProperty(Pt,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=l1(document);return Object.defineProperty(Pt,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?r1(document):Promise.resolve(!1);return Object.defineProperty(Pt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=n1();return Object.defineProperty(Pt,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=o1();return Object.defineProperty(Pt,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Pt,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Pt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Yn=function(){function e(t,a){this.text=t,this.bounds=a}return e}(),i1=function(e,t,a,s){var n=u1(t,a),l=[],d=0;return n.forEach(function(u){if(a.textDecorationLine.length||u.trim().length>0)if(Pt.SUPPORT_RANGE_BOUNDS){var c=cd(s,d,u.length).getClientRects();if(c.length>1){var h=sA(u),v=0;h.forEach(function(g){l.push(new Yn(g,As.fromDOMRectList(e,cd(s,v+d,g.length).getClientRects()))),v+=g.length})}else l.push(new Yn(u,As.fromDOMRectList(e,c)))}else{var y=s.splitText(u.length);l.push(new Yn(u,A1(e,s))),s=y}else Pt.SUPPORT_RANGE_BOUNDS||(s=s.splitText(u.length));d+=u.length}),l},A1=function(e,t){var a=t.ownerDocument;if(a){var s=a.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(s,t);var l=Ll(e,s);return s.firstChild&&n.replaceChild(s.firstChild,s),l}}return As.EMPTY},cd=function(e,t,a){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var n=s.createRange();return n.setStart(e,t),n.setEnd(e,t+a),n},sA=function(e){if(Pt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(a){return a.segment})}return t1(e)},d1=function(e,t){if(Pt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(e)).map(function(s){return s.segment})}return p1(e,t)},u1=function(e,t){return t.letterSpacing!==0?sA(e):d1(e,t)},c1=[32,160,4961,65792,65793,4153,4241],p1=function(e,t){for(var a=H_(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],n,l=function(){if(n.value){var d=n.value.slice(),u=Ol(d),c="";u.forEach(function(h){c1.indexOf(h)===-1?c+=kt(h):(c.length&&s.push(c),s.push(kt(h)),c="")}),c.length&&s.push(c)}};!(n=a.next()).done;)l();return s},f1=function(){function e(t,a,s){this.text=h1(a.data,s.textTransform),this.textBounds=i1(t,this.text,s,a)}return e}(),h1=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(m1,_1);case 2:return e.toUpperCase();default:return e}},m1=/(^|\s|:|-|\(|\))([a-z])/g,_1=function(e,t,a){return e.length>0?t+a.toUpperCase():e},_c=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.src=s.currentSrc||s.src,n.intrinsicWidth=s.naturalWidth,n.intrinsicHeight=s.naturalHeight,n.context.cache.addImage(n.src),n}return t}(Za),gc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.canvas=s,n.intrinsicWidth=s.width,n.intrinsicHeight=s.height,n}return t}(Za),vc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this,l=new XMLSerializer,d=Ll(a,s);return s.setAttribute("width",d.width+"px"),s.setAttribute("height",d.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),n.intrinsicWidth=s.width.baseVal.value,n.intrinsicHeight=s.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(Za),yc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.value=s.value,n}return t}(Za),pi=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.start=s.start,n.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,n}return t}(Za),g1=[{type:15,flags:0,unit:"px",number:3}],v1=[{type:16,flags:0,number:50}],y1=function(e){return e.width>e.height?new As(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new As(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},b1=function(e){var t=e.type===w1?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},cl="checkbox",pl="radio",w1="password",pd=707406591,nA=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=b1(s),(n.type===cl||n.type===pl)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=y1(n.bounds)),n.type){case cl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=g1;break;case pl:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=v1;break}return n}return t}(Za),bc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this,l=s.options[s.selectedIndex||0];return n.value=l&&l.text||"",n}return t}(Za),wc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.value=s.value,n}return t}(Za),Cc=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;n.src=s.src,n.width=parseInt(s.width,10)||0,n.height=parseInt(s.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){n.tree=kc(a,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?zn(a,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):ls.TRANSPARENT,d=s.contentWindow.document.body?zn(a,getComputedStyle(s.contentWindow.document.body).backgroundColor):ls.TRANSPARENT;n.backgroundColor=Fs(l)?Fs(d)?n.styles.backgroundColor:d:l}}catch{}return n}return t}(Za),C1=["OL","UL","MENU"],Jo=function(e,t,a,s){for(var n=t.firstChild,l=void 0;n;n=l)if(l=n.nextSibling,Fc(n)&&n.data.trim().length>0)a.textNodes.push(new f1(e,n,a.styles));else if(cn(n))if(Ec(n)&&n.assignedNodes)n.assignedNodes().forEach(function(u){return Jo(e,u,a,s)});else{var d=Bc(e,n);d.styles.isVisible()&&(B1(n,d,s)?d.flags|=4:k1(d.styles)&&(d.flags|=2),C1.indexOf(n.tagName)!==-1&&(d.flags|=8),a.elements.push(d),n.slot,n.shadowRoot?Jo(e,n.shadowRoot,d,s):!fl(n)&&!xc(n)&&!hl(n)&&Jo(e,n,d,s))}},Bc=function(e,t){return hi(t)?new _c(e,t):Uc(t)?new gc(e,t):xc(t)?new vc(e,t):F1(t)?new yc(e,t):x1(t)?new pi(e,t):U1(t)?new nA(e,t):hl(t)?new bc(e,t):fl(t)?new wc(e,t):Sc(t)?new Cc(e,t):new Za(e,t)},kc=function(e,t){var a=Bc(e,t);return a.flags|=4,Jo(e,t,a,a),a},B1=function(e,t,a){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||oA(e)&&a.styles.isTransparent()},k1=function(e){return e.isPositioned()||e.isFloating()},Fc=function(e){return e.nodeType===Node.TEXT_NODE},cn=function(e){return e.nodeType===Node.ELEMENT_NODE},fi=function(e){return cn(e)&&typeof e.style<"u"&&!Zo(e)},Zo=function(e){return typeof e.className=="object"},F1=function(e){return e.tagName==="LI"},x1=function(e){return e.tagName==="OL"},U1=function(e){return e.tagName==="INPUT"},S1=function(e){return e.tagName==="HTML"},xc=function(e){return e.tagName==="svg"},oA=function(e){return e.tagName==="BODY"},Uc=function(e){return e.tagName==="CANVAS"},fd=function(e){return e.tagName==="VIDEO"},hi=function(e){return e.tagName==="IMG"},Sc=function(e){return e.tagName==="IFRAME"},hd=function(e){return e.tagName==="STYLE"},E1=function(e){return e.tagName==="SCRIPT"},fl=function(e){return e.tagName==="TEXTAREA"},hl=function(e){return e.tagName==="SELECT"},Ec=function(e){return e.tagName==="SLOT"},md=function(e){return e.tagName.indexOf("-")>0},Q1=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var a=this.counters[t];return a&&a.length?a[a.length-1]:1},e.prototype.getCounterValues=function(t){var a=this.counters[t];return a||[]},e.prototype.pop=function(t){var a=this;t.forEach(function(s){return a.counters[s].pop()})},e.prototype.parse=function(t){var a=this,s=t.counterIncrement,n=t.counterReset,l=!0;s!==null&&s.forEach(function(u){var c=a.counters[u.counter];c&&u.increment!==0&&(l=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=u.increment)});var d=[];return l&&n.forEach(function(u){var c=a.counters[u.counter];d.push(u.counter),c||(c=a.counters[u.counter]=[]),c.push(u.reset)}),d},e}(),_d={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},gd={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},D1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},I1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},en=function(e,t,a,s,n,l){return e<t||e>a?ro(e,n,l.length>0):s.integers.reduce(function(d,u,c){for(;e>=u;)e-=u,d+=s.values[c];return d},"")+l},Qc=function(e,t,a,s){var n="";do a||e--,n=s(e)+n,e/=t;while(e*t>=t);return n},Bt=function(e,t,a,s,n){var l=a-t+1;return(e<0?"-":"")+(Qc(Math.abs(e),l,s,function(d){return kt(Math.floor(d%l)+t)})+n)},Qs=function(e,t,a){a===void 0&&(a=". ");var s=t.length;return Qc(Math.abs(e),s,!1,function(n){return t[Math.floor(n%s)]})+a},ln=1,fs=2,hs=4,On=8,ss=function(e,t,a,s,n,l){if(e<-9999||e>9999)return ro(e,4,n.length>0);var d=Math.abs(e),u=n;if(d===0)return t[0]+u;for(var c=0;d>0&&c<=4;c++){var h=d%10;h===0&&$t(l,ln)&&u!==""?u=t[h]+u:h>1||h===1&&c===0||h===1&&c===1&&$t(l,fs)||h===1&&c===1&&$t(l,hs)&&e>100||h===1&&c>1&&$t(l,On)?u=t[h]+(c>0?a[c-1]:"")+u:h===1&&c>0&&(u=a[c-1]+u),d=Math.floor(d/10)}return(e<0?s:"")+u},vd="",yd="",bd="",yr="",ro=function(e,t,a){var s=a?". ":"",n=a?"":"",l=a?", ":"",d=a?" ":"";switch(t){case 0:return""+d;case 1:return""+d;case 2:return""+d;case 5:var u=Bt(e,48,57,!0,s);return u.length<4?"0"+u:u;case 4:return Qs(e,"",n);case 6:return en(e,1,3999,_d,3,s).toLowerCase();case 7:return en(e,1,3999,_d,3,s);case 8:return Bt(e,945,969,!1,s);case 9:return Bt(e,97,122,!1,s);case 10:return Bt(e,65,90,!1,s);case 11:return Bt(e,1632,1641,!0,s);case 12:case 49:return en(e,1,9999,gd,3,s);case 35:return en(e,1,9999,gd,3,s).toLowerCase();case 13:return Bt(e,2534,2543,!0,s);case 14:case 30:return Bt(e,6112,6121,!0,s);case 15:return Qs(e,"",n);case 16:return Qs(e,"",n);case 17:case 48:return ss(e,"",vd,"",n,fs|hs|On);case 47:return ss(e,"",yd,"",n,ln|fs|hs|On);case 42:return ss(e,"",vd,"",n,fs|hs|On);case 41:return ss(e,"",yd,"",n,ln|fs|hs|On);case 26:return ss(e,"","",bd,n,0);case 25:return ss(e,"","",bd,n,ln|fs|hs);case 31:return ss(e,"","",yr,l,ln|fs|hs);case 33:return ss(e,"","",yr,l,0);case 32:return ss(e,"","",yr,l,ln|fs|hs);case 18:return Bt(e,2406,2415,!0,s);case 20:return en(e,1,19999,I1,3,s);case 21:return Bt(e,2790,2799,!0,s);case 22:return Bt(e,2662,2671,!0,s);case 22:return en(e,1,10999,D1,3,s);case 23:return Qs(e,"");case 24:return Qs(e,"");case 27:return Bt(e,3302,3311,!0,s);case 28:return Qs(e,"",n);case 29:return Qs(e,"",n);case 34:return Bt(e,3792,3801,!0,s);case 37:return Bt(e,6160,6169,!0,s);case 38:return Bt(e,4160,4169,!0,s);case 39:return Bt(e,2918,2927,!0,s);case 40:return Bt(e,1776,1785,!0,s);case 43:return Bt(e,3046,3055,!0,s);case 44:return Bt(e,3174,3183,!0,s);case 45:return Bt(e,3664,3673,!0,s);case 46:return Bt(e,3872,3881,!0,s);case 3:default:return Bt(e,48,57,!0,s)}},Dc="data-html2canvas-ignore",wd=function(){function e(t,a,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=a,this.counters=new Q1,this.quoteDepth=0,!a.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(a.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,a){var s=this,n=$1(t,a);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var l=t.defaultView.pageXOffset,d=t.defaultView.pageYOffset,u=n.contentWindow,c=u.document,h=V1(n).then(function(){return Zt(s,void 0,void 0,function(){var v,y;return Yt(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(R1),u&&(u.scrollTo(a.left,a.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==a.top||u.scrollX!==a.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-a.left,u.scrollY-a.top,0,0))),v=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,M1(c)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof v=="function"?[2,Promise.resolve().then(function(){return v(c,y)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(O1(document.doctype)+"<html></html>"),H1(this.referenceElement.ownerDocument,l,d),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),h},e.prototype.createElementClone=function(t){if(ui(t,2))debugger;if(Uc(t))return this.createCanvasClone(t);if(fd(t))return this.createVideoClone(t);if(hd(t))return this.createStyleClone(t);var a=t.cloneNode(!1);return hi(a)&&(hi(t)&&t.currentSrc&&t.currentSrc!==t.src&&(a.src=t.currentSrc,a.srcset=""),a.loading==="lazy"&&(a.loading="eager")),md(a)?this.createCustomElementClone(a):a},e.prototype.createCustomElementClone=function(t){var a=document.createElement("html2canvascustomelement");return br(t.style,a),a},e.prototype.createStyleClone=function(t){try{var a=t.sheet;if(a&&a.cssRules){var s=[].slice.call(a.cssRules,0).reduce(function(l,d){return d&&typeof d.cssText=="string"?l+d.cssText:l},""),n=t.cloneNode(!1);return n.textContent=s,n}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var a;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var l=t.getContext("2d"),d=n.getContext("2d");if(d)if(!this.options.allowTaint&&l)d.putImageData(l.getImageData(0,0,t.width,t.height),0,0);else{var u=(a=t.getContext("webgl2"))!==null&&a!==void 0?a:t.getContext("webgl");if(u){var c=u.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}d.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var a=t.ownerDocument.createElement("canvas");a.width=t.offsetWidth,a.height=t.offsetHeight;var s=a.getContext("2d");try{return s&&(s.drawImage(t,0,0,a.width,a.height),this.options.allowTaint||s.getImageData(0,0,a.width,a.height)),a}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,a,s){(!cn(a)||!E1(a)&&!a.hasAttribute(Dc)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(a)))&&(!this.options.copyStyles||!cn(a)||!hd(a))&&t.appendChild(this.cloneNode(a,s))},e.prototype.cloneChildNodes=function(t,a,s){for(var n=this,l=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;l;l=l.nextSibling)if(cn(l)&&Ec(l)&&typeof l.assignedNodes=="function"){var d=l.assignedNodes();d.length&&d.forEach(function(u){return n.appendChildNode(a,u,s)})}else this.appendChildNode(a,l,s)},e.prototype.cloneNode=function(t,a){if(Fc(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&cn(t)&&(fi(t)||Zo(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var l=s.getComputedStyle(t),d=s.getComputedStyle(t,":before"),u=s.getComputedStyle(t,":after");this.referenceElement===t&&fi(n)&&(this.clonedReferenceElement=n),oA(n)&&N1(n);var c=this.counters.parse(new ZA(this.context,l)),h=this.resolvePseudoContent(t,n,d,qn.BEFORE);md(t)&&(a=!0),fd(t)||this.cloneChildNodes(t,n,a),h&&n.insertBefore(h,n.firstChild);var v=this.resolvePseudoContent(t,n,u,qn.AFTER);return v&&n.appendChild(v),this.counters.pop(c),(l&&(this.options.copyStyles||Zo(t))&&!Sc(t)||a)&&br(l,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(fl(t)||hl(t))&&(fl(n)||hl(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,a,s,n){var l=this;if(s){var d=s.content,u=a.ownerDocument;if(!(!u||!d||d==="none"||d==="-moz-alt-content"||s.display==="none")){this.counters.parse(new ZA(this.context,s));var c=new Fy(this.context,s),h=u.createElement("html2canvaspseudoelement");br(s,h),c.content.forEach(function(y){if(y.type===0)h.appendChild(u.createTextNode(y.value));else if(y.type===22){var g=u.createElement("img");g.src=y.value,g.style.opacity="1",h.appendChild(g)}else if(y.type===18){if(y.name==="attr"){var B=y.values.filter(ot);B.length&&h.appendChild(u.createTextNode(t.getAttribute(B[0].value)||""))}else if(y.name==="counter"){var w=y.values.filter(_n),C=w[0],F=w[1];if(C&&ot(C)){var S=l.counters.getCounterValue(C.value),E=F&&ot(F)?di.parse(l.context,F.value):3;h.appendChild(u.createTextNode(ro(S,E,!1)))}}else if(y.name==="counters"){var k=y.values.filter(_n),C=k[0],Q=k[1],F=k[2];if(C&&ot(C)){var I=l.counters.getCounterValues(C.value),D=F&&ot(F)?di.parse(l.context,F.value):3,M=Q&&Q.type===0?Q.value:"",$=I.map(function(R){return ro(R,D,!1)}).join(M);h.appendChild(u.createTextNode($))}}}else if(y.type===20)switch(y.value){case"open-quote":h.appendChild(u.createTextNode(JA(c.quotes,l.quoteDepth++,!0)));break;case"close-quote":h.appendChild(u.createTextNode(JA(c.quotes,--l.quoteDepth,!1)));break;default:h.appendChild(u.createTextNode(y.value))}}),h.className=mi+" "+_i;var v=n===qn.BEFORE?" "+mi:" "+_i;return Zo(a)?a.className.baseValue+=v:a.className+=v,h}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),qn;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(qn||(qn={}));var $1=function(e,t){var a=e.createElement("iframe");return a.className="html2canvas-container",a.style.visibility="hidden",a.style.position="fixed",a.style.left="-10000px",a.style.top="0px",a.style.border="0",a.width=t.width.toString(),a.height=t.height.toString(),a.scrolling="no",a.setAttribute(Dc,"true"),e.body.appendChild(a),a},T1=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},M1=function(e){return Promise.all([].slice.call(e.images,0).map(T1))},V1=function(e){return new Promise(function(t,a){var s=e.contentWindow;if(!s)return a("No window assigned for iframe");var n=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var l=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(l),t(e))},50)}})},L1=["all","d","content"],br=function(e,t){for(var a=e.length-1;a>=0;a--){var s=e.item(a);L1.indexOf(s)===-1&&t.style.setProperty(s,e.getPropertyValue(s))}return t},O1=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},H1=function(e,t,a){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||a!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,a)},R1=function(e){var t=e[0],a=e[1],s=e[2];t.scrollLeft=a,t.scrollTop=s},P1=":before",K1=":after",mi="___html2canvas___pseudoelement_before",_i="___html2canvas___pseudoelement_after",Cd=`{
    content: "" !important;
    display: none !important;
}`,N1=function(e){G1(e,"."+mi+P1+Cd+`
         .`+_i+K1+Cd)},G1=function(e,t){var a=e.ownerDocument;if(a){var s=a.createElement("style");s.textContent=t,e.appendChild(s)}},Ic=function(){function e(){}return e.getOrigin=function(t){var a=e._link;return a?(a.href=t,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),z1=function(){function e(t,a){this.context=t,this._options=a,this._cache={}}return e.prototype.addImage=function(t){var a=Promise.resolve();return this.has(t)||(Cr(t)||W1(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),a},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Zt(this,void 0,void 0,function(){var a,s,n,l,d=this;return Yt(this,function(u){switch(u.label){case 0:return a=Ic.isSameOrigin(t),s=!wr(t)&&this._options.useCORS===!0&&Pt.SUPPORT_CORS_IMAGES&&!a,n=!wr(t)&&!a&&!Cr(t)&&typeof this._options.proxy=="string"&&Pt.SUPPORT_CORS_XHR&&!s,!a&&this._options.allowTaint===!1&&!wr(t)&&!Cr(t)&&!n&&!s?[2]:(l=t,n?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,h){var v=new Image;v.onload=function(){return c(v)},v.onerror=h,(X1(l)||s)&&(v.crossOrigin="anonymous"),v.src=l,v.complete===!0&&setTimeout(function(){return c(v)},500),d._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var a=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(l,d){var u=Pt.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(u==="text")l(c.response);else{var y=new FileReader;y.addEventListener("load",function(){return l(y.result)},!1),y.addEventListener("error",function(g){return d(g)},!1),y.readAsDataURL(c.response)}else d("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=d;var h=s.indexOf("?")>-1?"&":"?";if(c.open("GET",""+s+h+"url="+encodeURIComponent(t)+"&responseType="+u),u!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=u),a._options.imageTimeout){var v=a._options.imageTimeout;c.timeout=v,c.ontimeout=function(){return d("Timed out ("+v+"ms) proxying "+n)}}c.send()})},e}(),j1=/^data:image\/svg\+xml/i,Y1=/^data:image\/.*;base64,/i,q1=/^data:image\/.*/i,W1=function(e){return Pt.SUPPORT_SVG_DRAWING||!J1(e)},wr=function(e){return q1.test(e)},X1=function(e){return Y1.test(e)},Cr=function(e){return e.substr(0,4)==="blob"},J1=function(e){return e.substr(-3).toLowerCase()==="svg"||j1.test(e)},Fe=function(){function e(t,a){this.type=0,this.x=t,this.y=a}return e.prototype.add=function(t,a){return new e(this.x+t,this.y+a)},e}(),tn=function(e,t,a){return new Fe(e.x+(t.x-e.x)*a,e.y+(t.y-e.y)*a)},Mo=function(){function e(t,a,s,n){this.type=1,this.start=t,this.startControl=a,this.endControl=s,this.end=n}return e.prototype.subdivide=function(t,a){var s=tn(this.start,this.startControl,t),n=tn(this.startControl,this.endControl,t),l=tn(this.endControl,this.end,t),d=tn(s,n,t),u=tn(n,l,t),c=tn(d,u,t);return a?new e(this.start,s,d,c):new e(c,u,l,this.end)},e.prototype.add=function(t,a){return new e(this.start.add(t,a),this.startControl.add(t,a),this.endControl.add(t,a),this.end.add(t,a))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Ca=function(e){return e.type===1},Z1=function(){function e(t){var a=t.styles,s=t.bounds,n=Vn(a.borderTopLeftRadius,s.width,s.height),l=n[0],d=n[1],u=Vn(a.borderTopRightRadius,s.width,s.height),c=u[0],h=u[1],v=Vn(a.borderBottomRightRadius,s.width,s.height),y=v[0],g=v[1],B=Vn(a.borderBottomLeftRadius,s.width,s.height),w=B[0],C=B[1],F=[];F.push((l+c)/s.width),F.push((w+y)/s.width),F.push((d+C)/s.height),F.push((h+g)/s.height);var S=Math.max.apply(Math,F);S>1&&(l/=S,d/=S,c/=S,h/=S,y/=S,g/=S,w/=S,C/=S);var E=s.width-c,k=s.height-g,Q=s.width-y,I=s.height-C,D=a.borderTopWidth,M=a.borderRightWidth,$=a.borderBottomWidth,V=a.borderLeftWidth,L=dt(a.paddingTop,t.bounds.width),R=dt(a.paddingRight,t.bounds.width),K=dt(a.paddingBottom,t.bounds.width),J=dt(a.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||d>0?ht(s.left+V/3,s.top+D/3,l-V/3,d-D/3,et.TOP_LEFT):new Fe(s.left+V/3,s.top+D/3),this.topRightBorderDoubleOuterBox=l>0||d>0?ht(s.left+E,s.top+D/3,c-M/3,h-D/3,et.TOP_RIGHT):new Fe(s.left+s.width-M/3,s.top+D/3),this.bottomRightBorderDoubleOuterBox=y>0||g>0?ht(s.left+Q,s.top+k,y-M/3,g-$/3,et.BOTTOM_RIGHT):new Fe(s.left+s.width-M/3,s.top+s.height-$/3),this.bottomLeftBorderDoubleOuterBox=w>0||C>0?ht(s.left+V/3,s.top+I,w-V/3,C-$/3,et.BOTTOM_LEFT):new Fe(s.left+V/3,s.top+s.height-$/3),this.topLeftBorderDoubleInnerBox=l>0||d>0?ht(s.left+V*2/3,s.top+D*2/3,l-V*2/3,d-D*2/3,et.TOP_LEFT):new Fe(s.left+V*2/3,s.top+D*2/3),this.topRightBorderDoubleInnerBox=l>0||d>0?ht(s.left+E,s.top+D*2/3,c-M*2/3,h-D*2/3,et.TOP_RIGHT):new Fe(s.left+s.width-M*2/3,s.top+D*2/3),this.bottomRightBorderDoubleInnerBox=y>0||g>0?ht(s.left+Q,s.top+k,y-M*2/3,g-$*2/3,et.BOTTOM_RIGHT):new Fe(s.left+s.width-M*2/3,s.top+s.height-$*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||C>0?ht(s.left+V*2/3,s.top+I,w-V*2/3,C-$*2/3,et.BOTTOM_LEFT):new Fe(s.left+V*2/3,s.top+s.height-$*2/3),this.topLeftBorderStroke=l>0||d>0?ht(s.left+V/2,s.top+D/2,l-V/2,d-D/2,et.TOP_LEFT):new Fe(s.left+V/2,s.top+D/2),this.topRightBorderStroke=l>0||d>0?ht(s.left+E,s.top+D/2,c-M/2,h-D/2,et.TOP_RIGHT):new Fe(s.left+s.width-M/2,s.top+D/2),this.bottomRightBorderStroke=y>0||g>0?ht(s.left+Q,s.top+k,y-M/2,g-$/2,et.BOTTOM_RIGHT):new Fe(s.left+s.width-M/2,s.top+s.height-$/2),this.bottomLeftBorderStroke=w>0||C>0?ht(s.left+V/2,s.top+I,w-V/2,C-$/2,et.BOTTOM_LEFT):new Fe(s.left+V/2,s.top+s.height-$/2),this.topLeftBorderBox=l>0||d>0?ht(s.left,s.top,l,d,et.TOP_LEFT):new Fe(s.left,s.top),this.topRightBorderBox=c>0||h>0?ht(s.left+E,s.top,c,h,et.TOP_RIGHT):new Fe(s.left+s.width,s.top),this.bottomRightBorderBox=y>0||g>0?ht(s.left+Q,s.top+k,y,g,et.BOTTOM_RIGHT):new Fe(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=w>0||C>0?ht(s.left,s.top+I,w,C,et.BOTTOM_LEFT):new Fe(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||d>0?ht(s.left+V,s.top+D,Math.max(0,l-V),Math.max(0,d-D),et.TOP_LEFT):new Fe(s.left+V,s.top+D),this.topRightPaddingBox=c>0||h>0?ht(s.left+Math.min(E,s.width-M),s.top+D,E>s.width+M?0:Math.max(0,c-M),Math.max(0,h-D),et.TOP_RIGHT):new Fe(s.left+s.width-M,s.top+D),this.bottomRightPaddingBox=y>0||g>0?ht(s.left+Math.min(Q,s.width-V),s.top+Math.min(k,s.height-$),Math.max(0,y-M),Math.max(0,g-$),et.BOTTOM_RIGHT):new Fe(s.left+s.width-M,s.top+s.height-$),this.bottomLeftPaddingBox=w>0||C>0?ht(s.left+V,s.top+Math.min(I,s.height-$),Math.max(0,w-V),Math.max(0,C-$),et.BOTTOM_LEFT):new Fe(s.left+V,s.top+s.height-$),this.topLeftContentBox=l>0||d>0?ht(s.left+V+J,s.top+D+L,Math.max(0,l-(V+J)),Math.max(0,d-(D+L)),et.TOP_LEFT):new Fe(s.left+V+J,s.top+D+L),this.topRightContentBox=c>0||h>0?ht(s.left+Math.min(E,s.width+V+J),s.top+D+L,E>s.width+V+J?0:c-V+J,h-(D+L),et.TOP_RIGHT):new Fe(s.left+s.width-(M+R),s.top+D+L),this.bottomRightContentBox=y>0||g>0?ht(s.left+Math.min(Q,s.width-(V+J)),s.top+Math.min(k,s.height+D+L),Math.max(0,y-(M+R)),g-($+K),et.BOTTOM_RIGHT):new Fe(s.left+s.width-(M+R),s.top+s.height-($+K)),this.bottomLeftContentBox=w>0||C>0?ht(s.left+V+J,s.top+I,Math.max(0,w-(V+J)),C-($+K),et.BOTTOM_LEFT):new Fe(s.left+V+J,s.top+s.height-($+K))}return e}(),et;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(et||(et={}));var ht=function(e,t,a,s,n){var l=4*((Math.sqrt(2)-1)/3),d=a*l,u=s*l,c=e+a,h=t+s;switch(n){case et.TOP_LEFT:return new Mo(new Fe(e,h),new Fe(e,h-u),new Fe(c-d,t),new Fe(c,t));case et.TOP_RIGHT:return new Mo(new Fe(e,t),new Fe(e+d,t),new Fe(c,h-u),new Fe(c,h));case et.BOTTOM_RIGHT:return new Mo(new Fe(c,t),new Fe(c,t+u),new Fe(e+d,h),new Fe(e,h));case et.BOTTOM_LEFT:default:return new Mo(new Fe(c,h),new Fe(c-d,h),new Fe(e,t+u),new Fe(e,t))}},ml=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},eb=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},_l=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},tb=function(){function e(t,a,s){this.offsetX=t,this.offsetY=a,this.matrix=s,this.type=0,this.target=6}return e}(),Vo=function(){function e(t,a){this.path=t,this.target=a,this.type=1}return e}(),ab=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),sb=function(e){return e.type===0},$c=function(e){return e.type===1},nb=function(e){return e.type===2},Bd=function(e,t){return e.length===t.length?e.some(function(a,s){return a===t[s]}):!1},ob=function(e,t,a,s,n){return e.map(function(l,d){switch(d){case 0:return l.add(t,a);case 1:return l.add(t+s,a);case 2:return l.add(t+s,a+n);case 3:return l.add(t,a+n)}return l})},Tc=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Mc=function(){function e(t,a){if(this.container=t,this.parent=a,this.effects=[],this.curves=new Z1(this.container),this.container.styles.opacity<1&&this.effects.push(new ab(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new tb(s,n,l))}if(this.container.styles.overflowX!==0){var d=ml(this.curves),u=_l(this.curves);Bd(d,u)?this.effects.push(new Vo(d,6)):(this.effects.push(new Vo(d,2)),this.effects.push(new Vo(u,4)))}}return e.prototype.getEffects=function(t){for(var a=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,n=this.effects.slice(0);s;){var l=s.effects.filter(function(c){return!$c(c)});if(a||s.container.styles.position!==0||!s.parent){if(n.unshift.apply(n,l),a=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var d=ml(s.curves),u=_l(s.curves);Bd(d,u)||n.unshift(new Vo(u,6))}}else n.unshift.apply(n,l);s=s.parent}return n.filter(function(c){return $t(c.target,t)})},e}(),gi=function(e,t,a,s){e.container.elements.forEach(function(n){var l=$t(n.flags,4),d=$t(n.flags,2),u=new Mc(n,e);$t(n.styles.display,2048)&&s.push(u);var c=$t(n.flags,8)?[]:s;if(l||d){var h=l||n.styles.isPositioned()?a:t,v=new Tc(u);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var y=n.styles.zIndex.order;if(y<0){var g=0;h.negativeZIndex.some(function(w,C){return y>w.element.container.styles.zIndex.order?(g=C,!1):g>0}),h.negativeZIndex.splice(g,0,v)}else if(y>0){var B=0;h.positiveZIndex.some(function(w,C){return y>=w.element.container.styles.zIndex.order?(B=C+1,!1):B>0}),h.positiveZIndex.splice(B,0,v)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(v)}else n.styles.isFloating()?h.nonPositionedFloats.push(v):h.nonPositionedInlineLevel.push(v);gi(u,v,l?v:a,c)}else n.styles.isInlineLevel()?t.inlineLevel.push(u):t.nonInlineLevel.push(u),gi(u,t,a,c);$t(n.flags,8)&&Vc(n,c)})},Vc=function(e,t){for(var a=e instanceof pi?e.start:1,s=e instanceof pi?e.reversed:!1,n=0;n<t.length;n++){var l=t[n];l.container instanceof yc&&typeof l.container.value=="number"&&l.container.value!==0&&(a=l.container.value),l.listValue=ro(a,l.container.styles.listStyleType,!0),a+=s?-1:1}},lb=function(e){var t=new Mc(e,null),a=new Tc(t),s=[];return gi(t,a,a,s),Vc(t.container,s),a},kd=function(e,t){switch(t){case 0:return ka(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ka(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ka(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ka(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},rb=function(e,t){switch(t){case 0:return ka(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return ka(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return ka(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return ka(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},ib=function(e,t){switch(t){case 0:return ka(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return ka(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return ka(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return ka(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Ab=function(e,t){switch(t){case 0:return Lo(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Lo(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Lo(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Lo(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Lo=function(e,t){var a=[];return Ca(e)?a.push(e.subdivide(.5,!1)):a.push(e),Ca(t)?a.push(t.subdivide(.5,!0)):a.push(t),a},ka=function(e,t,a,s){var n=[];return Ca(e)?n.push(e.subdivide(.5,!1)):n.push(e),Ca(a)?n.push(a.subdivide(.5,!0)):n.push(a),Ca(s)?n.push(s.subdivide(.5,!0).reverse()):n.push(s),Ca(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},Lc=function(e){var t=e.bounds,a=e.styles;return t.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},gl=function(e){var t=e.styles,a=e.bounds,s=dt(t.paddingLeft,a.width),n=dt(t.paddingRight,a.width),l=dt(t.paddingTop,a.width),d=dt(t.paddingBottom,a.width);return a.add(s+t.borderLeftWidth,l+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+n),-(t.borderTopWidth+t.borderBottomWidth+l+d))},db=function(e,t){return e===0?t.bounds:e===2?gl(t):Lc(t)},ub=function(e,t){return e===0?t.bounds:e===2?gl(t):Lc(t)},Br=function(e,t,a){var s=db(rn(e.styles.backgroundOrigin,t),e),n=ub(rn(e.styles.backgroundClip,t),e),l=cb(rn(e.styles.backgroundSize,t),a,s),d=l[0],u=l[1],c=Vn(rn(e.styles.backgroundPosition,t),s.width-d,s.height-u),h=pb(rn(e.styles.backgroundRepeat,t),c,l,s,n),v=Math.round(s.left+c[0]),y=Math.round(s.top+c[1]);return[h,v,y,d,u]},an=function(e){return ot(e)&&e.value===fn.AUTO},Oo=function(e){return typeof e=="number"},cb=function(e,t,a){var s=t[0],n=t[1],l=t[2],d=e[0],u=e[1];if(!d)return[0,0];if(Et(d)&&u&&Et(u))return[dt(d,a.width),dt(u,a.height)];var c=Oo(l);if(ot(d)&&(d.value===fn.CONTAIN||d.value===fn.COVER)){if(Oo(l)){var h=a.width/a.height;return h<l!=(d.value===fn.COVER)?[a.width,a.width/l]:[a.height*l,a.height]}return[a.width,a.height]}var v=Oo(s),y=Oo(n),g=v||y;if(an(d)&&(!u||an(u))){if(v&&y)return[s,n];if(!c&&!g)return[a.width,a.height];if(g&&c){var B=v?s:n*l,w=y?n:s/l;return[B,w]}var C=v?s:a.width,F=y?n:a.height;return[C,F]}if(c){var S=0,E=0;return Et(d)?S=dt(d,a.width):Et(u)&&(E=dt(u,a.height)),an(d)?S=E*l:(!u||an(u))&&(E=S/l),[S,E]}var k=null,Q=null;if(Et(d)?k=dt(d,a.width):u&&Et(u)&&(Q=dt(u,a.height)),k!==null&&(!u||an(u))&&(Q=v&&y?k/s*n:a.height),Q!==null&&an(d)&&(k=v&&y?Q/n*s:a.width),k!==null&&Q!==null)return[k,Q];throw new Error("Unable to calculate background-size for element")},rn=function(e,t){var a=e[t];return typeof a>"u"?e[0]:a},pb=function(e,t,a,s,n){var l=t[0],d=t[1],u=a[0],c=a[1];switch(e){case 2:return[new Fe(Math.round(s.left),Math.round(s.top+d)),new Fe(Math.round(s.left+s.width),Math.round(s.top+d)),new Fe(Math.round(s.left+s.width),Math.round(c+s.top+d)),new Fe(Math.round(s.left),Math.round(c+s.top+d))];case 3:return[new Fe(Math.round(s.left+l),Math.round(s.top)),new Fe(Math.round(s.left+l+u),Math.round(s.top)),new Fe(Math.round(s.left+l+u),Math.round(s.height+s.top)),new Fe(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new Fe(Math.round(s.left+l),Math.round(s.top+d)),new Fe(Math.round(s.left+l+u),Math.round(s.top+d)),new Fe(Math.round(s.left+l+u),Math.round(s.top+d+c)),new Fe(Math.round(s.left+l),Math.round(s.top+d+c))];default:return[new Fe(Math.round(n.left),Math.round(n.top)),new Fe(Math.round(n.left+n.width),Math.round(n.top)),new Fe(Math.round(n.left+n.width),Math.round(n.height+n.top)),new Fe(Math.round(n.left),Math.round(n.height+n.top))]}},fb="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Fd="Hidden Text",hb=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,a){var s=this._document.createElement("div"),n=this._document.createElement("img"),l=this._document.createElement("span"),d=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=a,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",d.appendChild(s),n.src=fb,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=a,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(Fd)),s.appendChild(l),s.appendChild(n);var u=n.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(Fd)),s.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-s.offsetTop+2;return d.removeChild(s),{baseline:u,middle:c}},e.prototype.getMetrics=function(t,a){var s=t+" "+a;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,a)),this._data[s]},e}(),Oc=function(){function e(t,a){this.context=t,this.options=a}return e}(),mb=1e4,_b=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n._activeEffects=[],n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),s.canvas||(n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px"),n.fontMetrics=new hb(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),n}return t.prototype.applyEffects=function(a){for(var s=this;this._activeEffects.length;)this.popEffect();a.forEach(function(n){return s.applyEffect(n)})},t.prototype.applyEffect=function(a){this.ctx.save(),nb(a)&&(this.ctx.globalAlpha=a.opacity),sb(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),$c(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(a){return Zt(this,void 0,void 0,function(){var s;return Yt(this,function(n){switch(n.label){case 0:return s=a.element.container.styles,s.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(a){return Zt(this,void 0,void 0,function(){return Yt(this,function(s){switch(s.label){case 0:if($t(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(a)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(a,s,n){var l=this;if(s===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+n);else{var d=sA(a.text);d.reduce(function(u,c){return l.ctx.fillText(c,u,a.bounds.top+n),u+l.ctx.measureText(c).width},a.bounds.left)}},t.prototype.createFontStyle=function(a){var s=a.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),n=wb(a.fontFamily).join(", "),l=co(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,s,a.fontWeight,l,n].join(" "),n,l]},t.prototype.renderTextNode=function(a,s){return Zt(this,void 0,void 0,function(){var n,l,d,u,c,h,v,y,g=this;return Yt(this,function(B){return n=this.createFontStyle(s),l=n[0],d=n[1],u=n[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(d,u),h=c.baseline,v=c.middle,y=s.paintOrder,a.textBounds.forEach(function(w){y.forEach(function(C){switch(C){case 0:g.ctx.fillStyle=Mt(s.color),g.renderTextWithLetterSpacing(w,s.letterSpacing,h);var F=s.textShadow;F.length&&w.text.trim().length&&(F.slice(0).reverse().forEach(function(S){g.ctx.shadowColor=Mt(S.color),g.ctx.shadowOffsetX=S.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=S.offsetY.number*g.options.scale,g.ctx.shadowBlur=S.blur.number,g.renderTextWithLetterSpacing(w,s.letterSpacing,h)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),s.textDecorationLine.length&&(g.ctx.fillStyle=Mt(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(S){switch(S){case 1:g.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+h),w.bounds.width,1);break;case 2:g.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:g.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+v),w.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&w.text.trim().length&&(g.ctx.strokeStyle=Mt(s.webkitTextStrokeColor),g.ctx.lineWidth=s.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+h)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(a,s,n){if(n&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var l=gl(a),d=_l(s);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,a.intrinsicWidth,a.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,d,u,c,E,E,h,v,y,g,Q,B,w,I,C,F,S,E,k,Q,I;return Yt(this,function(D){switch(D.label){case 0:this.applyEffects(a.getEffects(4)),s=a.container,n=a.curves,l=s.styles,d=0,u=s.textNodes,D.label=1;case 1:return d<u.length?(c=u[d],[4,this.renderTextNode(c,l)]):[3,4];case 2:D.sent(),D.label=3;case 3:return d++,[3,1];case 4:if(!(s instanceof _c))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return E=D.sent(),this.renderReplacedElement(s,n,E),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof gc&&this.renderReplacedElement(s,n,s.canvas),!(s instanceof vc))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return E=D.sent(),this.renderReplacedElement(s,n,E),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof Cc&&s.tree?(h=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,h.render(s.tree)]):[3,14];case 13:v=D.sent(),s.width&&s.height&&this.ctx.drawImage(v,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),D.label=14;case 14:if(s instanceof nA&&(y=Math.min(s.bounds.width,s.bounds.height),s.type===cl?s.checked&&(this.ctx.save(),this.path([new Fe(s.bounds.left+y*.39363,s.bounds.top+y*.79),new Fe(s.bounds.left+y*.16,s.bounds.top+y*.5549),new Fe(s.bounds.left+y*.27347,s.bounds.top+y*.44071),new Fe(s.bounds.left+y*.39694,s.bounds.top+y*.5649),new Fe(s.bounds.left+y*.72983,s.bounds.top+y*.23),new Fe(s.bounds.left+y*.84,s.bounds.top+y*.34085),new Fe(s.bounds.left+y*.39363,s.bounds.top+y*.79)]),this.ctx.fillStyle=Mt(pd),this.ctx.fill(),this.ctx.restore()):s.type===pl&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+y/2,s.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Mt(pd),this.ctx.fill(),this.ctx.restore())),gb(s)&&s.value.length){switch(g=this.createFontStyle(l),Q=g[0],B=g[1],w=this.fontMetrics.getMetrics(Q,B).baseline,this.ctx.font=Q,this.ctx.fillStyle=Mt(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=yb(s.styles.textAlign),I=gl(s),C=0,s.styles.textAlign){case 1:C+=I.width/2;break;case 2:C+=I.width;break}F=I.add(C,0,0,-I.height/2+1),this.ctx.save(),this.path([new Fe(I.left,I.top),new Fe(I.left+I.width,I.top),new Fe(I.left+I.width,I.top+I.height),new Fe(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Yn(s.value,F),l.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!$t(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(S=s.styles.listStyleImage,S.type!==0)return[3,18];E=void 0,k=S.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return E=D.sent(),this.ctx.drawImage(E,s.bounds.left-(E.width+10),s.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:a.listValue&&s.styles.listStyleType!==-1&&(Q=this.createFontStyle(l)[0],this.ctx.font=Q,this.ctx.fillStyle=Mt(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new As(s.bounds.left,s.bounds.top+dt(s.styles.paddingTop,s.bounds.width),s.bounds.width,WA(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Yn(a.listValue,I),l.letterSpacing,WA(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(a){return Zt(this,void 0,void 0,function(){var s,n,S,l,d,S,u,c,S,h,v,S,y,g,S,B,w,S,C,F,S;return Yt(this,function(E){switch(E.label){case 0:if($t(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:E.sent(),s=0,n=a.negativeZIndex,E.label=2;case 2:return s<n.length?(S=n[s],[4,this.renderStack(S)]):[3,5];case 3:E.sent(),E.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:E.sent(),l=0,d=a.nonInlineLevel,E.label=7;case 7:return l<d.length?(S=d[l],[4,this.renderNode(S)]):[3,10];case 8:E.sent(),E.label=9;case 9:return l++,[3,7];case 10:u=0,c=a.nonPositionedFloats,E.label=11;case 11:return u<c.length?(S=c[u],[4,this.renderStack(S)]):[3,14];case 12:E.sent(),E.label=13;case 13:return u++,[3,11];case 14:h=0,v=a.nonPositionedInlineLevel,E.label=15;case 15:return h<v.length?(S=v[h],[4,this.renderStack(S)]):[3,18];case 16:E.sent(),E.label=17;case 17:return h++,[3,15];case 18:y=0,g=a.inlineLevel,E.label=19;case 19:return y<g.length?(S=g[y],[4,this.renderNode(S)]):[3,22];case 20:E.sent(),E.label=21;case 21:return y++,[3,19];case 22:B=0,w=a.zeroOrAutoZIndexOrTransformedOrOpacity,E.label=23;case 23:return B<w.length?(S=w[B],[4,this.renderStack(S)]):[3,26];case 24:E.sent(),E.label=25;case 25:return B++,[3,23];case 26:C=0,F=a.positiveZIndex,E.label=27;case 27:return C<F.length?(S=F[C],[4,this.renderStack(S)]):[3,30];case 28:E.sent(),E.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},t.prototype.formatPath=function(a){var s=this;a.forEach(function(n,l){var d=Ca(n)?n.start:n;l===0?s.ctx.moveTo(d.x,d.y):s.ctx.lineTo(d.x,d.y),Ca(n)&&s.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(a,s,n,l){this.path(a),this.ctx.fillStyle=s,this.ctx.translate(n,l),this.ctx.fill(),this.ctx.translate(-n,-l)},t.prototype.resizeImage=function(a,s,n){var l;if(a.width===s&&a.height===n)return a;var d=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=d.createElement("canvas");u.width=Math.max(1,s),u.height=Math.max(1,n);var c=u.getContext("2d");return c.drawImage(a,0,0,a.width,a.height,0,0,s,n),u},t.prototype.renderBackgroundImage=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,d,u,c;return Yt(this,function(h){switch(h.label){case 0:s=a.styles.backgroundImage.length-1,n=function(v){var y,g,B,L,Z,te,J,W,$,w,L,Z,te,J,W,C,F,S,E,k,Q,I,D,M,$,V,L,R,K,J,W,ae,Z,te,ie,P,j,G,N,ee,ne,Ce;return Yt(this,function(Qe){switch(Qe.label){case 0:if(v.type!==0)return[3,5];y=void 0,g=v.url,Qe.label=1;case 1:return Qe.trys.push([1,3,,4]),[4,l.context.cache.match(g)];case 2:return y=Qe.sent(),[3,4];case 3:return Qe.sent(),l.context.logger.error("Error loading background-image "+g),[3,4];case 4:return y&&(B=Br(a,s,[y.width,y.height,y.width/y.height]),L=B[0],Z=B[1],te=B[2],J=B[3],W=B[4],$=l.ctx.createPattern(l.resizeImage(y,J,W),"repeat"),l.renderRepeat(L,$,Z,te)),[3,6];case 5:sv(v)?(w=Br(a,s,[null,null,null]),L=w[0],Z=w[1],te=w[2],J=w[3],W=w[4],C=Jg(v.angle,J,W),F=C[0],S=C[1],E=C[2],k=C[3],Q=C[4],I=document.createElement("canvas"),I.width=J,I.height=W,D=I.getContext("2d"),M=D.createLinearGradient(S,k,E,Q),YA(v.stops,F).forEach(function(_e){return M.addColorStop(_e.stop,Mt(_e.color))}),D.fillStyle=M,D.fillRect(0,0,J,W),J>0&&W>0&&($=l.ctx.createPattern(I,"repeat"),l.renderRepeat(L,$,Z,te))):nv(v)&&(V=Br(a,s,[null,null,null]),L=V[0],R=V[1],K=V[2],J=V[3],W=V[4],ae=v.position.length===0?[eA]:v.position,Z=dt(ae[0],J),te=dt(ae[ae.length-1],W),ie=Zg(v,Z,te,J,W),P=ie[0],j=ie[1],P>0&&j>0&&(G=l.ctx.createRadialGradient(R+Z,K+te,0,R+Z,K+te,P),YA(v.stops,P*2).forEach(function(_e){return G.addColorStop(_e.stop,Mt(_e.color))}),l.path(L),l.ctx.fillStyle=G,P!==j?(N=a.bounds.left+.5*a.bounds.width,ee=a.bounds.top+.5*a.bounds.height,ne=j/P,Ce=1/ne,l.ctx.save(),l.ctx.translate(N,ee),l.ctx.transform(1,0,0,ne,0,0),l.ctx.translate(-N,-ee),l.ctx.fillRect(R,Ce*(K-ee)+ee,J,W*Ce),l.ctx.restore()):l.ctx.fill())),Qe.label=6;case 6:return s--,[2]}})},l=this,d=0,u=a.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return d<u.length?(c=u[d],[5,n(c)]):[3,4];case 2:h.sent(),h.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(a,s,n){return Zt(this,void 0,void 0,function(){return Yt(this,function(l){return this.path(kd(n,s)),this.ctx.fillStyle=Mt(a),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(a,s,n,l){return Zt(this,void 0,void 0,function(){var d,u;return Yt(this,function(c){switch(c.label){case 0:return s<3?[4,this.renderSolidBorder(a,n,l)]:[3,2];case 1:return c.sent(),[2];case 2:return d=rb(l,n),this.path(d),this.ctx.fillStyle=Mt(a),this.ctx.fill(),u=ib(l,n),this.path(u),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(a){return Zt(this,void 0,void 0,function(){var s,n,l,d,u,c,h,v,y=this;return Yt(this,function(g){switch(g.label){case 0:return this.applyEffects(a.getEffects(2)),s=a.container.styles,n=!Fs(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],d=vb(rn(s.backgroundClip,0),a.curves),n||s.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),Fs(s.backgroundColor)||(this.ctx.fillStyle=Mt(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(B){y.ctx.save();var w=ml(a.curves),C=B.inset?0:mb,F=ob(w,-C+(B.inset?1:-1)*B.spread.number,(B.inset?1:-1)*B.spread.number,B.spread.number*(B.inset?-2:2),B.spread.number*(B.inset?-2:2));B.inset?(y.path(w),y.ctx.clip(),y.mask(F)):(y.mask(w),y.ctx.clip(),y.path(F)),y.ctx.shadowOffsetX=B.offsetX.number+C,y.ctx.shadowOffsetY=B.offsetY.number,y.ctx.shadowColor=Mt(B.color),y.ctx.shadowBlur=B.blur.number,y.ctx.fillStyle=B.inset?Mt(B.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),g.label=2;case 2:u=0,c=0,h=l,g.label=3;case 3:return c<h.length?(v=h[c],v.style!==0&&!Fs(v.color)&&v.width>0?v.style!==2?[3,5]:[4,this.renderDashedDottedBorder(v.color,v.width,u,a.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return v.style!==3?[3,7]:[4,this.renderDashedDottedBorder(v.color,v.width,u,a.curves,3)];case 6:return g.sent(),[3,11];case 7:return v.style!==4?[3,9]:[4,this.renderDoubleBorder(v.color,v.width,u,a.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(v.color,u,a.curves)];case 10:g.sent(),g.label=11;case 11:u++,g.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(a,s,n,l,d){return Zt(this,void 0,void 0,function(){var u,c,h,v,y,g,B,w,C,F,S,E,k,Q,I,D,I,D;return Yt(this,function(M){return this.ctx.save(),u=Ab(l,n),c=kd(l,n),d===2&&(this.path(c),this.ctx.clip()),Ca(c[0])?(h=c[0].start.x,v=c[0].start.y):(h=c[0].x,v=c[0].y),Ca(c[1])?(y=c[1].end.x,g=c[1].end.y):(y=c[1].x,g=c[1].y),n===0||n===2?B=Math.abs(h-y):B=Math.abs(v-g),this.ctx.beginPath(),d===3?this.formatPath(u):this.formatPath(c.slice(0,2)),w=s<3?s*3:s*2,C=s<3?s*2:s,d===3&&(w=s,C=s),F=!0,B<=w*2?F=!1:B<=w*2+C?(S=B/(2*w+C),w*=S,C*=S):(E=Math.floor((B+C)/(w+C)),k=(B-E*w)/(E-1),Q=(B-(E+1)*w)/E,C=Q<=0||Math.abs(C-k)<Math.abs(C-Q)?k:Q),F&&(d===3?this.ctx.setLineDash([0,w+C]):this.ctx.setLineDash([w,C])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Mt(a),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(Ca(c[0])&&(I=c[3],D=c[0],this.ctx.beginPath(),this.formatPath([new Fe(I.end.x,I.end.y),new Fe(D.start.x,D.start.y)]),this.ctx.stroke()),Ca(c[1])&&(I=c[1],D=c[2],this.ctx.beginPath(),this.formatPath([new Fe(I.end.x,I.end.y),new Fe(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(a){return Zt(this,void 0,void 0,function(){var s;return Yt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Mt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=lb(a),[4,this.renderStack(s)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Oc),gb=function(e){return e instanceof wc||e instanceof bc?!0:e instanceof nA&&e.type!==pl&&e.type!==cl},vb=function(e,t){switch(e){case 0:return ml(t);case 2:return eb(t);case 1:default:return _l(t)}},yb=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},bb=["-apple-system","system-ui"],wb=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return bb.indexOf(t)===-1}):e},Cb=function(e){La(t,e);function t(a,s){var n=e.call(this,a,s)||this;return n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=s,n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),n}return t.prototype.render=function(a){return Zt(this,void 0,void 0,function(){var s,n;return Yt(this,function(l){switch(l.label){case 0:return s=ci(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,Bb(s)];case 1:return n=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Mt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Oc),Bb=function(e){return new Promise(function(t,a){var s=new Image;s.onload=function(){t(s)},s.onerror=a,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},kb=function(){function e(t){var a=t.id,s=t.enabled;this.id=a,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,_o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,_o([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,_o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,_o([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Fb=function(){function e(t,a){var s;this.windowBounds=a,this.instanceName="#"+e.instanceCount++,this.logger=new kb({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new z1(this,t)}return e.instanceCount=1,e}(),xb=function(e,t){return t===void 0&&(t={}),Ub(e,t)};typeof window<"u"&&Ic.setContext(window);var Ub=function(e,t){return Zt(void 0,void 0,void 0,function(){var a,s,n,l,d,u,c,h,v,y,g,B,w,C,F,S,E,k,Q,I,M,D,M,$,V,L,R,K,J,W,ae,Z,te,ie,P,j,G,N,ee,ne;return Yt(this,function(Ce){switch(Ce.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(a=e.ownerDocument,!a)throw new Error("Element is not attached to a Document");if(s=a.defaultView,!s)throw new Error("Document is not attached to a Window");return n={allowTaint:($=t.allowTaint)!==null&&$!==void 0?$:!1,imageTimeout:(V=t.imageTimeout)!==null&&V!==void 0?V:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},l=Xr({logging:(R=t.logging)!==null&&R!==void 0?R:!0,cache:t.cache},n),d={windowWidth:(K=t.windowWidth)!==null&&K!==void 0?K:s.innerWidth,windowHeight:(J=t.windowHeight)!==null&&J!==void 0?J:s.innerHeight,scrollX:(W=t.scrollX)!==null&&W!==void 0?W:s.pageXOffset,scrollY:(ae=t.scrollY)!==null&&ae!==void 0?ae:s.pageYOffset},u=new As(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),c=new Fb(l,u),h=(Z=t.foreignObjectRendering)!==null&&Z!==void 0?Z:!1,v={allowTaint:(te=t.allowTaint)!==null&&te!==void 0?te:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:h,copyStyles:h},c.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),y=new wd(c,e,v),g=y.clonedReferenceElement,g?[4,y.toIFrame(a,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=Ce.sent(),w=oA(g)||S1(g)?o_(g.ownerDocument):Ll(c,g),C=w.width,F=w.height,S=w.left,E=w.top,k=Sb(c,g,t.backgroundColor),Q={canvas:t.canvas,backgroundColor:k,scale:(P=(ie=t.scale)!==null&&ie!==void 0?ie:s.devicePixelRatio)!==null&&P!==void 0?P:1,x:((j=t.x)!==null&&j!==void 0?j:0)+S,y:((G=t.y)!==null&&G!==void 0?G:0)+E,width:(N=t.width)!==null&&N!==void 0?N:Math.ceil(C),height:(ee=t.height)!==null&&ee!==void 0?ee:Math.ceil(F)},h?(c.logger.debug("Document cloned, using foreign object rendering"),M=new Cb(c,Q),[4,M.render(g)]):[3,3];case 2:return I=Ce.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+S+","+E+" with size "+C+"x"+F+" using computed rendering"),c.logger.debug("Starting DOM parsing"),D=kc(c,g),k===D.styles.backgroundColor&&(D.styles.backgroundColor=ls.TRANSPARENT),c.logger.debug("Starting renderer for element at "+Q.x+","+Q.y+" with size "+Q.width+"x"+Q.height),M=new _b(c,Q),[4,M.render(D)];case 4:I=Ce.sent(),Ce.label=5;case 5:return(!((ne=t.removeContainer)!==null&&ne!==void 0)||ne)&&(wd.destroy(B)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,I]}})})},Sb=function(e,t,a){var s=t.ownerDocument,n=s.documentElement?zn(e,getComputedStyle(s.documentElement).backgroundColor):ls.TRANSPARENT,l=s.body?zn(e,getComputedStyle(s.body).backgroundColor):ls.TRANSPARENT,d=typeof a=="string"?zn(e,a):a===null?ls.TRANSPARENT:4294967295;return t===s.documentElement?Fs(n)?Fs(l)?d:l:n:d};const Ct={__name:"Screenshot",props:{targetRef:{type:[Object,null],required:!1},size:{type:String,default:"small"}},setup(e){const t=()=>{a.targetRef?xb(a.targetRef,{useCORS:!0,scale:2,backgroundColor:null,scrollY:-window.scrollY}).then(n=>{const l=document.createElement("a");l.download="chart-screenshot.png",l.href=n.toDataURL(),l.click()}):console.error("Target element for screenshot not found.")},a=e;return(s,n)=>(A(),U(we,{tag:"button",onClick:t,size:e.size,title:s.$t("Screenshot")},{default:r(()=>[o(z,{name:"Screenshot"})]),_:1},8,["size","title"]))}};var kr={exports:{}};/** @license
 *
 *     Colour Palette Generator script.
 *     Copyright (c) 2014 Google Inc.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License.  You may
 *     obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied.  See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 * Furthermore, ColorBrewer colour schemes are covered by the following:
 *
 *     Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and
 *                        The Pennsylvania State University.
 *
 *     Licensed under the Apache License, Version 2.0 (the "License"); you may
 *     not use this file except in compliance with the License. You may obtain
 *     a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *     implied. See the License for the specific language governing
 *     permissions and limitations under the License.
 *
 *     Redistribution and use in source and binary forms, with or without
 *     modification, are permitted provided that the following conditions are
 *     met:
 *
 *     1. Redistributions as source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *     2. The end-user documentation included with the redistribution, if any,
 *     must include the following acknowledgment: "This product includes color
 *     specifications and designs developed by Cynthia Brewer
 *     (http://colorbrewer.org/)." Alternately, this acknowledgment may appear
 *     in the software itself, if and wherever such third-party
 *     acknowledgments normally appear.
 *
 *     4. The name "ColorBrewer" must not be used to endorse or promote products
 *     derived from this software without prior written permission. For written
 *     permission, please contact Cynthia Brewer at cbrewer@psu.edu.
 *
 *     5. Products derived from this software may not be called "ColorBrewer",
 *     nor may "ColorBrewer" appear in their name, without prior written
 *     permission of Cynthia Brewer.
 *
 * Furthermore, Solarized colour schemes are covered by the following:
 *
 *     Copyright (c) 2011 Ethan Schoonover
 *
 *     Permission is hereby granted, free of charge, to any person obtaining
 *     a copy of this software and associated documentation files (the
 *     "Software"), to deal in the Software without restriction, including
 *     without limitation the rights to use, copy, modify, merge, publish,
 *     distribute, sublicense, and/or sell copies of the Software, and to
 *     permit persons to whom the Software is furnished to do so, subject to
 *     the following conditions:
 *
 *     The above copyright notice and this permission notice shall be included
 *     in all copies or substantial portions of the Software.
 *
 *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 *     OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *     LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *     OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *     WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */var xd;function Eb(){return xd||(xd=1,function(e){var t=function(){var a=Array.prototype,s=function(h,v,y){return a.slice.apply(h,a.slice.call(arguments,1))},n="function",l=1e9,d=function(h,v,y,g){if(v|=0,v==0)return[];if(typeof h!==n){var B=d.listSchemes(h,v);if(!B.length)return null;h=B[(y||0)%B.length]}var w=s(arguments,2);return w[0]=v,h.apply(h,w)};d.Scheme=function(h,v){var y={},g=0,B=l,w=function(){if(arguments.length<=1)return C.color_func.bind(C);var F=s(arguments);return function(S){return F[0]=S,C.color_func.apply(C,F)}},C=function(F,S){if(F|=0,!F)return[];var E=F;if(F=Math.abs(F),F<=g){for(var k=Math.max(F,B);!(k in y);++k);var Q=y[k];if(k>F){var I="shrinking_takes_head"in Q?Q.shrinking_takes_head:C.shrinking_takes_head;if(I)Q=Q.slice(0,F),k=F;else return d.generate(function(D){return Q[Math.round(D)]},E,0,Q.length-1)}return Q=Q.slice(),E<0&&Q.reverse(),Q}else return C.color_func?d.generate(w.apply(C,arguments),E,0,1,C.color_func_cyclic):null};return C.scheme_name=h,C.groups=v?typeof v=="string"?[v]:v:[],C.max=0,C.cbf_max=l,C.addPalette=function(F,S){var E=F.length;E&&(y[E]=F,B=Math.min(B,E),g=Math.max(g,E),C.max=Math.max(C.max,E),!S&&E!=1&&(C.cbf_max=Math.min(C.cbf_max,E-1)))},C.addPalettes=function(F,S,E){S=S||F.length;for(var k=0;k<S;++k)k in F&&C.addPalette(F[k],!0);C.cbf_max=Math.min(C.cbf_max,E||1)},C.shrinkByTakingHead=function(F,S){S!==void 0?S in y&&(y[S].shrinking_takes_head=!!F):C.shrinking_takes_head=!!F},C.setColorFunction=function(F,S,E){C.color_func=F,C.color_func_cyclic=!!E,C.max=l,!S&&C.cbf_max===l&&(C.cbf_max=1)},C.color=function(F,S){return C.color_func?C.color_func.apply(this,arguments):null},C},d.Scheme.fromPalettes=function(h,v,y,g,B){var w=d.Scheme(h,v);return w.addPalettes.apply(w,s(arguments,2)),w},d.Scheme.withColorFunction=function(h,v,y,g,B){var w=d.Scheme(h,v);return w.setColorFunction.apply(w,s(arguments,2)),w};var u={};d.register=function(h){u["n-"+h.scheme_name]=[h],h.groups.forEach(function(v){(u["g-"+v]=u["g-"+v]||[]).push(h)}),(u["g-all"]=u["g-all"]||[]).push(h)},d.listSchemes=function(h,v){v?v<0&&(v=-v):v=2;var y=[];return(typeof h=="string"?[h]:h).forEach(function(g){var B=g.substring(g.length-4)==="-cbf";B&&(g=g.substring(0,g.length-4));for(var w=u["g-"+g]||u["n-"+g]||[],C=0,F;F=w[C];++C)(B?F.cbf:F.max)>=v&&y.push(F)}),y.sort(function(g,B){return g.scheme_name>=B.scheme_name?g.scheme_name>B.scheme_name?1:0:-1}),y},d.generate=function(h,v,y,g,B){if(Math.abs(v)<1)return[];if(y=y===void 0?0:y,g=g===void 0?1:g,Math.abs(v)<2)return[h(y)];for(var w=Math.abs(v),C=y,F=[],S=(g-y)/(B?w:w-1);--w>=0;C+=S)F.push(h(C));return v<0&&F.reverse(),F};var c=function(h){return h>0?h<1?h:1:0};return d.rgbColor=function(h,v,y){return[h,v,y].map(function(g){return g=Number(Math.round(c(g)*255)).toString(16),g.length==1?"0"+g:g}).join("")},d.linearRgbColor=function(h,v,y){return[h,v,y].map(function(g){return g=c(g),g<=.0031308?g=12.92*g:g=1.055*Math.pow(g,.4166666666666667)-.055,g=Number(Math.round(g*255)).toString(16),g.length==1?"0"+g:g}).join("")},d.hsvColor=function(h,v,y){h*=6;var g=v===void 0?1:c(v),B=y===void 0?1:c(y),w=B*(1-g*Math.abs(h%2-1)),C=B*(1-g);switch(Math.floor(h)%6){case 0:return d.rgbColor(B,w,C);case 1:return d.rgbColor(w,B,C);case 2:return d.rgbColor(C,B,w);case 3:return d.rgbColor(C,w,B);case 4:return d.rgbColor(w,C,B);default:return d.rgbColor(B,C,w)}},d.register(d.Scheme.withColorFunction("rainbow","qualitative",d.hsvColor,!1,!0)),d}();t.ColorFunction,t.Palette,t.PalettesList,t.SchemeType,function(){var a=t.Scheme.fromPalettes("mpn65","qualitative",[["ff0029","377eb8","66a61e","984ea3","00d2d5","ff7f00","af8d00","7f80cd","b3e900","c42e60","a65628","f781bf","8dd3c7","bebada","fb8072","80b1d3","fdb462","fccde5","bc80bd","ffed6f","c4eaff","cf8c00","1b9e77","d95f02","e7298a","e6ab02","a6761d","0097ff","00d067","000000","252525","525252","737373","969696","bdbdbd","f43600","4ba93b","5779bb","927acc","97ee3f","bf3947","9f5b00","f48758","8caed6","f2b94f","eff26e","e43872","d9b100","9d7a00","698cff","d9d9d9","00d27e","d06800","009f82","c49200","cbe8ff","fecddf","c27eb6","8cd2ce","c4b8d9","f883b0","a49100","f48800","27d0df","a04a9b"]]);a.shrinkByTakingHead(!0),t.register(a)}(),function(){var a=t.rgbColor,s=function(l,d){for(var u=arguments.length-1,c=arguments[u];u>1;)c=c*l+arguments[--u];return c},n=function(l){var d=s(Math.abs(l),1,.278393,.230389,972e-6,.078108);return d*=d,d*=d,d=1-1/d,l<0?-d:d};t.register(t.Scheme.fromPalettes("tol","qualitative",[["4477aa"],["4477aa","cc6677"],["4477aa","ddcc77","cc6677"],["4477aa","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677"],["332288","88ccee","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","cc6677","882255","aa4499"],["332288","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","882255","aa4499"],["332288","6699cc","88ccee","44aa99","117733","999933","ddcc77","661100","cc6677","aa4466","882255","aa4499"]],12,12)),t.tolSequentialColor=function(l){return a(1-.392*(1+n((l-.869)/.255)),1.021-.456*(1+n((l-.527)/.376)),1-.493*(1+n((l-.272)/.309)))},t.register(t.Scheme.withColorFunction("tol-sq","sequential",t.tolSequentialColor,!0)),t.tolDivergingColor=function(l){var d=s(l,.572,1.524,-1.811)/s(l,1,-.291,.1574);return a(s(l,.235,-2.13,26.92,-65.5,63.5,-22.36),d*d,1/s(l,1.579,-4.03,12.92,-31.4,48.6,-23.36))},t.register(t.Scheme.withColorFunction("tol-dv","diverging",t.tolDivergingColor,!0)),t.tolRainbowColor=function(l){return a(s(l,.472,-.567,4.05)/s(l,1,8.72,-19.17,14.1),s(l,.108932,-1.22635,27.284,-98.577,163.3,-131.395,40.634),1/s(l,1.97,3.54,-68.5,243,-297,125))},t.register(t.Scheme.withColorFunction("tol-rainbow","qualitative",t.tolRainbowColor,!0))}(),function(){t.register(t.Scheme.fromPalettes("sol-base","sequential",[["002b36","073642","586e75","657b83","839496","93a1a1","eee8d5","fdf6e3"]],1,8)),t.register(t.Scheme.fromPalettes("sol-accent","qualitative",[["b58900","cb4b16","dc322f","d33682","6c71c4","268bd2","2aa198","859900"]]))}(),function(){var a={YlGn:{type:"sequential",cbf:42,3:["f7fcb9","addd8e","31a354"],4:["ffffcc","c2e699","78c679","238443"],5:["ffffcc","c2e699","78c679","31a354","006837"],6:["ffffcc","d9f0a3","addd8e","78c679","31a354","006837"],7:["ffffcc","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],8:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","005a32"],9:["ffffe5","f7fcb9","d9f0a3","addd8e","78c679","41ab5d","238443","006837","004529"]},YlGnBu:{type:"sequential",cbf:42,3:["edf8b1","7fcdbb","2c7fb8"],4:["ffffcc","a1dab4","41b6c4","225ea8"],5:["ffffcc","a1dab4","41b6c4","2c7fb8","253494"],6:["ffffcc","c7e9b4","7fcdbb","41b6c4","2c7fb8","253494"],7:["ffffcc","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],8:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","0c2c84"],9:["ffffd9","edf8b1","c7e9b4","7fcdbb","41b6c4","1d91c0","225ea8","253494","081d58"]},GnBu:{type:"sequential",cbf:42,3:["e0f3db","a8ddb5","43a2ca"],4:["f0f9e8","bae4bc","7bccc4","2b8cbe"],5:["f0f9e8","bae4bc","7bccc4","43a2ca","0868ac"],6:["f0f9e8","ccebc5","a8ddb5","7bccc4","43a2ca","0868ac"],7:["f0f9e8","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],8:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","08589e"],9:["f7fcf0","e0f3db","ccebc5","a8ddb5","7bccc4","4eb3d3","2b8cbe","0868ac","084081"]},BuGn:{type:"sequential",cbf:42,3:["e5f5f9","99d8c9","2ca25f"],4:["edf8fb","b2e2e2","66c2a4","238b45"],5:["edf8fb","b2e2e2","66c2a4","2ca25f","006d2c"],6:["edf8fb","ccece6","99d8c9","66c2a4","2ca25f","006d2c"],7:["edf8fb","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],8:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","005824"],9:["f7fcfd","e5f5f9","ccece6","99d8c9","66c2a4","41ae76","238b45","006d2c","00441b"]},PuBuGn:{type:"sequential",cbf:42,3:["ece2f0","a6bddb","1c9099"],4:["f6eff7","bdc9e1","67a9cf","02818a"],5:["f6eff7","bdc9e1","67a9cf","1c9099","016c59"],6:["f6eff7","d0d1e6","a6bddb","67a9cf","1c9099","016c59"],7:["f6eff7","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],8:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016450"],9:["fff7fb","ece2f0","d0d1e6","a6bddb","67a9cf","3690c0","02818a","016c59","014636"]},PuBu:{type:"sequential",cbf:42,3:["ece7f2","a6bddb","2b8cbe"],4:["f1eef6","bdc9e1","74a9cf","0570b0"],5:["f1eef6","bdc9e1","74a9cf","2b8cbe","045a8d"],6:["f1eef6","d0d1e6","a6bddb","74a9cf","2b8cbe","045a8d"],7:["f1eef6","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],8:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","034e7b"],9:["fff7fb","ece7f2","d0d1e6","a6bddb","74a9cf","3690c0","0570b0","045a8d","023858"]},BuPu:{type:"sequential",cbf:42,3:["e0ecf4","9ebcda","8856a7"],4:["edf8fb","b3cde3","8c96c6","88419d"],5:["edf8fb","b3cde3","8c96c6","8856a7","810f7c"],6:["edf8fb","bfd3e6","9ebcda","8c96c6","8856a7","810f7c"],7:["edf8fb","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],8:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","6e016b"],9:["f7fcfd","e0ecf4","bfd3e6","9ebcda","8c96c6","8c6bb1","88419d","810f7c","4d004b"]},RdPu:{type:"sequential",cbf:42,3:["fde0dd","fa9fb5","c51b8a"],4:["feebe2","fbb4b9","f768a1","ae017e"],5:["feebe2","fbb4b9","f768a1","c51b8a","7a0177"],6:["feebe2","fcc5c0","fa9fb5","f768a1","c51b8a","7a0177"],7:["feebe2","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],8:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177"],9:["fff7f3","fde0dd","fcc5c0","fa9fb5","f768a1","dd3497","ae017e","7a0177","49006a"]},PuRd:{type:"sequential",cbf:42,3:["e7e1ef","c994c7","dd1c77"],4:["f1eef6","d7b5d8","df65b0","ce1256"],5:["f1eef6","d7b5d8","df65b0","dd1c77","980043"],6:["f1eef6","d4b9da","c994c7","df65b0","dd1c77","980043"],7:["f1eef6","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],8:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","91003f"],9:["f7f4f9","e7e1ef","d4b9da","c994c7","df65b0","e7298a","ce1256","980043","67001f"]},OrRd:{type:"sequential",cbf:42,3:["fee8c8","fdbb84","e34a33"],4:["fef0d9","fdcc8a","fc8d59","d7301f"],5:["fef0d9","fdcc8a","fc8d59","e34a33","b30000"],6:["fef0d9","fdd49e","fdbb84","fc8d59","e34a33","b30000"],7:["fef0d9","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],8:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","990000"],9:["fff7ec","fee8c8","fdd49e","fdbb84","fc8d59","ef6548","d7301f","b30000","7f0000"]},YlOrRd:{type:"sequential",cbf:42,3:["ffeda0","feb24c","f03b20"],4:["ffffb2","fecc5c","fd8d3c","e31a1c"],5:["ffffb2","fecc5c","fd8d3c","f03b20","bd0026"],6:["ffffb2","fed976","feb24c","fd8d3c","f03b20","bd0026"],7:["ffffb2","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],8:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","b10026"],9:["ffffcc","ffeda0","fed976","feb24c","fd8d3c","fc4e2a","e31a1c","bd0026","800026"]},YlOrBr:{type:"sequential",cbf:42,3:["fff7bc","fec44f","d95f0e"],4:["ffffd4","fed98e","fe9929","cc4c02"],5:["ffffd4","fed98e","fe9929","d95f0e","993404"],6:["ffffd4","fee391","fec44f","fe9929","d95f0e","993404"],7:["ffffd4","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],8:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","8c2d04"],9:["ffffe5","fff7bc","fee391","fec44f","fe9929","ec7014","cc4c02","993404","662506"]},Purples:{type:"sequential",cbf:42,3:["efedf5","bcbddc","756bb1"],4:["f2f0f7","cbc9e2","9e9ac8","6a51a3"],5:["f2f0f7","cbc9e2","9e9ac8","756bb1","54278f"],6:["f2f0f7","dadaeb","bcbddc","9e9ac8","756bb1","54278f"],7:["f2f0f7","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],8:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","4a1486"],9:["fcfbfd","efedf5","dadaeb","bcbddc","9e9ac8","807dba","6a51a3","54278f","3f007d"]},Blues:{type:"sequential",cbf:42,3:["deebf7","9ecae1","3182bd"],4:["eff3ff","bdd7e7","6baed6","2171b5"],5:["eff3ff","bdd7e7","6baed6","3182bd","08519c"],6:["eff3ff","c6dbef","9ecae1","6baed6","3182bd","08519c"],7:["eff3ff","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],8:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","084594"],9:["f7fbff","deebf7","c6dbef","9ecae1","6baed6","4292c6","2171b5","08519c","08306b"]},Greens:{type:"sequential",cbf:42,3:["e5f5e0","a1d99b","31a354"],4:["edf8e9","bae4b3","74c476","238b45"],5:["edf8e9","bae4b3","74c476","31a354","006d2c"],6:["edf8e9","c7e9c0","a1d99b","74c476","31a354","006d2c"],7:["edf8e9","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],8:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","005a32"],9:["f7fcf5","e5f5e0","c7e9c0","a1d99b","74c476","41ab5d","238b45","006d2c","00441b"]},Oranges:{type:"sequential",cbf:42,3:["fee6ce","fdae6b","e6550d"],4:["feedde","fdbe85","fd8d3c","d94701"],5:["feedde","fdbe85","fd8d3c","e6550d","a63603"],6:["feedde","fdd0a2","fdae6b","fd8d3c","e6550d","a63603"],7:["feedde","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],8:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","8c2d04"],9:["fff5eb","fee6ce","fdd0a2","fdae6b","fd8d3c","f16913","d94801","a63603","7f2704"]},Reds:{type:"sequential",cbf:42,3:["fee0d2","fc9272","de2d26"],4:["fee5d9","fcae91","fb6a4a","cb181d"],5:["fee5d9","fcae91","fb6a4a","de2d26","a50f15"],6:["fee5d9","fcbba1","fc9272","fb6a4a","de2d26","a50f15"],7:["fee5d9","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],8:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","99000d"],9:["fff5f0","fee0d2","fcbba1","fc9272","fb6a4a","ef3b2c","cb181d","a50f15","67000d"]},Greys:{type:"sequential",cbf:42,3:["f0f0f0","bdbdbd","636363"],4:["f7f7f7","cccccc","969696","525252"],5:["f7f7f7","cccccc","969696","636363","252525"],6:["f7f7f7","d9d9d9","bdbdbd","969696","636363","252525"],7:["f7f7f7","d9d9d9","bdbdbd","969696","737373","525252","252525"],8:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525"],9:["ffffff","f0f0f0","d9d9d9","bdbdbd","969696","737373","525252","252525","000000"]},PuOr:{type:"diverging",cbf:42,3:["f1a340","f7f7f7","998ec3"],4:["e66101","fdb863","b2abd2","5e3c99"],5:["e66101","fdb863","f7f7f7","b2abd2","5e3c99"],6:["b35806","f1a340","fee0b6","d8daeb","998ec3","542788"],7:["b35806","f1a340","fee0b6","f7f7f7","d8daeb","998ec3","542788"],8:["b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788"],9:["b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788"],10:["7f3b08","b35806","e08214","fdb863","fee0b6","d8daeb","b2abd2","8073ac","542788","2d004b"],11:["7f3b08","b35806","e08214","fdb863","fee0b6","f7f7f7","d8daeb","b2abd2","8073ac","542788","2d004b"]},BrBG:{type:"diverging",cbf:42,3:["d8b365","f5f5f5","5ab4ac"],4:["a6611a","dfc27d","80cdc1","018571"],5:["a6611a","dfc27d","f5f5f5","80cdc1","018571"],6:["8c510a","d8b365","f6e8c3","c7eae5","5ab4ac","01665e"],7:["8c510a","d8b365","f6e8c3","f5f5f5","c7eae5","5ab4ac","01665e"],8:["8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e"],9:["8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e"],10:["543005","8c510a","bf812d","dfc27d","f6e8c3","c7eae5","80cdc1","35978f","01665e","003c30"],11:["543005","8c510a","bf812d","dfc27d","f6e8c3","f5f5f5","c7eae5","80cdc1","35978f","01665e","003c30"]},PRGn:{type:"diverging",cbf:42,3:["af8dc3","f7f7f7","7fbf7b"],4:["7b3294","c2a5cf","a6dba0","008837"],5:["7b3294","c2a5cf","f7f7f7","a6dba0","008837"],6:["762a83","af8dc3","e7d4e8","d9f0d3","7fbf7b","1b7837"],7:["762a83","af8dc3","e7d4e8","f7f7f7","d9f0d3","7fbf7b","1b7837"],8:["762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837"],9:["762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837"],10:["40004b","762a83","9970ab","c2a5cf","e7d4e8","d9f0d3","a6dba0","5aae61","1b7837","00441b"],11:["40004b","762a83","9970ab","c2a5cf","e7d4e8","f7f7f7","d9f0d3","a6dba0","5aae61","1b7837","00441b"]},PiYG:{type:"diverging",cbf:42,3:["e9a3c9","f7f7f7","a1d76a"],4:["d01c8b","f1b6da","b8e186","4dac26"],5:["d01c8b","f1b6da","f7f7f7","b8e186","4dac26"],6:["c51b7d","e9a3c9","fde0ef","e6f5d0","a1d76a","4d9221"],7:["c51b7d","e9a3c9","fde0ef","f7f7f7","e6f5d0","a1d76a","4d9221"],8:["c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221"],9:["c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221"],10:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","e6f5d0","b8e186","7fbc41","4d9221","276419"],11:["8e0152","c51b7d","de77ae","f1b6da","fde0ef","f7f7f7","e6f5d0","b8e186","7fbc41","4d9221","276419"]},RdBu:{type:"diverging",cbf:42,3:["ef8a62","f7f7f7","67a9cf"],4:["ca0020","f4a582","92c5de","0571b0"],5:["ca0020","f4a582","f7f7f7","92c5de","0571b0"],6:["b2182b","ef8a62","fddbc7","d1e5f0","67a9cf","2166ac"],7:["b2182b","ef8a62","fddbc7","f7f7f7","d1e5f0","67a9cf","2166ac"],8:["b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac"],9:["b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","d1e5f0","92c5de","4393c3","2166ac","053061"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","f7f7f7","d1e5f0","92c5de","4393c3","2166ac","053061"]},RdGy:{type:"diverging",cbf:42,3:["ef8a62","ffffff","999999"],4:["ca0020","f4a582","bababa","404040"],5:["ca0020","f4a582","ffffff","bababa","404040"],6:["b2182b","ef8a62","fddbc7","e0e0e0","999999","4d4d4d"],7:["b2182b","ef8a62","fddbc7","ffffff","e0e0e0","999999","4d4d4d"],8:["b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d"],9:["b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d"],10:["67001f","b2182b","d6604d","f4a582","fddbc7","e0e0e0","bababa","878787","4d4d4d","1a1a1a"],11:["67001f","b2182b","d6604d","f4a582","fddbc7","ffffff","e0e0e0","bababa","878787","4d4d4d","1a1a1a"]},RdYlBu:{type:"diverging",cbf:42,3:["fc8d59","ffffbf","91bfdb"],4:["d7191c","fdae61","abd9e9","2c7bb6"],5:["d7191c","fdae61","ffffbf","abd9e9","2c7bb6"],6:["d73027","fc8d59","fee090","e0f3f8","91bfdb","4575b4"],7:["d73027","fc8d59","fee090","ffffbf","e0f3f8","91bfdb","4575b4"],8:["d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4"],9:["d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4"],10:["a50026","d73027","f46d43","fdae61","fee090","e0f3f8","abd9e9","74add1","4575b4","313695"],11:["a50026","d73027","f46d43","fdae61","fee090","ffffbf","e0f3f8","abd9e9","74add1","4575b4","313695"]},Spectral:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","99d594"],4:["d7191c","fdae61","abdda4","2b83ba"],5:["d7191c","fdae61","ffffbf","abdda4","2b83ba"],6:["d53e4f","fc8d59","fee08b","e6f598","99d594","3288bd"],7:["d53e4f","fc8d59","fee08b","ffffbf","e6f598","99d594","3288bd"],8:["d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd"],9:["d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd"],10:["9e0142","d53e4f","f46d43","fdae61","fee08b","e6f598","abdda4","66c2a5","3288bd","5e4fa2"],11:["9e0142","d53e4f","f46d43","fdae61","fee08b","ffffbf","e6f598","abdda4","66c2a5","3288bd","5e4fa2"]},RdYlGn:{type:"diverging",cbf:0,3:["fc8d59","ffffbf","91cf60"],4:["d7191c","fdae61","a6d96a","1a9641"],5:["d7191c","fdae61","ffffbf","a6d96a","1a9641"],6:["d73027","fc8d59","fee08b","d9ef8b","91cf60","1a9850"],7:["d73027","fc8d59","fee08b","ffffbf","d9ef8b","91cf60","1a9850"],8:["d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850"],9:["d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850"],10:["a50026","d73027","f46d43","fdae61","fee08b","d9ef8b","a6d96a","66bd63","1a9850","006837"],11:["a50026","d73027","f46d43","fdae61","fee08b","ffffbf","d9ef8b","a6d96a","66bd63","1a9850","006837"]},Accent:{type:"qualitative",cbf:0,3:["7fc97f","beaed4","fdc086"],4:["7fc97f","beaed4","fdc086","ffff99"],5:["7fc97f","beaed4","fdc086","ffff99","386cb0"],6:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f"],7:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17"],8:["7fc97f","beaed4","fdc086","ffff99","386cb0","f0027f","bf5b17","666666"]},Dark2:{type:"qualitative",cbf:3,3:["1b9e77","d95f02","7570b3"],4:["1b9e77","d95f02","7570b3","e7298a"],5:["1b9e77","d95f02","7570b3","e7298a","66a61e"],6:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02"],7:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d"],8:["1b9e77","d95f02","7570b3","e7298a","66a61e","e6ab02","a6761d","666666"]},Paired:{type:"qualitative",cbf:4,3:["a6cee3","1f78b4","b2df8a"],4:["a6cee3","1f78b4","b2df8a","33a02c"],5:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99"],6:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c"],7:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f"],8:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00"],9:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6"],10:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a"],11:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99"],12:["a6cee3","1f78b4","b2df8a","33a02c","fb9a99","e31a1c","fdbf6f","ff7f00","cab2d6","6a3d9a","ffff99","b15928"]},Pastel1:{type:"qualitative",cbf:0,3:["fbb4ae","b3cde3","ccebc5"],4:["fbb4ae","b3cde3","ccebc5","decbe4"],5:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6"],6:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc"],7:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd"],8:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec"],9:["fbb4ae","b3cde3","ccebc5","decbe4","fed9a6","ffffcc","e5d8bd","fddaec","f2f2f2"]},Pastel2:{type:"qualitative",cbf:0,3:["b3e2cd","fdcdac","cbd5e8"],4:["b3e2cd","fdcdac","cbd5e8","f4cae4"],5:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9"],6:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae"],7:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc"],8:["b3e2cd","fdcdac","cbd5e8","f4cae4","e6f5c9","fff2ae","f1e2cc","cccccc"]},Set1:{type:"qualitative",cbf:0,3:["e41a1c","377eb8","4daf4a"],4:["e41a1c","377eb8","4daf4a","984ea3"],5:["e41a1c","377eb8","4daf4a","984ea3","ff7f00"],6:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33"],7:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628"],8:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf"],9:["e41a1c","377eb8","4daf4a","984ea3","ff7f00","ffff33","a65628","f781bf","999999"]},Set2:{type:"qualitative",cbf:3,3:["66c2a5","fc8d62","8da0cb"],4:["66c2a5","fc8d62","8da0cb","e78ac3"],5:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854"],6:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f"],7:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494"],8:["66c2a5","fc8d62","8da0cb","e78ac3","a6d854","ffd92f","e5c494","b3b3b3"]},Set3:{type:"qualitative",cbf:0,3:["8dd3c7","ffffb3","bebada"],4:["8dd3c7","ffffb3","bebada","fb8072"],5:["8dd3c7","ffffb3","bebada","fb8072","80b1d3"],6:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462"],7:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69"],8:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5"],9:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9"],10:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd"],11:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5"],12:["8dd3c7","ffffb3","bebada","fb8072","80b1d3","fdb462","b3de69","fccde5","d9d9d9","bc80bd","ccebc5","ffed6f"]}};for(var s in a){var n=a[s];n=t.Scheme.fromPalettes("cb-"+s,[n.type,"cb-"+n.type],n,12,n.cbf),t.register(n)}}(),e.exports&&(e.exports=t)}(kr)),kr.exports}Eb();class Qb extends Xt{constructor(){super(...arguments);me(this,"data",{dashboard:[{name:"sales_growth_chart",type:"line"}],order:[{name:"gross_sale_by_day_chart",type:""},{name:"order_completion_time_chart",type:""},{name:"item_count_distribution_chart",type:""},{name:"gross_sale_by_hour_chart",type:""},{name:"order_value_distribution_chart",type:""},{name:"avg_order_gross_chart",type:""},{name:"avg_order_items_chart",type:""},{name:"order_chart",type:""}],revenue:[{name:"revenue_chart",type:"line"}],refund:[{name:"refund_chart",type:"line"}],subscription:[{name:"subscription_chart",type:"line"},{name:"retention_chart",type:"line"},{name:"daily_signups_chart",type:"line"}],product:[{name:"product_chart",type:"bar"}]});me(this,"storageKey","chart-type");me(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=ze.get(this.storageKey);this.data.dashboard=a.dashboard??this.data.dashboard,this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund,this.data.subscription=a.subscription??this.data.subscription}addListener(a,s){this.listeners[a]=s}async onChange(a,s,n){const d=this.data[a].findIndex(u=>u.name===s);d!==-1?this.data[a][d].type=n:this.data[a].push({name:s,type:n}),this.syncStorage();for(let u in this.listeners)this.listeners[u](this.applicableFilters)}getChartType(a,s){const l=this.data[a].find(d=>d.name===s);return l?l.type:null}syncStorage(){ze.set(this.storageKey,this.applicableFilters.chartType)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{chartType:{dashboard:this.data.dashboard,order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,subscription:this.data.subscription}}}}const ct=Qb.init();function zs(e){const t=ke(e[0]).format("MMMM D, YYYY"),a=ke(e[1]).format("MMMM D, YYYY");return t===a?`on ${t}.`:`between ${t} and ${a}.`}function js(e){const t=e.split("-");if(t.length===3){const[a,s,n]=t;return`${Vt[parseInt(s)-1]} ${n}`}else if(t.length===2){const[a,s]=t;return`${Vt[parseInt(s)-1]} ${a}`}else if(t.length===1){const[a]=t;return`${a}`}}function Oa(e){return e.map(t=>js(t.group))}const Tt=pe.colors.report,Db={[Tt.light_gray]:Tt.cyan_blue,[Tt.light_gray_cyan_blue]:Tt.cyan_blue_dark,[Tt.blue]:Tt.royal_blue,[Tt.royal_blue]:Tt.dark_blue,[Tt.medium_slate_blue]:Tt.dark_purple,[Tt.dark_cyan_blue_16]:Tt.dark_cyan_blue_40,[Tt.dark_cyan_blue_24]:Tt.dark_cyan_blue_40,[Tt.blue]:Tt.blue_dark_mode,[Tt.purple]:Tt.purple_dark_mode};function Gt(e){return Db[e]}function ra(e){const t=e<=31?6:7,a=Math.floor(e/t);return{splitNumber:t,interval:a}}const Ib={class:"fct-gross-sale-vs-net-revenue-wrap"},$b={class:"fct-btn-group sm"},Tb={__name:"SalesGrowthChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object},loading:{type:Boolean,default:!0}},emits:["fetch-chart-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(null);T("daily");const l=T(ct.getChartType("order","sales_growth_chart")||"line"),d=pe.colors.report,u=T(pe.isDark()),c=q(()=>a.chartData.every(k=>k.orders===0)),h=q(()=>u.value?d.dark_cyan_blue_16:d.light_gray),v=q(()=>u.value?d.dark_cyan_blue_36:d.light_gray_cyan_blue),y=q(()=>[{title:p("Orders"),key:"orders",color:h.value,yAxisIndex:1},{title:p("Revenue"),key:"net_revenue",color:v.value,yAxisIndex:0}].map(({title:k,key:Q,color:I,yAxisIndex:D})=>S(k,l.value,a.chartData.map(M=>M[Q]),I,D)));Vt.map(k=>k.slice(0,3));const g=q(()=>Oa(a.chartData));let B=null;const w=()=>{B&&(B.dispose(),B=null),de(()=>{s.value&&(B=at(s.value),F())})},C=q(()=>ra(a.chartData.length)),F=()=>{if(!B)return;u.value=pe.isDark();const k={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.dark_cyan_blue_16:d.light_gray_blue}},formatter:Q=>{let I=Q[0].name;return Q.forEach(D=>{const M=D.seriesIndex===1?`${Be.scaled(D.value)}`:D.value,$=u.value?"#ffffff":"#565865";I+=`<div>
            ${D.marker}
            <span style="color: ${$};">${D.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${$};">
              ${M}
            </span>
          </div>`}),I}},xAxis:{type:"category",data:g.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,interval:C.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Revenue"),type:"value",position:"left",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:Q=>`${Be.scaledChart(Q)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:y.value};B.setOption(k,{notMerge:!0,replaceMerge:["series"]})},S=(k,Q,I,D,M)=>({name:k,type:Q,barMaxWidth:30,data:I,smooth:!1,color:D,lineStyle:{width:3},areaStyle:{opacity:.3,color:D},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:D,borderRadius:[4,4,0,0]},yAxisIndex:M,emphasis:{scale:2,itemStyle:{color:Gt(D)},lineStyle:{color:D},areaStyle:{opacity:.3,color:D}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),E=k=>{l.value!==k&&(l.value=k,ct.onChange("order","sales_growth_chart",k),F())};return fe([()=>a.chartData,l],()=>{de(F)},{deep:!0}),fe(c,k=>{k||w()}),fe(()=>a.loading,k=>{k||w()}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",F,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",F),de(w)}),(k,Q)=>{const I=b("el-skeleton");return A(),_("div",Ib,[o(re,{id:"chartContainer",ref_key:"cardRef",ref:n},{default:r(()=>[o(Ae,{title:k.$t("Sales Growth"),border_bottom:""},ft({_:2},[!c.value&&!e.loading?{name:"action",fn:r(()=>[i("div",$b,[o(Xa,{activeType:l.value,types:{bar:"BarChart",line:"LineChart"},onChange:E},null,8,["activeType"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(le,{class:"p-0"},{default:r(()=>[e.loading?(A(),U(I,{key:0,animated:"",rows:5,class:"p-4"})):(A(),_(H,{key:1},[c.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-chart-wrap fct-gross-sale-vs-net-revenue-chart",ref_key:"chartRef",ref:s},null,512))],64))]),_:1})]),_:1},512)])}}},Mb={class:"fct-gross-sale-vs-net-revenue-wrap"},Vb={class:"fct-btn-group sm"},Lb={key:0,class:"fct-world-map-action-btns absolute top-5 right-5 flex flex-col gap-1 z-10"},Ob={key:1,class:"fct-world-map-action-btns absolute top-[10px] right-[40px] flex flex-col gap-1 z-10"},Ud=.5,Fr=6,Ho=1.2,Hb={__name:"HeatMap",props:{data:{type:Array,required:!0}},setup(e){const t=e,a=pe.colors,s=T(null),n=T(null),l=T(!1),d=T("world"),u=T(92),c=T(100);T(!1);let h=null,v=null,y=50;const g=T(1.2),B=T(),w=a.blue,C=q(()=>{const j=c.value-u.value,G=t.data?t.data.length:0;return j<60||G<15}),F=j=>{j=j.replace(/^#/,"");const G=parseInt(j.substring(0,2),16),N=parseInt(j.substring(2,4),16),ee=parseInt(j.substring(4,6),16);return[G,N,ee]},S=()=>pe.isDark()?a.gray[50]:a.gray[600],E=F(w[500]),k=async()=>{const j=mn.getUrl("world.geo.json"),N=await(await fetch(j)).json();Pf("world",N)},Q=j=>{if(!j||isNaN(j))return`rgba(${E.join(",")}, 0)`;const G=Math.log(j+1)/Math.log(y+1);return`rgba(${E.join(",")}, ${G})`},I=j=>{d.value=j,W(),h&&(h.clear(),h.setOption(K()),j==="bar"&&D()),v&&l.value&&(v.clear(),v.setOption(K()),j==="bar"&&M())},D=()=>{h&&(h.off("dataZoom"),h.on("dataZoom",function(j){j.batch&&j.batch[0]?(u.value=j.batch[0].start||0,c.value=j.batch[0].end||100):(u.value=j.start||0,c.value=j.end||100),setTimeout(()=>{W()},100)}))},M=()=>{v&&(v.off("dataZoom"),v.on("dataZoom",function(j){j.batch&&j.batch[0]?(u.value=j.batch[0].start||0,c.value=j.batch[0].end||100):(u.value=j.start||0,c.value=j.end||100),setTimeout(()=>{v&&v.setOption(K())},100)}))},$=q(()=>(t.data||[]).map(j=>({...j,value:j.value||0,itemStyle:{color:Q(j.value||0)},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))),V=()=>({backgroundColor:pe.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"item",formatter:j=>p("%1$s%2$s Orders: %3$s",j.name,"<br>",j.value||0),borderRadius:8,backgroundColor:pe.isDark()?"#38485a":"#ffffff",borderColor:pe.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1,textStyle:{color:pe.isDark()?"#ffffff":"#565865"}},visualMap:{min:0,max:y,left:l.value?"5%":"center",bottom:l.value?"center":"4%",text:[p("High"),p("Low")],orient:l.value?"vertical":"horizontal",calculable:!0,inRange:{color:[w[100],w[500]]},textStyle:{color:a.gray[800]}},series:[{name:"Orders",type:"map",map:"world",roam:B.value,zoom:g.value,label:{show:!1,emphasis:{show:!0,color:a.gray[1e3],fontWeight:"bold",textShadowColor:a.gray[50],textShadowBlur:3,textShadowOffsetX:0,textShadowOffsetY:0}},emphasis:{itemStyle:{areaColor:w[300],shadowBlur:10,shadowColor:a.gray[400]}},itemStyle:{borderColor:a.gray[200],borderWidth:.5},data:$.value}]}),L=q(()=>{const j=t.data.length,G=c.value-u.value,N=Math.ceil(j*G/100);let ee=0;return N>100?ee=9:N>50?ee=4:N>30?ee=2:N>20&&(ee=1),ee}),R=()=>{const j=C.value;return{backgroundColor:pe.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(G){const N=G[0];return`${N.name}<br/>${p("Orders")}: ${N.value||0}`},backgroundColor:pe.isDark()?"#38485a":"#ffffff",textStyle:{color:pe.isDark()?a.gray[25]:a.system.mid},borderColor:pe.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1},dataZoom:[{type:"inside",yAxisIndex:0,start:u.value,end:c.value},{type:"slider",yAxisIndex:0,start:u.value,end:c.value,width:25,top:10,right:10,textStyle:{color:S()},brushSelect:!1,showDetail:!1,disabled:!0}],grid:{left:j?"10px":"0%",right:"15%",top:"10%",bottom:"15%",containLabel:!0},yAxis:{type:"category",axisTick:{show:j},splitLine:{show:!1},axisLine:{show:j,lineStyle:{color:S()}},axisLabel:{show:j,interval:L.value,color:S(),fontSize:11},data:t.data.map(G=>G.name)},xAxis:{type:"value",axisLabel:{show:!0,color:S(),formatter:function(G){return G.toLocaleString()}},splitLine:{show:!0,lineStyle:{color:pe.isDark()?a.gray[600]:a.gray[200]}}},series:[{type:"bar",large:!0,itemStyle:{color:new Yr(0,0,1,0,[{offset:0,color:w[400]},{offset:1,color:w[600]}]),borderRadius:[0,4,4,0]},emphasis:{itemStyle:{color:new Yr(0,0,1,0,[{offset:0,color:w[500]},{offset:1,color:w[700]}])}},data:t.data.map(G=>G.value),label:{show:j,formatter:"{c}",position:"right",color:S(),fontSize:10}}]}},K=()=>d.value==="bar"?R():V(),J=async()=>{await k(),s.value&&(h=at(s.value),h.setOption(K()),d.value==="bar"&&D(),h.on("georoam",()=>{const G=h.getOption().series[0].zoom;if(G!==g.value)if(G<Ho||G>Fr){const N=Math.max(Ho,Math.min(Fr,G));h.setOption({series:[{zoom:N}]},!1),g.value=N}else g.value=G}))},W=()=>{t.data&&t.data.length>0?y=Math.max(...t.data.map(j=>j.value||0)):y=1,h&&h.setOption(K(),{notMerge:!0})},ae=()=>{g.value=Math.min(g.value+Ud,Fr),B.value=!0,h.setOption({series:[{zoom:g.value,roam:B.value}]})},Z=()=>{g.value=Math.max(g.value-Ud,Ho),B.value=!0,h.setOption({series:[{zoom:g.value,roam:B.value}]})},te=()=>{d.value==="bar"?(u.value=92,c.value=100,h&&h.dispatchAction({type:"dataZoom",start:92,end:100})):(g.value=Ho,B.value="move",h&&(h.clear(),h.setOption(K())))},ie=async()=>{l.value=!0,await de(),v?v.clear():v=at(n.value),v.setOption(K()),d.value==="bar"&&M()},P=j=>{S(),h&&h.setOption(K())};return he(()=>{window.addEventListener("onFluentCartThemeChange",P),B.value="move",de(J)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",P),h&&(h.dispose(),h=null),v&&(v.dispose(),v=null)}),fe(()=>t.data,()=>W(),{deep:!0}),fe(C,()=>{d.value==="bar"&&de(()=>{W()})}),(j,G)=>(A(),_("div",Mb,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title:j.$t("Order Heat Map"),border_bottom:""},{action:r(()=>[i("div",Vb,[o(Xa,{activeType:d.value,types:{world:"Globe",bar:"BarChart"},onChange:I},null,8,["activeType"]),o(Ct,{targetRef:s.value,size:"small"},null,8,["targetRef"])])]),_:1},8,["title"]),o(le,{class:"p-0 pt-0 relative"},{default:r(()=>[d.value==="world"?(A(),_("div",Lb,[o(we,{tag:"button",size:"small",onClick:ae},{default:r(()=>[o(z,{name:"Plus"})]),_:1}),o(we,{tag:"button",size:"small",onClick:Z},{default:r(()=>[o(z,{name:"Minus"})]),_:1}),o(we,{tag:"button",size:"small",onClick:te},{default:r(()=>[o(z,{name:"Reload"})]),_:1}),o(we,{tag:"button",size:"small lg:hidden",onClick:ie},{default:r(()=>[o(z,{name:"Eye"})]),_:1})])):x("",!0),d.value==="bar"?(A(),_("div",Ob,[o(we,{tag:"button",size:"small",onClick:te},{default:r(()=>[o(z,{name:"Reload"})]),_:1})])):x("",!0),i("div",{class:"fct-chart-wrap rounded-[0px] bg-transparent",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1}),o(f(Gf),{modelValue:l.value,"onUpdate:modelValue":G[0]||(G[0]=N=>l.value=N),title:j.$t("Order Heat Map"),class:"country-heat-map-dialog"},{default:r(()=>[i("div",{class:"fct-chart-wrap",ref_key:"modalChartRef",ref:n},null,512)]),_:1},8,["modelValue","title"])]))}},Rb=be(Hb,[["__scopeId","data-v-342ab7be"]]),Pb={class:"fct-report-card"},Kb={key:0,class:"fct-report-card-header"},Nb={key:0,class:"flex items-center gap-2"},Gb={class:"title"},zb={class:"actions"},jb={class:"fct-report-card-body flex h-full"},Yb={class:"w-full"},po={__name:"ReportCard",props:{cardOptions:{type:Object,default:()=>({heading:"",linkButtonText:"",linkButtonUrl:"",headingIcon:{type:Boolean,default:!1}})}},setup(e){return(t,a)=>{const s=b("router-link");return A(),_("div",Pb,[e.cardOptions.heading||e.cardOptions.linkButtonText?(A(),_("div",Kb,[e.cardOptions.heading?(A(),_("div",Nb,[e.cardOptions.headingIcon?(A(),U(we,{key:0,size:"x-small",bg:"danger",soft:""},{default:r(()=>[o(z,{name:"FailedCircle"})]),_:1})):x("",!0),i("h4",Gb,m(e.cardOptions.heading),1)])):x("",!0),i("div",zb,[e.cardOptions.linkButtonText?(A(),U(s,{key:0,to:`/${e.cardOptions.linkButtonUrl}`,class:"link"},{default:r(()=>[O(m(t.$t(e.cardOptions.linkButtonText)),1)]),_:1},8,["to"])):x("",!0),Ta(t.$slots,"action")])])):x("",!0),i("div",jb,[i("div",Yb,[Ta(t.$slots,"default")])])])}}},qb={key:0,class:"fct-report-sold-product-list has-scroll"},Wb={class:"list-left-content"},Xb={class:"list-title"},Jb={class:"list-title-inner"},Zb={class:"list-id"},e0={class:"list-right-content"},t0=["innerHTML"],a0={class:"list-price"},s0={__name:"RecentOrders",setup(e){const t=Rt.data;return(a,s)=>{const n=b("router-link");return A(),U(po,{class:"top-sold-products","card-options":{heading:f(p)("Recent Orders"),linkButtonText:f(p)("View All"),linkButtonUrl:"orders"}},{default:r(()=>{var l,d;return[((d=(l=f(t))==null?void 0:l.recentOrders)==null?void 0:d.length)>0?(A(),_("ul",qb,[(A(!0),_(H,null,X(f(t).recentOrders,u=>(A(),_("li",{key:u.id},[o(n,{class:"no-underline",to:{name:"view_order",params:{order_id:u.id}}},{default:r(()=>[i("div",Wb,[i("div",Xb,[i("div",Jb,m(u.customer_name)+" #"+m(f(nt)(u.id)),1),i("div",Zb,[o(Lt,{"date-time":u.created_at},null,8,["date-time"])])])]),i("div",e0,[i("div",{class:"list-value",innerHTML:f(Be).scaled(u.total_amount)},null,8,t0),i("div",a0,m(f(nt)(u.order_items_count))+" "+m(f(p)("Items")),1)])]),_:2},1032,["to"])]))),128))])):(A(),U(Te,{key:1,icon:"Empty/ListView",text:f(p)("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])}}},n0={key:0},o0={key:1,class:"fc_dashboard_onboarding_wrap"},l0={class:"fc_dashboard_onboarding_title"},r0={class:"fc_dashboard_onboarding_lists"},i0=["href"],A0={class:"circle-shape"},d0={class:"fc_dashboard_onboarding_item__title"},u0={__name:"Onboarding",setup(e){const t=T(0),a=T(!1);Je().ctx;const s=T([]),n=T(!0);T(localStorage.getItem("started_content_collapse")==="true"||!1),q(()=>{const d=Object.keys(s.value).length;return d?Math.round(t.value/d*100):0});const l=Ql("dashboardTogglePageNotification");return he(async()=>{a.value=!0,se.get("dashboard").then(d=>{var c;s.value=d.data.steps,t.value=d.data.completed,n.value=Object.keys(s.value).length!==t.value,a.value=!1;let u=((c=s.value.page_setup)==null?void 0:c.completed)||!1;l&&l(!u)}).catch(d=>{a.value=!1})}),(d,u)=>{const c=b("el-skeleton"),h=b("Check"),v=b("el-icon");return n.value?(A(),_("div",n0,[a.value?(A(),U(c,{key:0,rows:3,animated:""})):(A(),_("div",o0,[i("h3",l0,m(d.$t("Onboarding Checklist")),1),i("div",r0,[(A(!0),_(H,null,X(s.value,(y,g)=>(A(),_("a",{key:g,href:y.url,class:oe([y.completed===!0?"active":"","fc_dashboard_onboarding_item"])},[i("span",A0,[y.completed===!0?(A(),U(v,{key:0},{default:r(()=>[o(h)]),_:1})):x("",!0)]),i("div",d0,m(y.title),1)],10,i0))),128))])]))])):x("",!0)}}},c0={class:"fct-dashboard-recent-activities-wrap"},p0={class:"fct-dashboard-recent-activities__header"},f0={class:"fct-dashboard-recent-activities__header_title"},h0={class:"fct-dashboard-recent-activities__header_desc"},m0={key:0,class:"fct-dashboard-recent-activities__body"},_0={key:0,class:"fct-dashboard-recent-activities__item has-icon"},g0={class:"content"},v0={class:"title"},y0=["onClick"],b0={class:"date"},w0=["innerHTML"],C0={class:"created_by"},B0={key:1,class:"fct-dashboard-recent-activities__empty"},k0={class:"fct-dashboard-recent-activities__empty_text"},F0={__name:"RecentActivity",props:{activities:{type:Array,default:()=>[]},showManageActivity:{type:Boolean,default:!1}},emits:["reload"],setup(e,{emit:t}){const a=Va();T(!1),T({});const s=T([{label:p("All"),value:"all"},{label:p("Today"),value:"today"},{label:p("Yesterday"),value:"yesterday"},{label:p("This Week"),value:"this_week"}]),n=T("all"),l=()=>{switch(n.value){case"all":return p("all");case"today":return p("today");case"yesterday":return p("yesterday");case"this_week":return p("this week");default:return n.value}},d=()=>{l(),Rt.getRecentActivities({groupKey:n.value})},u={Order:"orders/view",Payment:"orders/view",Product:"products/view",Customer:"customers/view",Coupon:"coupons/view"},c=v=>{const g={Order:{name:"view_order",param:"order_id",permission:"orders/view"},Payment:{name:"view_order",param:"order_id",permission:"orders/view"},Product:{name:"view_product",param:"product_id",permission:"products/view"},Customer:{name:"view_customer",param:"customer_id",permission:"customers/view"},Coupon:{name:"view_coupon",param:"coupon_id",permission:"coupons/view"}}[v.module_name];g&&v.module_id&&h(v)?a.push({name:g.name,params:{[g.param]:v.module_id}}):console.warn("Invalid activity or module not supported:",v)},h=v=>{if(!v.module_name)return!0;const y=ve.get(u,rt.capitalize(v.module_name));return y?so.has(y):!1};return he(()=>{d()}),(v,y)=>{const g=b("el-radio-button"),B=b("el-radio-group");return A(),_("div",c0,[i("div",p0,[i("h4",f0,m(f(p)("Recent Activities")),1),i("p",h0,[n.value==="all"?(A(),_(H,{key:0},[O(m(f(p)("%s new activities",f(nt)(f(Rt).data.recentActivities.length))),1)],64)):(A(),_(H,{key:1},[O(m(f(p)("%1$s new activities %2$s",f(nt)(f(Rt).data.recentActivities.length),l())),1)],64))]),o(B,{class:"fct-dashboard-recent-activities__header_filter",modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=w=>n.value=w),onChange:d,size:"large"},{default:r(()=>[(A(!0),_(H,null,X(s.value,(w,C)=>(A(),U(g,{key:C,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),f(Rt).data.recentActivities.length?(A(),_("div",m0,[(A(!0),_(H,null,X(f(Rt).data.recentActivities,(w,C)=>(A(),_(H,{key:C},[h(w)?(A(),_("div",_0,[y[1]||(y[1]=i("span",{class:"icon"},[i("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M12.8499 9.92029L13.5711 10.3529C13.6156 10.3795 13.6524 10.4172 13.678 10.4623C13.7036 10.5075 13.717 10.5584 13.717 10.6103C13.717 10.6621 13.7036 10.7131 13.678 10.7582C13.6524 10.8033 13.6156 10.841 13.5711 10.8677L8.30911 14.0249C8.21579 14.081 8.10897 14.1106 8.00011 14.1106C7.89124 14.1106 7.78443 14.081 7.69111 14.0249L2.42911 10.8677C2.38462 10.841 2.34779 10.8033 2.32222 10.7582C2.29664 10.7131 2.2832 10.6621 2.2832 10.6103C2.2832 10.5584 2.29664 10.5075 2.32222 10.4623C2.34779 10.4172 2.38462 10.3795 2.42911 10.3529L3.15031 9.92029L8.00011 12.8303L12.8499 9.92029ZM12.8499 7.10029L13.5711 7.53289C13.6156 7.55952 13.6524 7.59723 13.678 7.64235C13.7036 7.68746 13.717 7.73843 13.717 7.79029C13.717 7.84214 13.7036 7.89311 13.678 7.93822C13.6524 7.98334 13.6156 8.02105 13.5711 8.04769L8.00011 11.3903L2.42911 8.04769C2.38462 8.02105 2.34779 7.98334 2.32222 7.93822C2.29664 7.89311 2.2832 7.84214 2.2832 7.79029C2.2832 7.73843 2.29664 7.68746 2.32222 7.64235C2.34779 7.59723 2.38462 7.55952 2.42911 7.53289L3.15031 7.10029L8.00011 10.0103L12.8499 7.10029ZM8.30851 1.58569L13.5711 4.74289C13.6156 4.76952 13.6524 4.80724 13.678 4.85235C13.7036 4.89746 13.717 4.94843 13.717 5.00029C13.717 5.05214 13.7036 5.10311 13.678 5.14822C13.6524 5.19334 13.6156 5.23105 13.5711 5.25769L8.00011 8.60029L2.42911 5.25769C2.38462 5.23105 2.34779 5.19334 2.32222 5.14822C2.29664 5.10311 2.2832 5.05214 2.2832 5.00029C2.2832 4.94843 2.29664 4.89746 2.32222 4.85235C2.34779 4.80724 2.38462 4.76952 2.42911 4.74289L7.69111 1.58569C7.78443 1.52962 7.89124 1.5 8.00011 1.5C8.10897 1.5 8.21579 1.52962 8.30911 1.58569H8.30851ZM8.00011 2.79949L4.33231 5.00029L8.00011 7.20109L11.6679 5.00029L8.00011 2.79949Z",fill:"#335CFF"})])],-1)),i("div",g0,[i("h3",v0,[w.module_name!==""?(A(),_("span",{key:0,onClick:F=>c(w)},m(w.title||"--"),9,y0)):(A(),_(H,{key:1},[O(m(w.title),1)],64)),i("span",b0,[o(Lt,{"date-time":w.created_at},null,8,["date-time"])])]),i("p",{innerHTML:w.content,class:"description"},null,8,w0),i("span",C0,m(f(p)("By %s",w.created_by)),1)])])):x("",!0)],64))),128))])):(A(),_("div",B0,[i("div",k0,m(f(p)("No activity found.")),1)]))])}}},x0={class:"fc_dashboard_sidebar bg-white dark:bg-dark-700 p-5 rounded"},U0={__name:"SideBar",setup(e){return(t,a)=>(A(),_("div",x0,[o(tt,{permission:"is_super_admin"},{default:r(()=>[o(u0)]),_:1}),o(F0,{onReload:a[0]||(a[0]=()=>{})})]))}},S0={class:"fct-product-create"},E0={class:"fct-product-step"},Q0={class:"fct-product-item-selector"},D0=["onClick"],I0={class:"fct-product-item-selector-content"},$0={class:"fct-bundle-product-condition"},T0={class:"condition-text"},M0={class:"dialog-footer"},Yl={__name:"AddProductModal",props:{customModal:String},emits:["process_custom","update:createProductModal"],setup(e,{emit:t}){const a=e,s=t,n=Va(),l=T({post_title:"",post_content:"",post_excerpt:"",post_date:new Date,post_status:"draft",detail:{fulfillment_type:"digital",variation_type:"simple",manage_stock:"0",manage_downloadable:"0",other_info:{use_pricing_table:"yes",group_pricing_by:"repeat_interval",active_editor:"wp-editor",sold_individually:"no"}}}),d=[{type:"physical",title:p("Physical Product"),icon:"Gift"},{type:"digital",title:p("Digital Product"),icon:"Code"}],u=T(!1),c=T(null),h=g=>{l.value.detail.fulfillment_type=g},v=()=>{u.value=!0,se.post("products",{...l.value}).then(g=>{if(Y.success(g.message),a.customModal==="order_modal"){const B={id:g.data.product_variants.id,object_id:g.data.product_variants.post_id,variation_id:g.data.product_variants.id,item_name:g.data.product_variants.variation_title,item_price:g.data.product_variants.item_price,quantity:1,stock:100,object_type:g.data.product_details.fulfillment_type,item_total:g.data.product_variants.item_price,line_total:g.data.product_variants.item_price,tax_amount:0,discount_total:0};s("process_custom",B),s("update:createProductModal",!1)}else n.push({name:"product_edit",params:{product_id:g.data.ID}})}).catch(g=>{var B;g.status_code=="422"?Y.validationErrors(g):Y.error((B=g.data)==null?void 0:B.message)}).finally(()=>{u.value=!1})},y=g=>{g.stopPropagation(),g.preventDefault(),v()};return he(()=>{de(()=>{setTimeout(()=>{var g;(g=c.value)==null||g.focus()},10)})}),(g,B)=>{const w=b("el-input"),C=b("el-form-item"),F=b("el-checkbox"),S=b("el-form"),E=b("el-button");return A(),_("div",S0,[i("div",E0,[o(S,{"label-position":"top",model:l.value,"require-asterisk-position":"right"},{default:r(()=>[o(C,{label:l.value.detail.other_info.is_bundle_product==="yes"?f(p)("Bundle Title"):f(p)("Product Title"),required:""},{default:r(()=>[o(w,{type:"text",modelValue:l.value.post_title,"onUpdate:modelValue":B[0]||(B[0]=k=>l.value.post_title=k),placeholder:l.value.detail.other_info.is_bundle_product==="yes"?f(p)("Bundle Title"):f(p)("Product Title"),minlength:"3",maxlength:"200","show-word-limit":"",autofocus:"",ref_key:"fcProductTitle",ref:c,onKeydown:Ma(y,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(C,null,{default:r(()=>[i("ul",Q0,[(A(),_(H,null,X(d,k=>i("li",{key:k.type,class:oe({active:k.type===l.value.detail.fulfillment_type}),onClick:Q=>h(k.type)},[i("div",I0,[o(z,{name:k.icon},null,8,["name"]),O(" "+m(k.title),1)]),B[2]||(B[2]=i("div",{class:"fct-product-item-selector-dot-wrap"},[i("span",{class:"fct-product-item-selector-dot"})],-1))],10,D0)),64))])]),_:1}),o(C,null,{default:r(()=>[i("div",$0,[o(F,{modelValue:l.value.detail.other_info.is_bundle_product,"onUpdate:modelValue":B[1]||(B[1]=k=>l.value.detail.other_info.is_bundle_product=k),"true-value":"yes","false-value":"no"},{default:r(()=>[O(m(f(p)("Add as a Bundle")),1)]),_:1},8,["modelValue"]),i("span",T0,m(f(p)("Combine multiple items into one package")),1)])]),_:1})]),_:1},8,["model"])]),i("div",M0,[o(E,{disabled:!l.value.post_title||u.value,loading:u.value,onClick:v,type:"primary"},{default:r(()=>[O(m(u.value?f(p)("Creating"):f(p)("Add Product")),1)]),_:1},8,["disabled","loading"])])])}}};class lA{constructor(t=new Date){this.date=t}getHours(){return this.date.getHours()}static greeting(){const t=new lA().getHours();if(t>=5&&t<12)return p("Good morning");if(t>=12&&t<17)return p("Good afternoon");if(t>=17&&t<21)return p("Good evening");{const a=[p("Step into the moonlight!"),p("Evening vibes!"),p("The night's still young!")];return a[Math.floor(Math.random()*a.length)]}}}const V0={class:"fct-current-user-info-wrap"},L0={class:"fct-current-user-info-content"},O0={class:"image"},H0=["src","alt"],R0={class:"content"},P0={key:0,class:"fct-current-user-info-action"},K0={__name:"CurrentUserInfo",setup(e){const t=T(!1),a=T(De.get("me")),s=()=>De.get("shop.store_name"),n=De.get("total_products_count");return(l,d)=>{const u=b("el-button"),c=b("el-dialog");return A(),_("div",V0,[i("div",L0,[i("div",O0,[i("img",{src:a.value.avatar,alt:a.value.full_name},null,8,H0)]),i("div",R0,[i("h4",null,m(f(lA).greeting())+" "+m(a.value.full_name)+" ",1),i("p",null,m(f(p)("Welcome to %1$s",s())),1)])]),o(tt,{permission:"products/create"},{default:r(()=>[f(n)==0?(A(),_("div",P0,[o(u,{onClick:d[0]||(d[0]=h=>t.value=!0),type:"primary"},{default:r(()=>[O(m(f(p)("Add Product")),1)]),_:1})])):x("",!0)]),_:1}),o(c,{"append-to-body":!0,modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=h=>t.value=h),onClose:d[2]||(d[2]=h=>t.value=!1),title:f(p)("Add New Product")},{default:r(()=>[o(Yl)]),_:1},8,["modelValue","title"])])}}};class N0{constructor(){me(this,"operatorMap",{"!==":"matchNotEqual","!=":"matchNotEqual"});me(this,"defaultMatcherMethod",null)}getMatchingMethod(t){return t==="=="||t==="==="?"matchEqual":this.operatorMap.hasOwnProperty(t)?this.operatorMap[t]:this.defaultMatcherMethod}defaultMatcher(t,a,s){}matchEqual(t,a,s){return s==="==="?t===a:t==a}matchNotEqual(t,a,s){return s==="!=="?t!==a:t!=a}matchContains(t,a,s){return a instanceof String||Array.isArray(a)?a.includes(t):typeof a=="object"?a.hasOwnProperty(t):!1}matchIn(t,a,s){return this.matchContains(t,a,s)}matchNotIn(t,a,s){return!this.matchContains(t,a,s)}}class G0{constructor(){me(this,"modifierMap",{"+":"applyAddition","-":"applySubstruction"});me(this,"defaultModifierMethod",null)}getModificationMethod(t){return t==="=="||t==="==="?"matchEqual":this.modifierMap.hasOwnProperty(t)?this.modifierMap[t]:this.defaultModifierMethod}applyAddition(t,a,s,n,l){return t+a}}class z0{constructor(t,a){me(this,"value");me(this,"operator");this.value=t,this.operator=a}setOperator(t){return this.operator=t,this}setValue(t){return this.value=t,this}static make(t,a){return new this(t,a)}build(){return{operator:this.operator,value:this.value instanceof vi?this.value.setModifiers([]).build():this.value}}}class vi{constructor(t,a){me(this,"accessor");me(this,"modifiers");this.accessor=t,this.modifiers=[],this.setModifiers(a)}setAccessor(t){return this.accessor=t,this}addModifier(t){return this.modifiers.push(t),this}setModifiers(t){return this.modifiers=Array.isArray(t)?t:this.modifiers,this}static make(t,a){return new this(t,a)}build(){let t=[];return Array.isArray(this.modifiers)&&this.modifiers.length>0&&(t=this.modifiers.map(a=>a instanceof z0?a.build():a)),t.length>0?{accessor:this.accessor,modifiers:t}:{accessor:this.accessor}}}class Ks{constructor(t,a,s,n,l){me(this,"conditionType");me(this,"conditions");me(this,"key");me(this,"operator");me(this,"value");this.key=t,this.value=a,this.operator=s,this.conditions=[],this.conditionType=this.buildConditionType(n),this.setConditions(l)}static make(t,a,s,n){return new this(t,a,s,n)}setConditionType(t){return this.conditionType=this.buildConditionType(t),this}buildConditionType(t){return t==="or"||t==="|"?"or":"and"}setOperator(t){return this.operator=t,this}setKey(t){return this.key=t,this}setValue(t){return this.value=t,this}addCondition(t){return this.conditions.push(t),this}setConditions(t){return this.conditions=Array.isArray(t)||t instanceof Ks||typeof t=="function"?t:this.conditions,this}build(){if(Array.isArray(this.conditions)&&this.conditions.length>0){let s=[];return s=this.conditions.map(n=>n instanceof Ks?n.build.bind(n)():n),{condition_type:this.conditionType,conditions:s}}const t=this.key instanceof vi?this.key.build():this.key,a=this.value instanceof vi?this.value.build():this.value;return{key:t,operator:this.operator,value:a}}}class j0{constructor(t,a){me(this,"data");me(this,"conditions");me(this,"stateKey");me(this,"matcher");me(this,"modifier");this.data=a,this.stateKey=t,this.matcher=new N0,this.modifier=new G0}match(t,a,s,n=!0){let l="",d=this.matcher.getMatchingMethod(a);return d!=null?l=d:l=rt.camel("match"+a),l in this.matcher&&typeof this.matcher[l]=="function"?this.matcher[l](t,s,a,n):(console.error(`Method ${l} does not exist in Matcher Class`),n)}evaluate(t,a="and"){if(t instanceof Ks){const n=t.build.bind(t)();n.hasOwnProperty("conditions")?(t=n.conditions,a=n.condition_type):t=[n]}a=a==="or"?"or":"and";let s=a==="and";if(typeof t=="function")return t(this.stateKey,this.data);if(!Array.isArray(t))return!0;for(let n of t){let l=null;if(Array.isArray(ve.get(n,"conditions")))l=this.evaluate(n.conditions,ve.get(n,"condition_type","and"));else{if(n.key===null||n.key===void 0){s=!0;continue}l=this.applyCondition(n)}s=a==="and"?s&&l:s||l}return s}applyCondition(t){let a="",s=null;typeof t.key=="object"?a=ve.resolvePath(this.stateKey,ve.get(t,"key.accessor")):a=ve.resolvePath(this.stateKey,t.key);let n=ve.get(this.data,a);if(typeof t.value=="object"){const l=ve.resolvePath(this.stateKey,ve.get(t,"value.accessor"));s=ve.get(this.data,l)}else s=t.value;return n=this.applyModification(n,t.key.modifiers,this.stateKey),s=this.applyModification(s,t.value.modifiers,this.stateKey),this.match(n,t.operator,s)}applyModification(t,a,s){return Array.isArray(a)&&a.forEach(n=>{let l=n.operator,d="",u=this.modifier.getModificationMethod(l);if(u!=null?d=u:d=rt.camel("apply"+l),d in this.modifier&&typeof this.modifier[d]=="function"){let c=n.value;typeof c=="object"&&c!==null&&(c=ve.getByPath(this.data,s,ve.get(c,"accessor"))),t=this.modifier[d](t,c,l,s,this.data)}else console.error(`Method ${d} does not exist in Modifier Class`)}),t}}class Hc{constructor(){me(this,"_conditionType","and");me(this,"_conditions",null)}conditionType(t){return this._conditionType=t,this}conditions(t){return this._conditions=Array.isArray(t)||t instanceof Ks||typeof t=="function"?t:this._conditions,this}visibleIf(t){return this._conditions=t,this}buildConditions(t){return Array.isArray(t)&&t.length>0?t.map(a=>a instanceof Ks?a.build.bind(a)():a):t}}class Rc{constructor(){me(this,"_events",{})}event(t,a){return this._events[t]=a,this}}class vl{constructor(t=""){this._component="",this._affix=t}static component(t){const a=new vl;return a._component="Affix/"+t,a}static make(t=""){return new this(t)}build(){return this._component.length>0?{component:this._component}:this._affix}}class yi{constructor(t,a="input"){if(typeof t!="string"||t.length<1)throw new Error("Key is Required");this._key=t,this._type=a,this._class="",this._id="",this._name="",this._label="",this._value="",this._placeholder="",this._min="",this._max="",this._prefix="",this._hasPrefix=!1,this._hasSuffix=!1,this._suffix="",Bs.install(this,Mu),Bs.install(this,Rc),Bs.install(this,Hc),this._wrapperClass=""}static make(t,a="input"){return new this(t,a)}wrapperClass(t){return this._wrapperClass=t,this}type(t){return this._type=t,this}class(t){return this._class=t,this}id(t){return this._id=t,this}name(t){return this._name=t,this}label(t){return this._label=t,this}value(t){return this._value=t,this}placeholder(t){return this._placeholder=t,this}min(t){return this._min=t,this}max(t){return this._max=t,this}prefix(t){return this._hasPrefix=!0,this._prefix=t,this}suffix(t){this._hasSuffix=!0,this._suffix=t}onChange(t){return this._onChangeCallback=t,this}onKeyPress(t){return this._onKeyPressCallback=t,this}onKeyUp(t){return this._onKeyUpCallback=t,this}onKeyDown(t){return this._onKeyDownCallback=t,this}build(){return this._conditions,Array.isArray(this._conditions)&&this._conditions.length>0&&this._conditions.map(t=>t instanceof Ks?t.build.bind(t)():t),this._attributes=typeof this._attributes=="object"?this._attributes:{},this._attributes.min=this._min,this._attributes.max=this._max,this._attributes.placeholder=this._placeholder,this._attributes.type=this._type,{key:this._key,type:this._type,class:this._class,id:this._id,name:this._name??p(rt.headline(this._key)),label:this._label??p(rt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix instanceof vl?this._suffix.build():this._suffix,prefix:this._prefix instanceof vl?this._prefix.build():this._prefix,min:this._min,max:this._max,placeholder:this._placeholder,attributes:this._attributes,events:this._events,wrapperClass:this._wrapperClass}}}class bi{constructor(t){if(typeof t!="string"||t.length<1)throw new Error("Key is Required");this._type="section",this._key=t,this._schema=[],this._class="",this.disable_nesting=!0,Bs.install(this,Mu),Bs.install(this,Rc),Bs.install(this,Hc)}static make(t){return new this(t)}enableNesting(){return this.disable_nesting=!1,this}disableNesting(){return this.disable_nesting=!0,this}class(t){return this._class=t,this}get type(){return this._type}set type(t){if(typeof t=="string")this._type=t;else throw new TypeError("Type must be a string.")}get schema(){return this._schema}setSchema(t){return this._schema=t,this}build(){const t=gn.build(this.schema);return{key:this._key,type:this._type,class:this._class,schema:t,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),attributes:this._attributes}}}class Sd{constructor(t,a){if(typeof t!="string"||t.length<1)throw new Error("Key is Required");Bs.install(this,yi,{key:t}),Bs.install(this,bi,{key:t}),this._component=a,this._key=t}static make(t,a=""){return new this(t,a)}component(t){return this._component=t,this}value(t){return this._value=t,this}build(){const t=gn.build(this.schema??{});return{type:this._type,class:this._class,id:this._id,name:this._name??p(rt.headline(this._key)),label:this._label??p(rt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix,prefix:this._prefix,placeholder:this._placeholder,attributes:this._attributes,onChange:this._onChangeCallback,onKeyUp:this._onKeyUpCallback,onKeyDown:this._onKeyDownCallback,type:this._type,class:this._class,schema:t,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),type:"custom",component:this._component,key:this._key}}}class gn{static build(t){return Array.isArray(t)?gn.buildFromArray(t):typeof t=="object"?gn.buildFromObject(t):t}static buildFromObject(t){let a={};return Object.keys(t).forEach((s,n)=>{const l=t[s];l instanceof yi||l instanceof bi||l instanceof Sd?a[s]=l.build.bind(l)():a[s]=t[s]}),a}static buildFromArray(t){let a={};return Array.isArray(t)&&t.forEach(s=>{if(s instanceof yi||s instanceof bi||s instanceof Sd){let n=s.build.bind(s)();a[n.key]=n}else a[s.key]=s}),a}}class Y0 extends Xt{constructor(){super(...arguments);me(this,"data",{schema:{},defaults:{},_originalDefaults:{},values:{},initialized:!1,hasChange:!1,validationErrors:{},onChangeCallback:[]});me(this,"nestedFormLayouts",["section","tab","tab-pane","grid"]);me(this,"ignorableFormLayouts",["grid"])}get hasChange(){return this.data.hasChange}setSchema(a){return this.data.schema=gn.build(a??{}),this.initForm(),this}setDefaults(a){return this.data.defaults=a||{},this.data._originalDefaults=JSON.parse(JSON.stringify(this.data.defaults)),this.initForm(),this}get schema(){return this.data.schema}get values(){return this.data.values}get isReady(){return this.data.initialized}initForm(){if(typeof this.data.schema!="object"||typeof this.data.defaults!="object")throw new Error("You need to set Schema and Defaults First");this.setValues(),this.data.initialized=!0}setValues(){this.data.values=this.ensureNestedDataProperties(this.data.schema,this.data.defaults)}getState(){return this.data.values}setValidationErrors(a){this.data.validationErrors=a||{}}hasValidationError(a){return(this.data.validationErrors??{}).hasOwnProperty(a)}getValidationError(a){return this.data.validationErrors[a]}ensureNestedDataProperties(a,s={}){return Object.keys(a).reduce((n,l)=>{const d=a[l];if(d.type==="html")return n;if(this.nestedFormLayouts.includes(d.type??""))if(d.disable_nesting===!0){const u=this.ensureNestedDataProperties(d.schema??{},s??{});n={...n,...u}}else n[l]=this.ensureNestedDataProperties(d.schema??{},s[l]??{});else n[l]=s[l]??d.value??"";return n},{})}isVisible(a,s){return a.hasOwnProperty("conditions")?new j0(s,this.values).evaluate(ve.get(a,"conditions"),ve.get(a,"condition_type","and")):!0}triggerChange(a){for(let s of this.data.onChangeCallback)s(a)}onDataChanged(a){this.data.onChangeCallback.push(a)}setValue(a,s){ve.set(this.data.values,a,s),this.data.hasChange=!0,this.triggerChange(this.data.values)}reset(a=!0){if(!this.data.schema||!this.data._originalDefaults)throw new Error("Form is not initialized");const s=a?this.data._originalDefaults:this.data.defaults;return this.data.values=this.ensureNestedDataProperties(this.data.schema,JSON.parse(JSON.stringify(s))),this.data.validationErrors={},this.data.hasChange=!1,this.data.initialized=!0,this}}function rA(){return Y0.init()}const q0=["innerHTML"],wi={__name:"FieldNote",props:{note:String},setup(e){return(t,a)=>(A(),_("div",{class:"form-note",innerHTML:e.note},null,8,q0))}},W0=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"})),Ed=Object.assign({name:"ValidationError"},{__name:"ValidationErrorNew",props:{errorKey:String,form:{type:Object,required:!0}},setup(e){return(t,a)=>e.form.hasValidationError(e.errorKey)?(A(),_("div",{key:0,class:oe(`fluent-cart-admin-validation-error-wrapper ${e.errorKey}`)},[(A(!0),_(H,null,X(e.form.getValidationError(e.errorKey),(s,n)=>(A(),_("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},m(s),1))),128))],2)):x("",!0)}}),Pc={__name:"Resolver",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},label:{type:String},attribute:{type:Object},callback:{type:Function}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue"),a=Object.assign({"./Affix/Test.vue":()=>Ze(()=>import("./chunks/Test.js?ver=1.3.11"),[],import.meta.url),"./Base/Inputs/Checkbox.vue":()=>Ze(()=>Promise.resolve().then(()=>rw),void 0,import.meta.url),"./Base/Inputs/ColorPicker.vue":()=>Ze(()=>Promise.resolve().then(()=>mw),void 0,import.meta.url),"./Base/Inputs/Date.vue":()=>Ze(()=>Promise.resolve().then(()=>_w),void 0,import.meta.url),"./Base/Inputs/FieldNote.vue":()=>Ze(()=>Promise.resolve().then(()=>W0),void 0,import.meta.url),"./Base/Inputs/Input.vue":()=>Ze(()=>Promise.resolve().then(()=>uw),void 0,import.meta.url),"./Base/Inputs/Media.vue":()=>Ze(()=>Promise.resolve().then(()=>Rw),void 0,import.meta.url),"./Base/Inputs/RadioGroup.vue":()=>Ze(()=>Promise.resolve().then(()=>Aw),void 0,import.meta.url),"./Base/Inputs/RemoteSearchableSelect.vue":()=>Ze(()=>Promise.resolve().then(()=>bw),void 0,import.meta.url),"./Base/Inputs/Select.vue":()=>Ze(()=>Promise.resolve().then(()=>yw),void 0,import.meta.url),"./Base/Inputs/Switch.vue":()=>Ze(()=>Promise.resolve().then(()=>lw),void 0,import.meta.url),"./Base/Inputs/Time.vue":()=>Ze(()=>Promise.resolve().then(()=>gw),void 0,import.meta.url),"./Base/Layouts/FormGrid.vue":()=>Ze(()=>Promise.resolve().then(()=>X0),void 0,import.meta.url),"./Base/Layouts/FormSection.vue":()=>Ze(()=>Promise.resolve().then(()=>aw),void 0,import.meta.url),"./Base/Layouts/FormTab.vue":()=>Ze(()=>Promise.resolve().then(()=>sw),void 0,import.meta.url),"./Base/Layouts/FormTabPane.vue":()=>Ze(()=>Promise.resolve().then(()=>nw),void 0,import.meta.url),"./Coupon/BuyProducts.vue":()=>Ze(()=>import("./chunks/BuyProducts.js?ver=1.3.11"),[],import.meta.url),"./Coupon/Categories.vue":()=>Ze(()=>import("./chunks/Categories.js?ver=1.3.11"),[],import.meta.url),"./Coupon/Code.vue":()=>Ze(()=>import("./chunks/Code.js?ver=1.3.11"),[],import.meta.url),"./Coupon/GetProducts.vue":()=>Ze(()=>import("./chunks/GetProducts.js?ver=1.3.11"),[],import.meta.url),"./Coupon/IncludeExclude/Categories.vue":()=>Ze(()=>import("./chunks/Categories2.js?ver=1.3.11"),[],import.meta.url),"./Coupon/IncludeExclude/Product.vue":()=>Ze(()=>import("./chunks/Product.js?ver=1.3.11"),[],import.meta.url),"./Coupon/Products.vue":()=>Ze(()=>import("./chunks/Products.js?ver=1.3.11"),[],import.meta.url),"./ModuleSettings.vue":()=>Ze(()=>import("./chunks/ModuleSettings.js?ver=1.3.11"),[],import.meta.url),"./PaymentView.vue":()=>Ze(()=>import("./chunks/PaymentView.js?ver=1.3.11"),[],import.meta.url),"./StoreSettings/AddressComponent.vue":()=>Ze(()=>import("./chunks/AddressComponent.js?ver=1.3.11"),[],import.meta.url),"./StoreSettings/CreatePageButton.vue":()=>Ze(()=>import("./chunks/CreatePageButton.js?ver=1.3.11"),[],import.meta.url),"./StoreSettings/PageSelector.vue":()=>Ze(()=>import("./chunks/PageSelector.js?ver=1.3.11"),[],import.meta.url),"./TurnstileSettings.vue":()=>Ze(()=>import("./chunks/TurnstileSettings.js?ver=1.3.11"),[],import.meta.url)}),s=af(null);he(()=>{n(l.name)});const n=async d=>{const u=`./${d}.vue`;a[u]?s.value=(await a[u]()).default:console.error(`Form Component ${u} not found`)},l=e;return(d,u)=>(A(),_(H,null,[(A(),U($a(s.value),gt({name:e.name,field:e.field,fieldKey:e.fieldKey,value:e.value,variant:e.variant,nesting:e.nesting,statePath:e.statePath,form:e.form,attribute:e.attribute,label:e.label,callback:e.callback},{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value=c)}),null,16,["modelValue"])),Ta(d.$slots,"fieldNote"),Ta(d.$slots,"validationError")],64))}},iA={__name:"FormGrid",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(e){return(t,a)=>{var s,n,l,d,u,c,h,v,y,g;return A(),_("div",{class:"gap-2 grid grid-cols-dynamic sm:grid-cols-sm-dynamic md:grid-cols-md-dynamic lg:grid-cols-lg--dynamic",style:sa({"--grid-columns":((s=e.field.columns)==null?void 0:s.default)??2,"--sm-grid-columns":((n=e.field.columns)==null?void 0:n.sm)??((l=e.field.columns)==null?void 0:l.default)??2,"--md-grid-columns":((d=e.field.columns)==null?void 0:d.sm)??((u=e.field.columns)==null?void 0:u.md)??((c=e.field.columns)==null?void 0:c.default)??2,"--lg-grid-columns":((h=e.field.columns)==null?void 0:h.lg)??((v=e.field.columns)==null?void 0:v.md)??((y=e.field.columns)==null?void 0:y.sm)??((g=e.field.columns)==null?void 0:g.default)??2})},[o(Xl,{form:e.form,schema:e.field.schema,value:e.value,statePath:e.statePath},null,8,["form","schema","value","statePath"])],4)}}},X0=Object.freeze(Object.defineProperty({__proto__:null,default:iA},Symbol.toStringTag,{value:"Module"})),J0={key:0,class:"fct-content-card-header"},Z0={key:0,class:"title"},ew={key:1,class:"fct-content-card-action"},Kc={__name:"ContentCard",props:["title","show_heading"],setup(e){return(t,a)=>(A(),_("div",{class:oe({"fct-content-card":e.show_heading!==!1})},[e.show_heading!==!1?(A(),_("div",J0,[e.title||t.$slots.title?(A(),_("div",Z0,[Ta(t.$slots,"title",{},()=>[O(m(e.title),1)])])):x("",!0),t.$slots.action?(A(),_("div",ew,[Ta(t.$slots,"action")])):x("",!0)])):x("",!0),i("div",{class:oe({"fct-content-card-body":e.show_heading!==!1})},[Ta(t.$slots,"default")],2)],2))}},tw={class:"form-section"},Nc={__name:"FormSection",props:{field:{type:Object},fieldKey:{type:String},value:{type:Object},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0}},setup(e){return(t,a)=>(A(),_("div",tw,[o(re,null,{default:r(()=>[e.field.show_title!==!1?(A(),U(Ae,{key:0,title:e.field.title,border_bottom:""},null,8,["title"])):x("",!0),o(le,null,{default:r(()=>[o(iA,{form:e.form,field:e.field,statePath:e.statePath,value:e.value},null,8,["form","field","statePath","value"])]),_:1})]),_:1})]))}},aw=Object.freeze(Object.defineProperty({__proto__:null,default:Nc},Symbol.toStringTag,{value:"Module"})),Gc={__name:"FormTab",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(e){const t=e,a=T(""),s=T([]),n=Va(),l=h=>{const v=h.props.name;d(v)},d=h=>{const v=new URL(window.location.href);v.hash=`#/settings/${h}`,window.history.replaceState(null,"",v.toString())},u=()=>{const v=window.location.hash.split("/").pop();s.value=Object.keys(t.field.schema);const y=s.value.find(g=>g===v);y?a.value=y:a.value=t.field.default_tab};let c;return he(()=>{c=n.beforeEach((h,v,y)=>{y(),setTimeout(()=>{u()},200)}),u()}),Re(()=>{c&&c()}),(h,v)=>{const y=b("el-tabs");return A(),U(y,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=g=>a.value=g),class:oe(["fct-tabs-button",{"hidden-switch":e.field.hide_tab_switch}]),onTabClick:l,type:"card"},{default:r(()=>[o(Xl,{form:e.form,schema:e.field.schema,value:e.value,"state-path":e.statePath},null,8,["form","schema","value","state-path"])]),_:1},8,["modelValue","class"])}}},sw=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"})),zc={__name:"FormTabPane",props:{fieldKey:{type:String},field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(e){return(t,a)=>{const s=b("el-tab-pane");return A(),U(s,{label:e.field.title,name:e.fieldKey},{default:r(()=>[o(Xl,{form:e.form,schema:e.field.schema,value:e.value,statePath:e.statePath},null,8,["form","schema","value","statePath"])]),_:1},8,["label","name"])}}},nw=Object.freeze(Object.defineProperty({__proto__:null,default:zc},Symbol.toStringTag,{value:"Module"}));class AA{}me(AA,"attributesBuilders",async(t,a,s)=>{if(t.attributes||(t.attributes={}),t.class&&(t.attributes.class=t.class),t.placeholder&&(t.attributes.placeholder=t.placeholder),typeof a!="function")return t.attributes??{};let n={};typeof t.events!="object"&&(n={}),n.hasOwnProperty("onChange")&&typeof n.onChange=="function"?n.onChange=(...l)=>{s.data.hasChange=!0,n.onChange(l)}:n.onChange=()=>{s.data.hasChange=!0};for(let l in t.events)n[l]=(...d)=>{a(t.events[l],d)};for(let l in t.attributes??{}){let d=t.attributes[l];typeof d=="function"&&await a(d,{})}return{...t.attributes??{},...n}});const ow={__name:"LayoutRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(e){const t=e;Je().ctx;const a=(l,d)=>{if(typeof l=="function")return l({data:t.value,form:t.form,statePath:t.statePath,field:t.field,event:Array.isArray(d)&&d.length===1?d[0]:d})},s=T(!1),n=T({});return he(async()=>{n.value=await AA.attributesBuilders(t.field,a,t.form),s.value=!0}),(l,d)=>(A(),_(H,null,[e.field.type==="grid"&&typeof e.field.schema<"u"?(A(),U(iA,gt({key:0,class:e.field.wrapperClass,form:e.form,field:e.field,value:e.value,statePath:e.fullStatePath},n.value),null,16,["class","form","field","value","statePath"])):x("",!0),e.field.type==="tab"&&typeof e.field.schema<"u"?(A(),U(Gc,gt({key:1,form:e.form,field:e.field,value:e.value,statePath:e.fullStatePath},n.value),null,16,["form","field","value","statePath"])):x("",!0),e.field.type==="tab-pane"&&typeof e.field.schema<"u"&&typeof e.field.title<"u"?(A(),U(zc,gt({key:2,form:e.form,field:e.field,value:e.value,fieldKey:e.fieldKey,statePath:e.fullStatePath},n.value),null,16,["form","field","value","fieldKey","statePath"])):x("",!0),e.field.type==="section"?(A(),U(Nc,gt({key:3,form:e.form,statePath:e.field.disable_nesting===!0?e.fullStatePath:e.fieldKey+".",field:e.field,"field-key":e.fieldKey,value:e.field.disable_nesting===!0?e.value:e.value[e.fieldKey],nesting:e.field.disable_nesting===!0},n.value),null,16,["form","statePath","field","field-key","value","nesting"])):x("",!0)],64))}},jc={__name:"Switch",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue");return(a,s)=>{const n=b("el-switch");return A(),U(n,gt({modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),disabled:e.field.disabled},e.attribute),null,16,["modelValue","disabled"])}}},lw=Object.freeze(Object.defineProperty({__proto__:null,default:jc},Symbol.toStringTag,{value:"Module"})),Yc={__name:"Checkbox",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue");return(a,s)=>{const n=b("el-checkbox");return A(),U(n,gt({modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l)},e.attribute,{"true-value":"yes","false-value":"no",disabled:e.field.disabled}),{default:r(()=>[O(m(e.label),1)]),_:1},16,["modelValue","disabled"])}}},rw=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),iw=["innerHTML"],qc={__name:"RadioGroup",props:_a({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue"),a=e,s=T([]),n=async(l="")=>{if(typeof a.field.options=="function")return s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:l});if(Array.isArray(a.field.options))return s.value=[...a.field.options]};return he(async()=>{await n()}),(l,d)=>{const u=b("el-radio"),c=b("el-radio-group");return A(),U(c,gt({modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=h=>t.value=h)},e.attribute),{default:r(()=>[(A(!0),_(H,null,X(e.field.options,(h,v)=>(A(),U(u,{key:v,value:h.value,class:oe(h.option_class)},{default:r(()=>[i("div",null,m(h.label),1),i("div",{innerHTML:h.note},null,8,iw)]),_:2},1032,["value","class"]))),128))]),_:1},16,["modelValue"])}}},Aw=Object.freeze(Object.defineProperty({__proto__:null,default:qc},Symbol.toStringTag,{value:"Module"})),dw=["innerHTML"],An={__name:"Input",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Je().ctx,a=xa(e,"modelValue"),s=e,n=T(),l=async()=>{typeof s.field.prefix=="function"?n.value=await s.callback(s.field.prefix):n.value=s.field.prefix};return he(()=>{l()}),sf(()=>{l()}),q(()=>s.fieldKey==="amount"?s.form.data.values.type==="fixed"?De.shop.get("currency_sign"):"%":t.appVars.shop.currency_sign),(d,u)=>{var h;const c=b("el-input");return A(),U(c,gt({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v)},e.attribute,{disabled:e.field.disabled}),ft({_:2},[(h=e.field.prefix)!=null&&h.component?{name:"prefix",fn:r(()=>[o(Pc,{form:e.form,name:e.field.prefix.component,field:e.field,value:e.value},null,8,["form","name","field","value"])]),key:"0"}:e.field.prefix?{name:"prefix",fn:r(()=>[i("div",{innerHTML:n.value},null,8,dw)]),key:"1"}:void 0]),1040,["modelValue","disabled"])}}},uw=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),cw={class:"fct-color-picker-box"},pw={class:"fct-color-picker-trigger-wrap"},fw={key:0,class:"text-xs text-system-light"},hw={key:1,class:"fct-color-picker-action-wrap"},dA={__name:"ColorPicker",props:_a({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue"),a=s=>{t.value=""};return(s,n)=>{const l=b("el-color-picker");return A(),_("div",cw,[i("div",pw,[o(l,gt({modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=d=>t.value=d)},e.attribute,{disabled:e.field.disabled,"popper-class":"fct-color-picker-popover"}),null,16,["modelValue","disabled"]),t.value?x("",!0):(A(),U(z,{key:0,name:"ColorPicker",class:"fct-color-picker-icon w-4 h-4"}))]),t.value?x("",!0):(A(),_("span",fw,m(f(p)("Add...")),1)),t.value?(A(),_("div",hw,[i("span",null,m(t.value),1),o(z,{name:"Cross",class:"fct-color-picker-action w-5 h-5",onClick:n[1]||(n[1]=d=>a(s.fieldKey))})])):x("",!0)])}}},mw=Object.freeze(Object.defineProperty({__proto__:null,default:dA},Symbol.toStringTag,{value:"Module"})),Wc={__name:"Date",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue");return(a,s)=>{const n=b("el-date-picker");return A(),U(n,gt({modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l)},e.attribute,{disabled:e.field.disabled}),null,16,["modelValue","disabled"])}}},_w=Object.freeze(Object.defineProperty({__proto__:null,default:Wc},Symbol.toStringTag,{value:"Module"})),Xc={__name:"Time",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue");return(a,s)=>{const n=b("el-time-select");return A(),U(n,gt({modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l)},e.attribute,{disabled:e.field.disabled}),null,16,["modelValue","disabled"])}}},gw=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"})),vw={key:0},Jc={__name:"Select",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue"),a=e,s=T([]),n=T(!1),l=async(u="")=>{n.value=!0,typeof a.field.options=="function"&&(s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:u})),Array.isArray(a.field.options)&&(s.value=[...a.field.options]),n.value=!1};he(async()=>{await l()});const d=u=>typeof u.disabled=="function"?a.callback(u.disabled,{}):u.disabled;return(u,c)=>{const h=b("el-option"),v=b("el-select");return A(),U(v,gt({modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=y=>t.value=y)},e.attribute,{"remote-method":l,loading:n.value,filterable:e.field.filterable===!0,clearable:e.field.clearable===!0,disabled:e.field.disabled}),{default:r(()=>[(A(!0),_(H,null,X(s.value,(y,g)=>(A(),U(h,{key:g,value:y.value,label:y.label,disabled:d(y)},{default:r(()=>[y.slot?(A(),_("span",vw,m(y.slot),1)):x("",!0)]),_:2},1032,["value","label","disabled"]))),128))]),_:1},16,["modelValue","loading","filterable","clearable","disabled"])}}},yw=Object.freeze(Object.defineProperty({__proto__:null,default:Jc},Symbol.toStringTag,{value:"Module"})),Zc={__name:"RemoteSearchableSelect",props:_a({field:{type:Object},key:{type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue"),a=e,s=T(!1),n=T(a.field.options||[]),l=d=>{if(a.field.search_only_on_type===!0){if(d.query.length===0)return}else if(d.query.length<1&&n.value.length>0)return;s.value=!0,se.get("forms/search_options",{search_by:d.query,search_for:d.key}).then(u=>{n.value=u.options,s.value=!1})};return(d,u)=>{const c=b("el-option"),h=b("el-select");return A(),U(h,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=v=>t.value=v),filterable:"",remote:"",placeholder:e.field.placeholder??f(p)("Please enter a keyword"),"remote-method":v=>{l({query:v,key:e.field.remote_key})},loading:s.value,multiple:e.field.multiple},{default:r(()=>[(A(!0),_(H,null,X(n.value,v=>(A(),U(c,{key:v.value,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading","multiple"])}}},bw=Object.freeze(Object.defineProperty({__proto__:null,default:Zc},Symbol.toStringTag,{value:"Module"}));function Bn(e,t){t===void 0&&(t={});var a=t.insertAt;if(e&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}Bn(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");Bn('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');Bn(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");Bn(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");Bn(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");Bn(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const wa="vel",Ia=Ga({name:"SvgIcon",props:{type:{type:String,default:""}},setup:e=>()=>o("svg",{class:`${wa}-icon icon`,"aria-hidden":"true"},[o("use",{"xlink:href":`#icon-${e.type}`},null)])}),ql=typeof window<"u",dn=()=>{};let ep=!1;if(ql)try{const e={};Object.defineProperty(e,"passive",{get(){ep=!0}}),window.addEventListener("test-passive",dn,e)}catch{}const Qd=function(e,t,a){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];ql&&e.addEventListener(t,a,!!ep&&{capture:!1,passive:s})},Dd=(e,t,a)=>{ql&&e.removeEventListener(t,a)},ww=e=>{e.preventDefault()},Cw=Object.prototype.toString,uA=e=>t=>Cw.call(t).slice(8,-1)===e,Bw=e=>!!e&&uA("Object")(e),Id=e=>!!e&&uA("String")(e);function kw(e){return e!=null}const Fw=Ga({name:"Toolbar",props:{zoomIn:{type:Function,default:dn},zoomOut:{type:Function,default:dn},rotateLeft:{type:Function,default:dn},rotateRight:{type:Function,default:dn},resize:{type:Function,default:dn},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:e=>()=>o("div",{class:`${wa}-toolbar`},[!e.zoomDisabled&&o(H,null,[o("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:e.zoomIn},[o(Ia,{type:"zoomin"},null)]),o("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:e.zoomOut},[o(Ia,{type:"zoomout"},null)])]),o("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:e.resize},[o(Ia,{type:"resize"},null)]),!e.rotateDisabled&&o(H,null,[o("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateLeft},[o(Ia,{type:"rotate-left"},null)]),o("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateRight},[o(Ia,{type:"rotate-right"},null)])])])}),xw=()=>o("div",{class:`${wa}-loading`},[o("div",{class:"ring"},null)]),Uw=()=>o("div",{class:`${wa}-on-error`},[o("div",{class:"ring"},null),o(Ia,{type:"img-broken"},null)]),Sw=(e,t)=>{let{slots:a}=t;return o("div",{class:`${wa}-img-title`},[a.default?a.default():""])},Ew=Ga({name:"DefaultIcons",setup:()=>()=>o("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[o("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[o("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),o("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[o("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),o("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[o("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),o("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[o("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),o("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[o("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),o("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[o("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),o("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[o("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),o("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),o("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),o("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[o("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),o("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[o("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),o("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),Wn=ql?window:global;let $d=Date.now();function Qw(e){const t=Date.now(),a=Math.max(0,16-(t-$d)),s=setTimeout(e,a);return $d=t+a,s}function xr(e){return(Wn.requestAnimationFrame||Qw).call(Wn,e)}function Td(e){(Wn.cancelAnimationFrame||Wn.clearTimeout).call(Wn,e)}function Md(e,t){const a=e.clientX-t.clientX,s=e.clientY-t.clientY;return Math.sqrt(a*a+s*s)}function Ur(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!nf(e)}var Sr=Ga({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":e=>!0,"on-prev":(e,t)=>!0,"on-next":(e,t)=>!0,"on-prev-click":(e,t)=>!0,"on-next-click":(e,t)=>!0,"on-index-change":(e,t)=>!0,"on-rotate":e=>!0},setup(e,t){let{emit:a,slots:s}=t;const{imgRef:n,imgState:l,setImgSize:d}=(()=>{const ce=T(),ge=Kn({width:0,height:0,maxScale:1});return{imgRef:ce,imgState:ge,setImgSize:()=>{if(ce.value){const{width:Oe,height:ue,naturalWidth:Ee}=ce.value;ge.maxScale=Ee/Oe,ge.width=Oe,ge.height=ue}}}})(),u=T(e.index),c=T(""),h=Kn({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),v=Kn({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),y=q(()=>{return ce=e.imgs,uA("Array")(ce)?e.imgs.map(ge=>typeof ge=="string"?{src:ge}:function(Oe){return Bw(Oe)&&Id(Oe.src)}(ge)?ge:void 0).filter(kw):Id(e.imgs)?[{src:e.imgs}]:[];var ce}),g=q(()=>y.value[u.value]),B=q(()=>{var ce;return(ce=y.value[u.value])==null?void 0:ce.src}),w=q(()=>{var ce;return(ce=y.value[u.value])==null?void 0:ce.title}),C=q(()=>{var ce;return(ce=y.value[u.value])==null?void 0:ce.alt}),F=q(()=>({cursor:v.loadError?"default":e.moveDisabled?v.dragging?"grabbing":"grab":"move",top:`calc(50% + ${h.top}px)`,left:`calc(50% + ${h.left}px)`,transition:v.dragging||v.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${h.scale}) rotate(${h.rotateDeg}deg)`})),S=()=>{a("hide")},E=()=>{h.scale=1,h.lastScale=1,h.rotateDeg=0,h.top=0,h.left=0,v.loadError=!1,v.dragging=!1,v.loading=!0},k=(ce,ge)=>{const Oe=u.value;E(),u.value=ce,y.value[u.value]===y.value[ce]&&de(()=>{v.loading=!1}),e.visible&&Oe!==ce&&(ge&&ge(Oe,ce),a("on-index-change",Oe,ce))},Q=()=>{const ce=u.value,ge=e.loop?(ce+1)%y.value.length:ce+1;!e.loop&&ge>y.value.length-1||k(ge,(Oe,ue)=>{a("on-next",Oe,ue),a("on-next-click",Oe,ue)})},I=()=>{const ce=u.value;let ge=ce-1;if(ce===0){if(!e.loop)return;ge=y.value.length-1}k(ge,(Oe,ue)=>{a("on-prev",Oe,ue),a("on-prev-click",Oe,ue)})},D=ce=>{Math.abs(1-ce)<.05?ce=1:Math.abs(l.maxScale-ce)<.05&&(ce=l.maxScale),h.lastScale=h.scale,h.scale=ce},M=()=>{const ce=h.scale+e.zoomScale;ce<l.maxScale*e.maxZoom&&D(ce)},$=()=>{const ce=h.scale-e.zoomScale;ce>e.minZoom&&D(ce)},V=()=>{const ce=h.rotateDeg%360;a("on-rotate",Math.abs(ce<0?ce+360:ce))},L=()=>{h.rotateDeg-=90,V()},R=()=>{h.rotateDeg+=90,V()},K=()=>{h.scale=1,h.top=0,h.left=0},J=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!e.moveDisabled&&ce===0},{onMouseDown:W,onMouseMove:ae,onMouseUp:Z}=((ce,ge,Oe)=>{let ue,Ee=!1;return{onMouseDown:Ke=>{ce.initX=ce.lastX=Ke.clientX,ce.initY=ce.lastY=Ke.clientY,ge.dragging=!0,Ee=!1,Ke.stopPropagation()},onMouseUp:Ke=>{Oe(Ke.button)&&Td(ue),ge.dragging=!1,Ee=!1},onMouseMove:Ke=>{if(ge.dragging)if(Oe(Ke.button)){if(Ee)return;Ee=!0,ue=xr(()=>{const{top:ia,left:Ot,lastY:Dt,lastX:Ft}=ce;ce.top=ia-Dt+Ke.clientY,ce.left=Ot-Ft+Ke.clientX,ce.lastX=Ke.clientX,ce.lastY=Ke.clientY,Ee=!1})}else ce.lastX=Ke.clientX,ce.lastY=Ke.clientY;Ke.stopPropagation()}}})(h,v,J),{onTouchStart:te,onTouchMove:ie,onTouchEnd:P}=((ce,ge,Oe,ue,Ee)=>{let Ke,ia=!1;return{onTouchStart:Ot=>{const{touches:Dt}=Ot;Dt.length>1&&Ee()?(Oe.gesturing=!0,ge.touches=Dt):(ge.initX=ge.lastX=Dt[0].clientX,ge.initY=ge.lastY=Dt[0].clientY,Oe.dragging=!0),Ot.stopPropagation()},onTouchMove:Ot=>{if(ia)return;const{touches:Dt}=Ot,{lastX:Ft,lastY:ga,left:xt,top:zt,scale:Sa}=ge;if(!Oe.gesturing&&Oe.dragging){if(!Dt[0])return;const{clientX:ts,clientY:Ha}=Dt[0];ue()?Ke=xr(()=>{ge.lastX=ts,ge.lastY=Ha,ge.top=zt-ga+Ha,ge.left=xt-Ft+ts,ia=!1}):(ge.lastX=ts,ge.lastY=Ha)}else Oe.gesturing&&ge.touches.length>1&&Dt.length>1&&Ee()&&(Ke=xr(()=>{const ts=(Md(ge.touches[0],ge.touches[1])-Md(Dt[0],Dt[1]))/ce.width;ge.touches=Dt;const Ha=Sa-1.3*ts;Ha>.5&&Ha<1.5*ce.maxScale&&(ge.scale=Ha),ia=!1}))},onTouchEnd:()=>{Td(Ke),Oe.dragging=!1,Oe.gesturing=!1,ia=!1}}})(l,h,v,J,()=>!e.pinchDisabled),j=()=>{e.dblclickDisabled||(h.scale!==l.maxScale?(h.lastScale=h.scale,h.scale=l.maxScale):h.scale=h.lastScale)},G=ce=>{v.loadError||v.gesturing||v.loading||v.dragging||v.wheeling||!e.scrollDisabled||e.zoomDisabled||(v.wheeling=!0,setTimeout(()=>{v.wheeling=!1},80),ce.deltaY<0?M():$())},N=ce=>{const ge=ce;e.visible&&(!e.escDisabled&&ge.key==="Escape"&&e.visible&&S(),ge.key==="ArrowLeft"&&(e.rtl?Q():I()),ge.key==="ArrowRight"&&(e.rtl?I():Q()))},ee=()=>{e.maskClosable&&S()},ne=()=>{d()},Ce=()=>{v.loading=!1},Qe=ce=>{v.loading=!1,v.loadError=!0,a("on-error",ce)},_e=()=>{e.visible&&d()};fe(()=>e.index,ce=>{ce<0||ce>=y.value.length||k(ce)}),fe(()=>v.dragging,(ce,ge)=>{const Oe=!ce&&ge;if(!J()&&Oe){const ue=h.lastX-h.initX,Ee=h.lastY-h.initY,Ke=e.swipeTolerance;Math.abs(ue)>Math.abs(Ee)&&(ue<-1*Ke?Q():ue>Ke&&I())}}),fe(()=>e.visible,ce=>{if(ce){E();const ge=y.value.length;if(ge===0)return u.value=0,v.loading=!1,void de(()=>v.loadError=!0);u.value=e.index>=ge?ge-1:e.index<0?0:e.index,e.scrollDisabled&&Ie()}else e.scrollDisabled&&xe()});const Ie=()=>{document&&(c.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},xe=()=>{document&&(document.body.style.overflowY=c.value)};he(()=>{Qd(document,"keydown",N),Qd(window,"resize",_e)}),Ss(()=>{Dd(document,"keydown",N),Dd(window,"resize",_e),e.scrollDisabled&&xe()});const $e=()=>v.loading?s.loading?s.loading({key:"loading"}):o(xw,{key:"img-loading"},null):v.loadError?s.onerror?s.onerror({key:"onerror"}):o(Uw,{key:"img-on-error"},null):o("div",{class:`${wa}-img-wrapper`,style:F.value,key:"img-wrapper"},[o("img",{alt:C.value,ref:n,draggable:"false",class:`${wa}-img`,src:B.value,onMousedown:W,onMouseup:Z,onMousemove:ae,onTouchstart:te,onTouchmove:ie,onTouchend:P,onLoad:ne,onDblclick:j,onDragstart:ce=>{ce.preventDefault()}},null)]),Se=()=>{if(s["prev-btn"])return s["prev-btn"]({prev:I});if(y.value.length<=1)return;const ce=!e.loop&&u.value<=0;return o("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(ce?"disable":""),onClick:I},[e.rtl?o(Ia,{type:"next"},null):o(Ia,{type:"prev"},null)])},qe=()=>{if(s["next-btn"])return s["next-btn"]({next:Q});if(y.value.length<=1)return;const ce=!e.loop&&u.value>=y.value.length-1;return o("div",{role:"button","aria-label":"next image button",class:"btn__next "+(ce?"disable":""),onClick:Q},[e.rtl?o(Ia,{type:"prev"},null):o(Ia,{type:"next"},null)])},vt=()=>{if(!(e.titleDisabled||v.loading||v.loadError))return s.title?s.title({currentImg:g.value}):w.value?o(Sw,null,{default:()=>[w.value]}):void 0},We=()=>{let ce;if(e.visible)return o("div",{onTouchmove:ww,class:[`${wa}-modal`,e.rtl?"is-rtl":""],onClick:je(ee,["self"]),onWheel:G},[o(Ew,null,null),o(Nn,{name:`${wa}-fade`,mode:"out-in"},Ur(ce=$e())?ce:{default:()=>[ce]}),o("img",{style:"display:none;",src:B.value,onError:Qe,onLoad:Ce},null),o("div",{class:`${wa}-btns-wrapper`},[Se(),qe(),vt(),s["close-btn"]?s["close-btn"]({close:S}):o("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:S},[o(Ia,{type:"close"},null)]),s.toolbar?s.toolbar({toolbarMethods:{zoomIn:M,zoomOut:$,rotate:L,rotateLeft:L,rotateRight:R,resize:K},zoomIn:M,zoomOut:$,rotate:L,rotateLeft:L,rotateRight:R,resize:K}):o(Fw,{zoomIn:M,zoomOut:$,resize:K,rotateLeft:L,rotateRight:R,rotateDisabled:e.rotateDisabled,zoomDisabled:e.zoomDisabled},null)])])};return()=>{let ce;if(e.teleport){let ge;return o(Dl,{to:e.teleport},{default:()=>[o(Nn,{name:`${wa}-fade`},Ur(ge=We())?ge:{default:()=>[ge]})]})}return o(Nn,{name:`${wa}-fade`},Ur(ce=We())?ce:{default:()=>[ce]})}}});const tp=Object.assign(Sr,{install:e=>{e.component(Sr.name,Sr)}}),Dw={name:"Attachments",props:{multiple:Boolean,attachments:{type:[Array,Object],default:()=>[]},empty_text:String,isSingle:Boolean,title:String,type:String,icon:String,showList:{type:Boolean,default:!0},showDeleteButton:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},mediaInputSize:{type:String},mediaInputBg:{type:String}},emits:["removeImage","mediaUploaded"],data(){return{visible:!1,imageIndex:0,lightboxData:[],images:T([])}},components:{MediaButton:Uu,VueEasyLightbox:tp,IconButton:we,Delete:Ts},computed:{showMediaButtonAsIcon:function(){return!this.multiple&&this.attachments.length===1}},mounted:function(){Array.isArray(this.attachments)&&this.attachments.length>0&&this.attachments.forEach(e=>{this.lightboxData.push(e.url),this.images.push({id:e.id,url:e.url,title:e.title})})},methods:{translate:p,removeImageEvent(e){this.$emit("removeImage",e)},onMediaSelected(e){this.images=e.map(t=>({id:t.id,title:t.title,url:t.url})),this.$emit("mediaUploaded",this.images)}},watch:{attachments:{handler:function(e,t){return this.lightboxData=[],Array.isArray(e)&&e.length>0&&e.map((a,s)=>{this.lightboxData.push(a.url)}),e},deep:!0}}},Iw={class:"fct-attachments-wrap",style:{position:"relative"}},$w={class:"fct-attachment-img-wrap"},Tw=["src","alt","onClick"],Mw={class:"fct-attachments-button"};function Vw(e,t,a,s,n,l){const d=b("VueEasyLightbox"),u=b("MediaButton"),c=b("IconButton"),h=b("Delete");return A(),_(H,null,[o(d,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:t[0]||(t[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"]),i("div",Iw,[a.attachments?(A(),_("ul",{key:0,class:oe(`fct-attachments-list ${a.multiple?"is-multiple":"fct-single-attachment"} ${a.attachments.length>0?"is-single":""}`)},[a.showList===!0?(A(!0),_(H,{key:0},X(a.attachments,(v,y)=>(A(),_("li",{key:y,class:oe([[a.mediaInputSize,a.mediaInputBg],"fct-attachment-item"])},[i("div",$w,[a.previewImage?(A(),_("img",{key:0,src:v.url,alt:v.title,onClick:()=>{this.imageIndex=y,this.visible=!0}},null,8,Tw)):x("",!0),l.showMediaButtonAsIcon&&!a.multiple?(A(),U(c,{key:1,size:"x-small"},{default:r(()=>[o(u,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):x("",!0)]),i("div",Mw,[a.showDeleteButton?(A(),U(c,{key:0,tag:"button",bg:"danger",outline:"",size:"x-small",onClick:je(g=>l.removeImageEvent(y),["prevent"]),title:l.translate("Delete media")},{default:r(()=>[a.multiple?(A(),U(h,{key:0})):(A(),_(H,{key:1},[O(m(l.translate("Remove")),1)],64))]),_:2},1032,["onClick","title"])):x("",!0),l.showMediaButtonAsIcon&&a.multiple?(A(),U(c,{key:1,size:"x-small"},{default:r(()=>[o(u,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):x("",!0)])],2))),128)):x("",!0),l.showMediaButtonAsIcon?x("",!0):(A(),_("li",{key:1,class:oe([a.mediaInputSize,a.mediaInputBg])},[o(u,{"icon-mode":!1,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:l.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])],2))],2)):x("",!0),Ta(e.$slots,"default")])],64)}const yl=be(Dw,[["render",Vw]]),Lw={key:0},Ow={key:0,class:"setting-label"},Wl={__name:"MediaInput",props:{modelValue:{default:""},showSupported:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},icon:{type:String},title:{type:String},mediaInputSize:{type:String},mediaInputBg:{type:String},field:{type:Object}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,s=t,n=T();let l=T([]);const d=()=>{a.multiple?n.value=[]:n.value="",l=[],s("update:modelValue",n.value)},u=h=>{if(h.length)if(a.multiple){n.value=[],l=[];for(const v of h)n.value.push(v),l.push(v)}else n.value=h,l=h;s("update:modelValue",n.value)};fe(()=>a.modelValue,h=>{Array.isArray(h)&&h.length>0?n.value=h:h&&typeof h=="string"&&h!==""?n.value=[h]:h&&typeof h=="object"?n.value=[h]:n.value=[],c()});const c=()=>{l.value=[],Object.values(n.value).forEach((h,v)=>{h!==void 0&&h!==""&&l.value.push(h)})};return he(()=>{Array.isArray(a.modelValue)&&a.modelValue.length>0?n.value=a.modelValue:a.modelValue&&typeof a.modelValue=="string"&&a.modelValue!==""?n.value=[a.modelValue]:a.modelValue&&typeof a.modelValue=="object"?n.value=[a.modelValue]:n.value=[],c()}),(h,v)=>(A(),_(H,null,[o(yl,{attachments:f(l),onMediaUploaded:u,onRemoveImage:d,icon:e.icon,title:e.title,mediaInputSize:e.mediaInputSize,mediaInputBg:e.mediaInputBg},null,8,["attachments","icon","title","mediaInputSize","mediaInputBg"]),e.showSupported?(A(),_("div",Lw,[e.field&&e.field.label?(A(),_("label",Ow,m(e.field.label),1)):x("",!0),i("span",null,m(f(p)("%1$s Recommended width: %2$s pixels minimum.","HEIC, WEBP, SVG, PNG, or JPG.","512")),1)])):x("",!0)],64))}},Hw={class:"setting-media-wrap"},ap={__name:"Media",props:_a({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xa(e,"modelValue");return(a,s)=>(A(),_("div",Hw,[o(Wl,gt({modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=n=>t.value=n),field:e.field,icon:"Upload"},e.attribute),null,16,["modelValue","field"])]))}},Rw=Object.freeze(Object.defineProperty({__proto__:null,default:ap},Symbol.toStringTag,{value:"Module"})),Pw={__name:"InputRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(e){const t=e;T(!1),Je().ctx;const a=h=>typeof h.label=="function"?h.label(t.value,t.statePath,t.form):h.label,s=(h,v)=>{if(typeof h=="function")return h({data:t.value,form:t.form,statePath:t.statePath,field:t.field,event:Array.isArray(v)&&v.length===1?v[0]:v})},n=T(!1);let l={};he(async()=>{l=await AA.attributesBuilders(t.field,s,t.form),n.value=!0});const d={switch:jc,checkbox:Yc,radio:qc,input:An,text:An,email:An,number:An,textarea:An,color:dA,date:Wc,time:Xc,select:Jc,media:ap,remote_select:Zc},u=q(()=>d[t.field.type]||null),c=q(()=>({modelValue:t.value[t.fieldKey],form:t.form,statePath:t.statePath,field:t.field,fieldKey:t.fieldKey,value:t.value[t.fieldKey],nesting:!1,label:a(t.field),attribute:l,callback:s}));return(h,v)=>e.field.type==="wp-editor"?(A(),U(xs,{key:0,shortCodes:e.field.shortcodes.data,modelValue:t.value[t.fieldKey],onUpdate:v[0]||(v[0]=y=>{t.value[t.fieldKey]=y})},null,8,["shortCodes","modelValue"])):u.value&&n.value?(A(),U($a(u.value),gt({key:1,onChange:v[1]||(v[1]=y=>{e.form.triggerChange(y)}),onInput:v[2]||(v[2]=y=>{e.form.triggerChange(e.value[e.fieldKey])}),modelValue:e.value[e.fieldKey],"onUpdate:modelValue":v[3]||(v[3]=y=>e.value[e.fieldKey]=y)},c.value),null,16,["modelValue"])):x("",!0)}},Kw=["innerHTML"],Nw={key:0},Gw={key:0},Xl={__name:"FormRenderer",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},statePath:{type:String}},setup(e){const t=e,a=t.statePath??"",s=["grid","section","tab","tab-pane"];T(!1),Je().ctx;const n=(d,u)=>{if(typeof d.label=="function"){let c=l(d)?a:u+".",h=l(d)?t.value:t.value[u];return d.label(h,c,t.form)}return d.label},l=d=>d.disable_nesting!==!1;return(d,u)=>(A(!0),_(H,null,X(e.schema,(c,h)=>(A(),_(H,{key:h},[e.form.isVisible(c,e.statePath+h)?(A(),_(H,{key:0},[c.type==="html"?(A(),_("div",{key:0,class:oe(`setting-html-wrapper ${c.wrapperClass??""}`),innerHTML:c.value},null,10,Kw)):(A(),_(H,{key:1},[c.component?(A(),_("div",{key:0,class:oe(c.wrapperClass??"")},[c.component&&c.label?(A(),U(Ge,{key:0,title:n(c,h),content:c.tooltip,class:"setting-label",placement:c.tooltip_placement},{default:r(()=>[c.labelOptional?(A(),_("span",Nw,"("+m(c.labelOptional)+")",1)):x("",!0)]),_:2},1032,["title","content","placement"])):x("",!0),o(Pc,{modelValue:e.value[h],"onUpdate:modelValue":v=>e.value[h]=v,name:c.component,form:e.form,statePath:l(c)?f(a):h+".",field:c,"field-key":h,value:l(c)?e.value:e.value[h],nesting:l(c)},{fieldNote:r(()=>[c.note&&c.hide_note!==!0?(A(),U(wi,{key:0,note:c.note},null,8,["note"])):x("",!0)]),validationError:r(()=>[o(Ed,{form:e.form,"error-key":f(a)+h},null,8,["form","error-key"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","form","statePath","field","field-key","value","nesting"])],2)):x("",!0),s.includes(c.type)?(A(),U(ow,{key:1,form:e.form,field:c,value:e.value,"full-state-path":f(a),statePath:l(c)?f(a):h+".","field-key":h},null,8,["form","field","value","full-state-path","statePath","field-key"])):x("",!0),typeof c.type<"u"&&!s.includes(c.type)&&!["custom","component","html","hidden"].includes(c.type)?(A(),_("div",{key:2,class:oe(`setting-fields-inner ${c.wrapperClass??""}`)},[c.type!=="checkbox"&&!c.component&&c.label!==!1?(A(),U(Ge,{key:0,class:"setting-label",title:n(c,h),content:c.tooltip,placement:c.tooltip_placement},{default:r(()=>[c.labelOptional?(A(),_("span",Gw,"("+m(c.labelOptional)+")",1)):x("",!0)]),_:2},1032,["title","content","placement"])):x("",!0),o(Pw,{form:e.form,field:c,value:e.value,"full-state-path":f(a),"state-path":e.statePath,"field-key":h},null,8,["form","field","value","full-state-path","state-path","field-key"]),c.note&&!c.component?(A(),U(wi,{key:1,note:c.note},null,8,["note"])):x("",!0),c.component?x("",!0):(A(),U(Ed,{key:2,form:e.form,"error-key":f(a)+h},null,8,["form","error-key"]))],2)):x("",!0)],64))],64)):x("",!0)],64))),128))}},zw={key:0,class:"vue-form-wrap"},jw={key:0,class:"form-section-save-action"},Yw={key:0,class:"cmd block leading-none"},Jl={__name:"VueForm",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},showSubmitButton:{type:Boolean,default:!1},submitButtonText:{type:String,default:"Save"},loading:{type:Boolean,default:!1}},emits:["onSubmit","onChange","onSubmitButtonClick"],setup(e,{expose:t,emit:a}){const s=e,n=a;he(()=>{de(()=>{l.registerCopyAction()})}),T({});const l=Je().ctx,d=()=>{n("onSubmitButtonClick")};return t({getState:()=>s.form.values}),(c,h)=>{const v=b("el-button");return e.form.isReady?(A(),_("div",zw,[o(Xl,{form:e.form,ref:"formRenderer",schema:e.form.schema,value:e.form.values},null,8,["form","schema","value"]),e.showSubmitButton?(A(),_("div",jw,[o(v,{onClick:d,type:"primary",loading:e.loading},{default:r(()=>[e.loading?x("",!0):(A(),_("span",Yw,"s")),O(" "+m(e.loading?f(p)("Saving"):e.submitButtonText),1)]),_:1},8,["loading"])])):x("",!0)])):x("",!0)}}},qw={key:0},Ww={__name:"DynamicFormLoader",props:["schema","values","submit_button_text","form_name","widget"],emits:["change"],setup(e,{expose:t,emit:a}){let s=rA();const n=a,l=e,d=()=>{const v=l.form_name,y={};return y[v]={...s.values},y},u=()=>{s.reset()},c=()=>{var v;return((v=l.widget)==null?void 0:v.reset_on_save)==!0},h=Ql("triggerChange");return he(()=>{s.setSchema(l.schema).setDefaults(l.values).initForm(),s.onDataChanged(v=>{h==null||h(),n("change")})}),t({getState:d,resetForm:u,resetOnSave:c}),(v,y)=>f(s).isReady?(A(),_("div",qw,[o(Jl,{showSubmitButton:!1,submitButtonText:e.submit_button_text,form:f(s),onOnSubmitButtonClick:y[0]||(y[0]=()=>{f(s).values}),onOnChange:y[1]||(y[1]=g=>{}),"validation-errors":{}},null,8,["submitButtonText","form"])])):x("",!0)}},Xw={__name:"EChart",props:{option:{type:Object,required:!0},height:{type:String,default:"400px"},width:{type:String,default:"100%"}},setup(e){const t=e,a=T(null);let s=null;const n=()=>{a.value&&(s=at(a.value),console.log(t.option),s.setOption(t.option))};fe(()=>t.option,c=>{s&&c&&s.setOption(c,!0)},{deep:!0});const l=(c,h)=>{if(c==null||c==="")return h;const v=Number(c);return isNaN(v)?c:`${v}px`},d=q(()=>l(t.height,"400px")),u=q(()=>l(t.width,"100%"));return he(()=>{n(),window.addEventListener("resize",()=>s==null?void 0:s.resize())}),Ss(()=>{window.removeEventListener("resize",()=>s==null?void 0:s.resize()),s==null||s.dispose()}),(c,h)=>(A(),_("div",{ref_key:"chartRef",ref:a,style:sa({width:u.value,height:d.value})},null,4))}},Jw={__name:"VueTemplateLoader",props:{widget:{type:Object,required:!0},data:{required:!1}},setup(e){const t=s=>{var n,l;try{if(typeof s!="string")return null;const d=s.match(/<template(?:\s[^>]*)?>|<template>/i);if(!d)return console.error("Dynamic component missing <template>"),null;const u=d.index+d[0].length;let c=1,h=u,v=-1;for(;h<s.length&&c>0;){const w=s.indexOf("<template",h),C=s.indexOf("</template>",h);if(C===-1)return console.error("Unclosed <template> tag"),null;w!==-1&&w<C?(c++,h=w+9):(c--,c===0&&(v=C),h=C+11)}if(v===-1)return console.error("Could not find matching closing </template> tag"),null;const y=s.substring(u,v).trim(),g=s.match(/<script>([\s\S]*?)<\/script>/i);let B={};if(g){const w=g[1].trim();if(!/export\s+default/.test(w))return console.error("Dynamic component script must export default"),null;const C=w.replace(/export\s+default/,"return");B=new Function("Vue","ElMessage","ElMessageBox",C)(_u,(n=window==null?void 0:window.ELEMENT)==null?void 0:n.ElMessage,(l=window==null?void 0:window.ELEMENT)==null?void 0:l.ElMessageBox)||{}}return Ga({...B,template:y})}catch(d){return console.error("Failed to parse dynamic Vue component:",d),null}},a=s=>{if(typeof s=="string"){const n=t(s);return n?Ga(n):null}return Ga(s)};return(s,n)=>(A(),U($a(a(e.widget.component)),gt({ref:"componentRefs",data:e.data},{...e.widget}),null,16,["data"]))}},Zw=["innerHTML"],kn={__name:"DynamicTemplates",props:{widgetsQuery:{type:Object,default:{},required:!1},filter:{type:String,default:"",required:!1},data:{required:!1}},emits:["change"],setup(e,{expose:t,emit:a}){Je().ctx;const s=a,n=e,l=T([]),d=of(_u),u={},c=E=>{window.fluent_cart_admin.app={vue:d,components:E,xhr:se,notify:Y},window.fluent_cart_admin.hooks.applyFilters(n.filter+"_components",[],d,E).forEach(({name:Q,component:I})=>{u[Q]=Ga(I)})};Ns(()=>{let k=Je().appContext.components;c(k);let Q=window.fluent_cart_admin.hooks.applyFilters(n.filter,[],d,k);Array.isArray(Q)&&(l.value=l.value.concat(Q));const I={filter:n.filter,data:n.widgetsQuery};se.get("widgets",I).then(D=>{Array.isArray(D.widgets)&&(l.value=l.value.concat(D.widgets))}),n.widgetsQuery});const h=E=>Ga(E),v=E=>u[E]||null,y=T([]),g=async(E,k)=>{const Q=y.value.map(I=>typeof I[E]=="function"?I[E](k):Promise.resolve());return await Promise.all(Q),!0};t({beforeUpdatingData:async E=>await g("beforeUpdatingData",E),afterUpdatingData:async E=>await g("afterUpdatingData",E),getFormStates:()=>{let E=[];if(Array.isArray(S.value))for(let k of S.value)E={...E,...k.getState()};return E},resetForms:()=>{if(Array.isArray(S.value))for(let E of S.value)E.resetOnSave()&&E.resetForm()}});const S=T();return(E,k)=>(A(!0),_(H,null,X(l.value,Q=>(A(),_(H,null,[Q.type!=="vue-component"&&Q.type!=="vue-template"||Q.use_card==!0?(A(),U(re,{key:0},{default:r(()=>[o(Ae,{title:Q.title,subtitle:Q.subtitle,border_bottom:""},null,8,["title","subtitle"]),o(le,null,{default:r(()=>[Q.type==="html"?(A(),_("div",{key:0,innerHTML:Q.content},null,8,Zw)):Q.type==="chart"?(A(),U(Xw,{key:1,option:Q.data,height:`${Q.height||400}`,width:`${Q.width||"100%"}`},null,8,["option","height","width"])):Q.type==="form"?(A(),U(Ww,{key:2,schema:Q.schema,values:Q.values,submit_button_text:Q.submit_button_text,form_name:Q.form_name,ref_for:!0,ref_key:"formRefs",ref:S,widget:Q,onChange:k[0]||(k[0]=()=>s("change"))},null,8,["schema","values","submit_button_text","form_name","widget"])):typeof Q.component=="object"?(A(),U($a(h(Q.component)),gt({key:3,ref_for:!0,ref_key:"componentRefs",ref:y},{ref_for:!0},{...Q,data:e.data}),null,16)):v(Q.component)?(A(),U($a(v(Q.component)),gt({key:4,ref_for:!0,ref_key:"componentRefs",ref:y},{ref_for:!0},{...Q,data:e.data}),null,16)):(A(),_(H,{key:5},[O(m(Q.content),1)],64))]),_:2},1024)]),_:2},1024)):Q.type==="vue-component"?(A(),_(H,{key:1},[typeof Q.component=="object"?(A(),U($a(h(Q.component)),gt({key:0,ref_for:!0,ref_key:"componentRefs",ref:y},{ref_for:!0},{...Q,data:e.data}),null,16)):v(Q.component)?(A(),U($a(v(Q.component)),gt({key:1,ref_for:!0,ref_key:"componentRefs",ref:y},{ref_for:!0},{...Q,data:e.data}),null,16)):x("",!0)],64)):Q.type==="vue-template"?(A(),U(Jw,{key:2,widget:Q,data:e.data},null,8,["widget","data"])):x("",!0)],64))),256))}},it=e=>e!=null&&!isNaN(Number(e))?new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(Number(e)):e,eC={class:"fct-dashboard-stat-widgets"},tC={class:"right w-full"},aC=["href"],sC={class:"fct-dashboard-stat-widget__icon"},nC={class:"fct-dashboard-stat-widget__content"},oC={class:"fct-dashboard-stat-widget__title"},lC={class:"fct-dashboard-stat-widget__value inner-value"},rC=["innerHTML"],iC={key:1,class:"fct-dashboard-stat-widget__inner"},AC={class:"fct-dashboard-stat-widget__content"},dC={class:"fct-dashboard-stat-widget__title"},uC=["href"],cC={key:1},pC={class:"fct-dashboard-stat-widget__value"},fC={__name:"StatsWidget",setup(e){const t=T(!0),a=T([]),s=()=>{t.value=!0,se.get("dashboard/stats").then(n=>{a.value=n.stats}).catch(n=>{Y.error(n)}).finally(()=>{t.value=!1})};return he(()=>{s()}),(n,l)=>{const d=b("el-skeleton-item"),u=b("el-skeleton");return A(),_("div",eC,[t.value?(A(),_(H,{key:0},X(4,c=>o(u,{key:c,animated:"",class:"bg-white dark:bg-dark-700 flex flex-col items-start py-5 px-4.5 rounded-[12px] gap-3"},{template:r(()=>[o(d,{variant:"circle",class:"w-10 h-10 flex-none"}),i("div",tC,[o(d,{variant:"p",class:"w-full"}),o(d,{variant:"p",class:"w-10"})])]),_:2},1024)),64)):(A(),_(H,{key:1},[(A(!0),_(H,null,X(a.value,(c,h)=>(A(),_("div",{key:h,class:"fct-dashboard-stat-widget"},[c.url?(A(),_("a",{key:0,href:c.url,class:"fct-dashboard-stat-widget__inner no-underline"},[i("div",sC,[o(z,{class:"w-5",name:c.icon},null,8,["name"])]),i("div",nC,[i("h3",oC,[i("span",null,m(c.title),1)]),i("span",lC,[c.has_currency?(A(),_("span",{key:0,innerHTML:f(Be).scaled(c.current_count)},null,8,rC)):(A(),_(H,{key:1},[O(m(f(nt)(f(it)(c.current_count))||0),1)],64))])])],8,aC)):(A(),_("div",iC,[l[0]||(l[0]=lf('<div class="fct-dashboard-stat-widget__icon"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.20248 2.62165L5.7818 3.27834C3.59393 4.28965 2.5 4.7953 2.5 5.62533C2.5 6.45535 3.59393 6.961 5.7818 7.97231L7.20249 8.629C8.57936 9.26544 9.26781 9.58366 10 9.58366C10.7322 9.58366 11.4206 9.26544 12.7975 8.629L14.2182 7.97231C16.4061 6.961 17.5 6.45535 17.5 5.62533C17.5 4.7953 16.4061 4.28965 14.2182 3.27834L12.7975 2.62165C11.4206 1.98521 10.7322 1.66699 10 1.66699C9.26781 1.66699 8.57937 1.98521 7.20248 2.62165Z" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.3233 9.24805C17.4411 9.41368 17.5 9.5863 17.5 9.77614C17.5 10.5944 16.4061 11.0928 14.2182 12.0897L12.7975 12.7371C11.4206 13.3644 10.7322 13.6781 10 13.6781C9.26781 13.6781 8.57936 13.3644 7.20249 12.7371L5.7818 12.0897C3.59394 11.0928 2.5 10.5944 2.5 9.77614C2.5 9.5863 2.55889 9.41368 2.67667 9.24805" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.9806 13.5557C17.3269 13.8315 17.5 14.1064 17.5 14.4319C17.5 15.2501 16.4061 15.7486 14.2182 16.7455L12.7975 17.3928C11.4206 18.0202 10.7322 18.3339 10 18.3339C9.26781 18.3339 8.57936 18.0202 7.20249 17.3928L5.7818 16.7455C3.59394 15.7486 2.5 15.2501 2.5 14.4319C2.5 14.1064 2.67315 13.8315 3.01945 13.5557" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),i("div",AC,[i("h3",dC,[c.url?(A(),_("a",{key:0,class:"link",href:c.url},m(c.title),9,uC)):(A(),_("span",cC,m(c.title),1))]),i("span",pC,m(c.current_count),1)])]))]))),128)),o(kn,{data:{stats:a.value},filter:"dashboard_stats_widget"},null,8,["data"])],64))])}}},Vd=200,hC=800,mC=.1,_C=.3,Ld=.5,gC=.5,vC=12,yC=800,bC=1600,wC=150,CC=3500,BC=["#FFC700","#FF0000","#2E3191","#41BBC7"];var cA={props:{particleCount:{type:Number,default:wC},particleSize:{type:Number,default:vC},duration:{type:Number,default:CC},colors:{type:Array,default:BC},force:{type:Number,default:gC},stageHeight:{type:Number,default:yC},stageWidth:{type:Number,default:bC},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(e){const t=T(!0),a=(k,Q)=>{E(k,{degree:Q})},s=q(()=>l(e.particleCount,e.colors));rf(()=>{e.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ")});const n=q(()=>S(e.particleCount,e.duration,e.colors,e.particleSize,e.force,e.stageHeight,e.stageWidth));he(async()=>{await d(e.duration),e.shouldDestroyAfterDone&&(t.value=!1)});const l=(k,Q)=>{const I=360/k;return Array.from({length:k},(D,M)=>({color:Q[M%Q.length],degree:M*I}))},d=k=>new Promise(Q=>setTimeout(Q,k));function u(k){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((k+Number.EPSILON)*10**Q)/10**Q}function c(k,Q){if(k===Q)return!0;if(k==null||Q==null||k.length!==Q.length)return!1;for(let I=0;I<k.length;I++)if(k[I]!==Q[I])return!1;return!0}const h=(k,Q,I,D,M)=>(k-Q)*(M-D)/(I-Q)+D,v=(k,Q)=>{const I=k+Q;return I>360?I-360:I},y=()=>Math.random()>.5,g=[0,0,1],B=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],g],w=k=>!c(B[k],g)&&y(),C=k=>typeof k>"u",F=k=>{console.error(k)};function S(k,Q,I,D,M,$,V){const L=Number.isSafeInteger;return!C(k)&&L(k)&&k<0?(F("particleCount must be a positive integer"),!1):!C(Q)&&L(Q)&&Q<0?(F("duration must be a positive integer"),!1):!C(I)&&!Array.isArray(I)?(F("colors must be an array of strings"),!1):!C(D)&&L(D)&&D<0?(F("particleSize must be a positive integer"),!1):!C(M)&&L(M)&&(M<0||M>1)?(F("force must be a positive integer and should be within 0 and 1"),!1):!C($)&&typeof $=="number"&&L($)&&$<0?(F("floorHeight must be a positive integer"),!1):!C(V)&&typeof V=="number"&&L(V)&&V<0?(F("floorWidth must be a positive integer"),!1):!0}function E(k,Q){let{degree:I}=Q;const D=h(Math.abs(v(I,90)-180),0,180,-e.stageWidth/2,e.stageWidth/2),M=Math.random()*(hC-Vd)+Vd,$=Math.round(Math.random()*(B.length-1)),V=e.duration-Math.round(Math.random()*1e3),L=Math.random()<mC,R=w($),K=L?u(Math.random()*_C,2):0,J=K*-1,W=K,ae=u(Math.abs(h(Math.abs(v(I,90)-180),0,180,-1,1)),4),Z=u(Math.random()*Ld,4),te=u(Math.random()*e.force*(y()?1:-1),4),ie=Ld,P=u(Math.max(h(Math.abs(I-180),0,180,e.force,-e.force),0),4),j=(G,N)=>k==null?void 0:k.style.setProperty(G,N+"");j("--x-landing-point",`${D}px`),j("--duration-chaos",`${V}ms`),j("--x1",`${K}`),j("--x2",`${J}`),j("--x3",`${W}`),j("--x4",`${ae}`),j("--y1",`${Z}`),j("--y2",`${te}`),j("--y3",`${ie}`),j("--y4",`${P}`),j("--width",`${R?e.particleSize:Math.round(Math.random()*4)+e.particleSize/2}px`),j("--height",(R?e.particleSize:Math.round(Math.random()*2)+e.particleSize)+"px"),j("--rotation",`${B[$].join()}`),j("--rotation-duration",`${M}ms`),j("--border-radius",`${R?"50%":"0"}`)}return{isVisible:t,isValid:n,stageHeight:e.stageHeight,particles:s,setItemRef:a}}};function kC(e,t,a,s,n,l){return s.isVisible&&s.isValid?(A(),_("div",{key:0,class:"confetti-container",style:sa(`--floor-height: ${s.stageHeight}px;`)},[(A(!0),_(H,null,X(s.particles,d=>{let{color:u,degree:c}=d;return A(),_("div",{key:c,class:"particle",ref:h=>s.setItemRef(h,c)},[i("div",{style:sa(`--bgcolor: ${u};`)},null,4)],512)}),128))],4)):x("",!0)}function FC(e,t){t===void 0&&(t={});var a=t.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var xC=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;FC(xC);cA.render=kC;cA.__scopeId="data-v-4ff796ae";var UC=(()=>{const e=cA;return e.install=t=>{t.component("ConfettiExplosion",e)},e})();ke.extend(Qu);ke.extend(Du);let At=class{static withTimezone(t){const a=ke(t);return a.isValid()?a.format("YYYY-MM-DDTHH:mm:ssZ"):null}};class SC extends Xt{constructor(){super(...arguments);me(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],filterOptions:{},showDropdown:!1,activeFilter:null,searchQuery:"",selectedFilters:{},onFilterChanged:null,dateRange:[At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))],currencies:[],currency:"",variation_ids:[],rangeKey:"",storageKey:"filter-state",reRenderDate:!1,compareType:"previous_period",compareDate:At.withTimezone(ke().format("YYYY-MM-DD 23:59:59")),subscriptionType:""})}get dropdownOpen(){return this.data.showDropdown}toggleDropdown(){this.data.showDropdown=!this.data.showDropdown}setFilterOption(a){this.data.filterOptions=a}get filters(){return this.data.filterOptions}get filteredFilters(){var s;const a=(s=this.data.searchQuery)==null?void 0:s.toLowerCase().trim();return this.filters.filter(n=>a?n.label.toLowerCase().includes(a)||n.value.toLowerCase().includes(a):!0)}get visibleFilters(){return this.filteredFilters.filter(a=>this.shouldRenderOption(a))}selectActiveFilter(a){this.data.activeFilter=a}get activeFilterOptions(){return this.data.activeFilter||null}selectFilterOption(a){const s=this.activeFilterOptions;s&&(this.data.selectedFilters[s.value]={label:s.label,value:a.value,type:s.type,options:s.options},this.data[s.value]=a.value,this.triggerFilterChanged())}selectFilterOptionMulti(a){const s=this.activeFilterOptions;if(!s)return;this.data.selectedFilters[s.value]||(this.data.selectedFilters[s.value]={label:s.label,value:[],type:s.type,options:s.options});let n=this.data.selectedFilters[s.value].value;if(a.value==="all")this.data.selectedFilters[s.value].value=[{label:a.label,value:a.value}],this.data[s.value]=["all"];else{const l=n.findIndex(u=>u.value===a.value);l>-1?n.splice(l,1):n.push({label:a.label,value:a.value});const d=n.findIndex(u=>u.value==="all");d>-1&&n.splice(d,1),this.data[s.value]=n.map(u=>u.value)}this.triggerFilterChanged()}setDateRange(a){const s=ke(a[0]),n=ke(a[1]);this.data.selectedFilters.dateRange={label:p("Date"),value:[s,n],type:"date"},this.triggerFilterChanged()}postSetDateRange(){this.data.dateRange=[qt.data.dateRange[0],qt.data.dateRange[1]],this.data.selectedFilters.dateRange={label:p("Date"),value:[At.withTimezone(ke(this.data.dateRange[0])),At.withTimezone(ke(this.data.dateRange[1]))],type:"date",rangeKey:this.data.rangeKey},this.data.reRenderDate=!0,this.triggerFilterChanged()}setSelectChange(a,s=null){const n=s||this.activeFilterOptions;n&&(this.data.selectedFilters[n.value]={label:n.label,value:a,type:n.type},this.triggerFilterChanged())}setTreeSelectItem(a){const s=a.filter(n=>!n.children||n.children.length===0).map(n=>({id:n.value,label:n.label}));this.handleTreeSelections(s),this.triggerFilterChanged()}removeTreeSelectItem(a){var l;const n=(((l=this.data.selectedFilters.variation_ids)==null?void 0:l.value)||[]).filter(d=>d.id!==a);this.handleTreeSelections(n),this.data.variation_ids=this.data.variation_ids.filter(d=>d!==a),this.triggerFilterChanged()}handleTreeSelections(a){a.length?(this.data.selectedFilters.variation_ids||(this.data.selectedFilters.variation_ids={label:p("Products"),type:"tree-select"}),this.data.selectedFilters.variation_ids.value=a):delete this.data.selectedFilters.variation_ids}clearTreeSelect(){delete this.data.selectedFilters.variation_ids,this.data.variation_ids=[],qt.resetFilterToDefault("variation_ids"),this.triggerFilterChanged()}isFilterOptionSelected(a){const s=this.activeFilterOptions;if(!s)return!1;const n=this.data.selectedFilters[s.value];return n?n.value===a.value:this.data[s.value]===a.value}isFilterOptionSelectedMulti(a){const s=this.activeFilterOptions,n=this.data.selectedFilters[s==null?void 0:s.value];return n?n.value.some(d=>d.value===a.value):!1}setMultiSelectChange(a,s){this.data.selectedFilters[a]||(this.data.selectedFilters[a]={});const n=s.some(d=>d.value==="all"),l=this.data.selectedFilters[a].value||[];n?l.length===1&&l[0].value==="all"&&s.length>1?this.data.selectedFilters[a].value=s.filter(d=>d.value!=="all"):this.data.selectedFilters[a].value=[s.find(d=>d.value==="all")]:this.data.selectedFilters[a].value=s,this.triggerFilterChanged()}onFilterChanged(a){return this.data.onFilterChanged=a}setCompareTypeChange(a){this.data.compareType=a,this.data.selectedFilters.compareType={value:a},a!=="custom"&&this.triggerFilterChanged()}setCompareDateChange(a){this.data.compareDate=a,this.data.selectedFilters.compareDate={value:At.withTimezone(ke(a))},this.triggerFilterChanged()}get currencies(){return Object.entries(qt.data.currencies).map(([a,s])=>({label:a,value:a}))}shouldRenderOption(a){const s=a.disableRoutes||[],n=oa();return s.includes(n.name)?!1:a.value==="currency"?this.data.currencies&&this.data.currencies.length>1:!0}applyFilterChange(){this.triggerFilterChanged()}resetFilters(){this.data.selectedFilters={},this.data.currency="",this.data.variation_ids=[],this.data.dateRange=[At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))],this.data.compareType="previous_period",this.data.compareDate=At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),qt.resetFiltersToDefault(),this.triggerFilterChanged()}removeFilter(a,s){s!=null?(this.removeFilterItem(a,s),qt.resetFilterToDefault(a),this.triggerFilterChanged()):(delete this.data.selectedFilters[a],qt.resetFilterToDefault(a),this.triggerFilterChanged())}removeFilterItem(a,s){const n=this.data.selectedFilters[a];if(!n)return;const l=n.value.filter(d=>d.id!==s);l.length?this.data.selectedFilters[a].value=l:delete this.data.selectedFilters[a],a==="variation_ids"&&(this.data.variation_ids=this.data.variation_ids.filter(d=>d!==s)),this.triggerFilterChanged()}triggerFilterChanged(){this.storeSelectedFilters(),typeof this.data.onFilterChanged=="function"&&this.data.onFilterChanged(this.data.selectedFilters)}get activeFilters(){return this.data.selectedFilters}applicableFilters(){return Object.fromEntries(["orderStatus","orderTypes","compareDate","currency","compareType","subscriptionType","variation_ids","paymentStatus","rangeKey"].map(s=>[s,this.data[s]]))}storeSelectedFilters(){const a="report-filter",s=ze.get(a)||{},n=this.applicableFilters(),l={...s,...n};ze.set(a,l),ze.set(this.data.storageKey,this.activeFilters)}retrieveSavedFilters(){return ze.get(this.data.storageKey)}retrieveSavedReportFilters(){return ze.get("report-filter")}}function sp(){return SC.init()}class EC extends Xt{constructor(){super(...arguments);me(this,"filterState",null);me(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],currencies:[],currency:"",currencySign:"",dateRange:[At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))],rangeKey:"",dateDiff:0,minDate:"",variation_ids:[],active_tab:"",filterMode:"",storeMode:"",firstOrderDate:"",compareDate:At.withTimezone(ke().format("YYYY-MM-DD 23:59:59")),compareType:"previous_period",subscriptionType:""});me(this,"storageKey","report-filter");me(this,"currencyStorageKey",`${this.storageKey}_currencies`);me(this,"listeners",{})}beforeInit(){this.filterState=sp(),this.mergeWithStorage();const a=ze.get(this.storageKey),s=ze.get(this.currencyStorageKey);(!a||!s)&&this.fetchReportMeta()}mergeWithStorage(){const a=ze.get(this.storageKey),s=ze.get(this.currencyStorageKey);this.data.paymentStatus=a.paymentStatus??this.data.paymentStatus,this.data.orderStatus=a.orderStatus??this.data.orderStatus,this.data.orderTypes=a.orderTypes??this.data.orderTypes,this.data.compareType=a.compareType?a.compareType:this.data.compareType,this.data.compareDate=a.compareDate??this.data.compareDate,this.data.subscriptionType=a.subscriptionType??this.data.subscriptionType,this.data.currency=a.currency?this.data.currency:De.get("shop.currency"),this.data.dateRange=[a.startDate??this.data.dateRange[0],a.endDate??this.data.dateRange[1]],this.data.currencies=s??this.data.currencies,this.data.rangeKey=a.rangeKey,this.data.variation_ids=a.variation_ids?a.variation_ids:this.data.variation_ids,this.data.filterMode=a.filterMode??this.data.filterMode,this.data.storeMode=a.storeMode??this.data.storeMode}fetchReportMeta(){se.get("reports/fetch-report-meta",this.applicableFilters).then(a=>{this.data.currencies=a.currencies,this.data.dateRange[0]=a.min_date;const[s,n]=Object.entries(a.currencies)[0];this.applicableFilters.params.currency===""&&(this.data.currency=s),this.data.currencySign=n,this.data.storeMode=a.storeMode,this.data.firstOrderDate=ke(a.first_order_date||ke().startOf("month")).format("YYYY-MM-DD 00:00:00"),this.syncStorage()}).catch(a=>{}).finally(()=>{this.data.loading=!1})}get currentCurrencySign(){return this.data.currencies&&this.data.currencies.hasOwnProperty(this.data.currency)?this.data.currencies[this.data.currency]:""}addListener(a,s){this.listeners[a]=s,this.data.active_tab=a}async onFilterChange(){this.syncStorage(),this.setDateDiff();for(let a in this.listeners)this.listeners[a](this.applicableFilters)}onModeChange(a){this.data.filterMode=a,this.syncStorage()}syncStorage(){ze.set(this.storageKey,this.applicableFilters.params),ze.set(this.currencyStorageKey,this.data.currencies)}removeListener(a){delete this.listeners[a],this.data.active_tab=""}get applicableFilters(){const a=Su.find(u=>u.text===this.data.rangeKey);let s,n;if(a){const[u,c]=a.value();s=this.data.rangeKey==="All Time"?At.withTimezone(ke(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")):At.withTimezone(ke(u).format("YYYY-MM-DD 00:00:00")),n=At.withTimezone(ke(c).format("YYYY-MM-DD 23:59:59"))}else s=At.withTimezone(ke(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")),n=At.withTimezone(ke(this.data.dateRange[1]).format("YYYY-MM-DD 23:59:59"));const l={orderStatus:this.data.orderStatus,paymentStatus:this.data.paymentStatus,currency:this.data.currency,startDate:De.get("app_config.isProActive")?s:At.withTimezone(ke().startOf("month").format("YYYY-MM-DD 00:00:00")),endDate:De.get("app_config.isProActive")?n:At.withTimezone(ke().endOf("month").format("YYYY-MM-DD 23:59:59")),rangeKey:this.data.rangeKey,variation_ids:this.data.variation_ids,filterMode:this.data.filterMode,storeMode:this.data.storeMode,firstOrderDate:this.data.firstOrderDate,compareType:this.data.compareType,compareDate:this.data.compareDate,subscriptionType:this.data.subscriptionType};let d=this.data.orderTypes;return d.includes("all")||(l.orderTypes=d),{params:l}}setDateDiff(){if(!this.data.dateRange||this.data.dateRange.length<2)return 0;const[a,s]=this.data.dateRange;this.data.dateDiff=ke(s).diff(ke(a),"days")}resetFiltersToDefault(){this.data.orderStatus=["all"],this.data.orderTypes=["all"],this.data.paymentStatus=["all"],this.data.compareType="previous_period",this.data.compareDate=At.withTimezone(ke().format("YYYY-MM-DD 23:59:59")),this.data.variation_ids=[],this.data.dateRange=[At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))],this.data.subscriptionType=""}resetFilterToDefault(a){a==="compareType"&&(this.data.compareType="previous_period"),a==="compareDate"&&(this.data.compareDate=At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00"))),a==="subscriptionType"&&(this.data.subscriptionType=""),a==="orderTypes"&&(this.data.orderTypes=["all"]),(a==="orderStatus"||a==="paymentStatus")&&(this.data[a]=["all"]),a==="variation_ids"&&(this.data.variation_ids=[]),a==="dateRange"&&(this.data[a]=[At.withTimezone(ke().startOf("month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))])}retrieveSavedFilters(){return ze.get(this.data.storageKey)}}const qt=EC.init();class QC extends Xt{constructor(){super(...arguments);me(this,"data",{summaryData:{net_revenue:0,order_count:0,subscription_renewal_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,average_order_net:0,average_order_items:0,average_customer_orders:0,average_customer_ltv:0},previousSummary:{},fluctuations:{net_revenue:0,order_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,subscrition_renewal:0},graphs:{netRevenueGraph:{},orderGraph:{},itemsSoldGraph:{},refundCountGraph:{},refundsGraph:{},newCustomerGraph:{},subscriptionRenewalGraph:{}},topSoldProducts:[],failedOrders:[],topSoldVariants:[],isBusy:{graphs:{netRevenueGraph:!1,orderGraph:!1,itemsSoldGraph:!1,refundCountGraph:!1,refundsGraph:!1,newCustomerGraph:!1,subscriptionRenewalGraph:!1},summaryData:!1,topSoldProductsAndFailedOrders:!1,topSoldVariants:!0,topSoldProducts:!0,fluctuations:!1,salesReport:!0}})}get controllerKey(){return"DefaultReportController"}makeRequest(a,s,n,l){if(l&&l.startsWith("graphs.")){const u=l.split(".")[1];this.data.isBusy.graphs[u]=!0}else this.data.isBusy[l]=!0;let d;return typeof s=="object"?d=se.get("reports/"+a,s):d=se.get("reports/"+a),this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):ve.set(this.data,n,ve.get(l,s))}).catch(l=>{console.log(l,"error")}).finally(()=>{if(n&&n.startsWith("graphs.")){const l=n.split(".")[1];this.data.isBusy.graphs[l]=!1}else this.data.isBusy[n]=!1})}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}getTopSoldVariants(a={}){return this.makeRequest("fetch-top-sold-variants",a,"topSoldVariants","topSoldVariants")}getSalesReport(a={}){return this.data.isBusy.salesReport=!0,this.makeRequest("sales-report",a,"salesReport").then(()=>this.data.isBusy.salesReport=!1)}}const Da=QC.init(),DC={key:0,class:"fct-report-sold-product-list has-scroll"},IC={class:"list-left-content"},$C={class:"list-image"},TC=["src"],MC=["src"],VC={class:"list-title"},LC=["title"],OC={class:"list-id"},HC={class:"list-right-content"},RC={class:"list-value"},PC=["innerHTML"],pA={__name:"TopSoldProducts",props:{data:{type:Array,required:!0},loading:{type:Boolean,required:!0}},setup(e){const t=e,a=q(()=>t.data);return(s,n)=>{const l=b("el-skeleton"),d=b("router-link");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[o(po,{class:"top-sold-products","card-options":{heading:f(p)("Top Sold Products"),linkButtonText:f(p)("View All"),linkButtonUrl:"products"}},{default:r(()=>[e.loading?(A(),U(l,{key:0,animated:"",rows:7})):(A(),_(H,{key:1},[a.value.length>0?(A(),_("ul",DC,[(A(!0),_(H,null,X(a.value,u=>(A(),_("li",{key:u.product_id},[o(d,{to:{name:"product_edit",params:{product_id:u.product_id}}},{default:r(()=>[i("div",IC,[i("div",$C,[u.media!==null?(A(),_("img",{key:0,src:u.media,alt:""},null,8,TC)):(A(),_("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,MC))]),i("div",VC,[i("div",{class:"list-title-inner",title:u.product_name},m(u.product_name),9,LC),i("div",OC,"#"+m(f(nt)(u.product_id)),1)])]),i("div",HC,[i("div",RC,m(f(nt)(u.quantity_sold))+" "+m(f(p)(" Sold")),1),i("div",{class:"list-price",innerHTML:f(Be).scaled(u.total_amount)},null,8,PC)])]),_:2},1032,["to"])]))),128))])):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no item!")},null,8,["text"]))],64))]),_:1},8,["card-options"])]),_:1})}}},KC={class:"fluent_dashboard fluent-cart-admin-pages fct-layout-width"},NC=["innerHTML"],GC={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},zC={class:"fc_dashboard_sidebar"},jC={class:"fct-congrats-dialog-content"},YC={class:"fct-congrats-dialog-content-inner"},qC={class:"fct-confetti-wrap pointer-events-none fixed left-0 top-0 w-full h-full flex justify-center items-center"},WC=Object.assign({name:"Dashboard"},{__name:"Dashboard",setup(e){const t=T(!1),a=T([]),s=T(!1);Li("dashboardTogglePageNotification",y=>{s.value=y});const l=()=>{const[y,g]=[ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),ke().format("YYYY-MM-DD 23:59:59")],B={startDate:y,endDate:g,paymentStatus:"all"};Rt.getSalesGrowthChart({params:{...B,groupKey:"daily"}})},d=()=>{Rt.getRecentOrders({params:null})},u=()=>{const y={paymentStatus:"all"};Rt.getCountryHeatMap({params:{...y,groupKey:"daily"}})},c=()=>{const[y,g]=[ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),ke().format("YYYY-MM-DD 23:59:59")],B={startDate:y,endDate:g};Rt.getTopSoldProducts({params:{...B}})},h=()=>{qr.getVueParams(),ze.get("onboarding_congratulations","no")!=="yes"&&De.get("total_products_count")==0&&(ze.set("onboarding_congratulations","yes"),t.value=!0)},v=()=>De.get("admin_url")+"settings/store-settings/pages_setup";return he(()=>{window.addEventListener("getSalesGrowth",l),a.value=De.get("dummy_product_info"),l(),u(),d(),h(),c()}),(y,g)=>{const B=b("el-col"),w=b("el-row"),C=b("el-button"),F=b("el-dialog");return A(),_("div",KC,[s.value?(A(),U(ja,{key:0,class:"mb-5",type:"warning",icon:"InformationFill"},{default:r(()=>[i("span",{innerHTML:f(p)("Set up your pages first to get started %s",'<a href="'+v()+'" target="_blank">'+f(p)("Set up your pages")+"</a>")},null,8,NC)]),_:1})):x("",!0),o(w,{gutter:20},{default:r(()=>[o(B,{lg:16},{default:r(()=>[o(K0),o(tt,{permission:"dashboard_stats/view"},{default:r(()=>[i("div",GC,[o(z,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+m(f(p)("Last %s Days",f(nt)(30))),1)]),o(fC)]),_:1}),o(tt,{permission:"reports/view"},{default:r(()=>[o(Tb,{chartData:f(Rt).data.salesGrowthChart,loading:f(Rt).isBusy.salesGrowthChart},null,8,["chartData","loading"])]),_:1}),o(w,{gutter:24},{default:r(()=>[o(tt,{permission:"reports/view"},{default:r(()=>[o(B,{lg:12},{default:r(()=>[o(s0)]),_:1})]),_:1}),o(tt,{permission:"reports/view"},{default:r(()=>[o(B,{lg:12,class:"mt-6 xl:mt-0"},{default:r(()=>[o(pA,{data:f(Rt).topSoldProducts,loading:f(Rt).isBusy.topSoldProducts},null,8,["data","loading"])]),_:1})]),_:1}),o(tt,{permission:"reports/view"},{default:r(()=>[o(B,{class:"mt-6"},{default:r(()=>[o(Rb,{data:f(Rt).data.countryHeatMap},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{lg:8},{default:r(()=>[i("div",zC,[o(U0)])]),_:1})]),_:1}),o(F,{class:"fct-congrats-dialog",modelValue:t.value,"onUpdate:modelValue":g[1]||(g[1]=S=>t.value=S),"append-to-body":!0,"close-on-click-modal":!1,"modal-class":"fct-congrats-modal",width:"800"},{default:r(()=>[i("div",jC,[i("div",YC,[g[2]||(g[2]=i("div",{class:"icon"},"",-1)),i("h3",null,m(f(p)("Congratulations!")),1),i("p",null,m(f(p)("You successfully finished your onboarding & your store is ready.")),1),o(C,{type:"primary",onClick:g[0]||(g[0]=S=>t.value=!1)},{default:r(()=>[O(m(f(p)("Let's go")),1)]),_:1})])]),i("div",qC,[o(f(UC),{particleCount:100,force:1})])]),_:1},8,["modelValue"])])}}}),XC={name:"FilterFields",props:{conditionals:{type:Object,required:!0,default:{}},fields:{type:Object,required:!0,default:{}},editorShortcodes:{type:Array,default:()=>[]},disabled:{type:Boolean,required:!0,default:!1},labels:{default:()=>({status_label:"Enable conditional logic",notification_if_start:"Send this notification if",notification_if_end:"of the following match:"})}},data(){return{defaultRules:{field:null,operator:"=",value:null},comingSoon:!1}},computed:{items(){return this.conditionals.conditions}},methods:{add(e){this.items.splice(e+1,0,{...this.defaultRules})},remove(e){this.items.splice(e,1)}},mounted(){this.conditionals.conditions.length||this.conditionals.conditions.push({...this.defaultRules})}},JC={key:2},ZC=["onClick"],eB=["onClick"];function tB(e,t,a,s,n,l){const d=b("el-checkbox"),u=b("el-option"),c=b("el-select"),h=b("el-col"),v=b("el-option-group"),y=b("el-input"),g=b("el-row");return A(),_("div",null,[a.disabled?(A(),U(d,{key:1,disabled:"",onClick:t[1]||(t[1]=B=>n.comingSoon=!0)},{default:r(()=>[O(m(a.labels.status_label),1)]),_:1})):(A(),U(d,{key:0,modelValue:a.conditionals.status,"onUpdate:modelValue":t[0]||(t[0]=B=>a.conditionals.status=B)},{default:r(()=>[O(m(a.labels.status_label),1)]),_:1},8,["modelValue"])),a.conditionals.status?(A(),_("div",JC,[O(m(a.labels.notification_if_start)+" ",1),o(c,{class:"fluent_cart_inline_small",modelValue:a.conditionals.type,"onUpdate:modelValue":t[2]||(t[2]=B=>a.conditionals.type=B)},{default:r(()=>[(A(),_(H,null,X({all:"All",any:"Any"},(B,w)=>o(u,{key:w,value:w},{default:r(()=>[O(m(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),O(" "+m(a.labels.notification_if_end)+" ",1),(A(!0),_(H,null,X(l.items,(B,w)=>(A(),U(g,{key:w,style:{"margin-top":"15px"},gutter:10},{default:r(()=>[o(h,{md:8},{default:r(()=>[o(c,{size:"default",modelValue:l.items[w].field,"onUpdate:modelValue":C=>l.items[w].field=C,style:{width:"100%"},onChange:C=>l.items[w].value=""},{default:r(()=>[(A(!0),_(H,null,X(a.fields,(C,F)=>(A(),U(u,{key:F,label:C.admin_label,value:F},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),o(h,{md:5},{default:r(()=>[o(c,{size:"default",modelValue:l.items[w].operator,"onUpdate:modelValue":C=>l.items[w].operator=C},{default:r(()=>[o(v,{label:"General Operators"},{default:r(()=>[o(u,{value:"=",label:"equals"}),o(u,{value:"!=",label:"not equal"}),a.fields[B.field]&&!Object.keys(a.fields[B.field].options).length?(A(),_(H,{key:0},[o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),o(u,{value:"contains",label:"contains"}),o(u,{value:"doNotContains",label:"do not contains"}),o(u,{value:"startsWith",label:"starts with"}),o(u,{value:"endsWith",label:"ends with"})],64)):x("",!0)]),_:2},1024),o(v,{label:"Advanced Operators"},{default:r(()=>[o(u,{value:"length_equal",label:"Equal to Data Length"}),o(u,{value:"length_less_than",label:"Less than to Data length"}),o(u,{value:"length_greater_than",label:"Greater than to Data Length"})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(h,{md:8},{default:r(()=>[l.items[w].operator=="length_equal"||l.items[w].operator=="length_less_than"||l.items[w].operator=="length_greater_than"?(A(),U(y,{key:0,size:"default",type:"number",step:"1",placeholder:"Enter length in number",modelValue:l.items[w].value,"onUpdate:modelValue":C=>l.items[w].value=C},null,8,["modelValue","onUpdate:modelValue"])):(A(),_(H,{key:1},[a.fields[B.field]&&Object.keys(a.fields[B.field].options).length?(A(),U(c,{key:0,size:"default",modelValue:l.items[w].value,"onUpdate:modelValue":C=>l.items[w].value=C,style:{width:"100%"}},{default:r(()=>[(A(!0),_(H,null,X(a.fields[B.field].options,(C,F)=>(A(),U(u,{key:F,label:C,value:F},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(A(),U(y,{key:1,size:"default",placeholder:"Enter a value",modelValue:l.items[w].value,"onUpdate:modelValue":C=>l.items[w].value=C},null,8,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1024),o(h,{md:3,class:"action-btns"},{default:r(()=>[i("i",{class:"el-icon-plus",onClick:C=>l.add(w)},null,8,ZC),l.items.length>1?(A(),_("i",{key:0,class:"el-icon-minus",onClick:C=>l.remove(w)},null,8,eB)):x("",!0)]),_:2},1024)]),_:2},1024))),128))])):x("",!0)])}const aB=be(XC,[["render",tB]]),sB={name:"errorView",props:["field","errors"],computed:{Str(){return rt}}},nB={key:0,class:"fct-inline-error ff"};function oB(e,t,a,s,n,l){return a.errors.has(a.field)?(A(),_("p",nB,m(a.errors.errors[a.field].required?l.Str.headline(a.errors.errors[a.field].required):a.errors.errors[a.field]),1)):x("",!0)}const bl=be(sB,[["render",oB]]),lB={name:"inputPopover",components:{Popover:Eu},props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},data:Array,attrName:{type:String,default:"attribute_name"},defaultValue:{type:[String,Number,Boolean,Array],default:""}},data(){return{model:this.defaultValue}},watch:{model(){this.$emit("update:modelValue",this.model)}},methods:{insertShortcode(e){this.model==null&&(this.model=""),this.model+=e.replace(/param_name/,this.attrName)}}},rB={class:"flex-1"},iB={key:0,class:"input-textarea-value"};function AB(e,t,a,s,n,l){const d=b("el-input"),u=b("Popover");return A(),_("div",{class:oe(["input-popover",a.fieldType=="textarea"?"input-popover-textarea":""])},[i("div",rB,[a.fieldType=="textarea"?(A(),_("div",iB,[o(d,{placeholder:a.placeholder,type:"textarea",modelValue:n.model,"onUpdate:modelValue":t[0]||(t[0]=c=>n.model=c)},null,8,["placeholder","modelValue"])])):(A(),U(d,{key:1,placeholder:a.placeholder,modelValue:n.model,"onUpdate:modelValue":t[1]||(t[1]=c=>n.model=c),type:a.fieldType},null,8,["placeholder","modelValue","type"]))]),o(u,{class:oe(["popover-wrapper",{"popover-wrapper-plaintext":!1}]),data:a.data[0],onCommand:l.insertShortcode,btnType:"info",plain:!0},null,8,["data","onCommand"])],2)}const dB=be(lB,[["render",AB]]),uB={name:"FieldGeneral",components:{inputPopover:dB},props:{value:[String,Number,Boolean,Array],editorShortcodes:Array,field_type:{type:String,default:"text"},defaultValue:{type:[String,Number],default:""}},data(){return{fieldValue:this.defaultValue}},watch:{fieldValue(){this.$emit("update:modelValue",this.fieldValue)}},methods:{onValueUpdated(e){this.fieldValue=e,this.$emit("onValueUpdated",this.fieldValue)}}},cB={class:"fct-field-general"};function pB(e,t,a,s,n,l){const d=b("input-popover");return A(),_("div",cB,[o(d,{fieldType:a.field_type,placeholder:e.$t("Select a Field or Type Custom value"),modelValue:n.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=u=>n.fieldValue=u),icon:"el-icon-arrow-down",data:a.editorShortcodes,onOnValueUpdated:t[1]||(t[1]=function(u){l.onValueUpdated(u)}),defaultValue:n.fieldValue},null,8,["fieldType","placeholder","modelValue","data","defaultValue"])])}const rs=be(uB,[["render",pB]]),fB={key:0,class:"fct-merge-fields"},hB={class:"fct-merge-fields-container"},mB={key:3},_B={name:"field_maps",components:{ErrorView:bl,FieldGeneral:rs},methods:{onValueUpdated(e,t){this.merge_model[t]=e}},props:["settings","merge_fields","field","errors","merge_model","inputs","editorShortcodes"],data(){return{appReady:!1}},mounted(){(Array.isArray(this.merge_model)||!this.merge_model)&&this.$emit("setMergeModelObj"),this.appReady=!0}},gB=Object.assign(_B,{setup(e){return(t,a)=>{const s=b("el-option"),n=b("el-select"),l=b("el-form-item");return t.appReady?(A(),_("div",fB,[i("div",hB,[(A(!0),_(H,null,X(e.field.primary_fileds,(d,u)=>(A(),_("div",{class:"fct-merge-fields-item",key:u},[o(l,{label:d.label,required:d.required},{default:r(()=>[d.input_options==="emails"?(A(),U(n,{key:0,modelValue:e.settings[d.key],"onUpdate:modelValue":c=>e.settings[d.key]=c,placeholder:t.$t("Select a Field"),clearable:"",class:oe(e.errors.errors[d.key]?"is-error":"")},{default:r(()=>[(A(!0),_(H,null,X(e.inputs,(c,h)=>(A(),_(H,{key:h},[(c==null?void 0:c.attributes.type)==="email"?(A(),U(s,{key:0,value:c==null?void 0:c.attributes.code,label:c==null?void 0:c.attributes.name},null,8,["value","label"])):x("",!0)],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"])):d.input_options==="all"?(A(),U(n,{key:1,modelValue:e.settings[d.key],"onUpdate:modelValue":c=>e.settings[d.key]=c,placeholder:t.$t("Select a Field"),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(e.inputs,(c,h)=>(A(),U(s,{key:h,value:c.attributes.name,label:c.admin_label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(A(),U(rs,{key:2,editorShortcodes:e.editorShortcodes,defaultValue:e.settings[d.key],modelValue:e.settings[d.key],"onUpdate:modelValue":c=>e.settings[d.key]=c},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])),d.help_text?(A(),_("div",mB,m(d.help_text),1)):x("",!0),o(bl,{field:"fieldEmailAddress",errors:e.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)),e.field.default_fields?(A(!0),_(H,{key:0},X(e.field.default_fields,d=>(A(),_("div",{class:"fct-merge-fields-item",key:d.name},[o(l,{label:d.label,required:d.required},{default:r(()=>[o(rs,{editorShortcodes:e.editorShortcodes,defaultValue:e.settings[t.primary_field.key],modelValue:e.settings.default_fields[d.name],"onUpdate:modelValue":u=>e.settings.default_fields[d.name]=u},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"]),o(bl,{field:"default_fields",errors:e.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)):x("",!0),(A(!0),_(H,null,X(e.merge_fields,(d,u)=>(A(),_("div",{class:"fct-merge-fields-item",key:u},[o(l,{label:d},{default:r(()=>[o(rs,{editorShortcodes:e.editorShortcodes,defaultValue:e.merge_model[u],onOnValueUpdated:function(c){t.onValueUpdated(c,u)}},null,8,["editorShortcodes","defaultValue","onOnValueUpdated"])]),_:2},1032,["label"])]))),128))])])):x("",!0)}}}),vB={name:"ListSelectFilter",props:["settings","field"],computed:{listItems(){let e=this.settings[this.field.filter_by];this.field.parsedType=="number"&&(e=parseInt(e));let t=[];return no(this.field.options,a=>{a.lists.indexOf(e)!=-1&&t.push({label:a.label,value:a.value})}),t}}},yB={class:"fluent_cart_list_select_filter"};function bB(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select");return A(),_("div",yB,[o(u,{clearable:"",modelValue:a.settings[a.field.key],"onUpdate:modelValue":t[0]||(t[0]=c=>a.settings[a.field.key]=c),placeholder:a.field.placeholder},{default:r(()=>[(A(!0),_(H,null,X(l.listItems,c=>(A(),U(d,{key:c.label,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])}const wB=be(vB,[["render",bB]]),CB={name:"DropdownLabelRepeater",props:["settings","field","inputs","errors","editorShortcodes"],components:{FieldGeneral:rs},data(){return{loading:!1}},methods:{addItemAfter(e){this.loading=!0,this.settings[this.field.key].splice(e+1,0,{item_value:"",label:""}),this.$nextTick(()=>{this.loading=!1})},removeItem(e){this.loading=!0,this.settings[this.field.key].splice(e,1),this.$nextTick(()=>{this.loading=!1})}}},BB={class:"dropdown_label_repeater"},kB={key:0,class:"fluent_cart-table"};function FB(e,t,a,s,n,l){const d=b("el-input"),u=b("field-general"),c=b("el-button"),h=b("el-button-group");return A(),_("div",BB,[n.loading?x("",!0):(A(),_("table",kB,[i("thead",null,[i("tr",null,[i("th",null,m(a.field.field_label||"Field Label"),1),i("th",null,m(a.field.value_label||"Field Value"),1),t[0]||(t[0]=i("th",null,null,-1))])]),i("tbody",null,[(A(!0),_(H,null,X(a.settings[a.field.key],(v,y)=>(A(),_("tr",{key:"item_"+y},[i("td",null,[o(d,{placeholder:a.field.field_label||"Field Label",modelValue:v.label,"onUpdate:modelValue":g=>v.label=g},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),i("td",null,[o(u,{editorShortcodes:a.editorShortcodes,modelValue:v.item_value,"onUpdate:modelValue":g=>v.item_value=g},null,8,["editorShortcodes","modelValue","onUpdate:modelValue"])]),i("td",null,[o(h,null,{default:r(()=>[o(c,{type:"success",onClick:g=>l.addItemAfter(y)},{default:r(()=>t[1]||(t[1]=[O("+",-1)])),_:2,__:[1]},1032,["onClick"]),o(c,{type:"danger",disabled:a.settings[a.field.key].length==1,onClick:g=>l.removeItem(y)},{default:r(()=>t[2]||(t[2]=[O("-",-1)])),_:2,__:[2]},1032,["disabled","onClick"])]),_:2},1024)])]))),128))])]))])}const xB=be(CB,[["render",FB]]),UB={name:"DropdownManyFields",props:["settings","field","inputs","errors","editorShortcodes"],data(){return{test:"null",rendered_labels:{remote_text:this.field.remote_text||"Field Label",local_text:this.field.local_text||"Field Value"}}},components:{FieldGeneral:rs,DynamicIcon:z,IconButton:we},methods:{addNewItem(){this.settings[this.field.key].push({item_value:"",label:""})},removeItem(e){this.settings[this.field.key].length!==1&&this.settings[this.field.key].splice(e,1)}},mounted(){(!this.settings[this.field.key]||!this.settings[this.field.key].length)&&(this.settings[this.field.key]=[{item_value:this.field,label:""}])}},SB={class:"dropdown_label_repeater w-full"},EB={class:"fluent_cart-table w-full text-left"},QB={class:"action-btns"},DB={class:"dropdown_label_repeater_footer"};function IB(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=b("field-general"),h=b("DynamicIcon"),v=b("IconButton"),y=b("el-button");return A(),_("div",SB,[i("table",EB,[t[1]||(t[1]=i("colgroup",null,[i("col",{width:"25%"}),i("col",{width:"70%"}),i("col",{width:"10%"})],-1)),i("thead",null,[i("tr",null,[i("th",null,m(n.rendered_labels.remote_text),1),i("th",null,m(n.rendered_labels.local_text),1),t[0]||(t[0]=i("th",null,null,-1))])]),i("tbody",null,[(A(!0),_(H,null,X(a.settings[a.field.key],(g,B)=>(A(),_("tr",{key:"item_"+B},[i("td",null,[o(u,{modelValue:g.label,"onUpdate:modelValue":w=>g.label=w},{default:r(()=>[(A(!0),_(H,null,X(a.field.options,(w,C)=>(A(),U(d,{key:C,label:w,value:C},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("td",null,[o(c,{editorShortcodes:a.editorShortcodes,defaultValue:typeof g.item_value=="object"?"":g.item_value,modelValue:g.item_value,"onUpdate:modelValue":w=>g.item_value=w},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])]),i("td",null,[i("div",QB,[o(v,{size:"x-small",tag:"button",onClick:je(w=>l.removeItem(B),["prevent"]),disabled:a.settings[a.field.key].length===1,class:"border-none"},{default:r(()=>[o(h,{name:"Delete"})]),_:2},1032,["onClick","disabled"])])])]))),128))])]),i("div",DB,[o(y,{text:"",onClick:je(l.addNewItem,["prevent"])},{default:r(()=>[o(h,{name:"Plus"}),O(" "+m(e.$t("Add More")),1)]),_:1},8,["onClick"])])])}const $B=be(UB,[["render",IB]]),TB={name:"ChainedFields",props:["settings","field","value"],computed:{listItems(){}},watch:{"settings.list_id"(){this.field.require_list&&this.fetchSettings()}},data(){return{loading:!1,app_ready:!1,categories:[],subcategories:[],chained_settings:{category:"",sub_category:""},selected_subcategory:""}},methods:{fetchSettings(){this.loading=!0,this.$post("integration/feed/chained",{route:this.field.remote_url,settings:this.settings}).then(e=>{this.loading=!1,this.categories=e.data.categories,this.subcategories=e.data.subcategories,e.data.reset_values&&(this.chained_settings={category:"",sub_category:""})}).catch(e=>{console.log(e)})},handleCategoryChange(){this.$set(this.settings,this.field.key.category,this.selected_category),this.fetchSettings()}},mounted(){this.settings[this.field.key]?this.chained_settings=this.settings[this.field.key]:this.settings[this.field.key]=this.chained_settings,this.app_ready=!0,this.fetchSettings()}},MB={class:"fluent_cart_chained_filter"};function VB(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=Qt("loading");return pt((A(),_("div",MB,[o(u,{onChange:t[0]||(t[0]=h=>l.handleCategoryChange()),clearable:"",modelValue:n.chained_settings.category,"onUpdate:modelValue":t[1]||(t[1]=h=>n.chained_settings.category=h),placeholder:a.field.category_label},{default:r(()=>[(A(!0),_(H,null,X(n.categories,h=>(A(),U(d,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),pt(o(u,{modelValue:n.chained_settings.sub_category,"onUpdate:modelValue":t[2]||(t[2]=h=>n.chained_settings.sub_category=h),clearable:"",placeholder:a.field.subcategory_label},{default:r(()=>[(A(!0),_(H,null,X(n.subcategories,h=>(A(),U(d,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),[[zr,n.chained_settings.category]])])),[[c,n.loading]])}const LB=be(TB,[["render",VB]]),OB={name:"ChainedSelects",props:["settings","field","value"],data(){return{app_ready:!1,loading:!1}},methods:{fetchSettings(){this.loading=!0,this.$get(this.field.remote_url,{settings:this.settings}).then(e=>{this.loading=!1;let t=e.data;no(t,(a,s)=>{this.$set(this.field,s,a)})}).catch(e=>{console.log(e)})},handleSlectChange(e){e===this.field.primary_key&&(this.fetchSettings(),no(this.value,(t,a)=>{a!=e&&(this.field.options_labels[a].type=="multi-select"?this.value[a]=[]:this.value[a]="")}))}},mounted(){this.fetchSettings(),this.app_ready=!0}},HB={class:"fluent_cart_chained_filter"};function RB(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=b("el-col"),h=b("el-row"),v=Qt("loading");return pt((A(),_("div",HB,[o(h,{gutter:0},{default:r(()=>[(A(!0),_(H,null,X(a.field.fields_options,(y,g)=>(A(),U(c,{span:12,key:g,class:"fluent_carteach_filter"},{default:r(()=>[i("label",null,m(a.field.options_labels[g].label),1),o(u,{onChange:B=>l.handleSlectChange(g),filterable:"",clearable:"",placeholder:a.field.options_labels[g].placeholder,multiple:a.field.options_labels[g].type=="multi-select",modelValue:a.value[g],"onUpdate:modelValue":B=>a.value[g]=B},{default:r(()=>[(A(!0),_(H,null,X(y,(B,w)=>(A(),U(d,{key:w,value:w,label:B},null,8,["value","label"]))),128))]),_:2},1032,["onChange","placeholder","multiple","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])),[[v,n.loading]])}const PB=be(OB,[["render",RB]]),KB={name:"RoutingFilterFields",components:{DynamicIcon:z,IconButton:we,FieldGeneral:rs},props:{routings:{type:Array,required:!0,default(){return[]}},fields:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},labels:{default:()=>({input_label:"Send To",input_placeholder:"Email Address"})},input_type:{type:String,default:"text"},input_options:{type:Object,required:!1,default(){return{}}},editorShortcodes:{type:Object}},data(){return{defaultRules:{input_value:"",field:"",operator:"=",value:null},comingSoon:!1}},methods:{add(e){this.routings.splice(e+1,0,{...this.defaultRules})},remove(e){this.routings.splice(e,1)}},mounted(){(!this.routings||!this.routings.length)&&this.routings.push({...this.defaultRules})}},NB={class:"fluent_cart_routing_fields"},GB={key:0,class:"fluent_cart_routing_table"},zB={class:"fluent_cart_inline"},jB={class:"action-btns"};function YB(e,t,a,s,n,l){const d=b("el-input"),u=b("el-option"),c=b("el-select"),h=b("FieldGeneral"),v=b("DynamicIcon"),y=b("IconButton");return A(),_("div",NB,[a.disabled?x("",!0):(A(),_("table",GB,[i("tbody",null,[(A(!0),_(H,null,X(a.routings,(g,B)=>(A(),_("tr",{key:B},[i("td",null,[i("label",zB,m(a.labels.input_label),1),a.input_type=="text"?(A(),U(d,{key:0,placeholder:a.labels.input_placeholder,modelValue:g.input_value,"onUpdate:modelValue":w=>g.input_value=w},null,8,["placeholder","modelValue","onUpdate:modelValue"])):a.input_type=="select"?(A(),U(c,{key:1,modelValue:g.input_value,"onUpdate:modelValue":w=>g.input_value=w,placeholder:a.labels.input_placeholder},{default:r(()=>[(A(!0),_(H,null,X(a.input_options,(w,C)=>(A(),U(u,{key:C,label:w,value:C},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):x("",!0)]),t[0]||(t[0]=i("td",null,"If",-1)),i("td",null,[o(h,{editorShortcodes:a.editorShortcodes,modelValue:g.field,"onUpdate:modelValue":w=>g.field=w,defaultValue:g.field,onChange:w=>g.value=""},null,8,["editorShortcodes","modelValue","onUpdate:modelValue","defaultValue","onChange"])]),i("td",null,[o(c,{modelValue:g.operator,"onUpdate:modelValue":w=>g.operator=w,class:"w-[100px]"},{default:r(()=>[o(u,{value:"=",label:"equal"}),o(u,{value:"!=",label:"not equal"}),o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),a.fields[g.field]&&!Object.keys(a.fields[g.field].options).length?(A(),_(H,{key:0},[o(u,{value:">",label:"greater than"}),o(u,{value:"<",label:"less than"}),o(u,{value:">=",label:"greater than or equal"}),o(u,{value:"<=",label:"less than or equal"}),o(u,{value:"contains",label:"contains"}),o(u,{value:"doNotContains",label:"do not contains"}),o(u,{value:"startsWith",label:"starts with"}),o(u,{value:"endsWith",label:"ends with"})],64)):x("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("td",null,[a.fields[g.field]&&Object.keys(a.fields[g.field].options).length?(A(),U(c,{key:0,modelValue:g.value,"onUpdate:modelValue":w=>g.value=w,style:{width:"100%"}},{default:r(()=>[(A(!0),_(H,null,X(a.fields[g.field].options,(w,C)=>(A(),U(u,{key:C,label:w,value:C},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(A(),U(d,{key:1,placeholder:"Enter a value",modelValue:g.value,"onUpdate:modelValue":w=>g.value=w},null,8,["modelValue","onUpdate:modelValue"]))]),i("td",null,[i("div",jB,[o(y,{size:"x-small",tag:"button",onClick:je(w=>l.add(B),["prevent"])},{default:r(()=>[o(v,{name:"Plus"})]),_:2},1032,["onClick"]),a.routings.length>1?(A(),U(y,{key:0,size:"x-small",tag:"button",onClick:je(w=>l.remove(B),["prevent"])},{default:r(()=>[o(v,{name:"Minus"})]),_:2},1032,["onClick"])):x("",!0)])])]))),128))])]))])}const qB=be(KB,[["render",YB]]),WB={name:"SelectionRouting",props:["field","settings","inputs","editorShortcodes"],components:{RoutingFilterFields:qB,FiledGeneral:rs}},XB={class:"fluent_cart_field_routing"},JB={class:"mb-4"},ZB={key:3};function e2(e,t,a,s,n,l){const d=b("el-checkbox"),u=b("el-option"),c=b("el-select"),h=b("el-input"),v=b("filed-general"),y=b("routing-filter-fields");return A(),_("div",XB,[i("div",JB,[o(d,{modelValue:a.settings[a.field.routing_key],"onUpdate:modelValue":t[0]||(t[0]=g=>a.settings[a.field.routing_key]=g),"true-value":"routing","false-value":"simple"},{default:r(()=>[O(m(a.field.labels.choice_label),1)]),_:1},8,["modelValue"])]),i("div",null,[a.field.simple_component=="select"?(A(),U(c,{key:0,disabled:a.settings[a.field.routing_key]!="simple",filterable:"",clearable:"",multiple:a.field.is_multiple,modelValue:a.settings[a.field.key],"onUpdate:modelValue":t[1]||(t[1]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},{default:r(()=>[(A(!0),_(H,null,X(a.field.options,(g,B)=>(A(),U(u,{key:B,value:B,label:g},null,8,["value","label"]))),128))]),_:1},8,["disabled","multiple","modelValue","placeholder"])):a.field.simple_component=="text"?(A(),U(h,{key:1,disabled:a.settings[a.field.routing_key]!="simple",modelValue:a.settings[a.field.key],"onUpdate:modelValue":t[2]||(t[2]=g=>a.settings[a.field.key]=g),placeholder:a.field.placeholder},null,8,["disabled","modelValue","placeholder"])):a.field.simple_component=="value_text"&&a.settings[a.field.routing_key]=="simple"?(A(),U(v,{key:2,editorShortcodes:a.editorShortcodes,modelValue:a.settings[a.field.key],"onUpdate:modelValue":t[3]||(t[3]=g=>a.settings[a.field.key]=g)},null,8,["editorShortcodes","modelValue"])):x("",!0),a.settings[a.field.routing_key]=="simple"&&a.field.inline_tip?(A(),_("p",ZB,m(a.field.inline_tip),1)):x("",!0)]),a.settings[a.field.routing_key]=="routing"?(A(),U(y,{key:0,routings:a.settings[a.field.settings_key],input_type:a.field.routing_input_type,fields:a.inputs,labels:a.field.labels,input_options:a.field.options,editorShortcodes:a.editorShortcodes},null,8,["routings","input_type","fields","labels","input_options","editorShortcodes"])):x("",!0)])}const t2=be(WB,[["render",e2]]),a2={name:"CustomComponentRender",props:{field:{type:Object,required:!0},settings:{type:Object,required:!0}},data(){return{message:"This is a custom component render"}},render(){if(this.field&&this.field.render_template){const e=`<div>${this.field.render_template}</div>`,t=Af(e).bind(this);return jr(t,{settings:this.settings,app:this})}return null}},s2={name:"FeedHeader",props:{integration_name:String,settings:Object},computed:{ArrowRight(){return la},prevRoute(){return this.$route.name==="product_integration_feed_editor"?{name:"product_integrations",params:{product_id:this.$route.params.product_id}}:{name:"integrations"}}}},n2={class:"fct-feed-header mb-5"},o2={class:"mb-5 flex items-center justify-between"},l2={class:"capitalize"};function r2(e,t,a,s,n,l){const d=b("el-breadcrumb-item"),u=b("el-breadcrumb"),c=b("el-switch");return A(),_("div",n2,[i("div",o2,[o(u,{"separator-icon":l.ArrowRight},{default:r(()=>[o(d,{to:l.prevRoute},{default:r(()=>[O(m(e.$t("Integrations")),1)]),_:1},8,["to"]),o(d,null,{default:r(()=>[i("span",l2,m(a.integration_name),1)]),_:1})]),_:1},8,["separator-icon"]),o(c,{modelValue:a.settings.enabled,"onUpdate:modelValue":t[0]||(t[0]=h=>a.settings.enabled=h),"active-value":"yes","inactive-value":"no","active-text":e.$t("Enable this Integration")},null,8,["modelValue","active-text"])])])}const i2=be(s2,[["render",r2]]);class A2{constructor(){this.errors={}}get(t){if(this.errors[t])return this.errors[t]}first(t){if(this.errors[t]){let a=Object.keys(this.errors[t]);return a.length?this.errors[t][a[0]]:""}}has(t){return!!this.errors[t]}record(t){this.errors=t}clear(t){t?this.errors[t]=null:this.errors={}}}const d2={name:"RestSelector",props:["field","modelValue"],emits:["update:modelValue"],data(){return{model:this.modelValue,loading:!1,options:[]}},watch:{model(e){this.$emit("update:modelValue",e)}},methods:{fetchOptions(e){let t=this.field.option_key;this.field.extended_key&&(t+="_"+this.field.extended_key);let a="";if(this.field.cacheable){if(a+="_fcrm_ajax_cache_"+t,window[a]){this.options=window[a];return}}else if(this.field.experimental_cache&&(a+="_fcrm_ajax_cache_"+t+"_"+e+" "+JSON.stringify(this.model),this.field.sub_option_key&&(a+="_"+JSON.stringify(this.field.sub_option_key)),window[a])){this.options=window[a];return}if(this.doing_ajax)return!1;this.loading=!0;const s={search:e,values:this.model,option_key:t};this.field.sub_option_key&&(s.sub_option_key=this.field.sub_option_key),this.$get("integration/feed/dynamic_options",s).then(n=>{this.options=n.options,a&&n.options&&(window[a]=n.options)}).catch(n=>{this.handleError(n)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchOptions("")}};function u2(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=Qt("loading");return pt((A(),U(u,{modelValue:n.model,"onUpdate:modelValue":t[0]||(t[0]=h=>n.model=h),multiple:a.field.is_multiple,filterable:"",remote:!a.field.cacheable,clearable:a.field.clearable,disabled:a.field.disabled,"reserve-keyword":"","allow-create":a.field.creatable,size:a.field.size,placeholder:a.field.placeholder||e.$t("Please enter a keyword"),"remote-method":l.fetchOptions},{default:r(()=>[(A(!0),_(H,null,X(n.options,h=>(A(),U(d,{key:h.id,label:h.title,value:h.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple","remote","clearable","disabled","allow-create","size","placeholder","remote-method"])),[[c,n.loading]])}const c2=be(d2,[["render",u2]]),p2={name:"FeedEditor",components:{FilterFields:aB,MergeFieldMapper:gB,FiledGeneral:rs,ListSelectFilter:wB,DropDownLabelRepeater:xB,DropDownManyFields:$B,ChainedFields:LB,ChainedSelects:PB,SelectionRouting:t2,CardContainer:re,CardBody:le,CardHeader:Ae,LabelHint:Ge,FeedHeader:i2,ErrorView:bl,CustomComponentRender:a2,RestSelector:c2},data(){return{loading_app:!1,loading_list:!1,errors:new A2,integration_id:parseInt(this.$route.params.integration_id),integration_name:this.$route.params.integration_name,saving:!1,merge_fields:{},settings:{},settings_fields:{},attachedForms:[],inputs:[],editorShortcodes:[],scope:"",product_variations:[]}},computed:{getTitle(){let e=this.settings_fields.integration_title||"";return this.integration_id?`Update ${e} Integration Feed`:`Add New ${e} Integration Feed`},maybeShowSaveButton(){let e=this.settings_fields,t=this.merge_fields;return e.button_require_list&&t||!e.button_require_list}},methods:{translate:p,loadIntegrationSettings(){if(this.$route.name==="product_integration_feed_editor"){this.loading_app=!0;const e=this.$route.params.product_id;this.$get(`products/${e}/integrations/${this.integration_name}/settings`,{integration_id:this.integration_id}).then(t=>{this.loading_app=!1,this.settings_fields=t.settings_fields,this.scope=t.scope,this.product_variations=t.product_variations,this.settings=t.settings,this.editorShortcodes=Object.values(t.shortcodes||{}),this.inputs=t.inputs,this.settings.name||(this.settings.name=t.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=t.merge_fields}).catch(t=>{var a;this.loading_app=!1,t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)})}else this.loading_app=!0,this.$get("integration/global-feeds/settings",{integration_id:this.integration_id,integration_name:this.integration_name}).then(e=>{this.loading_app=!1,this.settings_fields=e.settings_fields,this.settings=e.settings,this.editorShortcodes=Object.values(e.shortcodes),this.inputs=e.inputs,this.settings.name||(this.settings.name=e.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=e.merge_fields}).catch(e=>{var t,a;console.log(e),this.loading_app=!1,this.handleError(((a=(t=e.responseJSON)==null?void 0:t.data)==null?void 0:a.message)||"Failed to load integration settings")})},loadMergeFields(){this.loading_list=!0,this.fieldsLoaded=!1,this.$get("integration/feed/lists",{integration_id:this.integration_id,list_id:this.settings.list_id,integration_name:this.integration_name}).then(e=>{this.loading_list=!1,this.merge_fields=e.merge_fields,this.fieldsLoaded=!0}).catch(e=>{console.log(e)})},saveNotification(){if(this.errors.clear(),this.$route.name==="product_integration_feed_editor"){this.saving=!0;const e=this.$route.params.product_id;let t={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post(`products/${e}/integrations`,t).then(a=>{a.feedData&&(this.settings=a.feedData),a.created&&this.$router.push({name:"product_integrations",params:{product_id:e}}),this.handleSuccess(a.message||"Integration saved successfully"),this.errors.clear()}).catch(a=>{var s;this.errors.record(((s=a==null?void 0:a.data)==null?void 0:s.errors)||{}),this.handleError(a)}).finally(()=>{this.saving=!1})}else{this.saving=!0;let e={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post("integration/global-feeds/settings",e).then(t=>{t.created&&this.$router.push({name:"integrations"}),this.handleSuccess(t.message)}).catch(t=>{var a;this.errors.record(((a=t==null?void 0:t.data)==null?void 0:a.errors)||{}),this.handleError(t)}).finally(()=>{this.saving=!1})}},setMergeModel(e){this.settings[e.key]={}}},mounted(){this.loadIntegrationSettings()}},f2={class:"fct-integration-container fct-layout-width"},h2={class:"fct-add-integration py-7.5"},m2={class:"grid gap-5"},_2={key:0,class:"fct-setting-form-content"},g2=["innerHTML"],v2={class:"fct-setting-form-fields"},y2=["innerHTML"],b2=["innerHTML"],w2=["innerHTML"],C2={key:0,class:"fct-setting-form-row"},B2={class:"fct-setting-form-content"},k2={class:"fct-setting-form-content"},F2={class:"fct-setting-form-fields"},x2={class:"fct-inline-tip pl-6"},U2={key:0,class:"setting-save-action"};function S2(e,t,a,s,n,l){const d=b("el-skeleton-item"),u=b("el-skeleton"),c=b("FeedHeader"),h=b("LabelHint"),v=b("el-input"),y=b("error-view"),g=b("el-option"),B=b("el-select"),w=b("MergeFieldMapper"),C=b("el-checkbox"),F=b("el-checkbox-group"),S=b("el-option-group"),E=b("filter-fields"),k=b("filed-general"),Q=b("list-select-filter"),I=b("drop-down-label-repeater"),D=b("drop-down-many-fields"),M=b("el-radio"),$=b("el-radio-group"),V=b("el-input-number"),L=b("chained-fields"),R=b("chained-selects"),K=b("selection-routing"),J=b("rest-selector"),W=b("CardBody"),ae=b("CardContainer"),Z=b("el-button"),te=b("el-form"),ie=Qt("loading");return A(),_("div",f2,[i("div",h2,[o(u,{loading:n.loading_app,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:r(()=>[o(d,{variant:"h3",class:"w-[150px] mb-5"}),i("div",m2,[i("div",null,[o(d,{variant:"h3",class:"w-[50px] mb-3"}),o(d,{variant:"p"})]),i("div",null,[o(d,{variant:"h3",class:"w-[50px] mb-3"}),o(d,{variant:"p"})])])]),_:1},8,["loading"]),n.loading_app?x("",!0):(A(),U(te,{key:0,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(c,{settings:n.settings,integration_name:n.integration_name},null,8,["settings","integration_name"]),o(ae,null,{default:r(()=>[o(W,null,{default:r(()=>[(A(!0),_(H,null,X(n.settings_fields.fields,(P,j)=>(A(),_("div",{key:j,class:oe(["fct-setting-form-row",P.key])},[P.label?(A(),_("div",_2,[P.tips?(A(),U(h,{key:0,title:P.label,content:P.tips,placement:"top-start",required:P.required},null,8,["title","content","required"])):(A(),U(h,{key:1,title:P.label,required:P.required},null,8,["title","required"])),P.inline_tip?(A(),_("p",{key:2,class:"fct-inline-tip",innerHTML:P.inline_tip},null,8,g2)):x("",!0)])):x("",!0),i("div",v2,[P.component==="text"?(A(),_(H,{key:0},[o(v,{placeholder:P.placeholder,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,class:oe(n.errors.errors[P.key]?"is-error":"")},null,8,["placeholder","modelValue","onUpdate:modelValue","class"]),o(y,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="list_ajax_options"?(A(),_(H,{key:1},[pt((A(),U(B,{onChange:t[0]||(t[0]=G=>l.loadMergeFields()),modelValue:n.settings.list_id,"onUpdate:modelValue":t[1]||(t[1]=G=>n.settings.list_id=G),placeholder:P.placeholder,clearable:""},{default:r(()=>[(A(!0),_(H,null,X(P.options,(G,N)=>(A(),U(g,{key:N,value:N,label:G},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","placeholder"])),[[ie,n.loading_list]]),o(y,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="map_fields"?(A(),U(w,{key:2,onSetMergeModelObj:G=>l.setMergeModel(P),errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes,merge_model:n.settings[P.key],merge_fields:n.merge_fields},null,8,["onSetMergeModelObj","errors","inputs","field","settings","editorShortcodes","merge_model","merge_fields"])):P.component==="select"?(A(),_(H,{key:3},[o(B,{filterable:"",clearable:"",multiple:P.is_multiple,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,placeholder:P.placeholder},{default:r(()=>[(A(!0),_(H,null,X(P.options,(G,N)=>(A(),U(g,{key:N,value:N,label:G},null,8,["value","label"]))),128))]),_:2},1032,["multiple","modelValue","onUpdate:modelValue","placeholder"]),o(y,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="checkbox-single"?(A(),_(H,{key:4},[o(C,{modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},{default:r(()=>[O(m(P.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),P.inline_tip?(A(),_("p",{key:0,class:"fct-inline-tip pl-6",innerHTML:P.inline_tip},null,8,y2)):x("",!0)],64)):P.component==="yes-no-checkbox"?(A(),_(H,{key:5},[o(C,{"true-value":"yes","false-value":"no",modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},{default:r(()=>[O(m(P.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),P.inline_tip?(A(),_("p",{key:0,class:"fct-inline-tip pl-6",innerHTML:P.inline_tip},null,8,b2)):x("",!0)],64)):P.component==="checkbox-multiple"?(A(),U(F,{key:6,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},{default:r(()=>[(A(!0),_(H,null,X(P.options,(G,N)=>(A(),U(C,{key:N,label:Number(N)},{default:r(()=>[O(m(G),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):P.component==="selection_group"?(A(),_(H,{key:7},[o(B,{modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,placeholder:P.placeholder,multiple:"",class:oe(n.errors.errors[P.key]?"is-error":"")},{default:r(()=>[(A(!0),_(H,null,X(P.options,(G,N)=>(A(),U(S,{key:N,label:G.label},{default:r(()=>[(A(!0),_(H,null,X(G.options,ee=>(A(),U(g,{key:ee.value,label:ee.label,value:ee.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"]),o(y,{field:P.key,errors:n.errors},null,8,["field","errors"])],64)):P.component==="conditional_block"?(A(),U(E,{key:8,fields:n.inputs,conditionals:n.settings[P.key],editorShortcodes:n.editorShortcodes},null,8,["fields","conditionals","editorShortcodes"])):P.component==="value_text"?(A(),U(k,{key:9,editorShortcodes:n.editorShortcodes,defaultValue:n.settings[P.key],modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):P.component==="value_textarea"?(A(),U(k,{key:10,field_type:"textarea",editorShortcodes:n.editorShortcodes,defaultValue:n.settings[P.key],modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,isIconBtn:""},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):P.component==="list_select_filter"?(A(),U(Q,{key:11,settings:n.settings,field:P},null,8,["settings","field"])):P.component==="dropdown_label_repeater"?(A(),U(I,{key:12,errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):P.component==="dropdown_many_fields"?(A(),U(D,{key:13,errors:n.errors,inputs:n.inputs,field:P,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):P.component==="radio_choice"?(A(),U($,{key:14,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},{default:r(()=>[(A(!0),_(H,null,X(P.options,(G,N)=>(A(),U(M,{key:N,label:N},{default:r(()=>[O(m(G),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):P.component==="number"?(A(),U(V,{key:15,size:"default",modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},null,8,["modelValue","onUpdate:modelValue"])):P.component==="chained_fields"?(A(),U(L,{key:16,settings:n.settings,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,field:P},null,8,["settings","modelValue","onUpdate:modelValue","field"])):P.component==="chained_select"?(A(),U(R,{key:17,settings:n.settings,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G,field:P},null,8,["settings","modelValue","onUpdate:modelValue","field"])):P.component==="html_info"?(A(),_("div",{key:18,innerHTML:P.html_info},null,8,w2)):P.component==="selection_routing"?(A(),U(K,{key:19,inputs:n.inputs,field:P,editorShortcodes:n.editorShortcodes,settings:n.settings},null,8,["inputs","field","editorShortcodes","settings"])):P.component==="rest_selector"?(A(),U(J,{key:20,field:P,modelValue:n.settings[P.key],"onUpdate:modelValue":G=>n.settings[P.key]=G},null,8,["field","modelValue","onUpdate:modelValue"])):P.component==="custom_component"?(A(),U($a("custom-component-render"),{key:21,field:P,settings:n.settings},null,8,["field","settings"])):x("",!0)])],2))),128)),n.scope==="product"&&n.product_variations.length?(A(),_("div",C2,[i("div",B2,[i("div",k2,[o(h,{title:l.translate("Run on Selected Variations Only")},null,8,["title"])])]),i("div",F2,[o(B,{filterable:"",clearable:"",multiple:!0,modelValue:n.settings.conditional_variation_ids,"onUpdate:modelValue":t[2]||(t[2]=P=>n.settings.conditional_variation_ids=P),placeholder:e.$t("Leave empty for all the variations")},{default:r(()=>[(A(!0),_(H,null,X(n.product_variations,P=>(A(),U(g,{key:P.id,value:P.id,label:P.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"]),i("p",x2,m(e.$t("Leave empty to run this feed for all variations")),1)])])):x("",!0)]),_:1})]),_:1}),l.maybeShowSaveButton?(A(),_("div",U2,[o(Z,{type:"primary",loading:n.saving,onClick:l.saveNotification},{default:r(()=>[O(m(n.integration_id?`Update ${n.settings_fields.integration_title} Feed`:`Create ${n.settings_fields.integration_title} Feed`),1)]),_:1},8,["loading","onClick"])])):x("",!0)]),_:1}))])])}const Od=be(p2,[["render",S2]]),E2={class:"setting-wrap"},Q2={key:0,class:"integration-actions"},D2={key:0,class:"fct-empty-integration-wrap text-center max-w-[600px] mx-auto mb-5"},I2={class:"text-base"},$2={key:1,class:"fct-integrations-table-wrap"},T2={class:"fct-integration-logo-wrap"},M2=["src","alt"],V2={class:"text-xs text-gray-700"},L2=["onClick"],O2={class:"fct-event-triggers"},H2={class:"fct-event-triggers"},R2={class:"fct-btn-group sm"},P2={key:2,class:"fct-integration-table-footer"},K2={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"},N2={name:"GloablIntegration",props:["editorShortcodes"],data(){return{loading:!0,feeds:[],available_integrations:{},all_module_config_url:""}},computed:{hasActiveIntegrations(){return Object.values(this.available_integrations).some(e=>e.enabled)}},methods:{getFeeds(){this.loading=!0,this.$get("integration/global-feeds").then(e=>{this.available_integrations=e.available_integrations,this.feeds=e.feeds,this.all_module_config_url=e.all_module_config_url}).catch(e=>{this.loading=!1}).finally(()=>{this.loading=!1})},handleActive(e){let t={status:e.enabled};this.$post(`integration/global-feeds/change-status/${e.id}`,t).then(a=>{this.handleSuccess(a.message)}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},removeFeed(e,t){let a=t.$index;this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`integration/global-feeds/${e}`).then(s=>{this.handleSuccess(s.message),this.feeds.splice(a,1)}).catch(s=>{var n;this.handleError(((n=s==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete integration.")})}).catch(()=>{})},add(e){let t=this.available_integrations[e];t&&t.enabled?this.$router.push({name:"feed_editor",params:{integration_id:0,integration_name:e}}):this.$notify.error({message:this.$t("This integration is not enabled. Please enable it from the integration modules.")})},edit(e){this.$router.push({name:"feed_editor",params:{integration_id:e.id,integration_name:e.provider}})},isEmpty:qi},mounted(){this.getFeeds()}},G2=Object.assign(N2,{setup(e){return(t,a)=>{const s=b("el-button"),n=b("el-dropdown-item"),l=b("el-dropdown-menu"),d=b("el-dropdown"),u=b("el-skeleton"),c=b("el-switch"),h=b("el-table-column"),v=b("el-tag"),y=b("el-popover"),g=b("el-tooltip"),B=b("el-table"),w=Qt("loading");return A(),_("div",E2,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:t.$t("Global Integrations Feeds"),text:t.$t("These integration feeds will be applied globally across all your orders and related actions.")},{action:r(()=>[t.hasActiveIntegrations?(A(),_("div",Q2,[o(d,{onCommand:t.add,trigger:"click","popper-class":"fct-dropdown"},{dropdown:r(()=>[o(l,null,{default:r(()=>[(A(!0),_(H,null,X(t.available_integrations,(C,F)=>(A(),U(n,{key:F,command:F},{default:r(()=>[O(m(C.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:r(()=>[o(s,{type:"info",plain:"",size:"small"},{default:r(()=>[O(m(t.$t("Add Integration"))+" ",1),o(z,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):x("",!0)]),_:1},8,["title","text"]),o(le,{class:"px-0 pb-0 pt-4"},{default:r(()=>[o(u,{class:"px-5 pb-5",loading:t.loading,animated:"",rows:6},null,8,["loading"]),t.loading?x("",!0):(A(),_(H,{key:0},[t.hasActiveIntegrations?(A(),_("div",$2,[pt((A(),U(B,{data:t.feeds},{empty:r(()=>[o(Te,{icon:"Folder",text:t.$t("You did not add any integration actions yet.")},null,8,["text"])]),default:r(()=>[o(h,{label:t.$t("Enabled"),width:60},{default:r(C=>[o(c,{"active-value":"yes","inactive-value":"no",onChange:F=>t.handleActive(C.row),modelValue:C.row.enabled,"onUpdate:modelValue":F=>C.row.enabled=F},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),o(h,{width:120,label:t.$t("Integration")},{default:r(C=>{var F,S;return[i("div",T2,[(F=t.available_integrations[C.row.provider])!=null&&F.logo?(A(),_("img",{key:0,style:{"min-width":"24px"},class:"fct-integration-logo",src:t.available_integrations[C.row.provider].logo,alt:C.row.provider},null,8,M2)):x("",!0),i("span",V2,m(((S=t.available_integrations[C.row.provider])==null?void 0:S.title)||C.row.provider),1)])]}),_:1},8,["label"]),o(h,{width:220,label:t.$t("Title")},{default:r(C=>[i("a",{class:"fct-action-link-btn",onClick:je(F=>t.edit(C.row),["prevent"]),href:"#"},m(C.row.name),9,L2)]),_:1},8,["label"]),o(h,{width:160,label:t.$t("Triggers")},{default:r(C=>[i("div",O2,[(A(!0),_(H,null,X((C.row.feed.event_trigger||[]).slice(0,2),(F,S)=>(A(),U(v,{key:F},{default:r(()=>[o(z,{name:"Trigger"}),O(" "+m(f(rt).headline(F)),1)]),_:2},1024))),128)),(C.row.feed.event_trigger||[]).length>2?(A(),U(y,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:r(()=>[o(v,{type:"info"},{default:r(()=>[O(" +"+m((C.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:r(()=>[i("div",H2,[(A(!0),_(H,null,X((C.row.feed.event_trigger||[]).slice(2),(F,S)=>(A(),U(v,{key:F+S},{default:r(()=>[o(z,{name:"Trigger"}),O(" "+m(f(rt).headline(F)),1)]),_:2},1024))),128))])]),_:2},1024)):x("",!0)])]),_:1},8,["label"]),o(h,{width:80},{default:r(C=>[i("div",R2,[o(g,{effect:"dark",content:t.$t("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{tag:"button",onClick:F=>t.edit(C.row),size:"x-small",hover:"primary"},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),o(g,{effect:"dark",content:t.$t("Delete"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{tag:"button",size:"x-small",onClick:F=>t.removeFeed(C.row.id,C),hover:"danger"},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[w,t.loading]])])):(A(),_("div",D2,[i("p",I2,m(t.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),o(s,{tag:"a",type:"primary",href:t.all_module_config_url},{default:r(()=>[O(m(t.$t("Configure Modules")),1)]),_:1},8,["href"])])),t.feeds.length?x("",!0):(A(),_("div",P2,[i("a",K2,m(t.$t("View Documentations")),1)]))],64))]),_:1})]),_:1})])}}}),z2={name:"Integrations",components:{Badge:ut,FluidTabItem:ll,FluidTab:Oi,CardBody:le,CardContainer:re,CardHeader:Ae,PageHeading:Ua,IconButton:we,DynamicIcon:z,Empty:Te,GlobalIntegrationFeeds:G2},data(){return{search:"",fetching:!1,addOns:{},module_type:"all",integrationTab:"global",modules:["all","crm","lms","core","marketing"],installationLoading:!1,admin_url:De.get("admin_url"),upgradeUrl:De.get("app_config.upgrade_url"),installing:!1,installingAdding:""}},computed:{filteredAddons(){let e=this.addOns;if(this.search){let t={};no(e,(a,s)=>{JSON.stringify(a).indexOf(this.search)!==-1&&(t[s]=a)}),e=t}if(this.module_type!="all"){let t={};no(e,(a,s)=>{a.categories&&a.categories.includes(this.module_type)&&(t[s]=a)}),e=t}return e},is_no_modules(){return qi(this.filteredAddons)}},methods:{fetchAddons(){this.fetching=!0,this.$get("integration/addons").then(e=>{this.addOns=e.addons}).catch(e=>{this.handleError(e)}).finally(()=>{this.fetching=!1})},translate:p,changeModuleType(e){this.module_type=e},installAddon(e,t){this.installing=!0,this.installingAdding=t,this.$post("integration/feed/install-plugin",{addon:t}).then(a=>{this.$notify.success(a.message),window.location.reload()}).catch(a=>{this.handleError(a)}).finally(()=>{this.installing=!1,this.installingAdding=""})}},mounted(){this.fetchAddons()}},j2={class:"fct-integration-container fct-layout-width"},Y2={style:{"margin-top":"100px"},class:"fct-integration-content"},q2={class:"fct-integration-content-head"},W2={class:"fct-card-header-title mb-1"},X2={class:"card-header-text mt-0"},J2={class:"flex items-center gap-3 justify-between py-5 mt-5 border border-solid border-gray-divider border-x-0 dark:border-dark-500 flex-col md:flex-row"},Z2={class:"fct-integration-search"},ek={key:1},tk={class:"fct-integration-card-content"},ak={class:"fct-integration-card-content-inner"},sk={class:"fct-integration-card-logo"},nk=["src","alt"],ok={class:"title"},lk={class:"desc"},rk={key:0,class:"mt-2"},ik={key:1,class:"mt-2"};function Ak(e,t,a,s,n,l){const d=b("PageHeading"),u=b("GlobalIntegrationFeeds"),c=b("DynamicIcon"),h=b("IconButton"),v=b("FluidTabItem"),y=b("FluidTab"),g=b("el-input"),B=b("el-skeleton"),w=b("Badge"),C=b("el-button"),F=b("Empty"),S=b("CardBody"),E=b("CardContainer");return A(),_("div",j2,[o(d,{title:e.$t("Integrations & Addons")},null,8,["title"]),o(u),i("div",Y2,[o(E,null,{default:r(()=>[o(S,null,{default:r(()=>[i("div",q2,[o(h,{circle:"",size:"large"},{default:r(()=>[o(c,{name:"EqualizerLine"})]),_:1}),i("div",null,[i("h2",W2,m(e.$t("Integration Modules")),1),i("p",X2,m(e.$t("Configure your integrations and extend FluentCart to enhance your store's functionality.")),1)])]),i("div",J2,[o(y,null,{default:r(()=>[(A(!0),_(H,null,X(n.modules,(k,Q)=>(A(),U(v,{key:Q,class:oe(["uppercase",k===n.module_type?"active":""]),onClick:I=>l.changeModuleType(k)},{default:r(()=>[O(m(k),1)]),_:2},1032,["onClick","class"]))),128))]),_:1}),i("div",Z2,[o(g,{placeholder:e.$t("Search..."),modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=k=>n.search=k)},{prefix:r(()=>[o(c,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),n.fetching?(A(),U(B,{key:0,loading:!0,animated:"",rows:4})):x("",!0),n.fetching?x("",!0):(A(),_("div",ek,[(A(!0),_(H,null,X(l.filteredAddons,(k,Q)=>(A(),_("div",{key:Q,class:oe(["fct-integration-card","addon-enabled-"+k.enabled])},[i("div",tk,[i("div",ak,[i("div",sk,[k.logo?(A(),_("img",{key:0,src:k.logo,alt:k.title},null,8,nk)):x("",!0)]),i("div",null,[i("h5",ok,[O(m(k.title)+" ",1),k.is_pro&&!k.enabled?(A(),U(w,{key:0,status:"warning",text:"Pro"})):(A(),U(w,{key:1,status:k.enabled?"active":"info",text:k.enabled?"enabled":"disabled"},null,8,["status","text"]))]),i("p",lk,m(k.description),1),k.is_pro&&!k.is_pro_active?(A(),_("div",rk,[o(C,{type:"warning",size:"small",tag:"a",href:n.upgradeUrl,target:"_blank"},{default:r(()=>[o(c,{name:"Crown",class:"mr-1"}),O(" "+m(l.translate("Upgrade to Pro")),1)]),_:1},8,["href"])])):!k.enabled&&k.installable?(A(),_("div",ik,[o(C,{loading:n.installingAdding==Q,disabled:n.installingAdding==Q,onClick:I=>l.installAddon(k,Q),type:"primary",size:"small"},{default:r(()=>[O(m(l.translate("Install %s",k.title)),1)]),_:2},1032,["loading","disabled","onClick"])])):x("",!0)])])])],2))),128))])),l.is_no_modules&&!n.fetching?(A(),U(F,{key:2,icon:"Folder",text:e.$t("Sorry! No modules found based on your filter.")},null,8,["text"])):x("",!0)]),_:1})]),_:1})])])}const dk=be(z2,[["render",Ak]]),uk={class:"fct-connect-details"},ck={key:0,class:"fct-connect-require"},pk={class:"flex items-center justify-between"},fk={key:0,class:"display-name"},hk={name:"ConnectAccount",props:["connect","connect_config","mode","method","methodName","methodLabel"],data(){return{saving:!1}},methods:{disconnect(){this.saving=!0,this.$post("settings/payment-methods/disconnect",{method:this.method,mode:this.mode}).then(e=>{this.saving=!1,this.$emit("reload_settings",!0)})}}},Hd=Object.assign(hk,{setup(e){return(t,a)=>{const s=b("el-button"),n=b("el-popconfirm");return A(),_("div",uk,[!e.connect||e.connect.error?(A(),_("div",ck,[i("h4",null,m(f(p)("Connect Your %s Account to your website to accept Payments",e.methodName)),1),o(s,{tag:"a",type:"info",plain:"",href:e.connect_config[e.mode+"_redirect"]},{default:r(()=>[o(z,{name:"ArrowLeftRight"}),O(" "+m(f(p)("Connect with %s",e.methodLabel)),1)]),_:1},8,["href"])])):(A(),U(Kc,{key:1,title:f(p)("Your %s Account is Up & Running ",e.methodLabel)},{default:r(()=>{var l;return[i("div",pk,[i("div",null,[e.connect.display_name?(A(),_("p",fk,m(e.connect.display_name),1)):x("",!0),i("h4",null,m(t.$t("Administrator"))+" ("+m(t.$t("Owner"))+")",1)]),o(n,{width:"230","confirm-button-text":t.$t("Confirm"),"cancel-button-text":t.$t("No, Thanks"),icon:"el-icon-info","icon-color":"red",title:((l=e.connect_config)==null?void 0:l.disconnect_note)??t.$t("Are you sure to disconnect?"),position:"top",onConfirm:t.disconnect},{reference:r(()=>[o(s,{type:"danger",plain:""},{default:r(()=>[O(m(f(p)("Disconnect %s",e.methodLabel)),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onConfirm"])])]}),_:1},8,["title"]))])}}}),mk={__name:"Tabs",props:{fields:Object,settings:Object,tabs:Object,index:[String,Number]},setup(e){return(t,a)=>{const s=b("el-tab-pane"),n=b("el-tabs");return A(),U(n,{class:"demo-tabs",modelValue:e.settings[e.index],"onUpdate:modelValue":a[0]||(a[0]=l=>e.settings[e.index]=l)},{default:r(()=>[(A(!0),_(H,null,X(e.tabs.schema,(l,d)=>(A(),U(s,{label:l.label,name:l.value,key:d},{default:r(()=>[i("div",null,[o(fA,{fields:l.schema,settings:e.settings},null,8,["fields","settings"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}},_k={class:"setting-label"},gk=["innerHTML"],vk={key:0},yk={__name:"RadioSelectDependants",props:{fields:Object,settings:Object,index:[String,Number]},setup(e){return(t,a)=>{const s=b("el-icon"),n=b("el-tooltip"),l=b("el-radio"),d=b("el-radio-group");return A(),_(H,null,[i("p",_k,[O(m(e.fields[e.index].label)+" ",1),e.fields[e.index].tooltip?(A(),U(n,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:e.fields[e.index].tooltip},null,8,gk)]),default:r(()=>[o(s,null,{default:r(()=>[o(f(ca))]),_:1})]),_:1})):x("",!0)]),o(d,{modelValue:e.settings[e.index],"onUpdate:modelValue":a[0]||(a[0]=u=>e.settings[e.index]=u)},{default:r(()=>[(A(!0),_(H,null,X(e.fields[e.index].options,(u,c)=>(A(),U(l,{label:u,value:c,key:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a[1]||(a[1]=i("br",null,null,-1)),a[2]||(a[2]=i("br",null,null,-1)),(A(!0),_(H,null,X(e.fields[e.index].dependants,(u,c)=>(A(),_("div",{key:c},[e.settings[e.index]===u.value?(A(),_("div",vk,[o(fA,{fields:u.schema,settings:e.settings,index:e.index},null,8,["fields","settings","index"])])):x("",!0)]))),128))],64)}}},bk={name:"PayPalWebhookSetup",data(){return{isLoading:!1,setupStatus:null,checkingWebhook:!1}},props:["mode","webhook_info","testConnect","liveConnect"],watch:{testConnect(){this.checkWebhookStatus()},liveConnect(){this.checkWebhookStatus()}},computed:{isConnected(){return this.mode==="test"&&this.testConnect||this.mode==="live"&&this.liveConnect}},components:{Notify:Y},methods:{checkWebhookStatus(){this.isConnected&&(this.checkingWebhook=!0,this.$get("settings/payment-methods/paypal/webhook/check",{mode:this.mode}).then(e=>{this.checkingWebhook=!1}).catch(e=>{this.checkingWebhook=!1}))},setupWebhook(){this.isLoading=!0,this.$post("settings/payment-methods/paypal/webhook/setup",{mode:this.mode}).then(e=>{this.isLoading=!1,this.setupStatus="success",Y.success(e.message),this.$emit("reload_settings",!0)}).catch(e=>{this.isLoading=!1,this.setupStatus="error",Y.error(e.message),setTimeout(()=>{window.location.reload()},2e3)})}},mounted(){this.checkWebhookStatus()}},wk={key:0,class:"fluent_cart_paypal_webhook_setup"},Ck={class:"fluent_cart_paypal_webhook_setup_title"},Bk=["innerHTML"],kk={key:1};function Fk(e,t,a,s,n,l){const d=b("el-button"),u=Qt("loading");return l.isConnected?(A(),_("div",wk,[i("p",Ck,"PayPal "+m(a.mode)+" webhook setup",1),a.webhook_info?pt((A(),_("div",{key:0,"element-loading-text":"Checking webhook...",innerHTML:a.webhook_info},null,8,Bk)),[[u,n.checkingWebhook]]):(A(),_("div",kk,[t[1]||(t[1]=i("p",{class:"fluent_cart_paypal_webhook_setup_description"}," Configure PayPal webhooks to receive real-time payment notifications ",-1)),t[2]||(t[2]=i("br",null,null,-1)),o(d,{type:e.text,loading:n.isLoading,onClick:l.setupWebhook,disabled:n.isLoading,class:"setup-button",size:"small"},{default:r(()=>t[0]||(t[0]=[i("span",null,"Setup Webhook",-1)])),_:1,__:[0]},8,["type","loading","onClick","disabled"])]))])):x("",!0)}const xk=be(bk,[["render",Fk],["__scopeId","data-v-b34bc5cb"]]),Uk={key:0,class:"fct-col"},Sk=["innerHTML"],Ek={key:1,class:"fct-col"},Qk={class:"font-bold p-6 mt-6 text-center bg-gray-200"},Dk={key:2,class:"fct-col"},Ik={class:"text-red-700"},$k={key:1},Tk={key:0},Mk={class:"flex items-center justify-between"},Vk={key:1,class:"flex items-center justify-between"},Lk={class:"text-red-700"},Ok={key:3,class:"fct-col"},Hk={class:"setting-label"},Rk=["innerHTML"],Pk={key:0,class:"fct-settings-description"},Kk={key:4,class:"fct-col"},Nk=["innerHTML"],Gk={key:0,class:"fct-settings-description"},zk={key:5,class:"fct-col"},jk={class:"setting-label"},Yk=["innerHTML"],qk={key:0,class:"fct-settings-description"},Wk={key:6,class:"fct-col"},Xk={class:"setting-label"},Jk=["innerHTML"],Zk={key:0,class:"fct-settings-description"},e8={key:7,class:"fct-col"},t8={key:0},a8=["innerHTML"],s8={key:8,class:"fct-col"},n8={class:"setting-label"},o8={key:0,class:"fct-settings-description"},l8={key:9,class:"fct-col"},r8={class:"setting-label"},i8={key:0,class:"fct-settings-description"},A8={key:10,class:"fct-col"},d8={class:"setting-label"},u8={key:0,class:"fct-settings-description"},c8={key:11,class:"fct-col"},p8={class:"setting-label"},f8=["innerHTML"],h8={key:0,class:"fct-settings-description"},m8={key:12,class:"fct-col"},_8={class:"setting-label"},g8=["innerHTML"],v8={key:0,class:"fct-settings-description"},y8={key:13,class:"fct-col"},b8={class:"setting-label"},w8=["innerHTML"],C8={key:0,class:"fct-settings-description"},B8={key:14,class:"fct-col"},k8={class:"setting-label"},F8={key:0,class:"fct-settings-description"},x8={key:15,class:"fct-col"},U8=["innerHTML"],S8={key:16,class:"fct-col"},E8={key:0},Q8={key:0},D8={class:"setting-label"},I8={class:"flex flex-wrap gap-2"},$8={class:"mt-4 text-gray-700 dark:text-gray-300"},T8=["href"],M8={key:1},V8={class:"setting-label"},L8={class:"flex flex-wrap gap-2"},O8={class:"mt-4 text-gray-700 dark:text-gray-300"},H8=["href"],R8={key:17,class:"fct-col"},P8={key:18,class:"fct-col"},fA={__name:"Renderer",props:{fields:Object,settings:Object,route_name:String,methodName:String,methodTitle:String,methodLabel:String},emits:["onSettingsChange"],setup(e,{emit:t}){const a=Je().ctx,s=T({}),n=T(null),l=T(null),d=T(!1),u=T({}),c=De.get("shop.order_mode"),h=e,v=t,y=q(()=>{var S,E,k;return((S=h.settings)==null?void 0:S.payment_mode)==="test"?(E=h.settings)==null?void 0:E.define_test_keys:(k=h.settings)==null?void 0:k.define_live_keys});q(()=>{var S,E;return(S=h.fields)!=null&&S.payment_mode&&((E=h.settings)==null?void 0:E.payment_mode)!==c&&v("onSettingsChange",{...h.settings,payment_mode:c}),!0});const g=q(()=>{var S;return((S=h.settings)==null?void 0:S.payment_mode)==="test"?"test":"live"}),B=()=>{d.value=!0,a.$get("settings/payment-methods/connect/info",{method:h.route_name}).then(S=>{S&&(d.value=!1,s.value=S.connect_config,v("onSettingsChange",S.settings),n.value=S.live_account,l.value=S.test_account,n.value.error&&(u.value=n.value),l.value.error&&(u.value=l.value),d.value=!1)}).catch(S=>{d.value=!1,u.value=S}).finally(()=>{d.value=!1})},w=S=>{const E=S.target;if(E.classList.contains("fct-install-addon-btn")||E.closest(".fct-install-addon-btn")){S.preventDefault(),S.stopPropagation();const k=E.classList.contains("fct-install-addon-btn")?E:E.closest(".fct-install-addon-btn"),Q=k.getAttribute("data-addon-slug"),I=k.getAttribute("data-addon-file"),D=k.getAttribute("data-source-type"),M=k.getAttribute("data-source-link");Q&&I&&C({slug:Q,source_type:D||"github",source_link:M||""});return}if(E.classList.contains("fct-activate-addon-btn")||E.closest(".fct-activate-addon-btn")){S.preventDefault(),S.stopPropagation();const Q=(E.classList.contains("fct-activate-addon-btn")?E:E.closest(".fct-activate-addon-btn")).getAttribute("data-addon-file");Q&&F({file:Q})}},C=S=>{const E=document.querySelector(`[data-addon-slug="${S.slug}"]`);E&&(E.disabled=!0,E.innerHTML='<span class="el-icon-loading"></span> '+p("Installing...")),a.$post("settings/payment-methods/install-addon",{plugin_slug:S.slug,source_type:S.source_type,source_link:S.source_link}).then(k=>{Y.success({message:k.message||p("Addon installed and activated successfully!")}),setTimeout(()=>{window.location.reload()},1e3)}).catch(k=>{Y.error({message:(k==null?void 0:k.message)||p("Failed to install addon")}),E&&(E.disabled=!1,E.innerHTML='<svg style="width: 18px; height: 18px; margin-right: 8px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13 10H18L12 16L6 10H11V3H13V10M4 19H20V12H22V20C22 20.5304 21.7893 21.0391 21.4142 21.4142C21.0391 21.7893 20.5304 22 20 22H4C3.46957 22 2.96086 21.7893 2.58579 21.4142C2.21071 21.0391 2 20.5304 2 20V12H4V19Z"/></svg>'+p("Install Addon"))})},F=S=>{const E=document.querySelector(`[data-addon-file="${S.file}"]`);E&&(E.disabled=!0,E.innerHTML='<span class="el-icon-loading"></span> '+p("Activating...")),a.$post("settings/payment-methods/activate-addon",{plugin_file:S.file}).then(k=>{Y.success({message:k.message||p("Addon activated successfully!")}),setTimeout(()=>{window.location.reload()},1e3)}).catch(k=>{Y.error({message:(k==null?void 0:k.message)||p("Failed to activate addon")}),E&&(E.disabled=!1,E.innerHTML='<svg style="width: 18px; height: 18px; margin-right: 8px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>'+p("Activate Addon"))})};return he(()=>{B(),document.addEventListener("click",w)}),Re(()=>{document.removeEventListener("click",w)}),(S,E)=>{const k=b("el-skeleton-item"),Q=b("el-skeleton"),I=b("el-icon"),D=b("el-tooltip"),M=b("el-switch"),$=b("el-checkbox"),V=b("el-option"),L=b("el-select"),R=b("el-radio"),K=b("el-radio-group"),J=b("el-input"),W=b("el-input-number"),ae=b("el-checkbox-group");return A(),_("div",{class:oe([g.value==="test"?"fct_test_mode":"fct_live_mode","grid grid-cols-1 gap-4"])},[(A(!0),_(H,null,X(e.fields,(Z,te)=>{var ie,P,j,G,N,ee;return A(),_("div",{class:"fct-setting-row fct-row",key:te},[Z.type==="notice"?(A(),_("div",Uk,[i("p",{innerHTML:Z.value},null,8,Sk)])):x("",!0),Z.type==="upcoming"?(A(),_("div",Ek,[i("h1",Qk,m(f(p)("Upcoming")),1)])):x("",!0),Z.type==="provider"?(A(),_("div",Dk,[Z.value=="connect"?(A(),_(H,{key:0},[e.settings.payment_mode=="test"?(A(),_(H,{key:0},[o(Q,{loading:d.value,animated:""},{template:r(()=>[o(k,{variant:"h3",class:"w-[150px] mb-3"}),o(k,{variant:"p",class:"h-[50px]"})]),_:1},8,["loading"]),d.value?x("",!0):(A(),U(Hd,{key:0,onReload_settings:E[0]||(E[0]=ne=>B()),method:e.route_name,methodName:e.methodName,methodLabel:e.methodLabel,connect_config:s.value,mode:"test",connect:l.value},null,8,["method","methodName","methodLabel","connect_config","connect"]))],64)):e.settings.payment_mode=="live"?(A(),_(H,{key:1},[d.value?x("",!0):(A(),U(Hd,{key:0,method:e.route_name,methodName:e.methodName,onReload_settings:E[1]||(E[1]=ne=>B()),connect_config:s.value,mode:"live",methodLabel:e.methodLabel,connect:n.value},null,8,["method","methodName","connect_config","methodLabel","connect"]))],64)):x("",!0),E[3]||(E[3]=i("br",null,null,-1)),i("p",Ik,m((ie=u.value)==null?void 0:ie.error),1)],64)):(A(),_("div",$k,[y.value?(A(),_("div",Tk,[i("div",null,[o(Kc,{title:f(p)("Your API setup is Up & Running ")},{default:r(()=>[i("div",Mk,[i("div",null,[i("b",null,m(f(p)("Payment API settings is enabled by defined API keys.")),1)])])]),_:1},8,["title"])])])):(A(),_("div",Vk,[i("div",null,[i("b",null,m(f(p)("Payment API settings is not enabled by API keys / Connect")),1),E[4]||(E[4]=i("br",null,null,-1)),i("p",null,m(f(p)("You can Set Up API keys defined as constant, Or use connect.")),1),i("p",Lk,m((P=u.value)==null?void 0:P.error),1)])]))]))])):x("",!0),Z.type==="enable"?(A(),_("div",Ok,[i("p",Hk,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,Rk)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(M,{modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,"active-value":"yes","inactive-value":"no","active-text":f(p)("Active"),"inactive-text":f(p)("Inactive")},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"]),Z.description?(A(),_("p",Pk,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="checkbox"?(A(),_("div",Kk,[o($,{"true-value":"yes","false-value":"no",modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,disabled:Z.disabled},{default:r(()=>[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,Nk)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),Z.description?(A(),_("p",Gk,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="select"?(A(),_("div",zk,[i("p",jk,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,Yk)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(L,{placeholder:Z.placeholder,modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,filterable:Z.filterable!==!1},{default:r(()=>[(A(!0),_(H,null,X(Z.options,(ne,Ce)=>(A(),U(V,{label:ne.label,value:ne.value,key:Ce},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable"]),Z.description?(A(),_("p",qk,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="radio"?(A(),_("div",Wk,[i("p",Xk,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,Jk)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(K,{modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne},{default:r(()=>[(A(!0),_(H,null,X(Z.options,(ne,Ce)=>(A(),U(R,{label:ne,value:Ce,key:Ce},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),Z.description?(A(),_("p",Zk,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="webhook_info"&&((j=e.settings)==null?void 0:j.payment_mode)===Z.mode?(A(),_("div",e8,[e.route_name==="paypal"&&!y.value?(A(),_("div",t8,[o(xk,{testConnect:l.value,liveConnect:n.value,webhook_info:Z.info,onReload_settings:E[2]||(E[2]=ne=>B()),mode:Z==null?void 0:Z.mode},null,8,["testConnect","liveConnect","webhook_info","mode"])])):Z.info?(A(),_("div",{key:1,innerHTML:Z.info},null,8,a8)):x("",!0)])):x("",!0),Z.type==="input"||Z.type==="password"?(A(),_("div",s8,[i("p",n8,m(Z.label),1),o(J,{type:Z.type,placeholder:Z.placeholder,modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,maxlength:Z.max_length},null,8,["type","placeholder","modelValue","onUpdate:modelValue","maxlength"]),Z.description?(A(),_("p",o8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="email"?(A(),_("div",l8,[i("p",r8,m(Z.label),1),o(J,{type:"email",placeholder:Z.placeholder,modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne},null,8,["placeholder","modelValue","onUpdate:modelValue"]),Z.description?(A(),_("p",i8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="number"?(A(),_("div",A8,[i("p",d8,m(Z.label),1),o(W,{placeholder:Z.placeholder,modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,max:Z.max,min:Z.min},null,8,["placeholder","modelValue","onUpdate:modelValue","max","min"]),Z.description?(A(),_("p",u8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="text"?(A(),_("div",c8,[i("p",p8,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,f8)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(J,{type:"text",placeholder:Z.placeholder,modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,disabled:Z.disabled,maxlength:Z.max_length},null,8,["placeholder","modelValue","onUpdate:modelValue","disabled","maxlength"]),Z.description?(A(),_("p",h8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="color"?(A(),_("div",m8,[i("p",_8,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,g8)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(dA,{modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,field:Z},null,8,["modelValue","onUpdate:modelValue","field"]),Z.description?(A(),_("p",v8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="file"?(A(),_("div",y8,[i("p",b8,[O(m(Z.label)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",{innerHTML:Z.tooltip},null,8,w8)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(Wl,{modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne,icon:"Upload",title:f(p)("Upload")},null,8,["modelValue","onUpdate:modelValue","title"]),Z.description?(A(),_("p",C8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="checkbox_group"?(A(),_("div",B8,[i("p",k8,[O(m(Z.title)+" ",1),Z.tooltip?(A(),U(D,{key:0,placement:"top-start","popper-class":"fct-tooltip"},{content:r(()=>[i("p",null,m(Z.tooltip),1)]),default:r(()=>[o(I,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),o(ae,{modelValue:e.settings[te],"onUpdate:modelValue":ne=>e.settings[te]=ne},{default:r(()=>[(A(!0),_(H,null,X(Z.options,(ne,Ce)=>(A(),U($,{label:Ce,key:Ce},{default:r(()=>[O(m(ne),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),Z.description?(A(),_("p",F8,m(Z.description),1)):x("",!0)])):x("",!0),Z.type==="html_attr"?(A(),_("div",x8,[i("div",{innerHTML:Z.value},null,8,U8)])):x("",!0),Z.type==="active_methods"?(A(),_("div",S8,[(G=Z.value)!=null&&G.activated_methods?(A(),_("div",E8,[e.settings.payment_mode==="live"&&te==="live_active_methods"?(A(),_("div",Q8,[i("p",D8,m(Z.label),1),O(" "+m(S.active_methods)+" ",1),i("ul",I8,[(A(!0),_(H,null,X(Z.value.activated_methods,(ne,Ce)=>(A(),_("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:Ce},m(ne!=null&&ne.name?ne.name:ne),1))),128))]),i("p",$8,[O(m(f(p)("You can configure methods ")),1),i("a",{href:(N=Z.value)==null?void 0:N.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},m(f(p)("here")),9,T8)])])):x("",!0),e.settings.payment_mode==="test"&&te==="test_active_methods"?(A(),_("div",M8,[i("p",V8,m(Z.label),1),i("ul",L8,[O(m(S.active_methods)+" ",1),(A(!0),_(H,null,X(Z.value.activated_methods,(ne,Ce)=>(A(),_("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:Ce},m(ne!=null&&ne.name?ne.name:ne),1))),128))]),i("p",O8,[O(m(f(p)("You can configure methods ")),1),i("a",{href:(ee=Z.value)==null?void 0:ee.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},m(f(p)("here")),9,H8)])])):x("",!0)])):x("",!0)])):x("",!0),Z.type==="tabs"?(A(),_("div",R8,[o(mk,{fields:e.fields,settings:e.settings,index:te,tabs:e.fields[te]},null,8,["fields","settings","index","tabs"])])):x("",!0),Z.type==="radio-select-dependants"?(A(),_("div",P8,[o(yk,{fields:e.fields,settings:e.settings,index:te},null,8,["fields","settings","index"])])):x("",!0)])}),128))],2)}}},K8={class:"setting-wrap"},N8={class:"setting-wrap-inner"},G8={class:"mb-5 flex items-center justify-between"},z8={class:"setting-switcher flex items-center gap-3"},j8={key:0},Y8={key:1},q8={key:2},W8={class:"setting-save-action"},X8={name:"GlobalPaymentComponents",data(){return{fields:{},settings:{},saving:!1,fetching:!1,is_key_defined:!1,labelPosition:"top",webhook_url:"",fetchRoute:"",pages:[],route_name:"",ipn_url:"Blank",verifiedMessage:!1,verifiedStatus:!1,verifying:!1,methodName:"",methodTitle:"",methodLabel:"",editDesignModal:!1,mediaSelection:[],checkout_label:"",checkout_logo:"",checkout_instructions:"",addonInfo:null,checkingUpdate:!1,updateInfo:null,updating:!1,thank_you_page_instructions:""}},watch:{$route(e,t){this.getRoute(),this.getSettings(),this.getPageName()}},methods:{editDesign(){this.$router.push({name:"payment-design",params:{method:this.route_name}})},savePaymentDesign(){this.editDesignModal=!1,this.mediaSelection.length>0?this.checkout_logo=this.mediaSelection[0].url:this.checkout_logo="",this.$post("settings/payment-methods/design",{checkout_label:this.checkout_label,checkout_logo:this.checkout_logo,checkout_instructions:this.checkout_instructions,thank_you_page_instructions:this.thank_you_page_instructions,method:this.route_name}).then(e=>{this.saving=!1,Ls("Settings updated!")})},getLogo(e){const t=e.replace(/_/g,"-");return mn.getUrl("images/payment-methods/"+t+"-icon.svg")},updateSettings(e){this.settings=e},getSettings(){this.fetching=!0,this.$get("settings/payment-methods",{method:this.route_name}).then(e=>{var t,a,s,n,l,d,u;this.fetching=!1,this.fields=e.fields,this.settings=e.settings,this.addonInfo=e.addon_info||null,this.registerCopyAction(),this.checkout_label=(t=this.settings)!=null&&t.checkout_label?(a=this.settings)==null?void 0:a.checkout_label:this.methodTitle,this.checkout_logo=(s=this.settings)==null?void 0:s.checkout_logo,this.checkout_instructions=((n=this.settings)==null?void 0:n.checkout_instructions)||"",this.thank_you_page_instructions=((l=this.settings)==null?void 0:l.thank_you_page_instructions)||"",this.mediaSelection=(d=this.settings)!=null&&d.checkout_logo?{url:(u=this.settings)==null?void 0:u.checkout_logo,id:0,title:"Checkout Logo"}:""})},saveSettings(){this.saving=!0,this.$post("settings/payment-methods",{settings:this.settings,method:this.route_name}).then(e=>{this.saving=!1,Ls("Settings updated!")}).catch(e=>{var t;this.saving=!1,qo(((t=e==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong!")})},verifyKeys(e,t){this.verifying=!0},getRoute(){var e,t,a,s,n,l,d,u,c;this.route_name=this.$route.name,this.methodName=(e=this.$route)==null?void 0:e.name,(a=(t=this.$route)==null?void 0:t.meta)!=null&&a.admin_title?this.methodTitle=(n=(s=this.$route)==null?void 0:s.meta)==null?void 0:n.admin_title:this.methodTitle=(d=(l=this.$route)==null?void 0:l.meta)==null?void 0:d.title,this.methodLabel=(c=(u=this.$route)==null?void 0:u.meta)==null?void 0:c.label,this.fetchRoute=`settings/payments/${this.$route.name}`},getPageName(){let e="";return this.$route.meta.title?e=this.$route.meta.title+" Settings":e=this.$route.name.charAt(0).toUpperCase()+this.$route.name.slice(1).toLowerCase()+" Settings",e},checkForUpdate(){!this.addonInfo||!this.addonInfo.addon_source||(this.checkingUpdate=!0,this.$post("settings/payment-methods/check-addon-update",{source_type:this.addonInfo.addon_source.type,source_link:this.addonInfo.addon_source.link,plugin_file:this.addonInfo.addon_source.file,plugin_slug:this.addonInfo.addon_source.slug}).then(e=>{this.checkingUpdate=!1,this.updateInfo=e.update_info,this.updateInfo.has_update?this.$confirm(this.$t(`A new version (${this.updateInfo.latest_version}) is available. Current version: ${this.updateInfo.current_version}. Do you want to update now?`,{version:this.updateInfo.latest_version,current:this.updateInfo.current_version}),this.$t("Update Available"),{confirmButtonText:this.$t("Update Now"),cancelButtonText:this.$t("Later"),type:"info"}).then(()=>{this.performUpdate()}).catch(()=>{}):Ls(this.$t("You are using the latest version",{version:this.updateInfo.current_version}))}).catch(e=>{var t;this.checkingUpdate=!1,qo(((t=e==null?void 0:e.data)==null?void 0:t.message)||this.$t("Failed to check for updates"))}))},performUpdate(){!this.addonInfo||!this.addonInfo.addon_source||(this.updating=!0,this.$post("settings/payment-methods/update-addon",{source_type:this.addonInfo.addon_source.type,source_link:this.addonInfo.addon_source.link,plugin_slug:this.addonInfo.addon_source.slug,plugin_file:this.addonInfo.addon_source.file}).then(e=>{this.updating=!1,Ls(e.message||this.$t("Plugin updated successfully!")),setTimeout(()=>{window.location.reload()},1500)}).catch(e=>{var t;this.updating=!1,qo(((t=e==null?void 0:e.data)==null?void 0:t.message)||this.$t("Failed to update plugin"))}))}},mounted(){this.getRoute(),this.getSettings(),window.outerWidth<500&&(this.labelPosition="top")}},J8=Object.assign(X8,{setup(e){const t=Je().ctx;return Gs().onSave(()=>{t.saveSettings()}),(s,n)=>{var g,B;const l=b("el-breadcrumb-item"),d=b("el-breadcrumb"),u=b("el-button"),c=b("el-switch"),h=b("Edit"),v=b("el-icon"),y=b("el-skeleton");return A(),_("div",K8,[i("div",N8,[i("div",G8,[o(d,{class:"mb-0","separator-icon":f(la)},{default:r(()=>[o(l,{to:{path:"/settings/payments"}},{default:r(()=>[O(m(s.$t("Payment Settings")),1)]),_:1}),o(l,null,{default:r(()=>[i("span",null,m(s.methodTitle),1)]),_:1})]),_:1},8,["separator-icon"]),i("div",z8,[s.addonInfo&&((g=s.addonInfo.addon_source)!=null&&g.is_installed||s.settings.is_active==="yes")?(A(),U(u,{key:0,onClick:s.checkForUpdate,loading:s.checkingUpdate||s.updating,disabled:s.updating,type:(B=s.updateInfo)!=null&&B.has_update?"primary":"default",size:"small"},{default:r(()=>[s.updating?(A(),_("span",j8,m(s.$t("Updating...")),1)):s.checkingUpdate?(A(),_("span",Y8,m(s.$t("Checking...")),1)):(A(),_("span",q8,m(s.$t("Check Update")),1))]),_:1},8,["onClick","loading","disabled","type"])):x("",!0),o(c,{modelValue:s.settings.is_active,"onUpdate:modelValue":n[0]||(n[0]=w=>s.settings.is_active=w),"active-value":"yes","inactive-value":"no","inactive-text":s.$t("Payment Activation")},null,8,["modelValue","inactive-text"])])]),o(re,null,{default:r(()=>[o(Ae,{title:s.methodTitle,border_bottom:""},{action:r(()=>[o(v,{class:"text-gray-500 cursor-pointer",onClick:s.editDesign},{default:r(()=>[o(h)]),_:1},8,["onClick"])]),_:1},8,["title"]),o(le,{class:"pt-0"},{default:r(()=>[o(y,{loading:s.fetching,animated:"",rows:6,class:"pt-5"},null,8,["loading"]),s.fetching?x("",!0):(A(),U(fA,{key:0,onOnSettingsChange:s.updateSettings,route_name:s.route_name,methodName:s.methodName,methodTitle:s.methodTitle,methodLabel:s.methodLabel,fields:s.fields,settings:s.settings},null,8,["onOnSettingsChange","route_name","methodName","methodTitle","methodLabel","fields","settings"]))]),_:1})]),_:1}),i("div",W8,[o(u,{onClick:n[1]||(n[1]=w=>s.saveSettings()),type:"primary",loading:s.saving},{default:r(()=>[O(m(s.saving?s.$t("Saving"):s.$t("Save Settings")),1)]),_:1},8,["loading"])])])])}}}),Z8={class:"setting-wrap"},eF={class:"mb-5 flex items-center justify-between"},tF={class:"mt-4 text-right w-full"},aF={name:"PaymentDesign",data(){return{settings:{},fetching:!1,saving:!1,mediaSelection:[],checkout_label:"",checkout_logo:"",checkout_instructions:"",thank_you_page_instructions:"",route_name:"",methodTitle:"",routeLabel:""}},methods:{goBack(){this.$router.push({path:`/settings/payments/${this.route_name}`})},savePaymentDesign(){var t;this.saving=!0;let e="";Array.isArray(this.mediaSelection)&&this.mediaSelection.length>0?e=((t=this.mediaSelection[0])==null?void 0:t.url)||"":this.mediaSelection&&typeof this.mediaSelection=="object"&&this.mediaSelection.url?e=this.mediaSelection.url:typeof this.mediaSelection=="string"&&(e=this.mediaSelection),this.checkout_logo=e||"",this.$post("settings/payment-methods/design",{checkout_label:this.checkout_label,checkout_logo:this.checkout_logo,checkout_instructions:this.checkout_instructions,thank_you_page_instructions:this.thank_you_page_instructions,method:this.route_name}).then(a=>{this.saving=!1,Ls("Settings updated!"),this.getSettings()}).catch(()=>{this.saving=!1,qo("Something went wrong!")})},getSettings(){this.fetching=!0,this.$get("settings/payment-methods",{method:this.route_name}).then(e=>{var t,a,s,n,l,d,u;this.fetching=!1,this.settings=e.settings,this.checkout_label=(t=this.settings)!=null&&t.checkout_label?(a=this.settings)==null?void 0:a.checkout_label:this.methodTitle,this.checkout_logo=(s=this.settings)==null?void 0:s.checkout_logo,this.checkout_instructions=((n=this.settings)==null?void 0:n.checkout_instructions)||"",this.thank_you_page_instructions=((l=this.settings)==null?void 0:l.thank_you_page_instructions)||"",this.mediaSelection=(d=this.settings)!=null&&d.checkout_logo?[{url:(u=this.settings)==null?void 0:u.checkout_logo,id:0,title:"Checkout Logo"}]:""}).catch(()=>{this.fetching=!1})},initRouteData(){var a,s,n,l,d,u;this.route_name=this.$route.params.method||this.$route.name,(s=(a=this.$route)==null?void 0:a.meta)!=null&&s.admin_title?this.methodTitle=(l=(n=this.$route)==null?void 0:n.meta)==null?void 0:l.admin_title:this.methodTitle=((u=(d=this.$route)==null?void 0:d.meta)==null?void 0:u.title)||"",this.routeLabel=this.methodTitle||this.route_name;const e=this.$t("Gateway & checkout instructions"),t=this.methodTitle?`${this.methodTitle} - ${e}`:e;this.$route&&this.$route.meta&&(this.$route.meta.title=t)}},mounted(){this.initRouteData(),this.getSettings()}},sF=Object.assign(aF,{setup(e){return(t,a)=>{const s=b("el-breadcrumb-item"),n=b("el-breadcrumb"),l=b("el-icon"),d=b("el-button"),u=b("el-skeleton"),c=b("el-input"),h=b("el-form-item"),v=b("el-form");return A(),_("div",Z8,[i("div",eF,[o(n,{class:"mb-0","separator-icon":f(la)},{default:r(()=>[o(s,{to:{path:"/settings/payments"}},{default:r(()=>[O(m(t.$t("Payment Settings")),1)]),_:1}),o(s,null,{default:r(()=>[i("span",{class:"cursor-pointer",onClick:a[0]||(a[0]=(...y)=>t.goBack&&t.goBack(...y))},m(t.$route.params.method),1)]),_:1}),o(s,null,{default:r(()=>[i("span",null,m(t.$t("Checkout Customization")),1)]),_:1})]),_:1},8,["separator-icon"])]),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Customization"),border_bottom:""},{action:r(()=>[o(d,{onClick:t.goBack,type:"text",class:"cursor-pointer border-none p-0"},{default:r(()=>[o(l,{class:"text-gray-500 cursor-pointer",onClick:t.goBack},{default:r(()=>[o(f(Ef))]),_:1},8,["onClick"]),O(" "+m(t.$t("Back to Gateway Settings")),1)]),_:1},8,["onClick"])]),_:1},8,["title"]),o(le,null,{default:r(()=>[o(u,{loading:t.fetching,animated:"",rows:4,class:"pt-2"},null,8,["loading"]),t.fetching?x("",!0):(A(),U(v,{key:0,"label-position":"left"},{default:r(()=>[o(h,{label:t.$t("Checkout Label")},{default:r(()=>[o(c,{type:"text",modelValue:t.checkout_label,"onUpdate:modelValue":a[1]||(a[1]=y=>t.checkout_label=y)},null,8,["modelValue"])]),_:1},8,["label"]),o(h,{label:t.$t("Checkout Logo")},{default:r(()=>[o(Wl,{modelValue:t.mediaSelection,"onUpdate:modelValue":a[2]||(a[2]=y=>t.mediaSelection=y),icon:"Upload",title:t.$t("Upload Logo")},null,8,["modelValue","title"])]),_:1},8,["label"]),o(h,{"label-position":"top"},{default:r(()=>[o(Ge,{title:t.$t("Checkout Instructions"),content:t.$t("Checkout Instructions will be displayed on the checkout page gateway section.")},null,8,["title","content"]),o(xs,{modelValue:t.checkout_instructions,"onUpdate:modelValue":a[3]||(a[3]=y=>t.checkout_instructions=y),onUpdate:a[4]||(a[4]=y=>{t.checkout_instructions=y})},null,8,["modelValue"])]),_:1}),a[7]||(a[7]=i("div",{class:"h-10"},null,-1)),o(h,{"label-position":"top"},{default:r(()=>[o(Ge,{title:t.$t("Thank you page Instruction"),content:t.$t("Thank you page Instruction will be displayed on the thank you page receipt section.")},null,8,["title","content"]),o(xs,{modelValue:t.thank_you_page_instructions,"onUpdate:modelValue":a[5]||(a[5]=y=>t.thank_you_page_instructions=y),onUpdate:a[6]||(a[6]=y=>{t.thank_you_page_instructions=y})},null,8,["modelValue"])]),_:1}),o(h,null,{default:r(()=>[i("div",tF,[o(d,{type:"primary",loading:t.saving,onClick:t.savePaymentDesign},{default:r(()=>[O(m(t.saving?t.$t("Saving"):t.$t("Update")),1)]),_:1},8,["loading","onClick"])])]),_:1})]),_:1,__:[7]}))]),_:1})]),_:1})])}}}),nF={class:"fct-integration-setting-content"},oF={class:"fct-integration-setting-head"},lF={class:"flex items-center gap-3 mb-2"},rF=["src"],iF={class:"title"},AF=["innerHTML"],dF={key:0,class:"integration_success_state"},uF=["innerHTML"],cF={key:1,class:"fct-integration-setting-body"},pF={class:"fct-integration-setting-body-inner"},fF=["innerHTML"],hF=["innerHTML"],mF=["target","href"],_F={key:0},gF={key:0,class:"fct-integration-setting-body-footer"},vF={key:2},yF={name:"generalIntegration",props:["settings_key"],components:{InfoFilled:ca,Setting:Qf},data(){return{integration:{},loading:!1,saving:!1,settings:{},error_message:""}},watch:{settings_key(){this.integration={},this.settings={},this.getIntegrationSettings()}},methods:{save(){this.saving=!0,this.$post("integration/global-settings",{settings_key:this.settings_key,integration:this.integration}).then(e=>{if(this.saving=!1,this.handleSuccess(e.data.message),e.data.redirect_url){window.location.href=e.data.redirect_url;return}this.integration.status=e.data.status}).catch(e=>{this.integration.status=!1,e&&e.data.message?this.handleError(e.data.message):e&&e.responseJSON.data.message&&this.handleerror(e.responseJSON.data.message)})},getIntegrationSettings(){this.loading=!0,this.$get("integration/global-settings",{settings_key:this.settings_key}).then(e=>{this.loading=!1,this.integration=e.data.integration,this.settings=e.data.settings}).catch(e=>{this.error_message=e.responseJSON.data.message})},disconnect(e){this.integration=e,this.save()},authenticate(e,t){this.loading=!0,this.$post("integration/global-settings"+e,{settings_key:this.settings_key,integration:this.integration}).then(a=>{this.loading=!1,a.data.url?window.open(a.data.url,"_blank"):this.handleSuccess(a.data.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})}},mounted(){this.getIntegrationSettings()}},bF=Object.assign(yF,{setup(e){const t=Je().ctx;return Gs().onSave(()=>{t.integration.status||t.save()}),(s,n)=>{const l=b("el-button"),d=b("el-icon"),u=b("el-tooltip"),c=b("el-option"),h=b("el-select"),v=b("el-input"),y=b("el-form-item"),g=b("el-form"),B=Qt("loading");return A(),_("div",nF,[i("div",oF,[i("div",lF,[s.settings.logo?(A(),_("img",{key:0,class:"h-8",src:s.settings.logo,alt:""},null,8,rF)):x("",!0),i("h3",iF,m(s.settings.menu_title),1)]),i("p",{class:"desc",innerHTML:s.settings.menu_description},null,8,AF)]),s.settings.hide_on_valid&&s.integration.status?(A(),_("div",dF,[i("p",{innerHTML:s.settings.discard_settings.section_description},null,8,uF),i("div",null,[o(l,{onClick:n[0]||(n[0]=w=>s.disconnect(s.settings.discard_settings.data)),type:"danger",plain:""},{default:r(()=>[O(m(s.settings.discard_settings.disconnect_button_text),1)]),_:1}),s.settings.discard_settings.show_verify?(A(),U(l,{key:0,onClick:n[1]||(n[1]=w=>s.save()),type:"primary"},{default:r(()=>[O(m(s.settings.discard_settings.verify_button_text),1)]),_:1})):x("",!0)])])):pt((A(),_("div",cF,[i("div",pF,[s.settings.config_instruction&&!s.integration.status?(A(),_("div",{key:0,class:"integration_instraction",innerHTML:s.settings.config_instruction},null,8,fF)):x("",!0),o(g,{"label-width":"205px","label-position":"top"},{default:r(()=>[(A(!0),_(H,null,X(s.settings.fields,(w,C)=>(A(),U(y,{key:C},{label:r(()=>[O(m(w.label)+" ",1),w.label_tips?(A(),U(u,{key:0,"popper-class":"fct-tooltip",placement:"top-start"},{content:r(()=>[i("div",{innerHTML:w.label_tips},null,8,hF)]),default:r(()=>[o(d,null,{default:r(()=>[o(f(ca))]),_:1})]),_:2},1024)):x("",!0)]),default:r(()=>[w.type=="authenticate-button"?(A(),U(l,{key:0,onClick:F=>s.authenticate(w.end_point,w.params)},{default:r(()=>[O(m(w.button_text),1)]),_:2},1032,["onClick"])):w.type=="select"?(A(),U(h,{key:1,modelValue:s.integration[C],"onUpdate:modelValue":F=>s.integration[C]=F},{default:r(()=>[(A(!0),_(H,null,X(w.options,(F,S)=>(A(),U(c,{key:S,label:F,value:S},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):w.type=="link"?(A(),_(H,{key:2},[i("a",{target:w.target,class:oe(w.btn_class),href:w.link},m(w.link_text),11,mF),i("p",null,m(w.tips),1)],64)):(A(),_(H,{key:3},[o(v,{placeholder:w.placeholder,type:w.type,modelValue:s.integration[C],"onUpdate:modelValue":F=>s.integration[C]=F},null,8,["placeholder","type","modelValue","onUpdate:modelValue"]),w.tips?(A(),_("p",_F,m(w.tips),1)):x("",!0)],64))]),_:2},1024))),128))]),_:1})]),s.loading?x("",!0):(A(),_("div",gF,[o(l,{type:"primary",onClick:s.save},{default:r(()=>[O(m(s.settings.save_button_text),1)]),_:1},8,["onClick"])]))])),[[B,s.loading]]),s.error_message?(A(),_("p",vF,m(s.error_message),1)):x("",!0)])}}}),wF={class:"fct-integration-setting-container fct-layout-width"},CF={class:"single-page-header"},BF={class:"single-page-body"},kF={class:"fct-integration-setting-wrap"},FF={name:"IntegrationEditor"},xF=Object.assign(FF,{setup(e){return(t,a)=>{const s=b("el-breadcrumb-item"),n=b("el-breadcrumb");return A(),_("div",wF,[i("div",CF,[o(n,{"separator-icon":f(la)},{default:r(()=>[o(s,{to:{name:"integrations"}},{default:r(()=>[O(m(t.$t("Integrations")),1)]),_:1}),o(s,null,{default:r(()=>[O(m(f(rt).capitalize(t.$route.params.integration_name)),1)]),_:1})]),_:1},8,["separator-icon"])]),i("div",BF,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[i("div",kF,[o(bF,{settings_key:t.$route.params.integration_name},null,8,["settings_key"])])]),_:1})]),_:1})])])}}}),UF={class:"dialog-footer"},SF={__name:"CreatePageButton",props:{title:{default:p("Create Page")},content:{required:!0,type:String}},emits:["onPageCreated"],setup(e,{emit:t}){const a=e,s=t,n=T(!1),l=T(a.title),d=()=>{se.post("onboarding/create-page",{page_name:l.value,content:a.content}).then(u=>{s("onPageCreated",{value:u.page_id,label:`${l.value}( ${u.page_id})`,page_link:u.link}),l.value="",n.value=!1,Y.success(p("The page created successfully."))}).catch(u=>{if(u&&u.hasOwnProperty("page_name")){const c=Object.entries(u.page_name).length;let h="",v=0;for(const y in u.page_name)h+=u.page_name[y],v!==c&&(h+=`
`),v++;Y.error(h)}else Y.error(p("Sorry, Unable To Create Page!!"))})};return(u,c)=>{const h=b("el-input"),v=b("el-form-item"),y=b("el-form"),g=b("el-button"),B=b("el-dialog");return A(),_(H,null,[o(we,{onClick:c[0]||(c[0]=je(w=>n.value=!0,["prevent"])),tag:"button",bg:"info",outline:""},{default:r(()=>[o(z,{name:"Plus"})]),_:1}),o(B,{modelValue:n.value,"onUpdate:modelValue":c[3]||(c[3]=w=>n.value=w),title:f(p)("Create %s Page",e.title),width:"35%",center:"","append-to-body":!0},{footer:r(()=>[i("div",UF,[o(g,{onClick:c[2]||(c[2]=w=>n.value=!1),type:"info",soft:""},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(g,{type:"primary",onClick:d},{default:r(()=>[O(m(f(p)("Create Page")),1)]),_:1})])]),default:r(()=>[o(y,{"require-asterisk-position":"right","label-position":"top",onSubmit:je(d,["prevent"])},{default:r(()=>[o(v,{label:f(p)("Page Name"),required:""},{default:r(()=>[o(h,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=w=>l.value=w),placeholder:f(p)("Page Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},EF={class:"fct-form-group"},QF={class:"fct-form-group-inner"},DF={class:"input-prepend"},IF={class:"input-append"},$F={__name:"PageSelector",props:_a({title:{type:String,required:!0},pages:{type:Array,required:!0},modelId:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:_a(["onPageCreated"],["update:modelValue"]),setup(e,{emit:t}){const a=xa(e,"modelValue",{get:d=>d?typeof d=="string"?Number(d):d:""}),s=t,n=T(!1),l=d=>{n.value=d};return(d,u)=>{const c=b("el-option"),h=b("el-select");return A(),_("div",EF,[i("label",null,m(e.title),1),i("div",QF,[i("div",{class:oe(["fct-input-group w-full",{focused:n.value}])},[i("div",DF,[o(h,{filterable:"",modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v),onFocus:u[1]||(u[1]=v=>l(!0)),onBlur:u[2]||(u[2]=v=>l(!1)),placeholder:f(p)("Select"),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(e.pages,(v,y)=>(A(),U(c,{key:y,label:v.label,value:Number(v.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",IF,[o(SF,{title:e.title,onOnPageCreated:u[3]||(u[3]=v=>s("onPageCreated",v,e.modelId)),content:e.modelId},null,8,["title","content"])])],2)])])}}},TF={class:"fct-onboarding-wrap"},MF={key:0,class:"fct-onboarding-card"},VF={class:"fct-onboarding-card-body"},LF={class:"fct-onboarding-content-box"},OF={class:"fct-onboarding-card-head"},HF={class:"fct-onboarding-card-head-top"},RF=["src","alt"],PF={class:"fct-onboarding-steps-count"},KF={class:"fct-onboarding-card-title"},NF={class:"fct-onboarding-card-text"},GF={class:"fct-onboarding-content-box-inner"},zF={class:"fct-onboarding-form-body"},jF={class:"fct-form-group"},YF={for:"store-country"},qF={class:"fct-form-group"},WF={class:"fct-form-group"},XF={class:"fct-form-group"},JF={class:"fct-onboarding-form-body"},ZF={class:"fct-onboarding-form-body-header"},e4={class:"left"},t4={class:"fct-onboarding-form-body-header__title"},a4={class:"fct-onboarding-form-body-header__desc"},s4={key:0,class:"fct-onboarding-form-body-header__action"},n4={class:"fct-form-group"},o4={class:"fct-onboarding-form-body"},l4={class:"fct-form-group"},r4={class:"marker"},i4={class:"label"},A4={class:"marker"},d4={key:0,class:"fct-onboarding-bottom"},u4={class:"fct-onboarding-bottom-left"},c4={class:"fct-onboarding-bottom-right"},p4={key:0,class:"cmd"},f4=4,h4={__name:"Onboarding",setup(e){const t=Je().ctx,a=T(1),s=T([]),n=T({});T(!1);const l=T(!1),d=T([]),u=T("start-from-scratch"),c=T(!1);T("auto-generate-pages"),T([1]);const h=T("Welcome aboard! Lets create your online store."),v=mn.getUrl("images/logo/logo-full-dark.svg"),y=mn.getUrl("images/logo/logo-full.svg"),g=T(De.get("asset_url")+"/images/logo/logo-full-dark.svg"),B=T(!1),w=T("Select Pages"),C=T("Select the pages you'd like from your website"),F=T(!1),S=Gs();Je().ctx;const E=()=>{a.value!==1&&(a.value--,Q())},k=()=>{a.value!==f4&&(a.value++,Q())};S.onSave(()=>{a.value===3&&J()});const Q=()=>{a.value===2?h.value=p("Setup Your Pages"):a.value===3?h.value=p("Setup Your Products"):a.value===4?h.value=p("Setup Your Payments"):h.value=p("Welcome aboard! Lets create your online store.")},I=()=>{l.value=!0,c.value=!0,t.$get("onboarding/",{}).then(P=>{s.value=P.pages,n.value=P.currencies,V.value=P.default_settings,l.value=!1,c.value=!1})},D=()=>{l.value=!0,c.value=!0,se.post("onboarding/create-pages",{}).then(P=>{s.value=P.pages,n.value=P.currencies,Object.keys(M).forEach(function(j){V.value[j]=P.default_settings[j]+""}),l.value=!1,c.value=!1,F.value=!0,w.value="Existing Pages",C.value="Select the pages you'd like from the list provided."})},M={checkout_page_id:"",cart_page_id:"",receipt_page_id:"",shop_page_id:"",customer_profile_page_id:""},$=P=>{switch(P){case"checkout_page_id":return p("Checkout");case"cart_page_id":return p("Cart");case"receipt_page_id":return p("Receipt");case"shop_page_id":return p("Shop");case"customer_profile_page_id":return p("Customer Profile")}},V=T({store_name:"",store_logo:"",store_country:"",currency:"",category:"",...M}),L=T([]),R=(P,j)=>{s.value.push(P),V.value[j]=P.value},K=(P=0)=>{if(u.value===null||u.value==="start-from-scratch")return;const j=d.value[u.value];P>j.count-1||se.post("products/create-dummy",{category:j.category,index:P}).then(G=>{K(P+1)}).catch(G=>{G.code===400?console.log(G):K(P+1),Y.error(G.message)})},J=()=>{var j;if(B.value=!0,K(),c.value===!0)return;c.value=!0;let P=JSON.parse(JSON.stringify(V.value));Array.isArray(P.store_logo)&&P.store_logo.length>0&&(P.store_logo=(j=P.store_logo)==null?void 0:j[0]),se.post("onboarding/",P).then(G=>{c.value=!1,Y.success(G.message),setTimeout(()=>{B.value=!1,W()},300)}).catch(G=>{c.value=!1,Y.error(G)})},W=()=>{if(window.location.href=De.get("dashboard_url"),u.value!==null&&u.value!=="start-from-scratch"){const P={};P.import_product=u.value;const j=qr.appendToVueUrl(null,P);window.location.href=qr.appendQueryParams(j)}},ae=()=>{W()},Z=P=>{pe.isDark()?g.value=y:g.value=v},te=()=>{L.value.length>0||se.get("address-info/countries").then(P=>{L.value=P.data}).catch(P=>{console.log(P,"errors")}).finally(()=>{})},ie=P=>{P!==""&&se.post("settings/store",{store_country:P,store_name:V.value.store_name,settings_name:"store_setup"}).then(j=>{}).catch(j=>{console.log(j,"errors")}).finally(()=>{})};return he(()=>{window.addEventListener("onFluentCartThemeChange",Z),d.value=De.get("dummy_product_info"),jQuery(".fca_admin_menu").hide(),jQuery("body").addClass("fct-onboarding-body"),I(),g.value=pe.isDark()?y:v,te()}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",Z),jQuery(".fca_admin_menu").show(),jQuery("body").removeClass("fct-onboarding-body")}),(P,j)=>{const G=b("el-progress"),N=b("el-option"),ee=b("el-select"),ne=b("el-input"),Ce=b("el-button"),Qe=b("el-icon"),_e=b("el-radio-button"),Ie=b("el-radio-group"),xe=Qt("loading");return A(),_(H,null,[i("div",TF,[a.value<4?(A(),_("div",MF,[pt((A(),_("div",VF,[i("div",LF,[i("div",OF,[i("div",HF,[i("img",{src:g.value,alt:f(p)("Fluent Cart")},null,8,RF),i("div",PF,m(f(p)("Step %s of 3",a.value)),1),o(G,{percentage:a.value/3*100,"stroke-width":8,"show-text":!1,class:"fct-onboarding-progress"},null,8,["percentage"])]),i("h2",KF,m(h.value),1),i("p",NF,m(f(p)("You've successfully Installed The Plugin.")),1)]),i("div",GF,[i("div",{class:oe(`fct-onboarding-form-wrap ${a.value===1?"active":""}`)},[i("div",zF,[i("div",jF,[i("label",YF,m(f(p)("Store Country")),1),o(ee,{modelValue:V.value.store_country,"onUpdate:modelValue":j[0]||(j[0]=$e=>V.value.store_country=$e),placeholder:f(p)("Store Country"),onChange:ie,filterable:""},{default:r(()=>[(A(!0),_(H,null,X(L.value,($e,Se)=>(A(),U(N,{key:Se,label:$e.name,value:$e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",qF,[i("label",null,m(f(p)("Shop Name")),1),o(ne,{modelValue:V.value.store_name,"onUpdate:modelValue":j[1]||(j[1]=$e=>V.value.store_name=$e)},null,8,["modelValue"])]),i("div",WF,[i("label",null,m(f(p)("Store Currency")),1),o(ee,{modelValue:V.value.currency,"onUpdate:modelValue":j[2]||(j[2]=$e=>V.value.currency=$e),filterable:"",placeholder:f(p)("Select")},{default:r(()=>[(A(!0),_(H,null,X(n.value,($e,Se)=>(A(),U(N,{key:Se,label:$e.label,value:$e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),i("div",XF,[i("label",null,m(f(p)("Shop Image/Logo")),1),o(Wl,{modelValue:V.value.store_logo,"onUpdate:modelValue":j[3]||(j[3]=$e=>V.value.store_logo=$e),showSupported:"",icon:"Upload",title:f(p)("Upload")},null,8,["modelValue","title"])])])],2),i("div",{class:oe(`fct-onboarding-form-page-setup fct-onboarding-form-wrap ${a.value===2?"active":""}`)},[i("div",JF,[i("div",ZF,[i("div",e4,[i("div",t4,m(w.value),1),i("div",a4,m(C.value),1)]),F.value?x("",!0):(A(),_("div",s4,[o(Ce,{onClick:D},{default:r(()=>[o(z,{name:"MagicPen"}),O(" "+m(f(p)("Generate All Pages")),1)]),_:1})]))]),(A(),_(H,null,X(M,($e,Se)=>i("div",n4,[o($F,{title:$(Se),pages:s.value,modelId:Se,modelValue:V.value[Se],"onUpdate:modelValue":qe=>V.value[Se]=qe,onOnPageCreated:R},null,8,["title","pages","modelId","modelValue","onUpdate:modelValue"])])),64))])],2),i("div",{class:oe(`fct-onboarding-form-wrap ${a.value===3?"active":""}`)},[i("div",o4,[i("div",l4,[o(Ie,{class:"fct-import-onboarding-products",modelValue:u.value,"onUpdate:modelValue":j[4]||(j[4]=$e=>u.value=$e),size:"large"},{default:r(()=>[o(_e,{value:"start-from-scratch"},{default:r(()=>[o(z,{name:"Scratch"}),j[5]||(j[5]=i("span",{class:"label"},[O("Start "),i("br"),O("From scratch")],-1)),i("span",r4,[o(Qe,null,{default:r(()=>[o(f(rl))]),_:1})])]),_:1,__:[5]}),(A(!0),_(H,null,X(d.value,($e,Se)=>(A(),U(_e,{key:Se,value:Se},{default:r(()=>[o(z,{name:$e.icon},null,8,["name"]),i("span",i4,m($e.title),1),i("span",A4,[o(Qe,null,{default:r(()=>[o(f(rl))]),_:1})])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])],2)])])])),[[xe,l.value]])])):x("",!0)]),a.value<4?(A(),_("div",d4,[i("div",u4,[a.value>1?(A(),U(Ce,{key:0,text:"",onClick:ae},{default:r(()=>[O(m(f(p)("Skip All")),1)]),_:1})):x("",!0)]),i("div",c4,[o(Ce,{onClick:E,type:"info",plain:"",disabled:a.value===1},{default:r(()=>[O(m(f(p)("Go Back")),1)]),_:1},8,["disabled"]),a.value<3?(A(),U(Ce,{key:0,onClick:k,type:"primary"},{default:r(()=>[O(m(f(p)("Continue")),1)]),_:1})):x("",!0),a.value===3?(A(),U(Ce,{key:1,onClick:J,type:"primary",loading:B.value},{default:r(()=>[B.value?x("",!0):(A(),_("span",p4,"s")),O(" "+m(B.value?f(p)("Saving"):f(p)("Save")),1)]),_:1},8,["loading"])):x("",!0)])])):x("",!0)],64)}}},m4={class:"fct-orders-route-wrap"},_4=Object.assign({name:"OrdersRoute"},{__name:"OrdersRoute",setup(e){return(t,a)=>{const s=b("router-view");return A(),_("div",m4,[o(s)])}}});/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Rd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rd(Object(a),!0).forEach(function(s){g4(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rd(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function el(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?el=function(t){return typeof t}:el=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(e)}function g4(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ds(){return ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ds.apply(this,arguments)}function v4(e,t){if(e==null)return{};var a={},s=Object.keys(e),n,l;for(l=0;l<s.length;l++)n=s[l],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function y4(e,t){if(e==null)return{};var a=v4(e,t),s,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var b4="1.14.0";function is(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var cs=is(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fo=is(/Edge/i),Pd=is(/firefox/i),Xn=is(/safari/i)&&!is(/chrome/i)&&!is(/android/i),np=is(/iP(ad|od|hone)/i),w4=is(/chrome/i)&&is(/android/i),op={capture:!1,passive:!1};function Xe(e,t,a){e.addEventListener(t,a,!cs&&op)}function Ye(e,t,a){e.removeEventListener(t,a,!cs&&op)}function wl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function C4(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ka(e,t,a,s){if(e){a=a||document;do{if(t!=null&&(t[0]===">"?e.parentNode===a&&wl(e,t):wl(e,t))||s&&e===a)return e;if(e===a)break}while(e=C4(e))}return null}var Kd=/\s+/g;function da(e,t,a){if(e&&t)if(e.classList)e.classList[a?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(Kd," ").replace(" "+t+" "," ");e.className=(s+(a?" "+t:"")).replace(Kd," ")}}function Me(e,t,a){var s=e&&e.style;if(s){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(a=e.currentStyle),t===void 0?a:a[t];!(t in s)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),s[t]=a+(typeof a=="string"?"":"px")}}function hn(e,t){var a="";if(typeof e=="string")a=e;else do{var s=Me(e,"transform");s&&s!=="none"&&(a=s+" "+a)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(a)}function lp(e,t,a){if(e){var s=e.getElementsByTagName(t),n=0,l=s.length;if(a)for(;n<l;n++)a(s[n],n);return s}return[]}function za(){var e=document.scrollingElement;return e||document.documentElement}function It(e,t,a,s,n){if(!(!e.getBoundingClientRect&&e!==window)){var l,d,u,c,h,v,y;if(e!==window&&e.parentNode&&e!==za()?(l=e.getBoundingClientRect(),d=l.top,u=l.left,c=l.bottom,h=l.right,v=l.height,y=l.width):(d=0,u=0,c=window.innerHeight,h=window.innerWidth,v=window.innerHeight,y=window.innerWidth),(t||a)&&e!==window&&(n=n||e.parentNode,!cs))do if(n&&n.getBoundingClientRect&&(Me(n,"transform")!=="none"||a&&Me(n,"position")!=="static")){var g=n.getBoundingClientRect();d-=g.top+parseInt(Me(n,"border-top-width")),u-=g.left+parseInt(Me(n,"border-left-width")),c=d+l.height,h=u+l.width;break}while(n=n.parentNode);if(s&&e!==window){var B=hn(n||e),w=B&&B.a,C=B&&B.d;B&&(d/=C,u/=w,y/=w,v/=C,c=d+v,h=u+y)}return{top:d,left:u,bottom:c,right:h,width:y,height:v}}}function Nd(e,t,a){for(var s=ws(e,!0),n=It(e)[t];s;){var l=It(s)[a],d=void 0;if(d=n>=l,!d)return s;if(s===za())break;s=ws(s,!1)}return!1}function vn(e,t,a,s){for(var n=0,l=0,d=e.children;l<d.length;){if(d[l].style.display!=="none"&&d[l]!==Ve.ghost&&(s||d[l]!==Ve.dragged)&&Ka(d[l],a.draggable,e,!1)){if(n===t)return d[l];n++}l++}return null}function hA(e,t){for(var a=e.lastElementChild;a&&(a===Ve.ghost||Me(a,"display")==="none"||t&&!wl(a,t));)a=a.previousElementSibling;return a||null}function ya(e,t){var a=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ve.clone&&(!t||wl(e,t))&&a++;return a}function Gd(e){var t=0,a=0,s=za();if(e)do{var n=hn(e),l=n.a,d=n.d;t+=e.scrollLeft*l,a+=e.scrollTop*d}while(e!==s&&(e=e.parentNode));return[t,a]}function B4(e,t){for(var a in e)if(e.hasOwnProperty(a)){for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[a][s])return Number(a)}return-1}function ws(e,t){if(!e||!e.getBoundingClientRect)return za();var a=e,s=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var n=Me(a);if(a.clientWidth<a.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return za();if(s||t)return a;s=!0}}while(a=a.parentNode);return za()}function k4(e,t){if(e&&t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function Er(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Jn;function rp(e,t){return function(){if(!Jn){var a=arguments,s=this;a.length===1?e.call(s,a[0]):e.apply(s,a),Jn=setTimeout(function(){Jn=void 0},t)}}}function F4(){clearTimeout(Jn),Jn=void 0}function ip(e,t,a){e.scrollLeft+=t,e.scrollTop+=a}function Ap(e){var t=window.Polymer,a=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):a?a(e).clone(!0)[0]:e.cloneNode(!0)}var fa="Sortable"+new Date().getTime();function x4(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(n){if(!(Me(n,"display")==="none"||n===Ve.ghost)){e.push({target:n,rect:It(n)});var l=Ya({},e[e.length-1].rect);if(n.thisAnimationDuration){var d=hn(n,!0);d&&(l.top-=d.f,l.left-=d.e)}n.fromRect=l}})}},addAnimationState:function(s){e.push(s)},removeAnimationState:function(s){e.splice(B4(e,{target:s}),1)},animateAll:function(s){var n=this;if(!this.options.animation){clearTimeout(t),typeof s=="function"&&s();return}var l=!1,d=0;e.forEach(function(u){var c=0,h=u.target,v=h.fromRect,y=It(h),g=h.prevFromRect,B=h.prevToRect,w=u.rect,C=hn(h,!0);C&&(y.top-=C.f,y.left-=C.e),h.toRect=y,h.thisAnimationDuration&&Er(g,y)&&!Er(v,y)&&(w.top-y.top)/(w.left-y.left)===(v.top-y.top)/(v.left-y.left)&&(c=S4(w,g,B,n.options)),Er(y,v)||(h.prevFromRect=v,h.prevToRect=y,c||(c=n.options.animation),n.animate(h,w,y,c)),c&&(l=!0,d=Math.max(d,c),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},c),h.thisAnimationDuration=c)}),clearTimeout(t),l?t=setTimeout(function(){typeof s=="function"&&s()},d):typeof s=="function"&&s(),e=[]},animate:function(s,n,l,d){if(d){Me(s,"transition",""),Me(s,"transform","");var u=hn(this.el),c=u&&u.a,h=u&&u.d,v=(n.left-l.left)/(c||1),y=(n.top-l.top)/(h||1);s.animatingX=!!v,s.animatingY=!!y,Me(s,"transform","translate3d("+v+"px,"+y+"px,0)"),this.forRepaintDummy=U4(s),Me(s,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),Me(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Me(s,"transition",""),Me(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},d)}}}}function U4(e){return e.offsetWidth}function S4(e,t,a,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-a.top,2)+Math.pow(t.left-a.left,2))*s.animation}var sn=[],Qr={initializeByDefault:!0},ho={mount:function(t){for(var a in Qr)Qr.hasOwnProperty(a)&&!(a in t)&&(t[a]=Qr[a]);sn.forEach(function(s){if(s.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),sn.push(t)},pluginEvent:function(t,a,s){var n=this;this.eventCanceled=!1,s.cancel=function(){n.eventCanceled=!0};var l=t+"Global";sn.forEach(function(d){a[d.pluginName]&&(a[d.pluginName][l]&&a[d.pluginName][l](Ya({sortable:a},s)),a.options[d.pluginName]&&a[d.pluginName][t]&&a[d.pluginName][t](Ya({sortable:a},s)))})},initializePlugins:function(t,a,s,n){sn.forEach(function(u){var c=u.pluginName;if(!(!t.options[c]&&!u.initializeByDefault)){var h=new u(t,a,t.options);h.sortable=t,h.options=t.options,t[c]=h,ds(s,h.defaults)}});for(var l in t.options)if(t.options.hasOwnProperty(l)){var d=this.modifyOption(t,l,t.options[l]);typeof d<"u"&&(t.options[l]=d)}},getEventProperties:function(t,a){var s={};return sn.forEach(function(n){typeof n.eventProperties=="function"&&ds(s,n.eventProperties.call(a[n.pluginName],t))}),s},modifyOption:function(t,a,s){var n;return sn.forEach(function(l){t[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[a]=="function"&&(n=l.optionListeners[a].call(t[l.pluginName],s))}),n}};function E4(e){var t=e.sortable,a=e.rootEl,s=e.name,n=e.targetEl,l=e.cloneEl,d=e.toEl,u=e.fromEl,c=e.oldIndex,h=e.newIndex,v=e.oldDraggableIndex,y=e.newDraggableIndex,g=e.originalEvent,B=e.putSortable,w=e.extraEventProperties;if(t=t||a&&a[fa],!!t){var C,F=t.options,S="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!cs&&!fo?C=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(C=document.createEvent("Event"),C.initEvent(s,!0,!0)),C.to=d||a,C.from=u||a,C.item=n||a,C.clone=l,C.oldIndex=c,C.newIndex=h,C.oldDraggableIndex=v,C.newDraggableIndex=y,C.originalEvent=g,C.pullMode=B?B.lastPutMode:void 0;var E=Ya(Ya({},w),ho.getEventProperties(s,t));for(var k in E)C[k]=E[k];a&&a.dispatchEvent(C),F[S]&&F[S].call(t,C)}}var Q4=["evt"],ta=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.evt,l=y4(s,Q4);ho.pluginEvent.bind(Ve)(t,a,Ya({dragEl:ye,parentEl:yt,ghostEl:He,rootEl:mt,nextEl:$s,lastDownEl:tl,cloneEl:bt,cloneHidden:gs,dragStarted:Hn,putSortable:Ht,activeSortable:Ve.active,originalEvent:n,oldIndex:pn,oldDraggableIndex:Zn,newIndex:ua,newDraggableIndex:_s,hideGhostForTarget:pp,unhideGhostForTarget:fp,cloneNowHidden:function(){gs=!0},cloneNowShown:function(){gs=!1},dispatchSortableEvent:function(u){Jt({sortable:a,name:u,originalEvent:n})}},l))};function Jt(e){E4(Ya({putSortable:Ht,cloneEl:bt,targetEl:ye,rootEl:mt,oldIndex:pn,oldDraggableIndex:Zn,newIndex:ua,newDraggableIndex:_s},e))}var ye,yt,He,mt,$s,tl,bt,gs,pn,ua,Zn,_s,Ro,Ht,un=!1,Cl=!1,Bl=[],Ds,Ea,Dr,Ir,zd,jd,Hn,nn,eo,to=!1,Po=!1,al,jt,$r=[],Ci=!1,kl=[],Zl=typeof document<"u",Ko=np,Yd=fo||cs?"cssFloat":"float",D4=Zl&&!w4&&!np&&"draggable"in document.createElement("div"),dp=function(){if(Zl){if(cs)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),up=function(t,a){var s=Me(t),n=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),l=vn(t,0,a),d=vn(t,1,a),u=l&&Me(l),c=d&&Me(d),h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+It(l).width,v=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+It(d).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return d&&(c.clear==="both"||c.clear===y)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||h>=n&&s[Yd]==="none"||d&&s[Yd]==="none"&&h+v>n)?"vertical":"horizontal"},I4=function(t,a,s){var n=s?t.left:t.top,l=s?t.right:t.bottom,d=s?t.width:t.height,u=s?a.left:a.top,c=s?a.right:a.bottom,h=s?a.width:a.height;return n===u||l===c||n+d/2===u+h/2},$4=function(t,a){var s;return Bl.some(function(n){var l=n[fa].options.emptyInsertThreshold;if(!(!l||hA(n))){var d=It(n),u=t>=d.left-l&&t<=d.right+l,c=a>=d.top-l&&a<=d.bottom+l;if(u&&c)return s=n}}),s},cp=function(t){function a(l,d){return function(u,c,h,v){var y=u.options.group.name&&c.options.group.name&&u.options.group.name===c.options.group.name;if(l==null&&(d||y))return!0;if(l==null||l===!1)return!1;if(d&&l==="clone")return l;if(typeof l=="function")return a(l(u,c,h,v),d)(u,c,h,v);var g=(d?u:c).options.group.name;return l===!0||typeof l=="string"&&l===g||l.join&&l.indexOf(g)>-1}}var s={},n=t.group;(!n||el(n)!="object")&&(n={name:n}),s.name=n.name,s.checkPull=a(n.pull,!0),s.checkPut=a(n.put),s.revertClone=n.revertClone,t.group=s},pp=function(){!dp&&He&&Me(He,"display","none")},fp=function(){!dp&&He&&Me(He,"display","")};Zl&&document.addEventListener("click",function(e){if(Cl)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Cl=!1,!1},!0);var Is=function(t){if(ye){t=t.touches?t.touches[0]:t;var a=$4(t.clientX,t.clientY);if(a){var s={};for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);s.target=s.rootEl=a,s.preventDefault=void 0,s.stopPropagation=void 0,a[fa]._onDragOver(s)}}},T4=function(t){ye&&ye.parentNode[fa]._isOutsideThisEl(t.target)};function Ve(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ds({},t),e[fa]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return up(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,u){d.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ve.supportPointer!==!1&&"PointerEvent"in window&&!Xn,emptyInsertThreshold:5};ho.initializePlugins(this,e,a);for(var s in a)!(s in t)&&(t[s]=a[s]);cp(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:D4,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Xe(e,"pointerdown",this._onTapStart):(Xe(e,"mousedown",this._onTapStart),Xe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Xe(e,"dragover",this),Xe(e,"dragenter",this)),Bl.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ds(this,x4())}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(nn=null)},_getDirection:function(t,a){return typeof this.options.direction=="function"?this.options.direction.call(this,t,a,ye):this.options.direction},_onTapStart:function(t){if(t.cancelable){var a=this,s=this.el,n=this.options,l=n.preventOnFilter,d=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(u||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,v=n.filter;if(K4(s),!ye&&!(/mousedown|pointerdown/.test(d)&&t.button!==0||n.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Xn&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=Ka(c,n.draggable,s,!1),!(c&&c.animated)&&tl!==c)){if(pn=ya(c),Zn=ya(c,n.draggable),typeof v=="function"){if(v.call(this,t,c,this)){Jt({sortable:a,rootEl:h,name:"filter",targetEl:c,toEl:s,fromEl:s}),ta("filter",a,{evt:t}),l&&t.cancelable&&t.preventDefault();return}}else if(v&&(v=v.split(",").some(function(y){if(y=Ka(h,y.trim(),s,!1),y)return Jt({sortable:a,rootEl:y,name:"filter",targetEl:c,fromEl:s,toEl:s}),ta("filter",a,{evt:t}),!0}),v)){l&&t.cancelable&&t.preventDefault();return}n.handle&&!Ka(h,n.handle,s,!1)||this._prepareDragStart(t,u,c)}}},_prepareDragStart:function(t,a,s){var n=this,l=n.el,d=n.options,u=l.ownerDocument,c;if(s&&!ye&&s.parentNode===l){var h=It(s);if(mt=l,ye=s,yt=ye.parentNode,$s=ye.nextSibling,tl=s,Ro=d.group,Ve.dragged=ye,Ds={target:ye,clientX:(a||t).clientX,clientY:(a||t).clientY},zd=Ds.clientX-h.left,jd=Ds.clientY-h.top,this._lastX=(a||t).clientX,this._lastY=(a||t).clientY,ye.style["will-change"]="all",c=function(){if(ta("delayEnded",n,{evt:t}),Ve.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Pd&&n.nativeDraggable&&(ye.draggable=!0),n._triggerDragStart(t,a),Jt({sortable:n,name:"choose",originalEvent:t}),da(ye,d.chosenClass,!0)},d.ignore.split(",").forEach(function(v){lp(ye,v.trim(),Tr)}),Xe(u,"dragover",Is),Xe(u,"mousemove",Is),Xe(u,"touchmove",Is),Xe(u,"mouseup",n._onDrop),Xe(u,"touchend",n._onDrop),Xe(u,"touchcancel",n._onDrop),Pd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ye.draggable=!0),ta("delayStart",this,{evt:t}),d.delay&&(!d.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(fo||cs))){if(Ve.eventCanceled){this._onDrop();return}Xe(u,"mouseup",n._disableDelayedDrag),Xe(u,"touchend",n._disableDelayedDrag),Xe(u,"touchcancel",n._disableDelayedDrag),Xe(u,"mousemove",n._delayedDragTouchMoveHandler),Xe(u,"touchmove",n._delayedDragTouchMoveHandler),d.supportPointer&&Xe(u,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(c,d.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var a=t.touches?t.touches[0]:t;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ye&&Tr(ye),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Ye(t,"mouseup",this._disableDelayedDrag),Ye(t,"touchend",this._disableDelayedDrag),Ye(t,"touchcancel",this._disableDelayedDrag),Ye(t,"mousemove",this._delayedDragTouchMoveHandler),Ye(t,"touchmove",this._delayedDragTouchMoveHandler),Ye(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,a){a=a||t.pointerType=="touch"&&t,!this.nativeDraggable||a?this.options.supportPointer?Xe(document,"pointermove",this._onTouchMove):a?Xe(document,"touchmove",this._onTouchMove):Xe(document,"mousemove",this._onTouchMove):(Xe(ye,"dragend",this),Xe(mt,"dragstart",this._onDragStart));try{document.selection?sl(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,a){if(un=!1,mt&&ye){ta("dragStarted",this,{evt:a}),this.nativeDraggable&&Xe(document,"dragover",T4);var s=this.options;!t&&da(ye,s.dragClass,!1),da(ye,s.ghostClass,!0),Ve.active=this,t&&this._appendGhost(),Jt({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(Ea){this._lastX=Ea.clientX,this._lastY=Ea.clientY,pp();for(var t=document.elementFromPoint(Ea.clientX,Ea.clientY),a=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ea.clientX,Ea.clientY),t!==a);)a=t;if(ye.parentNode[fa]._isOutsideThisEl(t),a)do{if(a[fa]){var s=void 0;if(s=a[fa]._onDragOver({clientX:Ea.clientX,clientY:Ea.clientY,target:t,rootEl:a}),s&&!this.options.dragoverBubble)break}t=a}while(a=a.parentNode);fp()}},_onTouchMove:function(t){if(Ds){var a=this.options,s=a.fallbackTolerance,n=a.fallbackOffset,l=t.touches?t.touches[0]:t,d=He&&hn(He,!0),u=He&&d&&d.a,c=He&&d&&d.d,h=Ko&&jt&&Gd(jt),v=(l.clientX-Ds.clientX+n.x)/(u||1)+(h?h[0]-$r[0]:0)/(u||1),y=(l.clientY-Ds.clientY+n.y)/(c||1)+(h?h[1]-$r[1]:0)/(c||1);if(!Ve.active&&!un){if(s&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<s)return;this._onDragStart(t,!0)}if(He){d?(d.e+=v-(Dr||0),d.f+=y-(Ir||0)):d={a:1,b:0,c:0,d:1,e:v,f:y};var g="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");Me(He,"webkitTransform",g),Me(He,"mozTransform",g),Me(He,"msTransform",g),Me(He,"transform",g),Dr=v,Ir=y,Ea=l}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!He){var t=this.options.fallbackOnBody?document.body:mt,a=It(ye,!0,Ko,!0,t),s=this.options;if(Ko){for(jt=t;Me(jt,"position")==="static"&&Me(jt,"transform")==="none"&&jt!==document;)jt=jt.parentNode;jt!==document.body&&jt!==document.documentElement?(jt===document&&(jt=za()),a.top+=jt.scrollTop,a.left+=jt.scrollLeft):jt=za(),$r=Gd(jt)}He=ye.cloneNode(!0),da(He,s.ghostClass,!1),da(He,s.fallbackClass,!0),da(He,s.dragClass,!0),Me(He,"transition",""),Me(He,"transform",""),Me(He,"box-sizing","border-box"),Me(He,"margin",0),Me(He,"top",a.top),Me(He,"left",a.left),Me(He,"width",a.width),Me(He,"height",a.height),Me(He,"opacity","0.8"),Me(He,"position",Ko?"absolute":"fixed"),Me(He,"zIndex","100000"),Me(He,"pointerEvents","none"),Ve.ghost=He,t.appendChild(He),Me(He,"transform-origin",zd/parseInt(He.style.width)*100+"% "+jd/parseInt(He.style.height)*100+"%")}},_onDragStart:function(t,a){var s=this,n=t.dataTransfer,l=s.options;if(ta("dragStart",this,{evt:t}),Ve.eventCanceled){this._onDrop();return}ta("setupClone",this),Ve.eventCanceled||(bt=Ap(ye),bt.draggable=!1,bt.style["will-change"]="",this._hideClone(),da(bt,this.options.chosenClass,!1),Ve.clone=bt),s.cloneId=sl(function(){ta("clone",s),!Ve.eventCanceled&&(s.options.removeCloneOnHide||mt.insertBefore(bt,ye),s._hideClone(),Jt({sortable:s,name:"clone"}))}),!a&&da(ye,l.dragClass,!0),a?(Cl=!0,s._loopId=setInterval(s._emulateDragOver,50)):(Ye(document,"mouseup",s._onDrop),Ye(document,"touchend",s._onDrop),Ye(document,"touchcancel",s._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(s,n,ye)),Xe(document,"drop",s),Me(ye,"transform","translateZ(0)")),un=!0,s._dragStartId=sl(s._dragStarted.bind(s,a,t)),Xe(document,"selectstart",s),Hn=!0,Xn&&Me(document.body,"user-select","none")},_onDragOver:function(t){var a=this.el,s=t.target,n,l,d,u=this.options,c=u.group,h=Ve.active,v=Ro===c,y=u.sort,g=Ht||h,B,w=this,C=!1;if(Ci)return;function F(ie,P){ta(ie,w,Ya({evt:t,isOwner:v,axis:B?"vertical":"horizontal",revert:d,dragRect:n,targetRect:l,canSort:y,fromSortable:g,target:s,completed:E,onMove:function(G,N){return No(mt,a,ye,n,G,It(G),t,N)},changed:k},P))}function S(){F("dragOverAnimationCapture"),w.captureAnimationState(),w!==g&&g.captureAnimationState()}function E(ie){return F("dragOverCompleted",{insertion:ie}),ie&&(v?h._hideClone():h._showClone(w),w!==g&&(da(ye,Ht?Ht.options.ghostClass:h.options.ghostClass,!1),da(ye,u.ghostClass,!0)),Ht!==w&&w!==Ve.active?Ht=w:w===Ve.active&&Ht&&(Ht=null),g===w&&(w._ignoreWhileAnimating=s),w.animateAll(function(){F("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(s===ye&&!ye.animated||s===a&&!s.animated)&&(nn=null),!u.dragoverBubble&&!t.rootEl&&s!==document&&(ye.parentNode[fa]._isOutsideThisEl(t.target),!ie&&Is(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),C=!0}function k(){ua=ya(ye),_s=ya(ye,u.draggable),Jt({sortable:w,name:"change",toEl:a,newIndex:ua,newDraggableIndex:_s,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),s=Ka(s,u.draggable,a,!0),F("dragOver"),Ve.eventCanceled)return C;if(ye.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||w._ignoreWhileAnimating===s)return E(!1);if(Cl=!1,h&&!u.disabled&&(v?y||(d=yt!==mt):Ht===this||(this.lastPutMode=Ro.checkPull(this,h,ye,t))&&c.checkPut(this,h,ye,t))){if(B=this._getDirection(t,s)==="vertical",n=It(ye),F("dragOverValid"),Ve.eventCanceled)return C;if(d)return yt=mt,S(),this._hideClone(),F("revert"),Ve.eventCanceled||($s?mt.insertBefore(ye,$s):mt.appendChild(ye)),E(!0);var Q=hA(a,u.draggable);if(!Q||O4(t,B,this)&&!Q.animated){if(Q===ye)return E(!1);if(Q&&a===t.target&&(s=Q),s&&(l=It(s)),No(mt,a,ye,n,s,l,t,!!s)!==!1)return S(),a.appendChild(ye),yt=a,k(),E(!0)}else if(Q&&L4(t,B,this)){var I=vn(a,0,u,!0);if(I===ye)return E(!1);if(s=I,l=It(s),No(mt,a,ye,n,s,l,t,!1)!==!1)return S(),a.insertBefore(ye,I),yt=a,k(),E(!0)}else if(s.parentNode===a){l=It(s);var D=0,M,$=ye.parentNode!==a,V=!I4(ye.animated&&ye.toRect||n,s.animated&&s.toRect||l,B),L=B?"top":"left",R=Nd(s,"top","top")||Nd(ye,"top","top"),K=R?R.scrollTop:void 0;nn!==s&&(M=l[L],to=!1,Po=!V&&u.invertSwap||$),D=H4(t,s,l,B,V?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Po,nn===s);var J;if(D!==0){var W=ya(ye);do W-=D,J=yt.children[W];while(J&&(Me(J,"display")==="none"||J===He))}if(D===0||J===s)return E(!1);nn=s,eo=D;var ae=s.nextElementSibling,Z=!1;Z=D===1;var te=No(mt,a,ye,n,s,l,t,Z);if(te!==!1)return(te===1||te===-1)&&(Z=te===1),Ci=!0,setTimeout(V4,30),S(),Z&&!ae?a.appendChild(ye):s.parentNode.insertBefore(ye,Z?ae:s),R&&ip(R,0,K-R.scrollTop),yt=ye.parentNode,M!==void 0&&!Po&&(al=Math.abs(M-It(s)[L])),k(),E(!0)}if(a.contains(ye))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ye(document,"mousemove",this._onTouchMove),Ye(document,"touchmove",this._onTouchMove),Ye(document,"pointermove",this._onTouchMove),Ye(document,"dragover",Is),Ye(document,"mousemove",Is),Ye(document,"touchmove",Is)},_offUpEvents:function(){var t=this.el.ownerDocument;Ye(t,"mouseup",this._onDrop),Ye(t,"touchend",this._onDrop),Ye(t,"pointerup",this._onDrop),Ye(t,"touchcancel",this._onDrop),Ye(document,"selectstart",this)},_onDrop:function(t){var a=this.el,s=this.options;if(ua=ya(ye),_s=ya(ye,s.draggable),ta("drop",this,{evt:t}),yt=ye&&ye.parentNode,ua=ya(ye),_s=ya(ye,s.draggable),Ve.eventCanceled){this._nulling();return}un=!1,Po=!1,to=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bi(this.cloneId),Bi(this._dragStartId),this.nativeDraggable&&(Ye(document,"drop",this),Ye(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xn&&Me(document.body,"user-select",""),Me(ye,"transform",""),t&&(Hn&&(t.cancelable&&t.preventDefault(),!s.dropBubble&&t.stopPropagation()),He&&He.parentNode&&He.parentNode.removeChild(He),(mt===yt||Ht&&Ht.lastPutMode!=="clone")&&bt&&bt.parentNode&&bt.parentNode.removeChild(bt),ye&&(this.nativeDraggable&&Ye(ye,"dragend",this),Tr(ye),ye.style["will-change"]="",Hn&&!un&&da(ye,Ht?Ht.options.ghostClass:this.options.ghostClass,!1),da(ye,this.options.chosenClass,!1),Jt({sortable:this,name:"unchoose",toEl:yt,newIndex:null,newDraggableIndex:null,originalEvent:t}),mt!==yt?(ua>=0&&(Jt({rootEl:yt,name:"add",toEl:yt,fromEl:mt,originalEvent:t}),Jt({sortable:this,name:"remove",toEl:yt,originalEvent:t}),Jt({rootEl:yt,name:"sort",toEl:yt,fromEl:mt,originalEvent:t}),Jt({sortable:this,name:"sort",toEl:yt,originalEvent:t})),Ht&&Ht.save()):ua!==pn&&ua>=0&&(Jt({sortable:this,name:"update",toEl:yt,originalEvent:t}),Jt({sortable:this,name:"sort",toEl:yt,originalEvent:t})),Ve.active&&((ua==null||ua===-1)&&(ua=pn,_s=Zn),Jt({sortable:this,name:"end",toEl:yt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ta("nulling",this),mt=ye=yt=He=$s=bt=tl=gs=Ds=Ea=Hn=ua=_s=pn=Zn=nn=eo=Ht=Ro=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,kl.forEach(function(t){t.checked=!0}),kl.length=Dr=Ir=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ye&&(this._onDragOver(t),M4(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],a,s=this.el.children,n=0,l=s.length,d=this.options;n<l;n++)a=s[n],Ka(a,d.draggable,this.el,!1)&&t.push(a.getAttribute(d.dataIdAttr)||P4(a));return t},sort:function(t,a){var s={},n=this.el;this.toArray().forEach(function(l,d){var u=n.children[d];Ka(u,this.options.draggable,n,!1)&&(s[l]=u)},this),a&&this.captureAnimationState(),t.forEach(function(l){s[l]&&(n.removeChild(s[l]),n.appendChild(s[l]))}),a&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,a){return Ka(t,a||this.options.draggable,this.el,!1)},option:function(t,a){var s=this.options;if(a===void 0)return s[t];var n=ho.modifyOption(this,t,a);typeof n<"u"?s[t]=n:s[t]=a,t==="group"&&cp(s)},destroy:function(){ta("destroy",this);var t=this.el;t[fa]=null,Ye(t,"mousedown",this._onTapStart),Ye(t,"touchstart",this._onTapStart),Ye(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ye(t,"dragover",this),Ye(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Bl.splice(Bl.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!gs){if(ta("hideClone",this),Ve.eventCanceled)return;Me(bt,"display","none"),this.options.removeCloneOnHide&&bt.parentNode&&bt.parentNode.removeChild(bt),gs=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(gs){if(ta("showClone",this),Ve.eventCanceled)return;ye.parentNode==mt&&!this.options.group.revertClone?mt.insertBefore(bt,ye):$s?mt.insertBefore(bt,$s):mt.appendChild(bt),this.options.group.revertClone&&this.animate(ye,bt),Me(bt,"display",""),gs=!1}}};function M4(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function No(e,t,a,s,n,l,d,u){var c,h=e[fa],v=h.options.onMove,y;return window.CustomEvent&&!cs&&!fo?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=e,c.dragged=a,c.draggedRect=s,c.related=n||t,c.relatedRect=l||It(t),c.willInsertAfter=u,c.originalEvent=d,e.dispatchEvent(c),v&&(y=v.call(h,c,d)),y}function Tr(e){e.draggable=!1}function V4(){Ci=!1}function L4(e,t,a){var s=It(vn(a.el,0,a.options,!0)),n=10;return t?e.clientX<s.left-n||e.clientY<s.top&&e.clientX<s.right:e.clientY<s.top-n||e.clientY<s.bottom&&e.clientX<s.left}function O4(e,t,a){var s=It(hA(a.el,a.options.draggable)),n=10;return t?e.clientX>s.right+n||e.clientX<=s.right&&e.clientY>s.bottom&&e.clientX>=s.left:e.clientX>s.right&&e.clientY>s.top||e.clientX<=s.right&&e.clientY>s.bottom+n}function H4(e,t,a,s,n,l,d,u){var c=s?e.clientY:e.clientX,h=s?a.height:a.width,v=s?a.top:a.left,y=s?a.bottom:a.right,g=!1;if(!d){if(u&&al<h*n){if(!to&&(eo===1?c>v+h*l/2:c<y-h*l/2)&&(to=!0),to)g=!0;else if(eo===1?c<v+al:c>y-al)return-eo}else if(c>v+h*(1-n)/2&&c<y-h*(1-n)/2)return R4(t)}return g=g||d,g&&(c<v+h*l/2||c>y-h*l/2)?c>v+h/2?1:-1:0}function R4(e){return ya(ye)<ya(e)?1:-1}function P4(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,a=t.length,s=0;a--;)s+=t.charCodeAt(a);return s.toString(36)}function K4(e){kl.length=0;for(var t=e.getElementsByTagName("input"),a=t.length;a--;){var s=t[a];s.checked&&kl.push(s)}}function sl(e){return setTimeout(e,0)}function Bi(e){return clearTimeout(e)}Zl&&Xe(document,"touchmove",function(e){(Ve.active||un)&&e.cancelable&&e.preventDefault()});Ve.utils={on:Xe,off:Ye,css:Me,find:lp,is:function(t,a){return!!Ka(t,a,t,!1)},extend:k4,throttle:rp,closest:Ka,toggleClass:da,clone:Ap,index:ya,nextTick:sl,cancelNextTick:Bi,detectDirection:up,getChild:vn};Ve.get=function(e){return e[fa]};Ve.mount=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t[0].constructor===Array&&(t=t[0]),t.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Ve.utils=Ya(Ya({},Ve.utils),s.utils)),ho.mount(s)})};Ve.create=function(e,t){return new Ve(e,t)};Ve.version=b4;var Ut=[],Rn,ki,Fi=!1,Mr,Vr,Fl,Pn;function N4(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(a){var s=a.originalEvent;this.sortable.nativeDraggable?Xe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Xe(document,"pointermove",this._handleFallbackAutoScroll):s.touches?Xe(document,"touchmove",this._handleFallbackAutoScroll):Xe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var s=a.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?Ye(document,"dragover",this._handleAutoScroll):(Ye(document,"pointermove",this._handleFallbackAutoScroll),Ye(document,"touchmove",this._handleFallbackAutoScroll),Ye(document,"mousemove",this._handleFallbackAutoScroll)),qd(),nl(),F4()},nulling:function(){Fl=ki=Rn=Fi=Pn=Mr=Vr=null,Ut.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,s){var n=this,l=(a.touches?a.touches[0]:a).clientX,d=(a.touches?a.touches[0]:a).clientY,u=document.elementFromPoint(l,d);if(Fl=a,s||this.options.forceAutoScrollFallback||fo||cs||Xn){Lr(a,this.options,u,s);var c=ws(u,!0);Fi&&(!Pn||l!==Mr||d!==Vr)&&(Pn&&qd(),Pn=setInterval(function(){var h=ws(document.elementFromPoint(l,d),!0);h!==c&&(c=h,nl()),Lr(a,n.options,h,s)},10),Mr=l,Vr=d)}else{if(!this.options.bubbleScroll||ws(u,!0)===za()){nl();return}Lr(a,this.options,ws(u,!1),!1)}}},ds(e,{pluginName:"scroll",initializeByDefault:!0})}function nl(){Ut.forEach(function(e){clearInterval(e.pid)}),Ut=[]}function qd(){clearInterval(Pn)}var Lr=rp(function(e,t,a,s){if(t.scroll){var n=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,d=t.scrollSensitivity,u=t.scrollSpeed,c=za(),h=!1,v;ki!==a&&(ki=a,nl(),Rn=t.scroll,v=t.scrollFn,Rn===!0&&(Rn=ws(a,!0)));var y=0,g=Rn;do{var B=g,w=It(B),C=w.top,F=w.bottom,S=w.left,E=w.right,k=w.width,Q=w.height,I=void 0,D=void 0,M=B.scrollWidth,$=B.scrollHeight,V=Me(B),L=B.scrollLeft,R=B.scrollTop;B===c?(I=k<M&&(V.overflowX==="auto"||V.overflowX==="scroll"||V.overflowX==="visible"),D=Q<$&&(V.overflowY==="auto"||V.overflowY==="scroll"||V.overflowY==="visible")):(I=k<M&&(V.overflowX==="auto"||V.overflowX==="scroll"),D=Q<$&&(V.overflowY==="auto"||V.overflowY==="scroll"));var K=I&&(Math.abs(E-n)<=d&&L+k<M)-(Math.abs(S-n)<=d&&!!L),J=D&&(Math.abs(F-l)<=d&&R+Q<$)-(Math.abs(C-l)<=d&&!!R);if(!Ut[y])for(var W=0;W<=y;W++)Ut[W]||(Ut[W]={});(Ut[y].vx!=K||Ut[y].vy!=J||Ut[y].el!==B)&&(Ut[y].el=B,Ut[y].vx=K,Ut[y].vy=J,clearInterval(Ut[y].pid),(K!=0||J!=0)&&(h=!0,Ut[y].pid=setInterval((function(){s&&this.layer===0&&Ve.active._onTouchMove(Fl);var ae=Ut[this.layer].vy?Ut[this.layer].vy*u:0,Z=Ut[this.layer].vx?Ut[this.layer].vx*u:0;typeof v=="function"&&v.call(Ve.dragged.parentNode[fa],Z,ae,e,Fl,Ut[this.layer].el)!=="continue"||ip(Ut[this.layer].el,Z,ae)}).bind({layer:y}),24))),y++}while(t.bubbleScroll&&g!==c&&(g=ws(g,!1)));Fi=h}},30),hp=function(t){var a=t.originalEvent,s=t.putSortable,n=t.dragEl,l=t.activeSortable,d=t.dispatchSortableEvent,u=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(a){var h=s||l;u();var v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,y=document.elementFromPoint(v.clientX,v.clientY);c(),h&&!h.el.contains(y)&&(d("spill"),this.onSpill({dragEl:n,putSortable:s}))}};function mA(){}mA.prototype={startIndex:null,dragStart:function(t){var a=t.oldDraggableIndex;this.startIndex=a},onSpill:function(t){var a=t.dragEl,s=t.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var n=vn(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(a,n):this.sortable.el.appendChild(a),this.sortable.animateAll(),s&&s.animateAll()},drop:hp};ds(mA,{pluginName:"revertOnSpill"});function _A(){}_A.prototype={onSpill:function(t){var a=t.dragEl,s=t.putSortable,n=s||this.sortable;n.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),n.animateAll()},drop:hp};ds(_A,{pluginName:"removeOnSpill"});Ve.mount(new N4);Ve.mount(_A,mA);function G4(){return typeof window<"u"?window.console:global.console}const z4=G4();function j4(e){const t=Object.create(null);return function(s){return t[s]||(t[s]=e(s))}}const Y4=/-(\w)/g,Wd=j4(e=>e.replace(Y4,(t,a)=>a?a.toUpperCase():""));function Or(e){e.parentElement!==null&&e.parentElement.removeChild(e)}function Xd(e,t,a){const s=a===0?e.children[0]:e.children[a-1].nextSibling;e.insertBefore(t,s)}function q4(e,t){return Object.values(e).indexOf(t)}function W4(e,t,a,s){if(!e)return[];const n=Object.values(e),l=t.length-s;return[...t].map((u,c)=>c>=l?n.length:n.indexOf(u))}function mp(e,t){this.$nextTick(()=>this.$emit(e.toLowerCase(),t))}function X4(e){return t=>{this.realList!==null&&this["onDrag"+e](t),mp.call(this,e,t)}}function J4(e){return["transition-group","TransitionGroup"].includes(e)}function Z4(e){if(!e||e.length!==1)return!1;const[{type:t}]=e;return t?J4(t.name):!1}function ex(e,t){return t?{...t.props,...t.attrs}:e}const xi=["Start","Add","Remove","Update","End"],Ui=["Choose","Unchoose","Sort","Filter","Clone"],tx=["Move",...xi,...Ui].map(e=>"on"+e);let Hr=null;const ax={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},xl=Ga({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...xi.map(e=>e.toLowerCase()),...Ui.map(e=>e.toLowerCase())],props:ax,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=ex(this.$attrs,this.componentData);return e?(this.transitionMode=Z4(e),jr(this.getTag(),t,e)):jr(this.getTag(),t,[])},created(){this.list!==null&&this.modelValue!==null&&z4.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};xi.forEach(n=>{e["on"+n]=X4.call(this,n)}),Ui.forEach(n=>{e["on"+n]=mp.bind(this,n)});const t=Object.keys(this.$attrs).reduce((n,l)=>(n[Wd(l)]=this.$attrs[l],n),{}),a=Object.assign({},t,e,{onMove:(n,l)=>this.onDragMove(n,l)});!("draggable"in a)&&(a.draggable=">*");const s=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new Ve(s,a),s.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?b(this.component):this.tag},updateOptions(e){for(var t in e){const a=Wd(t);tx.indexOf(a)===-1&&this._sortable.option(a,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=W4(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(e){const t=q4(this.getChildrenNodes()||[],e);if(t===-1)return null;const a=this.realList[t];return{index:t,element:a}},emitChanges(e){this.$nextTick(()=>{this.$emit("change",e)})},alterList(e){if(this.list){e(this.list);return}const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=t=>t.splice(...arguments);this.alterList(e)},updatePosition(e,t){const a=s=>s.splice(t,0,s.splice(e,1)[0]);this.alterList(a)},getVmIndex(e){const t=this.visibleIndexes,a=t.length;return e>a-1?a:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const a=this.getComponent();a.children=[],a.kept=void 0},onDragStart(e){this.computeIndexes(),this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Hr=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(t===void 0)return;Or(e.item);const a=this.getVmIndex(e.newIndex);this.spliceList(a,0,t),this.computeIndexes();const s={element:t,newIndex:a};this.emitChanges({added:s})},onDragRemove(e){if(Xd(this.$el,e.item,e.oldIndex),e.pullMode==="clone"){Or(e.clone);return}if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const a={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:a})},onDragUpdate(e){Or(e.item),Xd(e.from,e.item,e.oldIndex);const t=this.context.index,a=this.getVmIndex(e.newIndex);this.updatePosition(t,a);const s={element:this.context.element,oldIndex:t,newIndex:a};this.emitChanges({moved:s})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const a=this.move;if(!a||!this.realList)return!0;const s=this.getRelatedContextFromMoveEvent(e),n=this.context,l=this.computeFutureIndex(s,e);Object.assign(n,{futureIndex:l});const d=Object.assign({},e,{relatedContext:s,draggedContext:n});return a(d,t)},onDragEnd(){this.computeIndexes(),Hr=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const a=this.getTrargetedComponent(e);if(!a)return{component:a};const s=a.realList,n={list:s,component:a};if(e!==t&&s&&a.getUnderlyingVm){const l=a.getUnderlyingVm(t);if(l)return Object.assign(l,n)}return n},computeFutureIndex(e,t){const a=[...t.to.children].filter(d=>d.style.display!=="none");if(a.length===0)return 0;const s=a.indexOf(t.related),n=e.component.getVmIndex(s);return a.indexOf(Hr)!==-1||!t.willInsertAfter?n:n+1}}}),sx={class:"setting-wrap"},nx={class:"setting-wrap-inner"},ox={key:0,class:"payment-method-list fct-content-card-list"},lx={class:"flex items-start gap-3"},rx=["onClick"],ix=["src","alt"],Ax={key:0,class:"fct_payment_method_tag"},dx={class:"fct-content-card-list-content"},ux={class:"fct-content-card-list-action"},cx={key:0},px=["src"],fx={__name:"PaymentSettings",setup(e){const t=Je().ctx,a=T(!1),s=T([]),n=De.get("app_config.isProActive"),l=q(()=>({animation:200,ghostClass:"ghost"})),d=v=>{var y;return(v==null?void 0:v.upcoming)!=!0&&(!(v!=null&&v.requires_pro)||(v==null?void 0:v.requires_pro)&&n)&&((v==null?void 0:v.is_addon)!=!0||(v==null?void 0:v.is_addon)&&((y=v==null?void 0:v.addon_status)==null?void 0:y.is_installed))},u=v=>v===!0?"active":"inactive",c=()=>{a.value=!0,t.$get("settings/payment-methods/all",{}).then(v=>{s.value=v.gateways}).catch(v=>{console.error(v)}).finally(()=>{a.value=!1})},h=()=>{const v=s.value.map(y=>y.route);t.$post("settings/payment-methods/reorder",{order:v}).then(y=>{Y.success(y.message)}).catch(y=>{console.error("Failed to save payment method order:",y)})};return he(()=>{c()}),(v,y)=>{const g=b("el-skeleton"),B=b("el-button");return A(),_("div",sx,[o(ea,{heading:f(p)("Payment Settings"),"show-save-button":!1},null,8,["heading"]),i("div",nx,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(g,{loading:a.value,animated:"",rows:6},null,8,["loading"]),a.value?x("",!0):(A(),_("div",ox,[o(f(xl),gt(l.value,{list:s.value,"item-key":"route",handle:".drag-handle",onEnd:h}),{default:r(()=>[(A(!0),_(H,null,X(s.value,w=>(A(),_("div",{key:w.route,class:oe(w!=null&&w.upcoming?"upcoming fct-content-card-list-item":"fct-content-card-list-item")},[i("div",lx,[y[0]||(y[0]=i("span",{class:"drag-handle cursor-move text-gray-400 hover:text-gray-600 mt-1 w-7.5 h-7.5",title:"Drag to reorder"},[i("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[i("path",{d:"M8 6h8v2H8V6zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"})])],-1)),i("div",{onClick:()=>{var C;!((C=w==null?void 0:w.addon_status)!=null&&C.is_installed)&&(w!=null&&w.addon_source)||v.$router.push({name:w.route})},class:"cursor-pointer grid gap-2 flex-1"},[i("div",{class:oe(["fct-content-card-list-head",w.route])},[i("img",{src:w.icon,alt:w.admin_title||w.title},null,8,ix),w!=null&&w.tag?(A(),_("span",Ax,[o(ut,{size:"small",status:"info",text:w.tag},null,8,["text"])])):x("",!0),d(w)?(A(),U(ut,{key:1,size:"small",status:w.status?"active":"disabled","hide-icon":!0},{default:r(()=>[O(m(u(w.status)),1)]),_:2},1032,["status"])):x("",!0)],2),i("div",dx,[i("p",null,m(w.description),1)])],8,rx),i("div",ux,[w!=null&&w.upcoming?(A(),_("div",cx,m(f(p)("Coming Soon!")),1)):(A(),U(B,{key:1,class:"el-button--x-small",onClick:()=>v.$router.push({name:w.route})},{default:r(()=>{var C;return[O(m(f(p)("Manage"))+" ",1),w!=null&&w.requires_pro?(A(),_("img",{key:0,src:((C=v.appVars)==null?void 0:C.asset_url)+"images/crown.svg",alt:"pro feature",class:"pro-feature-icon"},null,8,px)):x("",!0)]}),_:2},1032,["onClick"]))])])],2))),128))]),_:1},16,["list"])]))]),_:1})]),_:1})])])}}},hx={key:0,class:"fluent-cart-admin-validation-error-wrapper"},st=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:String},setup(e){const t=e,a=()=>{if(typeof t.validationErrors[t.fieldKey]!="object")return"";const[[n,l]]=Object.entries(t.validationErrors[t.fieldKey]);return{[n]:l}};return(s,n)=>e.validationErrors&&e.validationErrors.hasOwnProperty(e.fieldKey)?(A(),_("div",hx,[(A(!0),_(H,null,X(a(),(l,d)=>(A(),_("span",{class:"fluent-cart-admin-validation-error",key:l.toLowerCase().replace(/\s/g,"")},m(l),1))),128))])):x("",!0)}}),mx={class:"role-form"},_x={class:"select-use-option"},gx={class:"select-label"},vx={key:0,class:"select-desc"},yx={class:"dialog-footer"},bx={__name:"RoleAssignmentModal",props:{},emits:["fetchRoles"],setup(e,{expose:t,emit:a}){const s=T(!1),n=a,l=T(!1),d=T(null),u=T(null),c=T(!1),h=T(null),v=T(null),y=T({}),g=T(!1),B=k=>{if(!k){h.value=[];return}se.get("roles/user-list",{search:k}).then(Q=>{h.value=Q.users.data}).finally(()=>{})},w=()=>{se.get("roles").then(k=>{v.value=k.roles}).catch(k=>{if(k.message){Y.error(k.message);return}console.log(k)}).finally(()=>{})},C=()=>{y.value={},l.value=!0,se.post("roles",{user_id:d.value,role_key:u.value}).then((k,Q)=>{s.value=!1,Y.success(k.message),n("fetchRoles")}).catch(k=>{var Q;(Q=k.data)!=null&&Q.message?Y.error(k.data.message):y.value=k.data}).finally(()=>{l.value=!1})},F=()=>{d.value=null,u.value=null,c.value=!1,y.value={},s.value=!1},S=T("");return t({openModal:(k,Q,I,D=!1)=>{d.value=k,u.value=Q,S.value=I,s.value=!0,c.value=D,w()}}),(k,Q)=>{const I=b("el-option"),D=b("el-select"),M=b("el-form-item"),$=b("el-form"),V=b("el-button"),L=b("el-dialog");return A(),U(L,{title:c.value?`Edit ${S.value}'s Role`:"Add Role",modelValue:s.value,"onUpdate:modelValue":Q[4]||(Q[4]=R=>s.value=R),onClosed:F,"append-to-body":!0},{footer:r(()=>[i("span",yx,[o(V,{onClick:F},{default:r(()=>[O(m(k.$t("Cancel")),1)]),_:1}),o(V,{type:"primary",onClick:C,loading:l.value,disabled:l.value},{default:r(()=>[O(m(c.value?k.$t("Update Role"):k.$t("Attach Role")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[i("div",mx,[o($,{"label-position":"top"},{default:r(()=>[c.value?x("",!0):(A(),U(M,{key:0,label:k.$t("Select User")},{default:r(()=>[o(D,{modelValue:d.value,"onUpdate:modelValue":Q[0]||(Q[0]=R=>d.value=R),remote:!0,"remote-method":B,loading:g.value,filterable:"",clearable:"",placeholder:k.$t("Type to search user"),class:"w-full",onChange:Q[1]||(Q[1]=()=>{delete y.value.user_id})},{default:r(()=>[(A(!0),_(H,null,X(h.value,R=>(A(),U(I,{key:R.ID,label:R.name,value:R.ID},{default:r(()=>[i("div",_x,[i("span",null,m(R.name),1),i("span",null,m(R.email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"]),y.value.hasOwnProperty("user_id")?(A(),U(st,{key:0,"validation-errors":y.value,"field-key":"user_id"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])),o(M,{label:k.$t("Select Role")},{default:r(()=>[o(D,{onChange:Q[2]||(Q[2]=R=>{delete y.value.role_key}),id:"role_key",modelValue:u.value,"onUpdate:modelValue":Q[3]||(Q[3]=R=>u.value=R),placeholder:k.$t("Select a role"),class:"w-full","popper-class":"fct-select-role-dropdown"},{default:r(()=>[(A(!0),_(H,null,X(v.value,(R,K)=>(A(),U(I,{key:K,label:R.title,value:K},{default:r(()=>[i("div",gx,m(R.title),1),R.description?(A(),_("div",vx,m(R.description),1)):x("",!0)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),y.value.hasOwnProperty("role_key")?(A(),U(st,{key:0,"validation-errors":y.value,"field-key":"role_key"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"])}}},wx=be(bx,[["__scopeId","data-v-4b33cd6c"]]),Cx={class:"setting-wrap"},Bx={class:"setting-wrap-inner"},kx={key:0,class:"fct-setting-header-action"},Fx={class:"fct-role-settings"},xx={class:"fct-customer-card"},Ux={class:"fct-customer-details"},Sx={class:"fct-customer-name"},Ex={class:"fct-customer-id"},Qx={class:"fct-customer-email"},Dx={class:"role-title flex items-center gap-1 capitalize"},Ix={class:"role-desc flex items-center gap-1 capitalize text-system-mid dark:text-system-light text-xs"},$x={class:"fct-role-settings-table-action fct-btn-group sm justify-end"},Tx={__name:"RoleSettings",setup(e){const t=T(!1);T(!1);const a=T([]),s=T(),n=T(!1),l=De.get("app_config.isProActive"),d=()=>{t.value=!0,se.get("roles/managers").then(c=>{a.value=c.managers}).finally(()=>{t.value=!1})},u=c=>{n.value=!0,se.delete("roles/"+c.shop_role,{user_id:c.id}).then(h=>{a.value=a.value.filter(v=>v.id!==c.id),Y.success(h.message)}).catch(h=>{if(h.message)return Y.error(h.message);console.log(h)}).finally(()=>{n.value=!1})};return he(()=>{l&&d()}),(c,h)=>{const v=b("el-button"),y=b("el-table-column"),g=b("el-popconfirm"),B=b("el-table"),w=Qt("loading");return A(),_("div",Cx,[o(ea,{heading:f(p)("Roles & Permissions"),"show-save-button":!1},null,8,["heading"]),i("div",Bx,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Existing Roles & Permissions")},{action:r(()=>[f(l)?(A(),_("div",kx,[o(v,{type:"primary",size:"small",onClick:h[0]||(h[0]=()=>{var C;(C=s.value)==null||C.openModal()})},{default:r(()=>[O(m(f(p)("Add Role")),1)]),_:1})])):x("",!0)]),_:1},8,["title"]),f(l)?(A(),U(le,{key:0,class:"px-0 pb-0"},{default:r(()=>[i("div",Fx,[pt((A(),U(B,{data:a.value},{empty:r(()=>[o(Te,{icon:"Empty/RoleAndPermission","has-dark":!0,text:f(p)("No roles found!")},null,8,["text"])]),default:r(()=>[o(y,{label:f(p)("User"),width:150},{default:r(C=>{var F,S,E;return[i("div",xx,[i("div",Ux,[i("div",Sx,[O(m(((F=C.row)==null?void 0:F.display_name)||f(p)("No Name"))+" ",1),i("span",Ex,"#"+m((S=C.row)==null?void 0:S.id),1)]),i("div",Qx,m((E=C.row)==null?void 0:E.email),1)])])]}),_:1},8,["label"]),o(y,{prop:"shop_role",label:f(p)("Role Title"),width:100},{default:r(C=>[i("span",Dx,m(f(rt).headline(C.row.shop_role)),1)]),_:1},8,["label"]),o(y,{prop:"description",label:f(p)("Roles"),width:100},{default:r(C=>[i("span",Ix,m(C.row.description),1)]),_:1},8,["label"]),o(y,{width:100},{default:r(C=>[i("div",$x,[o(we,{tag:"a",size:"x-small",hover:"primary",onClick:()=>{var F;(F=s.value)==null||F.openModal(C.row.id,C.row.shop_role,C.row.display_name,!0)}},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"]),o(g,{width:235,"confirm-button-text":f(p)("Confirm"),"cancel-button-text":f(p)("No, Thanks"),"icon-color":"red",title:f(p)("Are you sure to delete this user?"),onConfirm:F=>u(C.row)},{reference:r(()=>[o(we,{tag:"a",size:"x-small",hover:"danger"},{default:r(()=>[o(z,{name:"Delete"})]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])]),_:1})]),_:1},8,["data"])),[[w,t.value||n.value]])])]),_:1})):(A(),U(le,{key:1,class:"px-0 pb-0"},{default:r(()=>[o(Hi,{class:"py-7.5",title:f(p)("Upgrade to Pro for Roles & Permission"),text:f(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]),_:1}))]),_:1}),o(wx,{ref_key:"roleModal",ref:s,onFetchRoles:d},null,512)])])}}},Mx=["innerHTML"],gA={__name:"AdminNotice",props:{placement:{type:String,default:"top"}},setup(e){const t=Ql("appVars"),a=oa(),s=T([]);he(()=>{s.value=t.admin_notices||[]}),fe(()=>t.admin_notices,g=>{s.value=[...g]},{deep:!0});const n=q(()=>{let g="notices fct-notices-wrap fct-layout-width ";return a.fullPath.includes("settings")?g+="settings":a.fullPath.includes("reports")&&(g+="reports"),g.trim()}),l=q(()=>s.value.length>0),d={activate_license:{icon:"WarningFill",type:"warning"},deactivate_license:{icon:"WarningFill",type:"warning"},update_license:{icon:"WarningFill",type:"warning"},renew_license:{icon:"WarningFill",type:"warning"},license_activation_success:{icon:"CheckCircleFill",type:"success"}},u=g=>{var B;return((B=d[g])==null?void 0:B.icon)||"InformationFill"},c=g=>{var B;return((B=d[g])==null?void 0:B.type)||"warning"},h=["activate_license","deactivate_license","renew_license","update_license","license_activation_success"],v=g=>{if(!(g!=null&&g.id))return;if(g.id==="license_activation_success"){s.value=s.value.filter(w=>!h.includes(w.id)),s.value.push(g),y(g),t.admin_notices=t.admin_notices.filter(w=>!h.includes(w.id));return}["deactivate_license","renew_license","update_license","activate_license"].includes(g.id)&&(s.value=s.value.filter(w=>w.id!=="license_activation_success"));const B=s.value.findIndex(w=>w.id===g.id);B!==-1?s.value.splice(B,1,g):s.value.push(g),t.admin_notices=[...s.value]},y=g=>{g.timeout&&setTimeout(()=>{s.value=s.value.filter(B=>B.id!==g.id)},g.timeout)};return window.addEventListener("fct-license-updated",g=>{v(g.detail)}),(g,B)=>l.value?(A(),_("div",{key:0,class:oe(n.value)},[(A(!0),_(H,null,X(s.value,(w,C)=>(A(),U(ja,{key:w.id||C,type:c(w.id),icon:u(w.id),"data-fct-notice-wrapper":w.type},{default:r(()=>[i("div",{innerHTML:w.html},null,8,Mx)]),_:2},1032,["type","icon","data-fct-notice-wrapper"]))),128))],2)):x("",!0)}},Vx={class:"fct-settings-nav-wrap"},Lx={class:"fct-settings-nav-collapse-button-wrapper"},Ox={class:"fct-menu-collapse-button-text"},Hx={class:"fct-settings-nav-link-text"},Rx={class:"fct-settings-nav-child-list"},Px={class:"fct-settings-nav-content"},Kx={class:"fct-settings-nav-content-inner"},Rr="fluentcart_settings_menu_collapsed",Nx=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(e){const t=oa(),a=Va(),s=T(window.innerWidth>=1024),n=T(!0),l=T(!1),d=T(null),u=T(null),c=T(null);so.has("store/settings");const h=T([{name:p("Store Settings"),icon:"Gift",permission:["store/settings","store/sensitive"],url:"/settings/store-settings/",child:[{name:p("Store Setup"),url:"/settings/store-settings/"},{name:p("Pages Setup"),url:"/settings/store-settings/pages_setup"},{name:p("Product Page"),url:"/settings/store-settings/single_product_setup"},{name:p("Cart & Checkout"),url:"/settings/store-settings/cart_and_checkout"},{name:p("Checkout Fields"),url:"/settings/store-settings/checkout_fields"}]},{name:p("Payment Settings"),icon:"PaymentIcon",permission:["is_super_admin"],url:"/settings/payments"},{name:p("Invoice & Packing"),icon:"Invoice",permission:["is_super_admin"],url:"/settings/invoice-packing"},{name:p("Tax & Duties"),icon:"Tax",permission:["is_super_admin"],url:"/settings/tax_settings",child:[{name:p("Configuration & Classes"),url:"/settings/tax_settings"},{name:p("Rates"),url:"/settings/tax_settings/tax_rates"},{name:p("European Union"),url:"/settings/tax_settings/eu"}]},{name:p("Email Configuration"),icon:"Message",permission:["store/sensitive"],url:"/settings/email_mailing_settings",child:[{name:p("Mailing Settings"),url:"/settings/email_mailing_settings"},{name:p("Notifications"),url:"/settings/email_notifications"}]},{name:p("Roles and Permissions"),icon:"ShieldCheck",permission:["is_super_admin"],url:"/settings/roles"},{name:p("Storage Settings"),icon:"Database",permission:["is_super_admin"],url:"/settings/storage"}]);a.hasRoute("shipping")&&h.value.push({name:p("Shipping"),icon:"Truck",permission:["store/sensitive"],url:"/settings/shipping",child:[{name:p("Shipping Zones"),permission:["store/sensitive"],url:"/settings/shipping"},{name:p("Shipping Classes"),permission:["store/sensitive"],url:"/settings/shipping/shipping_classes"}]}),h.value.push({name:p("Features & addon"),icon:"Module",permission:["is_super_admin"],url:"/settings/addons"}),De.get("app_config.isProActive")&&h.value.push({name:p("License Settings"),icon:"License",permission:"store/sensitive",url:"/settings/licensing"});const y=()=>{if(!s.value){d.value&&d.value.classList.remove("is-nav-open"),u.value&&u.value.classList.remove("is-overlay-open");return}n.value=!n.value,l.value=!1;try{localStorage.setItem(Rr,n.value?"1":"0")}catch{}},g=()=>{s.value||(d.value&&d.value.classList.remove("is-nav-open"),u.value&&u.value.classList.remove("is-overlay-open"))},B=k=>k.child?(!C.value||F.value)&&S(k):!1,w=()=>{const k=window.innerWidth,Q=s.value;if(s.value=k>=1024,!Q&&s.value){d.value&&d.value.classList.remove("is-nav-open"),u.value&&u.value.classList.remove("is-overlay-open");try{const I=localStorage.getItem(Rr);n.value=I===null?!0:I==="1"}catch{n.value=!0}}Q&&!s.value&&(n.value=!1)};he(()=>{c.value=document.getElementById("fluent_cart_plugin_app"),c.value&&c.value.classList.add("fct_settings_page_plugin_app_wrap"),w(),window.addEventListener("resize",w);try{const k=localStorage.getItem(Rr);n.value=k===null?!0:k==="1"}catch{n.value=!0}}),Re(()=>{c.value&&c.value.classList.remove("fct_settings_page_plugin_app_wrap"),window.removeEventListener("resize",w)});const C=q(()=>n.value),F=q(()=>s.value&&n.value&&l.value),S=k=>{const Q=t.path;return!!(k.child&&k.child.length&&k.child.some(D=>Q===D.url||Q.includes(D.url))||Q===k.url||Q.includes(k.url))},E=(k,Q,I)=>{const D=t.path;return D===k.url||D===I.url&&Q===0};return(k,Q)=>{const I=b("el-button"),D=b("el-tooltip"),M=b("router-link"),$=b("router-view");return A(),_("div",{class:oe(["fct-setting-container setting-container",{"is-collapsed":C.value,"is-expanded":F.value}])},[i("div",{ref_key:"overlayRef",ref:u,class:"fct-settings-menu-overlay",onClick:g},null,512),i("div",Vx,[i("div",{ref_key:"sidebarRef",ref:d,class:oe(["fct-settings-nav-container",{"is-collapsed":C.value,"is-expanded":F.value}])},[i("div",Lx,[o(D,{content:f(p)("Toggle settings"),placement:"right"},{default:r(()=>[o(I,{onClick:y},{default:r(()=>[o(z,{name:"Window"}),i("span",Ox,m(f(p)("Settings")),1)]),_:1})]),_:1},8,["content"])]),i("ul",{class:"fct-settings-nav",onMouseenter:Q[0]||(Q[0]=V=>s.value&&n.value&&(l.value=!0)),onMouseleave:Q[1]||(Q[1]=V=>l.value=!1)},[(A(!0),_(H,null,X(h.value,(V,L)=>(A(),_("li",{key:L,class:oe(["fct-settings-nav-item",{"fct-settings-nav-item-active":S(V)}])},[f(so).hasAny(V.permission)?(A(),U(M,{key:0,to:V.url,class:"fct-settings-nav-link"},{default:r(()=>[o(z,{name:V.icon},null,8,["name"]),i("span",Hx,[O(m(V.name)+" ",1),o(z,{name:"ChevronRight",class:"fct-settings-nav-link-icon"})])]),_:2},1032,["to"])):x("",!0),o(na,{visible:B(V),accordion:"",class:"fct-settings-nav-child-wrap"},{default:r(()=>[i("ul",Rx,[(A(!0),_(H,null,X(V.child,(R,K)=>(A(),_("li",{key:K,class:oe(["fct-settings-nav-item",{"fct-settings-nav-item-active":E(R,K,V)}])},[o(M,{to:R.url,class:"fct-settings-nav-link"},{default:r(()=>[O(m(R.name),1)]),_:2},1032,["to"])],2))),128))])]),_:2},1032,["visible"])],2))),128))],32)],2),i("div",Px,[i("div",Kx,[o(gA),o($)])])])],2)}}}),Gx={class:"min-h-[72px] px-2 pl-6 flex flex-col justify-center"},zx={__name:"CustomerOrdersLoader",props:{columns:{type:Array,default:()=>[]}},setup(e){const t=e,a=s=>t.columns.includes(s);return(s,n)=>{const l=b("el-table-column"),d=b("el-skeleton-item"),u=b("el-skeleton"),c=b("el-table");return A(),U(c,{class:"w-full compact-table responsive",data:[1,2,3,4,5,6,7,8,9,10]},{default:r(()=>[a("selection")?(A(),U(l,{key:0,type:"selection",width:"45"})):x("",!0),o(l,{width:140,label:f(p)("# Date")},{default:r(()=>[i("div",Gx,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-3/5"})]),_:1}),o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-4/5"})]),_:1})])]),_:1},8,["label"]),a("order_items")?(A(),U(l,{key:1,"min-width":200,label:f(p)("Items")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"])):x("",!0),o(l,{width:150,label:f(p)("Total")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),o(l,{width:150,label:f(p)("Payment Status")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),a("status")?(A(),U(l,{key:2,width:120,label:f(p)("Status")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):x("",!0),a("type")?(A(),U(l,{key:3,width:140,label:f(p)("Order Type")},{default:r(()=>[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):x("",!0)]),_:1})}}},jx={class:"select-use-option"},Yx={class:"dialog-footer"},_p={__name:"UserAttchModal",props:{customer:{}},setup(e){const t=e,a=T(!1),s=T([]),n=T(null),l=T({}),d=T(!1),u=()=>{l.value={},d.value=!0,se.post(`customers/${t.customer.id}/attachable-user`,{user_id:n.value}).then((v,y)=>{a.value=!1,Y.success(v.message),t.customer.user_id=n.value}).catch(v=>{if(v.message)return Y.error(v.message);l.value=v}).finally(()=>{d.value=!1})},c=()=>{n.value=null,l.value={},a.value=!1},h=()=>{se.get("customers/attachable-user").then(v=>{s.value=ve.get(v,"users")})};return he(()=>{h()}),(v,y)=>{b("el-link");const g=b("el-option"),B=b("el-select"),w=b("el-form-item"),C=b("el-form"),F=b("el-button"),S=b("el-dialog");return A(),_(H,null,[x("",!0),o(S,{modelValue:a.value,"onUpdate:modelValue":y[2]||(y[2]=E=>a.value=E),title:f(p)("Attach User"),onClosed:c},{footer:r(()=>[i("span",Yx,[o(F,{onClick:c},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(F,{type:"primary",onClick:u,loading:d.value,disabled:d.value},{default:r(()=>[O(m(f(p)("Attach User")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[o(C,{"label-position":"top"},{default:r(()=>[o(w,{label:v.$t("Select User")},{default:r(()=>[o(B,{id:"user_id",modelValue:n.value,"onUpdate:modelValue":y[1]||(y[1]=E=>n.value=E),filterable:"",placeholder:v.$t("Select a user"),class:"w-full"},{default:r(()=>[(A(!0),_(H,null,X(s.value,E=>(A(),U(g,{key:E.ID,label:E.display_name,value:E.ID},{default:r(()=>[i("div",jx,[i("span",null,m(E.display_name),1),i("span",null,m(E.user_email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),l.value.hasOwnProperty("user_id")?(A(),U(st,{key:0,"validation-errors":l.value,"field-key":"user_id"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},qx={class:"more-btn"},Wx={class:"fct-admin-sidebar-item"},Xx={class:"fct-profile-card"},Jx={class:"fct-profile-image"},Zx=["src","alt"],eU={class:"fct-profile-details"},tU={class:"title"},aU={class:"text"},sU={key:0},nU={class:"text"},oU={key:0,class:"flex items-center gap-2 mt-1.5"},lU={class:"user-info"},rU=["href"],iU={key:1},AU={class:"fct-admin-sidebar-item mt-5"},dU={class:"sidebar-title"},uU={class:"fct-contact-info-list"},cU={class:"flex items-center justify-between gap-2"},pU=["href"],fU={class:"fct-admin-sidebar-item mt-5"},hU={class:"sidebar-title"},mU={key:0,class:"fct-address-copy-wrap"},_U={class:"text"},gU={key:0,class:"pr-1"},vU=["innerHTML"],yU={key:1,class:"mt-3"},bU={class:"pr-1"},wU=["href"],CU={key:0,class:"no-address-text"},BU={class:"fct-admin-sidebar-item mt-5"},kU={class:"sidebar-title"},FU={key:0,class:"fct-address-copy-wrap"},xU={class:"text"},UU={key:0,class:"pr-1"},SU=["innerHTML"],EU={key:1,class:"mt-3"},QU={class:"pr-1"},DU=["href"],IU={key:0,class:"no-address-text"},$U={class:"fluent-cart-admin-pages"},TU={name:"CustomerInformations",props:["customer","customer_id"],components:{CustomerPurchaseValue:kf,NewCustomerModal:Ri,ManageAddressModal:bu,AddOrEditAddressModal:yu,DynamicIcon:z,CopyToClipboard:ma,UserAttchModal:_p,Back:ji},data(){return this.localizedData=window.fluentCartAdminApp,{addOrEditAddress:!1,shippingAddress:[],billingAddress:[],showAddressModal:!1,modalAction:{type:"billing",action:"create"},address:{},address_mock:{label:"",name:"",phone:"",email:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",is_primary:"0"},customerModalInfos:{showModal:!1,action:"edit",title:"Edit Customer Information",customer:{}},detaching:!1,recalculatingLtv:!1,shouldShowSetAsAlsoCheckbox:!0,closingModal:!1}},computed:{customerDisplayName(){var e,t,a;return this.localizedData.is_full_name_required?(e=this.customer)==null?void 0:e.full_name:((t=this.customer)==null?void 0:t.first_name)+" "+((a=this.customer)==null?void 0:a.last_name)},hasPrimaryBilling(){return this.billingAddress.findIndex(e=>e.is_primary=="1")},hasPrimaryShipping(){return this.shippingAddress.findIndex(e=>e.is_primary=="1")}},methods:{handleCustomerBulkCommand(e){e==="edit_customer_information"&&(this.customerModalInfos.showModal=!0),e==="manage_billing_address"&&this.manageAddress("billing"),e==="manage_shipping_address"&&this.manageAddress("shipping"),e==="recalculate_ltv"&&this.recalculateLtv()},getCustomerTotalOrders(e){return e>0?e+" "+(e.toString()==="1"?this.$t("order"):this.$t("orders")):this.$t("No orders")},refresh(){this.addOrEditAddress=!1,this.fetch()},getTitle(){return this.modalAction.action==="create"?this.modalAction.type==="billing"?this.$t("Add new billing address"):this.$t("Add new shipping Address"):this.modalAction.type==="billing"?this.$t("Edit billing address"):this.$t("Edit shipping address")},addNewAddress(e="billing",t="create",a=[]){Object.keys(a).length>0?(this.address=JSON.parse(JSON.stringify(a)),this.shouldShowSetAsAlsoCheckbox=!1):this.address=JSON.parse(JSON.stringify(this.address_mock)),this.addOrEditAddress=!0,this.modalAction.type=e,this.modalAction.action=t,this.showAddressModal=!1},manageAddress(e="billing",t="edit"){this.showAddressModal=!0,this.modalAction.type=e,this.modalAction.action=t},fetch(){this.$emit("fetch")},recalculateLtv(){this.recalculatingLtv=!0,this.$post(`customers/${this.customer_id}/recalculate-ltv`).then(e=>{e.customer&&(this.customer.ltv=e.customer.ltv,this.customer.purchase_count=e.customer.purchase_count,this.customer.aov=e.customer.aov,this.customer.first_purchase_date=e.customer.first_purchase_date,this.customer.last_purchase_date=e.customer.last_purchase_date),this.handleSuccess(e.message)}).catch(e=>{this.handleError(e.message||this.$t("Failed to recalculate lifetime value"))}).finally(()=>{this.recalculatingLtv=!1})},handleDetachUser(){this.detaching=!0,Rest.post(`customers/${this.customer_id}/detach-user`,{user_id:this.customer.user_id}).then((e,t)=>{this.customer.user_id=0,Notify.success(e.message)}).catch(e=>{if(e.message)return Notify.error(e.message);console.log(e)}).finally(()=>{this.detaching=!1})}},mounted(){this.billingAddress=this.customer.billing_address,this.shippingAddress=this.customer.shipping_address,this.customerModalInfos.customer=this.customer,this.customerModalInfos.customer_id=this.customer.id}},gp=Object.assign(TU,{setup(e){return(t,a)=>{const s=b("el-dropdown-item"),n=b("el-dropdown-menu"),l=b("el-dropdown"),d=b("el-button"),u=b("el-popconfirm"),c=b("el-tag"),h=b("el-icon"),v=b("el-dialog"),y=Qt("loading");return A(),_("div",null,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Customer Information"),title_size:"small",border_bottom:""},{action:r(()=>[o(l,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:t.handleCustomerBulkCommand},{dropdown:r(()=>[o(n,null,{default:r(()=>[o(s,{command:"edit_customer_information"},{default:r(()=>[O(m(t.$t("Edit customer information")),1)]),_:1}),o(s,{command:"manage_shipping_address"},{default:r(()=>[O(m(t.$t("Manage shipping address")),1)]),_:1}),o(s,{command:"manage_billing_address"},{default:r(()=>[O(m(t.$t("Manage billing address")),1)]),_:1}),o(s,{command:"recalculate_ltv",disabled:t.recalculatingLtv},{default:r(()=>[O(m(t.$t("Recalculate lifetime value")),1)]),_:1},8,["disabled"])]),_:1})]),default:r(()=>[i("span",qx,[o(z,{name:"More"})])]),_:1},8,["onCommand"])]),_:1},8,["title"]),o(le,null,{default:r(()=>{var g,B,w,C;return[i("div",Wx,[i("div",Xx,[i("div",Jx,[i("img",{src:(g=e.customer)==null?void 0:g.photo,alt:t.customerDisplayName},null,8,Zx)]),i("div",eU,[i("div",tU,m(t.customerDisplayName),1),i("span",aU,[e.customer.purchase_count>0?(A(),_("span",sU,m(f(nt)(e.customer.purchase_count)),1)):x("",!0),O(" "+m(t.$n("Order","Orders",e.customer.purchase_count??0,"No Order")),1)]),i("span",nU,m(f(lt)((B=e.customer)==null?void 0:B.ltv,!0))+" "+m(f(p)("Lifetime Value")),1)])])]),i("div",null,[e.customer.user_id&&e.customer.user_id>0?(A(),_("div",oU,[i("div",lU,[a[6]||(a[6]=O(" WP User: ",-1)),i("a",{href:e.customer.user_link,target:"_blank",class:"inline-flex items-center gap-1 dark:text-gray-100 text-primary-500 focus:shadow-none hover:!underline"},[O(" #"+m(f(nt)(e.customer.user_id))+" ",1),o(z,{name:"Redirect",class:"w-2.5 h-2.5 text-primary-500 dark:text-gray-200"})],8,rU)]),x("",!0)])):(A(),_("div",iU,[o(_p,{customer:e.customer},null,8,["customer"])]))]),i("div",AU,[i("h4",dU,m(t.$t("Contact Information")),1),i("ul",uU,[i("li",null,[i("div",cU,[i("a",{class:"text",href:"mailto:"+((w=e.customer)==null?void 0:w.email)},m((C=e.customer)==null?void 0:C.email),9,pU),o(ma,{text:e.customer.email,showMode:"basic_copy_btn",tooltipText:"Copy email"},null,8,["text"])])])])]),i("div",fU,[i("h4",hU,[O(m(t.$t("Shipping Address"))+" ",1),t.hasPrimaryShipping!=-1?(A(),U(c,{key:0,type:"info",round:""},{default:r(()=>[O(m(t.$t("Default")),1)]),_:1})):x("",!0)]),(A(!0),_(H,null,X(t.shippingAddress,(F,S)=>(A(),_(H,null,[F.is_primary==="1"?(A(),_("div",mU,[i("span",_U,[F.name?(A(),_("strong",gU,m(F.name),1)):x("",!0),i("span",{innerHTML:t.getOrderAddress(F,"shipping",!0)},null,8,vU),F.phone?(A(),_("span",yU,[i("strong",bU,m(f(p)("Phone"))+":",1),i("a",{href:"tel:"+F.phone,class:"text-system-mid dark:text-gray-50 hover:underline"},m(F.phone),9,wU)])):x("",!0)]),o(ma,{text:t.getOrderAddress(F),showMode:"basic_copy_btn",tooltipText:"Copy address"},null,8,["text"])])):x("",!0)],64))),256)),t.hasPrimaryShipping==-1?(A(),_("p",CU,m(t.$t("No default address found.")),1)):x("",!0)]),i("div",BU,[i("h4",kU,[O(m(t.$t("Billing Address"))+" ",1),t.hasPrimaryBilling!=-1?(A(),U(c,{key:0,type:"info",round:""},{default:r(()=>[O(m(t.$t("Default")),1)]),_:1})):x("",!0)]),(A(!0),_(H,null,X(t.billingAddress,(F,S)=>(A(),_(H,null,[F.is_primary==="1"?(A(),_("div",FU,[i("span",xU,[F.name?(A(),_("strong",UU,m(F.name),1)):x("",!0),i("span",{innerHTML:t.getOrderAddress(F,"billing",!0)},null,8,SU),F.phone?(A(),_("span",EU,[i("strong",QU,m(f(p)("Phone"))+":",1),i("a",{href:"tel:"+F.phone,class:"text-system-mid dark:text-gray-50 hover:underline"},m(F.phone),9,DU)])):x("",!0)]),o(ma,{text:t.getOrderAddress(F),showMode:"basic_copy_btn",tooltipText:t.$t("Copy address")},null,8,["text","tooltipText"])])):x("",!0)],64))),256)),t.hasPrimaryBilling===-1?(A(),_("p",IU,m(t.$t("No default address found.")),1)):x("",!0)])]}),_:1})]),_:1}),t.customerModalInfos.showModal?(A(),U(Ri,{key:0,"onUpdate:customerModal":t.fetch,customerModalInfos:t.customerModalInfos,customer_id:t.customerModalInfos.customer_id,customer:t.customerModalInfos.customer,onCloseModal:a[0]||(a[0]=g=>t.customerModalInfos.showModal=!1)},null,8,["onUpdate:customerModal","customerModalInfos","customer_id","customer"])):x("",!0),o(bu,{modalAction:t.modalAction,onRefreshAddress:t.refresh,"onUpdate:showAddressModal":a[1]||(a[1]=g=>t.showAddressModal=g),showAddressModal:t.showAddressModal,customer_id:e.customer_id,onAddNewAddress:t.addNewAddress},null,8,["modalAction","onRefreshAddress","showAddressModal","customer_id","onAddNewAddress"]),o(v,{"show-close":!0,modelValue:t.addOrEditAddress,"onUpdate:modelValue":a[4]||(a[4]=g=>t.addOrEditAddress=g),"append-to-body":!0,title:t.getTitle(),onClose:a[5]||(a[5]=()=>{t.closingModal=!0})},{default:r(()=>[i("div",$U,[o(d,{text:"",onClick:a[2]||(a[2]=()=>{t.showAddressModal=!0,t.addOrEditAddress=!1}),class:"mb-4"},{default:r(()=>[o(h,null,{default:r(()=>[o(f(ji))]),_:1}),O(" "+m(t.$t("Manage address")),1)]),_:1}),o(yu,{"onUpdate:refreshAddress":t.refresh,customer_id:e.customer_id,modalAction:t.modalAction,address:t.address,showAddressModal:t.addOrEditAddress,showSetAsAlsoCheckbox:t.shouldShowSetAsAlsoCheckbox,onCloseModal:a[3]||(a[3]=g=>t.addOrEditAddress=!1),closing_modal:t.closingModal},null,8,["onUpdate:refreshAddress","customer_id","modalAction","address","showAddressModal","showSetAsAlsoCheckbox","closing_modal"])])]),_:1},8,["modelValue","title"])])}}}),MU={class:"fct-single-customer-loader-wrap fct-layout-width"},VU={class:"single-page-header fct-page-loader-header flex items-start justify-between"},LU={class:"single-page-body"},OU={class:"fct-single-order"},HU={class:"fct-single-order-main"},RU={class:"fct-single-order-aside"},PU={class:"fct-admin-sidebar"},vp={__name:"SingleCustomerLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton");return A(),_("div",MU,[i("div",VU,[o(n,{animated:"",class:"flex items-start gap-2"},{template:r(()=>[(A(),_(H,null,X(3,l=>o(s,{key:l,class:"max-w-[100px]"})),64))]),_:1})]),i("div",LU,[i("div",OU,[i("div",HU,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small",title:t.$t("Orders")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1})]),i("div",RU,[i("div",PU,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Customer Informations"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},KU={key:2},NU={key:0,class:"fct-single-customer-wrapper fct-layout-width"},GU={class:"single-page-header"},zU={class:"single-page-header-title-wrap"},jU={key:0},YU={key:0,class:"single-page-body"},qU={class:"fct-admin-sidebar"},WU={key:0},XU={name:"SingleCustomer",props:["customer_id"],components:{OrdersTable:Ni,IconButton:we,Empty:Te,DynamicIcon:z,Badge:ut,SaveBar:wn,CustomerInformation:gp,Labels:Il,DynamicTemplates:kn,ArrowDown:zi,ArrowRight:la,CardContainer:re,CardHeader:Ae,CardBody:le,LicenseTable:Pi,OrdersTableMobile:Gi,SubscriptionsTable:Bu,SingleCustomerLoader:vp,SubscriptionsTableMobile:Cu},data(){return{changes_made:0,notFound:{show:!1,message:"",buttonText:"",route:""},loading:!1,customer:"",selection:!1,selectedOrders:[],editableOrderStatues:this.appVars.editable_order_statues,selectedLabels:[],licenses:[],subscriptions:[],customerOrders:[],paginate:{current_page:1,per_page:10,last_page:1,total:0,from:1,to:10},fetchingOrders:!1,search:"",showSearch:!1}},watch:{customer_id:{handler(e,t){this.fetch()}}},computed:{},methods:{getProductName(e){var t,a;return(t=e==null?void 0:e.product)!=null&&t.post_title?(a=e==null?void 0:e.product)==null?void 0:a.post_title:"n/a"},getProductVariationName(e){var t,a;return(t=e==null?void 0:e.product_variant)!=null&&t.variation_title?(a=e==null?void 0:e.product_variant)==null?void 0:a.variation_title:"n/a"},onChangeLabel(e){this.selectedLabels=e,this.changes_made++},update(){this.loading=!0,se.put("customers/"+this.customer_id+"/additional-info",{labels:this.selectedLabels}).then(e=>{Y.success(e)}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},discardChanges(){return window.location.reload()},fetch(){this.notFound.show=!1,this.loading=!0,this.selectedOrders=[],se.get("customers/"+this.customer_id,{with:["shipping_address","billing_address","labels","subscriptions"]}).then(e=>{this.changeTitle(p("Customer: %s",e.customer.full_name)),this.customer=e.customer,this.selectedLabels=e.customer.selected_labels,this.licenses=this.customer.licenses,this.subscriptions=this.customer.subscriptions}).catch(e=>{var t;e.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=ve.get(e,"data.buttonText"),this.notFound.message=ve.get(e,"data.message"),this.notFound.route=ve.get(e,"data.route")):e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.loading=!1})},getCustomerOrders(){this.fetchingOrders=!0,se.get("customers/"+this.customer_id+"/orders",{per_page:this.paginate.per_page,page:this.paginate.current_page,with:["order_items"],search:this.search,order_by:"id",order_type:"DESC"}).then(e=>{this.customerOrders=e.orders,this.paginate.total=e.orders.total,this.paginate.per_page=e.orders.per_page,this.paginate.current_page=e.orders.current_page,this.paginate.last_page=e.orders.last_page,this.paginate.from=e.orders.from,this.paginate.to=e.orders.to}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.fetchingOrders=!1})},onSelection(e){this.selection=!!e.length,this.selectedOrders=e,this.selectionCount=e.length},exportOrders(){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluent_cart_admin_ajax",route:"export_orders",customer_id:this.customer_id,search:this.search,format:"csv"})}},mounted(){this.fetch(),this.getCustomerOrders()}},JU=Object.assign(XU,{setup(e){return(t,a)=>{const s=b("el-breadcrumb-item"),n=b("el-breadcrumb"),l=b("el-input"),d=b("el-col"),u=b("el-row");return A(),_(H,null,[t.loading?(A(),U(vp,{key:0})):x("",!0),t.notFound.show?(A(),U(Ml,{key:1,"button-text":t.notFound.buttonText,message:t.notFound.message,route:t.notFound.route},null,8,["button-text","message","route"])):x("",!0),t.notFound.show===!1?(A(),_("div",KU,[t.loading?x("",!0):(A(),_("div",NU,[o(wn,{isActive:t.changes_made>0?"is-active":"",onDiscard:t.discardChanges,onSave:t.update,loading:t.loading},null,8,["isActive","onDiscard","onSave","loading"]),i("div",GU,[i("div",zU,[o(n,{"separator-icon":f(la)},{default:r(()=>[o(s,{to:{name:"customers"}},{default:r(()=>[O(m(f(p)("Customers")),1)]),_:1}),o(s,null,{default:r(()=>[t.customer?(A(),_("span",jU,m(t.customer.full_name),1)):x("",!0)]),_:1}),o(s,null,{default:r(()=>[O(m(f(p)("Overview")),1)]),_:1})]),_:1},8,["separator-icon"])])]),t.customer.id?(A(),_("div",YU,[o(u,{gutter:30},{default:r(()=>[o(d,{lg:17,xs:24},{default:r(()=>[o(f(re),{class:"overflow-hidden fct-customer-orders-items"},{default:r(()=>[o(f(Ae),{title:f(p)("Orders (%s)",f(nt)(t.customerOrders.total||0)),title_size:"small"},{action:r(()=>[o(l,{modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=c=>t.search=c),onKeyup:a[1]||(a[1]=Ma(c=>t.getCustomerOrders(),["enter"])),placeholder:f(p)("Type and hit enter..."),clearable:"",onClear:a[2]||(a[2]=c=>t.getCustomerOrders()),class:oe(`w-[210px] ${t.showSearch?"":"search-input-hide-on-mobile"}`)},null,8,["modelValue","placeholder","class"]),o(we,{tag:"button",size:"small",onClick:a[3]||(a[3]=c=>t.showSearch=!t.showSearch),class:"icon-button-show-on-mobile ml-2"},{default:r(()=>[t.showSearch?(A(),U(z,{key:0,name:"Cross"})):(A(),U(z,{key:1,name:"Search"}))]),_:1})]),_:1},8,["title"]),o(f(le),{class:"px-0 pb-0"},{default:r(()=>[t.fetchingOrders?(A(),U(zx,{key:0,columns:["items","order_items","total","type","status"]})):(A(),_(H,{key:1},[o(Ni,{class:"hide-on-mobile",onFetch:t.getCustomerOrders,orders:t.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["onFetch","orders"]),o(Gi,{class:"show-on-mobile",orders:t.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["orders"])],64)),t.paginate.total>10?(A(),U(vu,{key:2,onFetch:t.getCustomerOrders,hide_on_single:!1,pagination:t.paginate},null,8,["onFetch","pagination"])):x("",!0)]),_:1})]),_:1}),t.customer.subscriptions?(A(),U(f(re),{key:0,class:"overflow-hidden"},{default:r(()=>[o(f(Ae),{title:f(p)("Subscriptions")+" ("+f(nt)(t.customer.subscriptions.length)+")",title_size:"small"},null,8,["title"]),o(f(le),{class:"px-0 pb-0"},{default:r(()=>[o(Bu,{class:"hide-on-mobile",subscriptions:t.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"]),o(Cu,{class:"show-on-mobile",subscriptions:t.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"])]),_:1})]),_:1})):x("",!0),t.customer.licenses?(A(),U(f(re),{key:1,class:"overflow-hidden"},{default:r(()=>[o(f(Ae),{title:f(p)("Licenses")+" ("+f(nt)(t.customer.licenses.length)+")",title_size:"small"},null,8,["title"]),o(f(le),{class:"px-0 pb-0 fct-single-customer-license-table"},{default:r(()=>[o(Pi,{columns:["product","order_id"],licenses:t.customer.licenses},null,8,["licenses"])]),_:1})]),_:1})):x("",!0)]),_:1}),o(d,{lg:7,xs:24},{default:r(()=>[i("div",qU,[o(gp,{customer:t.customer,customer_id:e.customer_id,onFetch:t.fetch},null,8,["customer","customer_id","onFetch"]),o(Il,{"bind-to-id":t.customer.id,"bind-to-type":"Customer",selectedLabels:t.selectedLabels,shouldEnableEditing:!0},null,8,["bind-to-id","selectedLabels"]),t.customer?(A(),_("div",WU,[o(kn,{filter:"customer",widgetsQuery:{customer_id:t.customer.id},data:{customer:t.customer}},null,8,["widgetsQuery","data"])])):x("",!0)])]),_:1})]),_:1})])):x("",!0)]))])):x("",!0)],64)}}}),ZU={components:{BundleProducts:Xi,Empty:Te,Pagination:vu,Badge:ut,DynamicIcon:z},props:["searchQueryParent","orderParent","order_id"],data(){return{loading:!1,searching:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],cartItems:[],paginate:{per_page:10,current_page:1,total:0,last_page:1},collapsedStates:null}},computed:{CurrencyFormatter(){return Be},Asset(){return mn},order:{get(){return this.orderParent},set(e){this.$emit("update:order",e)}},searchQuery:{get(){return this.searchQueryParent},set(e){this.$emit("update:searchQuery",e)}}},created(){this.initializeCollapsedStates()},methods:{translate:p,translateNumber:nt,initializeCollapsedStates(){this.collapsedStates=Array.from({length:this.availableProducts.length},()=>!1)},handleToggleCollapse(e){this.collapsedStates[e]=!this.collapsedStates[e];for(let t=0;t<this.collapsedStates.length;t++)t!==e&&(this.collapsedStates[t]=!1)},hasSubscriptionProduct(e,t){return e.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===t?!0:!!(s.other_info.payment_type&&s.other_info.payment_type===t)).length>0},validateShouldAddProduct(e){var l;const t=this.order.order_items.map(d=>d.object_id),a=this.selectedProducts.map(d=>d.object_id),s=((l=e==null?void 0:e.other_info)==null?void 0:l.payment_type)==="onetime"?"subscription":"onetime",n=this.order.order_items.length===0;if(n&&this.selectedProducts.length===0)return!0;if(n&&a.includes(e.object_id))return!0;if(!n&&t.includes(e.object_id))return!0;if(n&&!this.hasSubscriptionProduct(this.selectedProducts,s)){if(!this.hasSubscriptionProduct(this.selectedProducts,"subscription"))return!0}else if(!n&&!this.hasSubscriptionProduct(this.order.order_items,s)&&!this.hasSubscriptionProduct(this.order.order_items,"subscription"))return!0;return!1},handleCheckboxChange(e,t){if(t.checked)if(this.validateShouldAddProduct(t))this.selectedProducts.push(t);else return t.checked=!1,Y.error(p("You can purchase one subscription at a time."));else{const a=this.selectedProducts.findIndex(s=>s.id===t.id);if(a!==-1)return this.selectedProducts.splice(a,1)}},onCurrentPageChanged({page:e,currentPageCount:t}){this.paginate.current_page=e,this.doSearch()},onPerPageChanged(e){this.paginate.per_page=e,this.doSearch()},isAlreadyAdded(e){return this.order.order_items?this.order.order_items.some(t=>parseInt(t.object_id)===parseInt(e)):!1},isNotParentVariant(e){return!e.children||e.children.length<1},handleSelectionChanges(e){this.selectedProducts=e},processProducts(){let e={};this.order.order_items&&this.order.order_items.length&&this.order.order_items.forEach((a,s)=>{e[a.object_id]=a}),this.selectedProducts&&this.selectedProducts.forEach((a,s)=>{e[a.object_id]?e[a.object_id].quantity++:(a.tax_amount=parseInt(a.tax_amount)||0,a.shipping_charge=parseInt(a.shipping_charge)||0,a.discount_total=parseInt(a.discount_total)||0,a.quantity=parseInt(a.quantity)||1,e[a.object_id]=a),e[a.object_id].updated_stock=parseInt(a.available),e[a.object_id].total=parseInt(e[a.object_id].price)*parseInt(e[a.object_id].quantity),e[a.object_id].line_total=parseInt(e[a.object_id].total)-parseInt(e[a.object_id].discount_total)+parseInt(e[a.object_id].tax_amount)}),this.order.order_items=[];let t=0;for(const a in e)if(this.order.order_items.push(e[a]),t+=parseInt(e[a].line_total),e[a].payment_type==="subscription"&&e[a].other_info.manage_setup_fee==="yes"){let s=parseInt(e[a].other_info.signup_fee);e[a].other_info.setup_fee_per_item==="yes"&&(s=s*e[a].quantity),t+=s}return this.order.subtotal=t,this.order.total_amount=t+parseInt(this.order.tax_total)+parseInt(this.order.shipping_total)-parseInt(this.order.manual_discount_total),this.orderAddModal=!1,this.searchQuery="",this.selectedProducts=[],!0},fetchBySearch(){this.loading=!0,this.searching=!0,this.orderAddModal=!0;let e=this;de(()=>{setTimeout(()=>{e.$refs.fc_product_search_new.ref.focus()},50)}),clearTimeout(this.timeout);const t=this;this.timeout=setTimeout(function(){t.doSearch()},700)},doSearch(){this.loading=!0;let e={active_view:"publish",per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.searchQuery,filter_type:"simple",sort_by:"ID",with:["detail.variants.media","detail.variants.bundleChildren","categories"]};se.get("products/",{...e}).then(t=>{let a={...t.products};this.availableProducts=yf(a.data,this.order_id),delete a.data,this.paginate=a,this.searching=!1}).catch(t=>{var a;t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1})},formatCapitalized(e){return vf(e)}}},eS={class:"fluent-cart-admin-pages"},tS={class:"-mx-5 pb-5 border border-solid border-t-0 border-x-0 border-gray-divider dark:border-dark-400"},aS={class:"px-5"},sS={class:"fc_product_search_table",ref:"fc_product_search_table"},nS={class:"fct-collapsible-list"},oS={class:"fct-collapsible-list-item-inner"},lS={class:"fct-collapsible-item"},rS={class:"fct-collapsible-content-wrapper"},iS=["onClick"],AS={key:1,class:"content-indent"},dS={class:"content-checkbox"},uS={class:"content-img"},cS=["src","alt"],pS={class:"content-title"},fS={class:"title"},hS={key:0,class:"text-gray-500 dark:text-gray-400"},mS={key:1,class:"text"},_S={key:0,class:"fct-collapsible-stock-wrapper"},gS={key:0},vS={key:1,class:"text-red-500"},yS={class:"fct-collapsible-value-wrapper"},bS={key:0},wS={key:1},CS={class:"fct-collapsible-item-child-inner"},BS={class:"fct-collapsible-item"},kS={class:"fct-collapsible-content-wrapper"},FS={class:"fct-collapsible-content-group"},xS={class:"content-checkbox"},US={class:"content-img"},SS=["src","alt"],ES={class:"content-title"},QS={class:"title"},DS={key:0,class:"text"},IS={key:0},$S={key:1,class:"text already-added"},TS={class:"fct-collapsible-stock-wrapper"},MS={key:0},VS={key:1,class:"text-red-500"},LS={class:"fct-collapsible-value-wrapper"},OS={class:"-mx-5 -mb-5 fc_product_search_pagination_wrap"},HS={class:"dialog-footer"};function RS(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-input"),c=b("el-skeleton"),h=b("el-checkbox"),v=b("BundleProducts"),y=b("Empty"),g=b("pagination"),B=b("el-button"),w=b("el-dialog");return A(),_("div",eS,[o(w,{class:"fct-add-product-item-modal",ref:"fc_product_search_container",onClose:t[3]||(t[3]=C=>l.searchQuery=""),modelValue:n.orderAddModal,"onUpdate:modelValue":t[4]||(t[4]=C=>n.orderAddModal=C),title:e.$t("Add Items")},{default:r(()=>[i("div",tS,[i("div",aS,[o(u,{placeholder:e.$t("Search products"),autofocus:"",ref:"fc_product_search_new",onInput:t[0]||(t[0]=C=>l.fetchBySearch()),modelValue:l.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=C=>l.searchQuery=C),clearable:""},{prefix:r(()=>[o(d,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),i("div",sS,[o(c,{class:"px-5 py-4",loading:n.loading,rows:5,animated:""},null,8,["loading"]),n.loading?x("",!0):(A(),_(H,{key:0},[i("ul",nS,[(A(!0),_(H,null,X(n.availableProducts,(C,F)=>{var S,E,k,Q,I,D,M,$,V;return A(),_("li",{class:"fct-collapsible-list-item",key:F},[i("div",oS,[i("div",lS,[i("div",rS,[((S=C==null?void 0:C.children)==null?void 0:S.length)>0?(A(),_("div",{key:0,class:oe(["content-collapsible-btn",{"is-collapsed":n.collapsedStates[F]}]),onClick:L=>l.handleToggleCollapse(F)},[o(d,{name:"CaretRight",class:"w-4 h-5"})],10,iS)):x("",!0),!((E=C==null?void 0:C.children)!=null&&E.length)>0?(A(),_("div",AS)):x("",!0),i("div",dS,[o(h,{modelValue:C.checked,"onUpdate:modelValue":L=>C.checked=L,onChange:L=>l.handleCheckboxChange(F,C),disabled:C.disable===!0||l.isAlreadyAdded(C.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),i("div",uS,[i("img",{src:C.featured_media!=null?C.featured_media:l.Asset.getUrl("images/placeholder-small.svg"),alt:C.title},null,8,cS)]),i("div",pS,[i("div",fS,m(C.post_title),1),((k=C==null?void 0:C.other_info)==null?void 0:k.payment_type)==="subscription"&&((Q=C.other_info)==null?void 0:Q.billing_summary)!==""?(A(),_("small",hS,m((I=C.other_info)==null?void 0:I.billing_summary),1)):x("",!0),l.isAlreadyAdded(C.object_id)?(A(),_("div",mS,m(e.$t("Item already added")),1)):x("",!0)])]),((D=C==null?void 0:C.children)==null?void 0:D.length)==0?(A(),_("div",_S,[C.stockStatus=="in-stock"?(A(),_("span",gS,m(C.available!==1/0?C.available+l.translate(" Available"):l.translate("Unlimited")),1)):x("",!0),C.stockStatus==="out-of-stock"?(A(),_("span",vS,m(l.formatCapitalized(C.stockStatus)),1)):x("",!0)])):x("",!0),i("div",yS,[((M=C==null?void 0:C.children)==null?void 0:M.length)>0?(A(),_("span",bS,m(C.min_price!=C.max_price?e.formatNumber(C.min_price)+" - "+e.formatNumber(C.max_price):e.formatNumber(C.min_price)),1)):(A(),_("span",wS,m(e.formatNumber(C.price)),1))])]),(($=C==null?void 0:C.children)==null?void 0:$.length)>0?(A(),_("div",{key:0,class:oe(["fct-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[F]}])},null,2)):x("",!0),((V=C==null?void 0:C.children)==null?void 0:V.length)>0?(A(),_("div",{key:1,class:oe(["fct-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[F]}])},[i("ul",CS,[(A(!0),_(H,null,X(C.children,(L,R)=>{var K,J,W,ae,Z;return A(),_("li",{key:R},[i("div",BS,[i("div",kS,[i("div",FS,[i("div",xS,[o(h,{modelValue:L.checked,"onUpdate:modelValue":te=>L.checked=te,onChange:te=>l.handleCheckboxChange(R,L),disabled:L.disable===!0||l.isAlreadyAdded(L.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),i("div",US,[i("img",{src:L.featured_media!=null?L.featured_media:e.appVars.asset_url+"images/placeholder-small.svg",alt:L.title},null,8,SS)])]),i("div",ES,[i("div",QS,m(L.title),1),((K=L==null?void 0:L.other_info)==null?void 0:K.payment_type)==="subscription"&&((J=L.other_info)==null?void 0:J.billing_summary)!==""?(A(),_("small",DS,[O(m(l.CurrencyFormatter.currencySign)+" "+m((W=L.other_info)==null?void 0:W.billing_summary)+" ",1),((ae=L.other_info)==null?void 0:ae.trial_days)>0?(A(),_("span",IS,[t[5]||(t[5]=i("br",null,null,-1)),O(" "+m(l.translate("Trial Days"))+": "+m((Z=L.other_info)==null?void 0:Z.trial_days),1)])):x("",!0)])):x("",!0),l.isAlreadyAdded(L.object_id)?(A(),_("div",$S,m(l.translate("Item already added")),1)):x("",!0),L.bundle_items.length>0?(A(),U(v,{key:2,product:L,"title-key":"variation_title"},null,8,["product"])):x("",!0)])]),i("div",TS,[L.stockStatus=="in-stock"?(A(),_("span",MS,m(L.available!==1/0?l.translateNumber(L.available)+l.translate(" Available"):l.translate("Unlimited")),1)):x("",!0),L.stockStatus=="out-of-stock"?(A(),_("span",VS,m(l.formatCapitalized(L.stockStatus)),1)):x("",!0)]),i("div",LS,m(e.formatNumber(L.price)),1)])])}),128))])],2)):x("",!0)])])}),128))]),n.availableProducts.length===0?(A(),U(y,{key:0,icon:"Empty/ListView",text:l.translate("We could't find any products matching your search.")},null,8,["text"])):x("",!0)],64))],512),i("div",OS,[o(g,{pagerSizes:!1,hide_on_single:!1,pagination:n.paginate,onFetch:l.doSearch,onCurrentPageChanged:l.onCurrentPageChanged,onOnPerPageChanged:l.onPerPageChanged},null,8,["pagination","onFetch","onCurrentPageChanged","onOnPerPageChanged"])]),i("div",HS,[o(B,{onClick:t[2]||(t[2]=C=>n.orderAddModal=!1)},{default:r(()=>[O(m(l.translate("Cancel")),1)]),_:1}),o(B,{disabled:!this.selectedProducts.length,type:"primary",onClick:l.processProducts},{default:r(()=>[O(m(l.translate("Add Items")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["modelValue","title"])])}const yp=be(ZU,[["render",RS]]),PS={key:0,class:"fct-downloadable-variation-selector"},KS={class:"price-info"},NS={key:0},Ul={__name:"VariationSelector",props:{variant:{type:Object,required:!0}},setup(e){return(t,a)=>{var s;return e.variant?(A(),_("div",PS,[i("span",null,m(e.variant.variation_title),1),i("span",KS,[(s=e.variant.other_info)!=null&&s.repeat_interval?(A(),_("span",NS,m(f(rt).capitalize(e.variant.other_info.repeat_interval)),1)):x("",!0),i("span",null,m(f(lt)(e.variant.item_price*100,!0)),1)])])):x("",!0)}}},GS={name:"Refund",components:{Badge:ut,VariationSelector:Ul,DynamicIcon:z},props:["order_id","order","is_subscription","subscription_status","showRefundModal"],data(){return{transactions:{},maxRefundAmount:"",refundProcessing:!1,refundableTransactions:[],isShippingRefundable:!1,refund:{item_ids:[],transaction_id:"",amount:0,cancelSubscription:!0,reason:"",availableAmount:"",paymentMethod:"",manageStock:!1},totalPaid:0,refundNote:""}},computed:{CurrencyFormatter(){return Be},isAnyProductManageStock(){var e;for(const t of this.order.order_items)if(t!=null&&t.variants&&((e=t==null?void 0:t.variants)==null?void 0:e.manage_stock)==="1")return!0;return!1},isSubscriptionCancelable(){return this.is_subscription&&this.subscription_status!=="canceled"&&this.subscription_status!=="expired"},checkMaxRefundAmount(){this.refund.amount>this.maxRefundAmount&&(this.refund.amount=this.maxRefundAmount)},refundTableItems(){let e=[];return!this.refund.item_ids||this.refund.item_ids.length===0?e=this.order.order_items.filter(t=>t.payment_type!=="signup_fee"):e=this.order.order_items.filter(t=>this.refund.item_ids.includes(t.id)&&t.payment_type!=="signup_fee"),e.map(t=>({...t,restore_quantity:t.restore_quantity||0,refund_quantity:Number(t.refund_total)||0}))}},watch:{showRefundModal(e){this.refundNote=""},"order.order_items":{immediate:!0,handler(e){const t=e.filter(a=>Number(a.line_total)-Number(a.refund_total)>0);t.length===1?this.refund.item_ids=[t[0].id]:this.refund.item_ids=[]}}},methods:{translate:p,formatNumber:lt,updateMaxRefund(){const e=this.refund.transaction_id;let t=this.refundableTransactions.find(n=>n.id===e);this.refund.amount=t.refundable?parseFloat(t.refundable/100):0,this.refund.paymentMethod=t.payment_method;const a=ve.whereIn(this.order.order_items,"id",this.refund.item_ids),s=a.reduce((n,l)=>n+(l.line_total-l.refund_total)/100,0);this.refund.amount>s&&a.length>0&&(this.refund.amount=s),this.maxRefundAmount=this.refund.amount},updateRefundable(){this.refundableTransactions=this.transactions.filter(e=>e.status==="succeeded").map(e=>{var t;return{...e,refundable:e.total-(parseInt((t=e.meta)==null?void 0:t.refunded_total)||0)}}),this.refundableTransactions.length!==0&&(this.refund.transaction_id=this.refundableTransactions[0].id,this.refund.payment_method=this.refundableTransactions[0].payment_method,this.updateMaxRefund(this.refund.transaction_id))},processRefund(){if(this.refundProcessing=!0,!this.refund.amount)return this.refundProcessing=!1,this.handleMessage("Please add refund amount.","error");if(this.refund.amount>this.refund.availableAmount)return this.refundProcessing=!1,this.handleMessage(`Refund amount should not exceed: ${this.appVars.shop.currency_sign}${this.refund.availableAmount}`,"error");const e=this.refundTableItems.filter(t=>t.restore_quantity>0).map(t=>({id:t.id,variation_id:t.object_id,quantity:t.quantity,restore_quantity:t.restore_quantity}));this.refund.refunded_items=e,this.$post("orders/"+this.order_id+"/refund",{refund_info:this.refund,refunded_items:e}).then(t=>{this.refundNote=t}).catch(t=>{this.handleError(t)}).finally(()=>{this.updateRefundable(),this.refundProcessing=!1})}},mounted(){var e,t,a;this.refund.availableAmount=parseInt((e=this==null?void 0:this.order)==null?void 0:e.total_paid)-parseInt((t=this==null?void 0:this.order)==null?void 0:t.total_refund),this.transactions=(a=this.order)==null?void 0:a.transactions,this.transactions.length&&this.updateRefundable()}},zS={key:0,class:"fct-refund-note-list"},jS={class:"message"},YS={key:1},qS={class:"refund-item-info"},WS={class:"right"},XS={class:"price"},JS={class:"price light"},ZS=["innerHTML"],eE={class:"form-note"},tE={style:{color:"#F04438","font-weight":"500"}},aE={class:"form-note form-note-tooltip"},sE={class:"dialog-footer is-border"},nE={key:0};function oE(e,t,a,s,n,l){const d=b("Badge"),u=b("el-option"),c=b("el-select"),h=b("el-form-item"),v=b("el-input"),y=b("el-checkbox"),g=b("el-col"),B=b("el-table-column"),w=b("el-input-number"),C=b("el-table"),F=b("DynamicIcon"),S=b("el-tooltip"),E=b("el-row"),k=b("el-form"),Q=b("el-button");return A(),_("div",null,[n.refundNote?(A(),_("div",zS,[(A(!0),_(H,null,X(n.refundNote,(I,D)=>(A(),_("div",{key:D,class:"fct-refund-note-item"},[i("span",jS,m(I.message),1),o(d,{status:I.status},null,8,["status"])]))),128))])):(A(),_("div",YS,[o(k,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(E,{gutter:10},{default:r(()=>[o(g,{lg:24},{default:r(()=>[o(h,{label:e.$t("Refund with transaction"),required:""},{default:r(()=>[o(c,{modelValue:n.refund.transaction_id,"onUpdate:modelValue":t[0]||(t[0]=I=>n.refund.transaction_id=I),placeholder:e.$t("Select"),onChange:l.updateMaxRefund},{default:r(()=>[(A(!0),_(H,null,X(n.refundableTransactions,I=>(A(),U(u,{key:I.id,label:l.translate("#%1$s - Paid %2$s",I.id,l.CurrencyFormatter.formatNumber(I.refundable,!0)),value:I.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),o(h,{label:e.$t("Select Item/s")},{default:r(()=>[o(c,{modelValue:n.refund.item_ids,"onUpdate:modelValue":t[1]||(t[1]=I=>n.refund.item_ids=I),placeholder:e.$t("Select"),multiple:"",onChange:l.updateMaxRefund},{default:r(()=>[(A(!0),_(H,null,X(a.order.order_items,I=>(A(),U(u,{key:I.id,value:I.id,label:I.post_title+" - "+I.title+"  "+l.CurrencyFormatter.formatNumber(I.line_total-I.refund_total),class:"refund-item",disabled:Number(I.line_total)-Number(I.refund_total)<=0},{default:r(()=>[i("div",qS,[i("p",null,[O(m(I.post_title)+" ",1),i("span",null,"-"+m(I.title),1)]),i("div",WS,[i("span",XS,m(l.translate("Refundable: %s",l.CurrencyFormatter.formatNumber(I.line_total-I.refund_total))),1),i("span",JS,m(l.translate("Item price: %s",l.CurrencyFormatter.formatNumber(I.line_total))),1)])])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),o(g,{lg:24},{default:r(()=>[o(h,{label:e.$t("Refund amount"),required:""},{default:r(()=>[o(v,{type:"number",min:1,max:n.maxRefundAmount,modelValue:n.refund.amount,"onUpdate:modelValue":t[2]||(t[2]=I=>n.refund.amount=I),modelModifiers:{number:!0},onInput:l.checkMaxRefundAmount},{prefix:r(()=>[i("span",{innerHTML:l.CurrencyFormatter.currencySign},null,8,ZS)]),_:1},8,["max","modelValue","onInput"]),i("div",eE,[i("p",null,[O(m(e.$t("Max refund amount for this transaction:"))+" ",1),i("span",tE,m(l.CurrencyFormatter.formatNumber(n.maxRefundAmount*100)),1)])])]),_:1},8,["label"]),l.isSubscriptionCancelable?(A(),U(g,{key:0,lg:24},{default:r(()=>[o(h,{label:e.$t("Subscription")},{default:r(()=>[o(y,{label:e.$t("Cancel Subscription (if any)"),modelValue:n.refund.cancelSubscription,"onUpdate:modelValue":t[3]||(t[3]=I=>n.refund.cancelSubscription=I)},null,8,["label","modelValue"])]),_:1},8,["label"])]),_:1})):x("",!0),l.isAnyProductManageStock?(A(),U(g,{key:1,lg:24},{default:r(()=>[o(h,null,{default:r(()=>[o(y,{modelValue:n.refund.manageStock,"onUpdate:modelValue":t[4]||(t[4]=I=>n.refund.manageStock=I)},{default:r(()=>[O(m(e.$t("Restock Quantity")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})):x("",!0),n.refund.manageStock?(A(),U(g,{key:2,lg:24},{default:r(()=>[o(C,{data:l.refundTableItems,border:"",style:{width:"100%","margin-top":"15px"}},{default:r(()=>[o(B,{prop:"post_title",label:e.$t("Product"),"min-width":"200"},{default:r(({row:I})=>[i("span",null,m(I.post_title)+" - "+m(I.title),1)]),_:1},8,["label"]),o(B,{prop:"quantity",label:e.$t("Quantity"),width:"120",align:"center"},{default:r(({row:I})=>[i("span",null,m(I.quantity),1)]),_:1},8,["label"]),o(B,{label:e.$t("Restore Quantity"),width:"180",align:"center"},{default:r(({row:I})=>[o(w,{modelValue:I.restore_quantity,"onUpdate:modelValue":D=>I.restore_quantity=D,min:0,max:I.quantity},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):x("",!0),o(g,{lg:24},{default:r(()=>[o(h,{label:e.$t("Reason of refund")},{default:r(()=>[o(v,{modelValue:n.refund.reason,"onUpdate:modelValue":t[5]||(t[5]=I=>n.refund.reason=I)},null,8,["modelValue"]),i("div",aE,[i("p",null,[O(m(l.translate("Your customers can see this reason"))+" ",1),i("span",null,[o(S,{"popper-class":"fct-tooltip",placement:"top",content:l.translate("If set, possible values are duplicate fraudulent, and requested_by_customer If you believe the charge to be fraudulent, specifying fraudulent as the reason will add the associated card and email to your block lists")},{default:r(()=>[o(F,{name:"InformationFill"})]),_:1},8,["content"])])])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",sE,[o(Q,{type:"primary",onClick:je(l.processRefund,["prevent"]),loading:n.refundProcessing,disabled:n.refund.amount<=0},{default:r(()=>[O(m(n.refundProcessing?l.translate("Processing"):l.translate("Refund"))+" ",1),n.refund.amount?(A(),_("span",nE)):x("",!0),O(m(l.CurrencyFormatter.formatNumber(n.refund.amount*100)),1)]),_:1},8,["onClick","loading","disabled"])])]))])}const lE=be(GS,[["render",oE]]),rE={class:"fct-number-input"},iE=["disabled","min","max"],AE={class:"fct-number-input-buttons"},dE=["disabled"],uE=["disabled"],cE={style:{color:"red"}},bp={__name:"NumberInput",props:{min:{type:Number,default:1},max:{type:Number,default:999999},item:{type:Object,default:()=>({})},isDisabled:{type:Boolean,default:!1}},setup(e,{emit:t}){var S,E,k,Q,I;const a=t,s=e,n=T(""),l=()=>{var D,M,$,V;return(((D=s.item)==null?void 0:D.manage_stock)||((V=($=(M=s.item)==null?void 0:M.variants)==null?void 0:$.product_detail)==null?void 0:V.manage_stock))==1},d=T(((S=s.item)==null?void 0:S.quantity)||s.min),u=T(d.value),c=T(l()?((E=s.item)==null?void 0:E.available)||((Q=(k=s.item)==null?void 0:k.variants)==null?void 0:Q.available):s.max),h=T(l()?(I=s.item)==null?void 0:I.updated_stock:s.max);Je().ctx;const v=q(()=>u.value<=s.min),y=q(()=>u.value>=h.value),g=()=>{n.value="",u.value<h.value&&(d.value++,u.value=d.value,a("update:value",d.value,h.value,s.item))},B=()=>{n.value="",u.value>s.min&&(d.value--,u.value=d.value,a("update:value",d.value,h.value,s.item))},w=(D,M)=>{n.value="",u.value=parseInt(u.value),(isNaN(u.value)||u.value==="")&&(d.value=1),u.value<s.min?(d.value=s.min,u.value=d.value):u.value>s.max?(d.value=s.min,u.value=d.value,n.value=p("Unable to adjust quantity")):u.value>h.value?(d.value=h.value,u.value=d.value,n.value=p("Available: %s in stock",h.value)):u.value>=s.min&&(u.value===h.value||u.value<h.value)&&(d.value=u.value,u.value=d.value),a("update:value",d.value,h.value,s.item)},C=D=>{D.key==="ArrowDown"&&u.value<=s.min&&D.preventDefault()},F=()=>{var D,M,$,V,L;n.value="",d.value=((D=s.item)==null?void 0:D.quantity)||s.min,u.value=d.value,c.value=l()?((M=s.item)==null?void 0:M.available)||((V=($=s.item)==null?void 0:$.variants)==null?void 0:V.available):s.max,h.value=l()?(L=s.item)==null?void 0:L.updated_stock:s.max};return Ns(()=>{F()}),fe(()=>s.item,D=>{F()},{deep:!0}),(D,M)=>(A(),_(H,null,[i("div",rE,[pt(i("input",{disabled:e.isDisabled,"onUpdate:modelValue":M[0]||(M[0]=$=>u.value=$),type:"number",onInput:M[1]||(M[1]=$=>{w()}),min:e.min,max:e.max,onKeydown:C},null,40,iE),[[df,u.value,void 0,{number:!0}]]),i("div",AE,[i("button",{onClick:g,class:"increment-btn",disabled:y.value||e.isDisabled},[o(z,{name:"ChevronUp"})],8,dE),i("button",{onClick:B,class:"decrement-btn",disabled:v.value||e.isDisabled},[o(z,{name:"ChevronDown"})],8,uE)])]),i("span",cE,m(n.value),1)],64))}},pE={name:"PaymentLink",props:["order","order_id"],data(){return{fetchLink:!1,selectedMethod:"stripe",business_email:"",buyer_email:"",selectedTransaction:"0",use_vendor_checkout:!1,vendor_url:null,transactionIds:[],actionName:"copy",paymentUrl:"",paymentMethods:[{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}]}},computed:{DynamicIcon(){return z},adminUrl(){return De.get("admin_url")}},components:{IconButton:we,DynamicIcon:z,CopyToClipboard:ma,InfoFilled:ca},methods:{translate:p,updatePaymentLink(e){e?this.searchOldUrl():this.paymentUrl=this.order.custom_checkout_url},getPaymentLink(){this.fetchLink=!0,this.$get("orders/"+this.order_id+"/transactions/get_payment_link",{data:{method:this.selectedMethod,transaction:0,use_vendor_checkout:this.use_vendor_checkout,business_email:this.business_email,buyer_email:this.buyer_email}}).then(e=>{var t,a;this.vendor_url=(t=e==null?void 0:e.data)==null?void 0:t.redirect_to,this.paymentUrl=(a=e==null?void 0:e.data)==null?void 0:a.redirect_to,this.fetchLink=!1}).catch(e=>{this.handleError(e),this.fetchLink=!1,this.$emit("reload")})},makeSelectableId(){this.transactionIds=[],this.order.transactions.forEach(e=>{e.status!=="paid"&&this.transactionIds.push({label:e.id,value:e.id})})},searchOldUrl(){var t,a;this.selectedTransaction=this.transactionIds[this.transactionIds.length-1].value;const e=this.order.transactions.filter(s=>s.id==this.selectedTransaction&&s.payment_method==this.selectedMethod);this.paymentUrl=(a=(t=e[0])==null?void 0:t.meta)==null?void 0:a.payment_link},generatePaymentUrl(){this.paymentUrl=this.order.custom_checkout_url}},mounted(){this.makeSelectableId(),this.generatePaymentUrl()}},fE=["element-loading-text"],hE={class:"fct-payment-link-block"},mE={key:1,class:"fct-payment-link-block"};function _E(e,t,a,s,n,l){const d=b("CopyToClipboard"),u=b("el-button"),c=b("el-input"),h=b("el-form-item"),v=b("el-col"),y=b("el-row"),g=Qt("loading");return pt((A(),_("div",{class:"fct-payment-link grid gap-5","element-loading-text":l.translate("Please wait, Generating Payment link...")},[i("div",hE,[n.paymentUrl?(A(),U(d,{key:0,text:n.paymentUrl,tooltipText:l.translate("Copy Link"),placeholder:l.translate("No payment link available,Please setup custom checkout page!")},null,8,["text","tooltipText","placeholder"])):(A(),U(u,{key:1,target:"_blank",link:"",tag:"router-link",to:{name:"pages_setup"}},{default:r(()=>[O(m(l.translate("Create a custom checkout page to generate custom links.")),1)]),_:1}))]),n.selectedMethod==="paypal"&&n.use_vendor_checkout?(A(),U(y,{key:0,class:"el-form--label-top",gutter:20},{default:r(()=>[o(v,{md:24,lg:11},{default:r(()=>[o(h,{label:l.translate("PayPal Business/Seller Email")},{default:r(()=>[o(c,{modelValue:n.business_email,"onUpdate:modelValue":t[0]||(t[0]=B=>n.business_email=B),placeholder:"Enter your PayPal business/seller email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(v,{md:24,lg:11},{default:r(()=>[o(h,{label:l.translate("PayPal Buyer Email (optional)")},{default:r(()=>[o(c,{modelValue:n.buyer_email,"onUpdate:modelValue":t[1]||(t[1]=B=>n.buyer_email=B),placeholder:"Enter The buyer email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})):x("",!0),n.use_vendor_checkout?(A(),_("div",mE,[o(u,{type:"primary",onClick:l.getPaymentLink},{default:r(()=>[O(m(l.translate("Create new transaction & link")),1)]),_:1},8,["onClick"])])):x("",!0)],8,fE)),[[g,n.fetchLink]])}const gE=be(pE,[["render",_E]]),vE={data(){return{showModal:!1,activity:{}}},components:{ConvertedTime:Lt,DynamicIcon:z,IconButton:we,Badge:ut},props:["activities","showManageActivity"],methods:{deleteModal(e){this.showModal=!0,this.activity=e},deleteActivity(){this.showModal=!1,this.$del("activity/"+this.activity.id,{}).then(e=>{var t;this.handleSuccess((t=e==null?void 0:e.data)==null?void 0:t.message),this.$emit("reload")})}}},yE={class:"fluent-cart-order-activity-list"},bE={class:"fluent-cart-order-activity-complete-icon"},wE={class:"fluent-cart-order-activity-details-container"},CE={class:"date-value"},BE={class:"event-title"},kE=["innerHTML"],FE={key:0,class:"delete-activity-button"},xE={key:0,class:"p-4 text-center"},UE={class:"fct-delete-activity-content-heading"},SE={class:"fct-delete-activity-content"},EE={class:"title"},QE={class:"text"},DE={class:"dialog-footer is-border"};function IE(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("ConvertedTime"),c=b("el-tag"),h=b("IconButton"),v=b("el-button"),y=b("el-dialog");return A(),_("div",yE,[(A(!0),_(H,null,X(a.activities,g=>(A(),_("div",{class:"fluent-cart-order-activity",key:g.id},[i("div",bE,[o(d,{name:"Check"})]),i("div",wE,[i("div",{class:oe(`fluent-cart-order-activity-details fluent-cart-order-activity-status-${g.status}`)},[i("span",CE,[o(u,{"date-time":g.created_at},null,8,["date-time"])]),i("div",BE,[i("span",null,m(e.$t(g.title)),1),o(c,{type:"info"},{default:r(()=>[O(m(g.created_by),1)]),_:2},1024)]),i("div",{class:"event-text",innerHTML:g.content},null,8,kE)],2),a.showManageActivity?(A(),_("div",FE,[o(h,{onClick:B=>l.deleteModal(g),size:"x-small",hover:"info"},{default:r(()=>[o(d,{name:"Delete"})]),_:2},1032,["onClick"])])):x("",!0)])]))),128)),a.activities.length?x("",!0):(A(),_("div",xE,m(e.$t("No activity found.")),1)),o(y,{title:e.$t("Delete Activity"),modelValue:n.showModal,"onUpdate:modelValue":t[1]||(t[1]=g=>n.showModal=g),"append-to-body":!0},{default:r(()=>[i("div",UE,m(e.$t("Are you sure, you want to delete this activity?")),1),i("div",SE,[i("div",EE,[O(" #"+m(this.activity.id)+" "+m(this.activity.title)+" ",1),i("span",null,"by"+m(n.activity.created_by),1)]),i("div",QE,m(this.activity.content),1)]),i("div",DE,[o(v,{onClick:t[0]||(t[0]=g=>n.showModal=!1),size:"small"},{default:r(()=>[O(m(e.$t("Cancel")),1)]),_:1}),o(v,{type:"primary",onClick:l.deleteActivity,size:"small"},{default:r(()=>[O(m(e.$t("Yes! Delete")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"])])}const wp=be(vE,[["render",IE]]),$E={class:"fct-single-order-loader-wrap fct-layout-width"},TE={class:"single-page-header fct-page-loader-header flex items-start justify-between"},ME={class:"single-page-body"},VE={class:"fct-single-order"},LE={class:"fct-single-order-main"},OE={class:"fct-single-order-aside"},HE={class:"fct-admin-sidebar"},RE={__name:"SingleOrderLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton");return A(),_("div",$E,[i("div",TE,[o(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:r(()=>[o(s,{class:"max-w-180"}),o(s,{class:"max-w-[100px]"})]),_:1}),o(n,{animated:"",class:"flex gap-2 max-w-180"},{template:r(()=>[o(s,{class:"w-1/4"}),o(s,{class:"w-3/4"})]),_:1})]),i("div",ME,[i("div",VE,[i("div",LE,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title:t.$t("Order items")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title:t.$t("Payments")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title:t.$t("Transaction Details")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title:t.$t("Activity")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1})]),i("div",OE,[i("div",HE,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Notes"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Customer Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},PE={name:"_Plans.vue",components:{Badge:ut},data(){return{}},props:["subscription","header","order","getOrderUrl"],computed:{subscriptionStatus(){var e;return(e=this.subscription)==null?void 0:e.status}},methods:{translate:p}},KE={class:"fct-subscription-plan-wrap"},NE={class:"fct-subs-status-wrap float-end"},GE={class:"fct-subs-title underline"},zE=["innerHTML"],jE={key:0,class:"cursor-pointer"};function YE(e,t,a,s,n,l){var c,h,v,y;const d=b("Badge"),u=b("router-link");return A(),_("div",KE,[i("div",NE,[o(d,{status:l.subscriptionStatus},null,8,["status"])]),o(u,{to:{name:"view_subscription",params:{subscription_id:(c=a.subscription)==null?void 0:c.id}}},{default:r(()=>{var g;return[i("p",GE,m(e.$t((g=a.subscription)==null?void 0:g.item_name)),1)]}),_:1},8,["to"]),i("p",{innerHTML:(h=a.subscription)==null?void 0:h.payment_info},null,8,zE),parseInt((v=a.order)==null?void 0:v.parent_id)?(A(),_("p",jE,[O(m(l.translate("Parent Order:"))+" ",1),i("a",{onClick:t[0]||(t[0]=g=>{var B;return a.getOrderUrl((B=a.order)==null?void 0:B.parent_id)})},"#"+m((y=a.order)==null?void 0:y.parent_id),1)])):x("",!0)])}const Cp=be(PE,[["render",YE]]),qE={name:"SubscriptionPlanItem",props:["subscription","order","orderId","index","getOrderUrl"],emits:["reload","fetchOrder","cancelSubscription"],components:{CardContainer:re,CardHeader:Ae,CardBody:le,Plans:Cp,Refresh:Yi,Delete:Ts,DynamicIcon:z,CancelSubscription:Ff},data(){return{loadingState:{pause:!1,resume:!1,cancel:!1,fetch:!1,reactivate:!1},cancelSubscriptionModal:!1,cancelReason:""}},computed:{permissions(){var a,s;const e=(((a=this.subscription)==null?void 0:a.status)||"").toLowerCase();let t=(s=this.subscription)==null?void 0:s.vendor_subscription_id;return{canFetch:!0,canPause:t&&!["canceled","paused","trialing","pending","intended","active(collection paused)"].includes(e),canResume:t&&["paused","active(collection paused)"].includes(e),canCancel:t&&!["canceled"].includes(e)}},paymentMethod(){var e;return((e=this.order)==null?void 0:e.payment_method)||""}},methods:{handleSubscriptionAction(e){e==="fetch_subscription"?this.confirmFetch():e==="pause_subscription"?this.confirmPause():e==="resume_subscription"?this.confirmResume():e==="cancel_subscription"&&this.confirmCancel()},confirmFetch(){var e;!this.subscription.vendor_subscription_id&&((e=this.order)==null?void 0:e.payment_method)!=="offline_payment"||os.confirm("Fetch from remote and update the subscription?","Warning",{type:"warning",icon:Dn(Ts),cancelButtonText:"Back",confirmButtonText:"Fetch subscription!",beforeClose:async(t,a,s)=>{var n,l;if(t==="confirm")try{a.confirmButtonLoading=!0,this.loadingState.fetch=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/fetch`,{data:{vendor_charge_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription fetched successfully"}),this.$emit("reload")}catch(d){this.$notify({type:"error",title:"Error",message:p(((l=(n=d.response)==null?void 0:n.data)==null?void 0:l.message)||"Failed to fetch subscription")}),console.error(d)}finally{a.confirmButtonLoading=!1,this.loadingState.fetch=!1,s()}else s()}})},confirmPause(){this.subscription.vendor_subscription_id&&os.prompt("Pause the active subscription?","Warning",{type:"warning",icon:Dn(Ts),inputPlaceholder:"Enter reason for pausing",inputPattern:/.+/,inputErrorMessage:"Reason is required",cancelButtonText:"Back",confirmButtonText:"Pause Subscription!",beforeClose:async(e,t,a)=>{var s,n;if(e==="confirm")try{t.confirmButtonLoading=!0,this.loadingState.pause=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/pause`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:t.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription paused successfully"}),this.$emit("reload")}catch(l){this.$notify({type:"error",title:"Error",message:p(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to pause subscription")}),console.error(l)}finally{t.confirmButtonLoading=!1,this.loadingState.pause=!1,a()}else a()}})},confirmResume(){this.subscription.vendor_subscription_id&&os.prompt(p("Resume the paused subscription?"),p("Warning"),{type:"warning",icon:Dn(Ts),inputPlaceholder:p("Enter reason for resuming"),inputPattern:/.+/,inputErrorMessage:p("Reason is required"),cancelButtonText:p("Back"),confirmButtonText:p("Resume Subscription!"),beforeClose:async(e,t,a)=>{if(e==="confirm")try{t.confirmButtonLoading=!0,this.loadingState.resume=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/resume`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:t.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription resumed successfully"}),this.$emit("reload")}catch(s){this.$notify({type:"error",title:"Error",message:"Failed to resume subscription"}),console.error(s)}finally{t.confirmButtonLoading=!1,this.loadingState.resume=!1,a()}else a()}})},confirmCancel(){this.subscription.vendor_subscription_id&&(this.cancelSubscriptionModal=!0)},confirmReactivate(){this.subscription.vendor_subscription_id&&os.confirm("Reactivate the canceled subscription?","Warning",{type:"warning",icon:Dn(Ts),cancelButtonText:"Back",confirmButtonText:p("Reactivate Subscription!"),beforeClose:async(e,t,a)=>{var s,n;if(e==="confirm")try{t.confirmButtonLoading=!0,this.loadingState.reactivate=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/reactivate`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription reactivated successfully"}),this.$emit("reload")}catch(l){this.$notify({type:"error",title:"Error",message:p(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to reactivate subscription")}),console.error(l)}finally{t.confirmButtonLoading=!1,this.loadingState.reactivate=!1,a()}else a()}})}}},WE={class:"more-btn"},XE={class:"text-red-600"};function JE(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("refresh"),c=b("el-icon"),h=b("el-dropdown-item"),v=b("delete"),y=b("el-dropdown-menu"),g=b("el-dropdown"),B=b("CardHeader"),w=b("plans"),C=b("CardBody"),F=b("CardContainer"),S=b("CancelSubscription");return A(),_(H,null,[o(F,null,{default:r(()=>[o(B,{title:e.$t("Subscription Plan"),border_bottom:"",title_size:"small"},{default:r(()=>[l.permissions.canFetch||l.permissions.canPause||l.permissions.canResume||l.permissions.canCancel?(A(),U(g,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:t[0]||(t[0]=E=>l.handleSubscriptionAction(E))},{dropdown:r(()=>[o(y,null,{default:r(()=>[l.permissions.canFetch?(A(),U(h,{key:0,command:"fetch_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),O(" "+m(e.$t("Fetch subscription -"))+" "+m(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canPause?(A(),U(h,{key:1,command:"pause_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),O(" "+m(e.$t("Pause subscription -"))+" "+m(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canResume?(A(),U(h,{key:2,command:"resume_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(u)]),_:1}),O(" "+m(e.$t("Resume subscription -"))+" "+m(l.paymentMethod),1)]),_:1})):x("",!0),l.permissions.canCancel?(A(),U(h,{key:3,command:"cancel_subscription"},{default:r(()=>[o(c,null,{default:r(()=>[o(v)]),_:1}),i("span",XE,m(e.$t("Cancel subscription")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[i("span",WE,[o(d,{name:"More"})])]),_:1})):x("",!0)]),_:1},8,["title"]),o(C,null,{default:r(()=>[o(w,{onReload:t[1]||(t[1]=E=>e.$emit("reload")),getOrderUrl:a.getOrderUrl,subscription:a.subscription,order:a.order,header:e.$t("Subscription Plans #")+(a.index+1)},null,8,["getOrderUrl","subscription","order","header"])]),_:1})]),_:1}),o(S,{subscription:a.subscription,orderId:a.orderId,onClose:t[2]||(t[2]=E=>n.cancelSubscriptionModal=!1),modelValue:n.cancelSubscriptionModal,"onUpdate:modelValue":t[3]||(t[3]=E=>n.cancelSubscriptionModal=E),onReload:t[4]||(t[4]=E=>e.$emit("reload")),onCancelSubscription:l.confirmCancel},null,8,["subscription","orderId","modelValue","onCancelSubscription"])],64)}const ZE=be(qE,[["render",JE]]),e3={class:"fct-admin-sidebar-item"},t3={class:"fct-admin-summary-item-list"},a3={class:"fct-admin-summary-item"},s3={class:"font-medium"},n3={__name:"TaxInformationWidget",props:{taxId:{type:[Number,String],default:0}},setup(e){return(t,a)=>(A(),U(re,null,{default:r(()=>[o(Ae,{title:f(p)("Tax Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[i("div",e3,[i("ul",t3,[i("li",a3,[i("span",s3,m(f(p)("Tax ID")),1),i("span",null,m(e.taxId||"--"),1)])])])]),_:1})]),_:1}))}},o3={name:"OrderBulkActions",components:{DynamicIcon:z},emits:["reload","addItem","addProduct","enableItemEditing","disableItemEditing","handlePaymentActions"],props:["order","trigger_action","isEditingItem","mode","triggerMode","shouldShowRefund","warningMessage"],data(){return{selected_action:"",showModal:!1,status_data:{order_status:this.order.status,shipping_status:this.order.shipping_status,payment_status:this.order.payment_status},doing_actions:!1,manage_stock:!0,shouldDisableEditing:["completed","archived","canceled"].includes(this.order.status),isCancelled:["canceled"].includes(this.order.status),isCompleted:["completed"].includes(this.order.status),isUnshippable:["unshippable"].includes(this.order.shipping_status)}},methods:{translate:p,handleCommandAction(e){if(this.selected_action=e,e==="shipping_status")this.changeShipping();else if(e==="delete_order")this.confirmDeleteOrder();else if(e==="order_complete")this.selected_action="order_status",this.completeOrder();else if(e==="order_cancel")this.selected_action="order_status",this.cancelOrder();else if(e==="order_processing")this.selected_action="order_status",this.backToProcessing();else if(e==="order_receipt")this.showModal=!1;else if(e==="generate_missing_licenses")this.generateMissingLicenses();else if(e==="refund_order")this.$emit("handlePaymentActions","refund");else if(e==="sync_order_statuses")this.syncOrderStatuses();else if(e.action==="order_edit")if(e.isEditingItem)this.$emit("disableItemEditing");else{if(this.shouldDisableEditing)return;this.$emit("enableItemEditing")}else this.showModal=!0},confirmDeleteOrder(){this.$confirm(p("Are you sure you want to delete this order? This action can not be undone!"),p("Confirm Deleting"),{confirmButtonText:p("Yes, Delete"),cancelButtonText:p("Cancel"),cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.deleteOrder()})},deleteOrder(){this.deleting=!0,this.$del("orders/"+this.order.id).then(e=>{Ls(e.message),this.$router.push({name:"orders"})}).catch(e=>{e.status_code=="422"?Y.validationErrors(e):Y.error(e==null?void 0:e.data)}).finally(()=>{this.deleting=!1})},changeShipping(){this.showModal=!0},completeOrder(){this.$confirm(p("Are you sure you want to complete this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as complete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"completed"})})},generateMissingLicenses(){this.$confirm(p("Are you sure you want to generate missing licenses!"),p("Please confirm"),{confirmButtonText:p("Yes, Generate all missing licenses!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.generateLicenses()})},generateLicenses(){this.doing_actions=!0,this.$post("orders/"+this.order.id+"/generate-missing-licenses",{}).then(e=>{Y.success(e.message),this.$emit("reload")}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})},backToProcessing(){this.$confirm(p("Are you sure you want to revert back processing this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as processing!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"processing"})})},cancelOrder(){this.$confirm(p("Are you sure you want to change the order status to Cancel? This action is irreversible and cannot be undone."),p("Please confirm"),{confirmButtonText:p("Yes, Changed status to Cancel"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.manage_stock=!0,this.updateOrderStatuses({order_status:"canceled"})})},changeShippingStatus(){let e={};this.manage_stock=!0,e[this.selected_action]=this.status_data[this.selected_action],this.updateOrderStatuses(e)},updateOrderStatuses(e){this.doing_actions=!0,this.$put("orders/"+this.order.id+"/statuses",{action:"change_"+this.selected_action,statuses:e,manage_stock:this.manage_stock}).then(t=>{Y.success(t.message),this.$emit("reload")}).catch(t=>{var a;t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})},syncOrderStatuses(){this.doing_actions=!0,this.$put("orders/"+this.order.id+"/sync-statuses").then(e=>{Y.success(e.message),this.$emit("reload")}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.doing_actions=!1})}}},l3={class:"fct-order-bulk-action-modal"},r3={key:1,class:"more-btn"},i3={key:0},A3=["href"],d3={class:"dialog-footer"};function u3(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-button"),c=b("el-dropdown-item"),h=b("el-tooltip"),v=b("el-dropdown-menu"),y=b("el-dropdown"),g=b("el-option"),B=b("el-select"),w=b("el-form-item"),C=b("el-form"),F=b("el-dialog");return A(),_("div",l3,[o(y,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:l.handleCommandAction},{dropdown:r(()=>[o(v,null,{default:r(()=>{var S,E;return[a.trigger_action!=="add"?(A(),_("div",i3,[!n.isCancelled&&((S=a.order)==null?void 0:S.fulfillment_type)==="physical"?(A(),U(c,{key:0,command:"shipping_status"},{default:r(()=>[o(d,{name:"ShipmentStatus"}),O(" "+m(l.translate("Change Shipping Status")),1)]),_:1})):x("",!0),a.order.mode==="test"||n.isCancelled?(A(),U(c,{key:1,command:"delete_order",class:"item-destructive"},{default:r(()=>[o(d,{name:"Delete"}),O(" "+m(l.translate("Delete order")),1)]),_:1})):x("",!0),a.order.status==="processing"?(A(),U(c,{key:2,command:"order_complete"},{default:r(()=>[o(d,{name:"Check"}),O(" "+m(l.translate("Mark As Complete")),1)]),_:1})):x("",!0),n.isCancelled?x("",!0):(A(),U(c,{key:3,command:"order_cancel"},{default:r(()=>[o(d,{name:"Cross"}),O(" "+m(l.translate("Cancel Order")),1)]),_:1})),a.order.status==="completed"?(A(),U(c,{key:4,command:"order_processing"},{default:r(()=>[o(d,{name:"Refresh"}),O(" "+m(l.translate("Back to processing")),1)]),_:1})):x("",!0),!n.isCompleted&&!n.isCancelled?(A(),U(c,{key:5,command:"sync_order_statuses"},{default:r(()=>[o(d,{name:"Refresh"}),O(" "+m(l.translate("Sync Order Statuses")),1)]),_:1})):x("",!0),o(c,{command:"order_receipt",class:"item-link"},{default:r(()=>[i("a",{target:"_blank",href:a.order.receipt_url},[o(d,{name:"External"}),O(" "+m(l.translate("Receipt")),1)],8,A3)]),_:1}),(E=a.order)!=null&&E.has_missing_licenses?(A(),U(c,{key:6,command:"generate_missing_licenses"},{default:r(()=>[o(d,{name:"Files"}),O(" "+m(l.translate("Generate missing licenses")),1)]),_:1})):x("",!0),a.shouldShowRefund?(A(),U(c,{key:7,command:"refund_order",class:"bulk-action-only-mobile"},{default:r(()=>[o(d,{name:"Money"}),O(" "+m(l.translate("Refund")),1)]),_:1})):x("",!0),o(c,{command:{action:"order_edit",isEditingItem:a.isEditingItem},class:"bulk-action-only-mobile",disabled:n.shouldDisableEditing},{default:r(()=>[o(d,{name:"Edit"}),a.isEditingItem?(A(),_(H,{key:1},[O(m(l.translate("Disable Editing")),1)],64)):(A(),_(H,{key:0},[n.shouldDisableEditing?(A(),U(h,{key:0,placement:"top","popper-class":"fct-tooltip fct-disabled-edit-order-tooltip"},{content:r(()=>[O(m(a.warningMessage),1)]),default:r(()=>[O(" "+m(l.translate("Edit")),1)]),_:1})):(A(),_(H,{key:1},[O(m(l.translate("Edit")),1)],64))],64))]),_:1},8,["command","disabled"])])):x("",!0)]}),_:1})]),default:r(()=>[a.triggerMode==="button"?(A(),U(u,{key:0},{default:r(()=>[O(m(l.translate("More Action"))+" ",1),o(d,{name:"ChevronDown"})]),_:1})):(A(),_("span",r3,[o(d,{name:"More"})]))]),_:1},8,["onCommand"]),o(F,{modelValue:n.showModal,"onUpdate:modelValue":t[2]||(t[2]=S=>n.showModal=S),title:l.translate("Update Shipping Status")},{default:r(()=>[o(C,{data:n.status_data,"label-position":"top"},{default:r(()=>[n.selected_action==="shipping_status"||n.selected_action==="all"?(A(),U(w,{key:0,label:l.translate("Shipping Status")},{default:r(()=>[o(B,{modelValue:n.status_data.shipping_status,"onUpdate:modelValue":t[0]||(t[0]=S=>n.status_data.shipping_status=S),placeholder:l.translate("Select Shipping Status")},{default:r(()=>[(A(!0),_(H,null,X(e.appVars.shipping_statuses,(S,E)=>(A(),U(g,{key:E,label:S,value:E},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"]),i("span",d3,[o(u,{onClick:t[1]||(t[1]=S=>l.changeShippingStatus()),type:"primary"},{default:r(()=>[O(m(l.translate("Update")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}const vA=be(o3,[["render",u3]]),c3={name:"Transaction",computed:{Str(){return rt}},components:{ConvertedTime:Lt,ArrowDown:Dn(zi),Check:xu,Badge:ut,DynamicIcon:z},props:["transactions","transaction","header","transaction_data","order_id"],emits:["reload"],data(){return{visible:!1,doing_action:!1,disputeHandleModal:!1,disputeForm:{dispute_note:""},disputeTransaction:null,loadingDisputeAction:!1}},methods:{translate:p,getCardBrand:Fu,translateNumber:nt,handleDispute(e){this.disputeHandleModal=!0,this.disputeTransaction=e},handleDisputeSubmit(e){this.loadingDisputeAction=!0,this.$post("orders/"+this.order_id+"/transactions/"+this.disputeTransaction.id+"/accept-dispute",{dispute_note:this.disputeForm.dispute_note}).then(t=>{this.$notify.success(t.message),this.$emit("reload"),this.disputeHandleModal=!1}).catch(t=>{this.$notify.error(t.message)}).finally(()=>{this.disputeHandleModal=!1,this.loadingDisputeAction=!1})},hasDisputedTransaction(e){return e.some(t=>t.transaction_type=="dispute"&&t.status=="succeeded")}}},p3={key:0,class:"fct-transaction-details -mt-[1px]"},f3={class:"fct-table-wrap"},h3={class:"p-0 m-0 text-xs text-gray-500"},m3={key:0},_3=["href"],g3={class:"flex items-center gap-2.5"},v3={key:0,class:"w-7"},y3=["title","src","alt"],b3={key:1,class:"capitalize"},w3={key:2},C3={class:"text-sm"},B3={class:"text-sm text-gray-700"},k3={class:"text-sm flex gap-2"},F3=["href"];function x3(e,t,a,s,n,l){var S,E;const d=b("ConvertedTime"),u=b("el-table-column"),c=b("Badge"),h=b("el-tooltip"),v=b("el-button"),y=b("el-table"),g=b("el-form-item"),B=b("el-input"),w=b("el-form"),C=b("DynamicIcon"),F=b("el-dialog");return a.transactions.length>0?(A(),_("div",p3,[i("div",f3,[o(y,{data:a.transactions,class:"w-full"},{default:r(()=>[o(u,{label:l.translate("# Date"),width:"auto"},{default:r(k=>[i("div",null,[i("p",h3,"#"+m(l.translateNumber(k.row.id)),1),o(d,{"date-time":k.row.created_at},null,8,["date-time"])])]),_:1},8,["label"]),o(u,{label:l.translate("Gateway ID"),width:"160"},{default:r(k=>[k.row.vendor_charge_id==""?(A(),_("span",m3,"--")):(A(),_("a",{key:1,class:"text-primary-500 dark:text-gray-50 link",target:"_blank",href:k.row.url},m(k.row.vendor_charge_id),9,_3))]),_:1},8,["label"]),o(u,{label:l.translate("Payment Method"),width:"140"},{default:r(k=>[i("div",g3,[l.getCardBrand(k.row.card_brand,k.row.payment_method_type)?(A(),_("div",v3,[i("img",{class:"w-full",title:k.row.payment_method,src:l.getCardBrand(k.row.card_brand,k.row.payment_method_type),alt:k.row.card_brand},null,8,y3)])):(A(),_("span",b3,m(k.row.payment_method_type),1)),k.row.card_last_4&&k.row.card_last_4!="0"?(A(),_("span",w3,m("..."+k.row.card_last_4),1)):x("",!0)])]),_:1},8,["label"]),o(u,{label:l.translate("Total"),width:"auto"},{default:r(k=>[i("span",null,m(e.formatNumber(k.row.total)),1)]),_:1},8,["label"]),o(u,{label:l.translate("Status"),width:"120"},{default:r(k=>{var Q,I,D,M,$,V;return[k.row.transaction_type=="dispute"?(A(),U(h,{key:0,effect:"dark",placement:"top",content:"Transaction dispute, please resolve it from action menu. Reason: "+((I=(Q=k.row)==null?void 0:Q.meta)==null?void 0:I.dispute_reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>[o(c,{class:"m-2 b-red",status:"dispute"},{default:r(()=>t[3]||(t[3]=[O(" Dispute ",-1)])),_:1,__:[3]})]),_:2},1032,["content"])):x("",!0),(M=(D=k.row)==null?void 0:D.meta)!=null&&M.reason?(A(),U(h,{key:1,effect:"dark",placement:"top",content:l.translate((V=($=k.row)==null?void 0:$.meta)==null?void 0:V.reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>{var L,R,K,J;return[((R=(L=k.row)==null?void 0:L.meta)==null?void 0:R.disputed)=="yes"&&((J=(K=k.row)==null?void 0:K.meta)==null?void 0:J.dispute_resolved)=="no"?(A(),U(c,{key:0,status:k.row.status},{default:r(()=>{var W;return[O(m(k.row.status)+" "+m((W=k==null?void 0:k.row)==null?void 0:W.transaction_type),1)]}),_:2},1032,["status"])):(A(),U(c,{key:1,status:k.row.status},{default:r(()=>[O(m(k.row.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(A(),U(c,{key:2,status:k.row.status},{default:r(()=>[O(m(k.row.status),1)]),_:2},1032,["status"]))]}),_:1},8,["label"]),l.hasDisputedTransaction(a.transactions)?(A(),U(u,{key:0,label:l.translate("Actions"),width:"140"},{default:r(k=>[k.row.transaction_type=="dispute"&&k.row.status=="succeeded"?(A(),U(v,{key:0,type:"warning",size:"small",onClick:Q=>l.handleDispute(k.row)},{default:r(()=>[O(m(l.translate("Handle dispute")),1)]),_:2},1032,["onClick"])):x("",!0)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]),o(F,{modelValue:n.disputeHandleModal,"onUpdate:modelValue":t[2]||(t[2]=k=>n.disputeHandleModal=k),title:"Handle Dispute #"+((E=(S=n.disputeTransaction)==null?void 0:S.meta)==null?void 0:E.dispute_id),width:"800px"},{footer:r(()=>{var k,Q,I,D,M,$;return[i("a",{href:(k=n.disputeTransaction)==null?void 0:k.url,target:"_blank",class:"el-button el-button--warning is-link"},m(l.translate("See dispute on ")+((Q=n.disputeTransaction)==null?void 0:Q.payment_method)),9,F3),(D=(I=n.disputeTransaction)==null?void 0:I.meta)!=null&&D.is_charge_refundable?(A(),U(v,{key:0,type:"primary",onClick:t[1]||(t[1]=()=>e.$emit("triggerRefundModal")),loading:n.loadingDisputeAction},{default:r(()=>[O(m(l.translate("Refund customer")),1)]),_:1},8,["loading"])):x("",!0),($=(M=n.disputeTransaction)==null?void 0:M.meta)!=null&&$.is_dispute_actionable?(A(),U(v,{key:1,type:"primary",onClick:l.handleDisputeSubmit,loading:n.loadingDisputeAction},{default:r(()=>[O(m(l.translate("Accept Dispute")),1)]),_:1},8,["onClick","loading"])):x("",!0)]}),default:r(()=>{var k,Q,I,D,M,$;return[(Q=(k=n.disputeTransaction)==null?void 0:k.meta)!=null&&Q.dispute_reason?(A(),U(g,{key:0},{default:r(()=>{var V,L;return[i("div",C3," Dispute Reason: "+m((L=(V=n.disputeTransaction)==null?void 0:V.meta)==null?void 0:L.dispute_reason),1)]}),_:1})):x("",!0),o(g,null,{default:r(()=>[i("div",B3,m(l.translate("You may either counter the dispute by providing evidence to prove that the cardholder is the legitimate purchaser, or you can accept this dispute immediately to refund the cardholder and close the dispute.")),1)]),_:1}),(D=(I=n.disputeTransaction)==null?void 0:I.meta)!=null&&D.is_dispute_actionable?(A(),U(w,{key:1,model:n.disputeForm,"label-position":"top"},{default:r(()=>[o(g,{label:l.translate("Note"),prop:"dispute_note"},{default:r(()=>[o(B,{modelValue:n.disputeForm.dispute_note,"onUpdate:modelValue":t[0]||(t[0]=V=>n.disputeForm.dispute_note=V),placeholder:"(optional)",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])):x("",!0),($=(M=n.disputeTransaction)==null?void 0:M.meta)!=null&&$.is_charge_refundable?(A(),U(g,{key:2},{default:r(()=>[i("div",k3,[o(C,{class:"w-6 h-6",name:"Information"}),O(" "+m(l.translate("This dispute has refundable action, so you may refund the charge to the customer for a dispute resolution.")),1)])]),_:1})):x("",!0)]}),_:1},8,["modelValue","title"])])):x("",!0)}const yA=be(c3,[["render",x3]]),bA=(e,t,a=0)=>{let s=0,n=0;return t&&(e.manual_discount_total=0),e.order_items&&e.order_items.forEach((l,d)=>{let u=l.updateStock||0;l.quantity<1?l.quantity=1:u!=0&&parseInt(l.quantity)>u&&(l.quantity=u),l.total=l.unit_price*l.quantity;let c=l.unit_price*l.quantity;if(l.subtotal=c-l.cost,e.manual_discount_total>0?l.discount_total=l.discount_total:t===!0?n+=l.discount_total:(!e.manual_discount_total===0?e.manual_discount_total-=l.discount_total:e.manual_discount_total=0,l.discount_total=0),l.line_total=c-l.discount_total+l.tax_amount,s+=c,l.payment_type=="subscription"&&l.other_info.manage_setup_fee=="yes"){let h=parseInt(l.other_info.signup_fee);l.other_info.setup_fee_per_item=="yes"&&(h=h*l.quantity),s+=h}}),e.subtotal=s,e.coupon_discount_total=n,(e.subtotal<=0||e.subtotal<=e.manual_discount_total)&&(e.manual_discount_total=e.coupon_discount_total=e.shipping_tax=e.shipping_total=e.tax_total=0),U3(e),e},Jd=(e,t)=>{if(t.value<0)return e;let a=t.value?t.value*100:0;t.label="",t.type==="percentage"&&(a=e.subtotal*t.value/100),Bp(t),a=parseInt(a),a>=0&&a<=parseInt(e.subtotal)&&(e.manual_discount_total=a);let s=e.subtotal*1+e.tax_total*1+e.shipping_total*1-e.manual_discount_total-e.coupon_discount_total;return s>=0&&(e.total_amount=s),e},U3=e=>(e.total_amount=e.subtotal*1+e.tax_total*1+e.shipping_tax*1+e.shipping_total*1-e.manual_discount_total-e.coupon_discount_total,e),Bp=e=>(e.type==="percentage"&&(e.label="(-"+e.value+"%)"),e),S3={name:"NoteModal",props:["note"],data(){return{notes:this.note}},watch:{note:{handler:function(e,t){this.notes=e},deep:!0}},methods:{saveNote(){this.$emit("whenNoteEditIsDone",this.notes,!1)},closeModal(){this.$emit("closeModal")}},mounted(){}},E3={class:"fct-note-modal"},Q3={class:"dialog-footer"};function D3(e,t,a,s,n,l){const d=b("el-input"),u=b("el-form-item"),c=b("el-form"),h=b("el-button");return A(),_("div",E3,[o(c,{"label-position":"top"},{default:r(()=>[o(u,null,{default:r(()=>[o(d,{modelValue:n.notes,"onUpdate:modelValue":t[0]||(t[0]=v=>n.notes=v),autosize:{minRows:4},type:"textarea",minlength:"1",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),i("div",Q3,[o(h,{type:"info",soft:"",onClick:l.closeModal},{default:r(()=>[O(m(e.$t("Cancel")),1)]),_:1},8,["onClick"]),o(h,{type:"primary",onClick:l.saveNote},{default:r(()=>[O(m(e.$t("Save")),1)]),_:1},8,["onClick"])])])}const kp=be(S3,[["render",D3]]),I3={class:"fct-admin-sidebar-item"},$3={key:0},T3={name:"Notes",props:{note:{type:String,default:""},shouldEnableEditing:{type:Boolean,default:!0},orderId:{type:[String,Number]}},components:{IconButton:we,NoteModal:kp,DynamicIcon:z},data(){return{noteModalIsOpen:!1,isNoteExpanded:!1,noteCopy:this.note,loading:!1}},watch:{note:{handler(e,t){this.noteCopy=e},deep:!0,immediate:!0}},computed:{noteNeedsCollapse(){var e;return((e=this.noteCopy)==null?void 0:e.length)>355},noteTextToDisplay(){return this.isNoteExpanded||!this.noteNeedsCollapse?this.noteCopy:this.noteCopy.substring(0,355)+"..."}},methods:{saveNoteModal(e,t){this.loading=!0,this.noteModalIsOpen=t,this.$emit("whenNoteEditIsDone",e),this.orderId&&this.$post("notes/attach",{order_id:this.orderId,note:e}).then(a=>{Y.success(a.message),this.noteCopy=e}).catch(a=>{Y.error(a.message)}).finally(()=>{this.loading=!1})},toggleNoteText(){this.isNoteExpanded=!this.isNoteExpanded}},mounted(){}},er=Object.assign(T3,{setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton"),l=b("el-button"),d=b("el-dialog");return A(),_("div",null,[e.orderId?(A(),U(re,{key:0},{default:r(()=>[o(Ae,{title:t.$t("Notes"),border_bottom:"",title_size:"small"},{action:r(()=>[e.shouldEnableEditing?(A(),U(we,{key:0,size:"x-small",bg:"transparent",tag:"button",border:"transparent",onClick:a[0]||(a[0]=u=>t.noteModalIsOpen=!0)},{default:r(()=>[o(z,{name:"Edit"})]),_:1})):x("",!0)]),_:1},8,["title"]),o(le,{class:oe(t.noteNeedsCollapse?"pb-0":"")},{default:r(()=>[i("div",I3,[t.loading?(A(),U(n,{key:0,animated:""},{template:r(()=>[o(s,{variant:"p"})]),_:1})):(A(),_(H,{key:1},[i("span",null,m(t.noteCopy?t.noteTextToDisplay:t.$t("No notes")),1),t.noteNeedsCollapse?(A(),U(l,{key:0,class:"fct-show-more-button",onClick:t.toggleNoteText,text:""},{default:r(()=>[t.isNoteExpanded?(A(),_(H,{key:0},[O(m(t.$t("Show less"))+" ",1),o(z,{name:"ChevronUp"})],64)):(A(),_(H,{key:1},[O(m(t.$t("Show more"))+" ",1),o(z,{name:"ChevronDown"})],64))]),_:1},8,["onClick"])):x("",!0)],64))])]),_:1},8,["class"])]),_:1})):x("",!0),o(d,{"append-to-body":!0,width:"45%",modelValue:t.noteModalIsOpen,"onUpdate:modelValue":a[2]||(a[2]=u=>t.noteModalIsOpen=u),title:t.noteCopy?t.$t("Edit Note"):t.$t("Add Note")},{default:r(()=>[t.noteModalIsOpen?(A(),_("div",$3,[o(kp,{note:t.noteCopy,onWhenNoteEditIsDone:t.saveNoteModal,onCloseModal:a[1]||(a[1]=u=>t.noteModalIsOpen=!1)},null,8,["note","onWhenNoteEditIsDone"])])):x("",!0)]),_:1},8,["modelValue","title"])])}}}),M3={name:"Coupon",components:{IconButton:we,DynamicIcon:z},props:{order:{type:Object,default:()=>({})},appliedCouponsAttributes:{type:Array,default:()=>[]},hasCouponAttributes:{type:Boolean,default:!1},couponsAttributes:{type:Array,default:()=>[]},action:{type:String,default:""},shouldManageCoupon:{type:Boolean,default:!0}},data(){return{appliedCoupons:[...this.appliedCouponsAttributes],hasCoupon:this.hasCouponAttributes,availableCoupons:[],newCoupon:"",coupons:[...this.couponsAttributes]}},methods:{translate:p,searchCoupon(e,t){this.fetchCoupon(e,t)},fetchCoupon(e="",t=()=>{}){this.$get("coupons",{search:e,select:"code",scopes:["active"]}).then(a=>{var l;const s=(l=a.coupons)==null?void 0:l.data;this.availableCoupons=s.map(d=>d.code);const n=this.availableCoupons.filter(d=>d.toLowerCase().includes(e.toLowerCase())).map(d=>({value:d}));t(n)}).catch(a=>{var s;a.status_code=="422"?Y.validationErrors(a):Y.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},applyCoupon(){if(this.coupons&&this.coupons.find(e=>e.code===this.newCoupon)){Y.error(this.translate("Coupon already applied"));return}this.$post("coupons/apply",{coupon_code:this.newCoupon,order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(e=>{this.processCoupon(e),this.newCoupon=""}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)})},cancelCoupon(e,t){this.$post("coupons/cancel",{id:t.id,coupon_code:t.code,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons,order_items:this.order.order_items}).then(a=>{this.processCoupon(a)}).catch(a=>{var s;a.status_code=="422"?Y.validationErrors(a):Y.error((s=a.data)==null?void 0:s.message)}).finally(()=>{})},reApplyCoupon(){this.$post("coupons/re-apply",{order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(e=>{this.processCoupon(e)}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{})},processCoupon(e){this.coupons=[],this.appliedCoupons=[];for(let n in e.applied_coupons)this.coupons.push({id:e.applied_coupons[n].id,code:n,amount:e.applied_coupons[n].discount}),this.appliedCoupons.push(e.applied_coupons[n].id);let t=0,a=0;const s=Object.values(e.calculated_items);this.order.order_items.forEach((n,l)=>{const d=s.find(u=>u.id==n.object_id);d!=null&&(this.order.order_items[l].price=d.price,this.order.order_items[l].unit_price=d.unit_price,this.order.order_items[l].line_total=d.unit_price*d.quantity-d.discount_total,t+=this.order.order_items[l].line_total,a+=d.discount_total,this.order.order_items[l].line_total_formatted=d.line_total_formatted,this.order.order_items[l].discount_total=d.discount_total)}),this.order.applied_coupon=e.applied_coupons,this.hasCoupon=this.coupons.length>0,bA(this.order,this.hasCoupon,a),this.$emit("update:coupons",this.coupons,this.appliedCoupons,this.hasCoupon)}},mounted(){}},V3={colspan:"3"},L3={class:"fct-add-coupon-wrap"},O3={key:0,class:"fct-add-coupon-input-label"},H3={key:1,class:"fct-add-coupon-input-label"},R3={key:2,class:"fct-add-coupon-input-wrap"},P3={class:"flex gap-0.5 items-center"};function K3(e,t,a,s,n,l){const d=b("el-autocomplete"),u=b("el-button"),c=b("el-alert"),h=b("DynamicIcon"),v=b("IconButton"),y=b("el-popconfirm");return A(),_(H,null,[i("tr",null,[i("td",V3,[i("div",L3,[a.action==="create_order"?(A(),_("div",O3,m(e.$t("Have a Coupon?")),1)):(A(),_("div",H3,m(a.shouldManageCoupon?e.$t("Have a Coupon?"):n.hasCoupon?e.$t("Coupons"):e.$t("")),1)),a.shouldManageCoupon?(A(),_("div",R3,[o(d,{modelValue:n.newCoupon,"onUpdate:modelValue":t[0]||(t[0]=g=>n.newCoupon=g),"fetch-suggestions":l.searchCoupon,"trigger-on-focus":!1,clearable:"",class:"w-full",placeholder:e.$t("Enter coupon code")},null,8,["modelValue","fetch-suggestions","placeholder"]),o(u,{onClick:l.applyCoupon,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[O(m(e.$t("Apply")),1)]),_:1},8,["onClick"])])):x("",!0),!n.hasCoupon&&a.shouldManageCoupon?(A(),U(c,{key:3,title:e.$t("If you apply coupon, regular discounts for this order will be removed."),type:"warning","show-icon":""},null,8,["title"])):x("",!0),t[1]||(t[1]=i("span",null,null,-1))])])]),(A(!0),_(H,null,X(n.coupons,g=>(A(),_("tr",{key:g.id,class:"fct-coupons-applied-row"},[i("td",null,[i("div",P3,[i("span",null,m(g.code),1),a.action==="create_order"?(A(),U(v,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:je(B=>l.cancelCoupon(g.id,g),["prevent"]),class:"coupon-delete-btn"},{default:r(()=>[o(h,{name:"Delete"})]),_:2},1032,["onClick"])):x("",!0),a.action==="edit_order"?(A(),U(y,{key:1,icon:"InfoFilled","icon-color":"#626AEF",title:l.translate("Are you sure to cancel this coupon? This action is not recoverable"),onConfirm:B=>l.cancelCoupon(g.id,g),width:"250"},{reference:r(()=>[a.shouldManageCoupon?(A(),U(v,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",class:"coupon-delete-btn"},{default:r(()=>[o(h,{name:"Delete"})]),_:1})):x("",!0)]),_:2},1032,["title","onConfirm"])):x("",!0)])]),t[2]||(t[2]=i("td",null,null,-1)),i("td",null,"- "+m(e.formatNumber(g.amount)),1)]))),128))],64)}const tr=be(M3,[["render",K3]]),N3={name:"DiscountModal",props:["discount","showModal","totalAmount"],setup(e,{emit:t}){const a=Kn({...e.discount}),s=T([{label:p("Amount"),value:"amount"}]),n=T("");return{discountOptions:s,applyDiscount:()=>{const c=parseInt(a.value);isNaN(c)||c<1?a.value=1:t("whenDiscountEditIsDone",!1,{...a})},cancelDiscount:()=>{t("emitCancelDiscountModal")},initialDiscount:a,isDisabledApplyButton:()=>{n.value="";const c=parseInt(a.value);let h=c||0;const v=e.totalAmount/100;return a.type=="percentage"?(h=v*c/100,(c>100||h>v)&&(n.value=p("Discount should not exceed the full product price (100%).")),isNaN(c)||c<1||c>100):(h>v&&(n.value=p("Discount should not exceed the full product price (%s).",bf(v))),isNaN(c)||c<1||h>v)},error:n}}},G3={class:"fct-discount-modal"},z3=["innerHTML"],j3={key:1},Y3={style:{color:"red"}},q3={class:"form-note"},W3={class:"dialog-footer"};function X3(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=b("el-form-item"),h=b("el-col"),v=b("el-input"),y=b("el-row"),g=b("el-form"),B=b("el-button");return A(),_("div",G3,[o(g,{"label-position":"top"},{default:r(()=>[o(y,{gutter:20},{default:r(()=>[o(h,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:e.$t("Discount type")},{default:r(()=>[o(u,{modelValue:s.initialDiscount.type,"onUpdate:modelValue":t[0]||(t[0]=w=>s.initialDiscount.type=w),placeholder:e.$t("Select"),onChange:t[1]||(t[1]=w=>{s.error=""})},{default:r(()=>[(A(!0),_(H,null,X(s.discountOptions,w=>(A(),U(d,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(h,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:e.$t("Discount value")},{default:r(()=>[o(v,{type:"number",min:1,modelValue:s.initialDiscount.value,"onUpdate:modelValue":t[2]||(t[2]=w=>s.initialDiscount.value=w),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:r(()=>[s.initialDiscount.type==="amount"?(A(),_("span",{key:0,innerHTML:e.appVars.shop.currency_sign},null,8,z3)):(A(),_("span",j3,"%"))]),_:1},8,["modelValue","onKeyup"]),i("span",Y3,m(s.error),1)]),_:1},8,["label"])]),_:1})]),_:1}),o(y,null,{default:r(()=>[o(h,{md:24,sm:12,xs:24},{default:r(()=>[o(c,{label:e.$t("Reason for discount")},{default:r(()=>[o(v,{modelValue:s.initialDiscount.reason,"onUpdate:modelValue":t[3]||(t[3]=w=>s.initialDiscount.reason=w),minlength:"1",maxlength:"255","show-word-limit":""},null,8,["modelValue"]),i("div",q3,[i("p",null,m(e.$t("Customer can see this reason")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),i("div",W3,[o(B,{type:"info",onClick:s.cancelDiscount,soft:""},{default:r(()=>[O(m(e.$t("Cancel")),1)]),_:1},8,["onClick"]),o(B,{type:"primary",disabled:s.isDisabledApplyButton(),onClick:s.applyDiscount},{default:r(()=>[O(m(e.$t("Apply")),1)]),_:1},8,["disabled","onClick"])])])}const J3=be(N3,[["render",X3]]),Z3={name:"CustomDiscount",components:{IconButton:we,DynamicIcon:z,DiscountModal:J3},props:{order:{type:Object,default:()=>({})},discountAttributes:{type:Object,default:()=>({type:"amount",label:"",reason:""})},hasCoupon:{type:Boolean,default:!1},shouldEnableEditing:{type:Boolean,default:!0}},data(){return{discountModalIsOpen:!1,discount:this.discountAttributes}},methods:{translate:p,getDiscountButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Discount"):this.order.manual_discount_total!==0?p("Edit Discount"):p("Add Discount")},manageDiscount(){this.discount.action=parseInt(this.order.manual_discount_total)>0?"edit":"add",this.shouldEnableEditing&&!this.hasCoupon&&this.order.order_items.length>0&&(this.discountModalIsOpen=!0)},removeDiscount(){this.discount={},Jd(this.order,this.discount),this.$emit("update:custom-discount",this.discount)},applyDiscount(e,t){this.discount=t,Jd(this.order,this.discount),this.discountModalIsOpen=e,this.$emit("update:custom-discount",this.discount)}},mounted(){}},eQ={key:0},tQ={key:1},aQ={key:2},sQ={key:0};function nQ(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("discount-modal"),c=b("el-dialog");return A(),_(H,null,[a.order.manual_discount_total>0||a.order.manual_discount_total===0&&a.shouldEnableEditing?(A(),_("tr",eQ,[i("td",null,[a.shouldEnableEditing&&!a.hasCoupon&&a.order.order_items.length>0?(A(),_("a",{key:0,href:"#",onClick:t[0]||(t[0]=je(h=>l.manageDiscount(),["prevent"]))},[O(m(l.getDiscountButtonLabel())+" ",1),o(d,{name:"External"})])):(A(),_("span",tQ,m(l.getDiscountButtonLabel()),1)),n.discount.label?(A(),_("span",aQ,m(n.discount.label),1)):x("",!0),a.order.manual_discount_total&&a.shouldEnableEditing?(A(),_(H,{key:3},[t[4]||(t[4]=O(" | ",-1)),i("a",{href:"#",onClick:t[1]||(t[1]=je(h=>l.removeDiscount(),["prevent"]))},m(l.translate("Remove Discount")),1)],64)):x("",!0)]),i("td",null,m(n.discount.reason?n.discount.reason:"__"),1),i("td",null,[i("span",null,"- "+m(e.formatNumber(a.order.manual_discount_total)),1)])])):x("",!0),o(c,{"append-to-body":!0,width:"50%",modelValue:n.discountModalIsOpen,"onUpdate:modelValue":t[3]||(t[3]=h=>n.discountModalIsOpen=h),title:a.order.manual_discount_total===0?l.translate("Add discount"):l.translate("Edit discount")},{default:r(()=>[n.discountModalIsOpen?(A(),_("div",sQ,[o(u,{discount:n.discount,totalAmount:a.order.subtotal,onWhenDiscountEditIsDone:l.applyDiscount,onEmitCancelDiscountModal:t[2]||(t[2]=h=>n.discountModalIsOpen=!1)},null,8,["discount","totalAmount","onWhenDiscountEditIsDone"])])):x("",!0)]),_:1},8,["modelValue","title"])],64)}const ar=be(Z3,[["render",nQ]]),oQ={name:"ShippingModal",props:["shipping","shipping_type"],setup(e,{emit:t}){const a=T(e.shipping_type);return{availableOptions:T([{label:"Custom",value:"custom"}]),updatingIsDone:()=>parseInt(e.shipping.custom_price)<0?e.shipping.custom_price=0:(parseInt(e.shipping.custom_price)==0&&(e.shipping.custom_price=0),e.shipping.rate_name=e.shipping.rate_name==""||e.shipping.rate_name==null?"Custom":e.shipping.rate_name,e.shipping.type=a.value,t("whenShippingEditIsDone",!1)),removeShipping:()=>{e.shipping.type="",e.shipping.custom_price="",e.shipping.rate_name="",t("whenShippingEditIsDone",!1)},isDisabledApplyButton:()=>{const u=parseInt(e.shipping.custom_price);return isNaN(u)||u<0},shippingType:a}}},lQ={class:"fct-shipping-modal"},rQ=["innerHTML"],iQ={class:"dialog-footer"};function AQ(e,t,a,s,n,l){const d=b("el-radio"),u=b("el-radio-group"),c=b("el-form-item"),h=b("el-col"),v=b("el-row"),y=b("el-input"),g=b("el-form"),B=b("el-button");return A(),_("div",lQ,[o(g,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(v,{gutter:20},{default:r(()=>[o(h,{md:24,sm:24,xs:24},{default:r(()=>[o(c,{label:e.$t(""),required:""},{default:r(()=>[o(u,{modelValue:s.shippingType,"onUpdate:modelValue":t[0]||(t[0]=w=>s.shippingType=w)},{default:r(()=>[(A(!0),_(H,null,X(s.availableOptions,(w,C)=>(A(),U(d,{label:w.value,key:C},{default:r(()=>[O(m(w.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),s.shippingType==="custom"?(A(),U(v,{key:0,gutter:15},{default:r(()=>[o(h,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:e.$t("Name")},{default:r(()=>[o(y,{type:"text",modelValue:a.shipping.rate_name,"onUpdate:modelValue":t[1]||(t[1]=w=>a.shipping.rate_name=w)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(h,{md:12,sm:12,xs:24},{default:r(()=>[o(c,{label:e.$t("Price")},{default:r(()=>[o(y,{type:"number",min:1,modelValue:a.shipping.custom_price,"onUpdate:modelValue":t[2]||(t[2]=w=>a.shipping.custom_price=w),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:r(()=>[i("span",{innerHTML:e.appVars.shop.currency_sign},null,8,rQ)]),_:1},8,["modelValue","onKeyup"])]),_:1},8,["label"])]),_:1})]),_:1})):x("",!0)]),_:1}),i("div",iQ,[a.shipping.type?(A(),U(B,{key:0,type:"danger",onClick:s.removeShipping},{default:r(()=>[O(m(e.$t("Remove Shipping")),1)]),_:1},8,["onClick"])):x("",!0),o(B,{type:"primary",onClick:s.updatingIsDone,disabled:s.isDisabledApplyButton()},{default:r(()=>[O(m(e.$t("Apply")),1)]),_:1},8,["onClick","disabled"])])])}const dQ=be(oQ,[["render",AQ]]),uQ={name:"Shipping",components:{IconButton:we,DynamicIcon:z,ShippingModal:dQ},props:{order:{type:Object,default:()=>({})},shippingAttributes:{type:Object,default:()=>({id:""})},shouldEnableEditing:{type:Boolean,default:!0},shippingMethodsProps:{type:Array,default:()=>[]},otherShippingMethodsProps:{type:Array,default:()=>[]}},data(){return{shippingModalIsOpen:!1,shipping:this.shippingAttributes,currency:De.get("shop.currency_sign"),shippingMethods:this.shippingMethodsProps,otherShippingMethods:this.otherShippingMethodsProps,total_shipping:this.order.shipping_total/100}},watch:{shippingMethodsProps:{handler:function(e,t){this.shippingMethods=e},deep:!0},otherShippingMethodsProps:{handler:function(e,t){this.otherShippingMethods=e},deep:!0},order:{handler:function(e,t){this.total_shipping=e.shipping_total/100},deep:!0}},methods:{formatNumber:lt,translate:p,showShippingModal(){this.shippingModalIsOpen=!0},hasFreeShipping(){return Object.keys(this.shipping).length>0&&parseInt(this.shipping.custom_price)==0},getShippingButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Shipping"):this.shipping.id!==0?p("Edit Shipping"):p("Add Shipping")},getShippingTitle(){if(this.shipping.id==0)return"__";const e=this.shippingMethods.find(t=>t.id==this.shipping.id);return e?e.title:"__"},updateShipping(){this.shippingModalIsOpen=!1;const e=[];this.order.order_items.length>0&&this.order.order_items.forEach(t=>{e.push({id:t.object_id,quantity:t.quantity,unit_price:t.unit_price,discount_total:t.discount_total})}),se.post("orders/calculate-shipping",{shipping_id:this.shipping.id,order_items:e}).then(t=>{this.order.shipping_total=t.shipping_charge;const a={order_items:t.order_items,shipping_total:t.shipping_charge};this.total_shipping=this.order.shipping_total/100,this.$emit("update:shipping",a.order_items,a.shipping_total)}).catch(t=>{var a;t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.shippingModalIsOpen=!1})},getShippingMethodsNotFoundMessage(){const e=this.$router.resolve({name:"shipping"}).href;return p("No shipping methods found. You can add shipping methods from %1$s here %2$s",`<a href="${e}" target="_blank" class="link-text">`,"</a>")}},mounted(){}},cQ={key:1},pQ={key:0},fQ={key:1,class:"max-w-[120px] block ml-auto text-right"},hQ={key:2},mQ={key:0},_Q={key:0,class:"fct-shipping-methods-list-wrap"},gQ={key:0,class:"charge"},vQ={key:1,class:"fct-other-shipping-methods-list-wrap"},yQ={key:0,class:"charge"},bQ={key:1,class:"fct-no-shipping-methods-found"},wQ=["innerHTML"];function CQ(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-input"),c=b("el-radio"),h=b("el-radio-group"),v=b("el-button"),y=b("el-dialog");return A(),_(H,null,[i("tr",null,[i("td",null,[a.shouldEnableEditing&&a.order.order_items.length>0?(A(),_("a",{key:0,href:"#",onClick:t[0]||(t[0]=je(g=>l.showShippingModal(),["prevent"]))},[O(m(l.getShippingButtonLabel())+" ",1),o(d,{name:"External"})])):(A(),_("span",cQ,m(l.getShippingButtonLabel()),1))]),i("td",null,m(l.getShippingTitle()),1),i("td",null,[l.hasFreeShipping()?(A(),_("span",pQ,[i("del",null,m(l.formatNumber(a.order.shipping_total)),1),O(" "+m(l.translate("Free")),1)])):x("",!0),a.shouldEnableEditing&&!l.hasFreeShipping()?(A(),_("span",fQ,[o(u,{modelValue:n.total_shipping,"onUpdate:modelValue":t[1]||(t[1]=g=>n.total_shipping=g),onChange:t[2]||(t[2]=g=>{a.order.shipping_total=g*100}),type:"number"},{prefix:r(()=>[O(m(n.currency),1)]),_:1},8,["modelValue"])])):(A(),_("span",hQ,m(l.formatNumber(a.order.shipping_total)),1))])]),o(y,{"append-to-body":!0,width:"50%",modelValue:n.shippingModalIsOpen,"onUpdate:modelValue":t[6]||(t[6]=g=>n.shippingModalIsOpen=g),title:e.$t("Shipping and delivery options")},ft({default:r(()=>[n.shippingModalIsOpen?(A(),_("div",mQ,[n.shippingMethods.length||n.otherShippingMethods.length?(A(),_(H,{key:0},[n.shippingMethods.length?(A(),_("div",_Q,[i("h3",null,m(l.translate("Shipping Methods")),1),o(h,{modelValue:n.shipping.id,"onUpdate:modelValue":t[3]||(t[3]=g=>n.shipping.id=g),class:"fct-shipping-methods-radio"},{default:r(()=>[(A(!0),_(H,null,X(n.shippingMethods,(g,B)=>(A(),U(c,{label:g.id,key:B},{default:r(()=>[O(m(g.title)+" ",1),g.shipping_charge?(A(),_("span",gQ,m(l.formatNumber(g.shipping_charge)),1)):x("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):x("",!0),n.otherShippingMethods.length?(A(),_("div",vQ,[i("h3",null,m(l.translate("Other Shipping Methods")),1),o(h,{modelValue:n.shipping.id,"onUpdate:modelValue":t[4]||(t[4]=g=>n.shipping.id=g),class:"fct-shipping-methods-radio"},{default:r(()=>[(A(!0),_(H,null,X(n.otherShippingMethods,(g,B)=>(A(),U(c,{label:g.id,key:B},{default:r(()=>[O(m(g.title)+" ",1),g.shipping_charge?(A(),_("span",yQ,m(l.formatNumber(g.shipping_charge)),1)):x("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):x("",!0)],64)):(A(),_("div",bQ,[i("span",{innerHTML:l.getShippingMethodsNotFoundMessage()},null,8,wQ)]))])):x("",!0)]),_:2},[n.shippingMethods.length||n.otherShippingMethods.length?{name:"footer",fn:r(()=>[o(v,{onClick:t[5]||(t[5]=g=>n.shippingModalIsOpen=!1)},{default:r(()=>[O(m(l.translate("Cancel")),1)]),_:1}),o(v,{type:"primary",onClick:l.updateShipping},{default:r(()=>[O(m(l.translate("Apply")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","title"])],64)}const wA=be(uQ,[["render",CQ]]),BQ={key:0},kQ={class:"fct-admin-sidebar-item"},FQ={class:"fct-admin-summary-item-list"},xQ={class:"fct-admin-summary-item"},UQ={class:"font-medium"},SQ={key:0,class:"fct-admin-summary-item"},EQ={class:"font-medium"},QQ={key:1,class:"fct-admin-summary-item"},DQ={class:"font-medium"},IQ={key:2,class:"fct-admin-summary-item"},$Q={class:"font-medium"},TQ={key:3,class:"fct-admin-summary-item"},MQ={class:"font-medium"},VQ={key:4,class:"fct-admin-summary-item"},LQ={class:"font-medium"},OQ={key:5,class:"fct-admin-summary-item"},HQ={class:"font-medium"},RQ={class:"fct-admin-summary-item"},PQ={class:"font-medium"},KQ={name:"UtmDetails",props:{order_operation:{type:Object}}},Fp=Object.assign(KQ,{setup(e){return(t,a)=>e.order_operation?(A(),_("div",BQ,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("UTM Details"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[i("div",kQ,[i("ul",FQ,[i("li",xQ,[i("span",UQ,m(t.$t("UTM Campaign")),1),i("span",null,m(e.order_operation.utm_campaign||"--"),1)]),e.order_operation.utm_medium?(A(),_("li",SQ,[i("span",EQ,m(t.$t("UTM Medium")),1),i("span",null,m(e.order_operation.utm_medium||"--"),1)])):x("",!0),e.order_operation.utm_source?(A(),_("li",QQ,[i("span",DQ,m(t.$t("UTM Source")),1),i("span",null,m(e.order_operation.utm_source||"--"),1)])):x("",!0),e.order_operation.utm_content?(A(),_("li",IQ,[i("span",$Q,m(t.$t("UTM Content")),1),i("span",null,m(e.order_operation.utm_content||"--"),1)])):x("",!0),e.order_operation.utm_id?(A(),_("li",TQ,[i("span",MQ,m(t.$t("UTM ID")),1),i("span",null,m(e.order_operation.utm_id||"--"),1)])):x("",!0),e.order_operation.utm_term?(A(),_("li",VQ,[i("span",LQ,m(t.$t("UTM Term")),1),i("span",null,m(e.order_operation.utm_term||"--"),1)])):x("",!0),e.order_operation.refer_url?(A(),_("li",OQ,[i("span",HQ,m(t.$t("Refer Url")),1),i("span",null,m(e.order_operation.refer_url||"--"),1)])):x("",!0),Array.isArray(e.order_operation.meta)?(A(!0),_(H,{key:6},X(e.order_operation.meta,(s,n)=>(A(),_("li",RQ,[i("span",PQ,m(n),1),i("span",null,m(s||"--"),1)]))),256)):x("",!0)])])]),_:1})]),_:1})])):x("",!0)}}),NQ={name:"Transaction",components:{ConvertedTime:Lt,Badge:ut},computed:{Str(){return rt}},props:{transactions:{type:Array,required:!0},order_id:{type:Number,required:!0}},emits:["reload"],methods:{translate:p,getCardBrand:Fu}},GQ={class:"fct-table-mobile-wrap fct-transaction-details-mobile-wrap"},zQ={class:"fct-table-mobile-header"},jQ={class:"fct-table-mobile-header-left"},YQ={class:"fct-table-status-col"},qQ={class:"fct-table-date-col"},WQ={class:"id"},XQ={class:"fct-table-price-col"},JQ={class:"fct-table-mobile-body"},ZQ={class:"fct-table-mobile-body-list"},eD={class:"fct-table-mobile-method-col"},tD={class:"label"},aD={class:"value"},sD={class:"flex items-center gap-2.5"},nD={key:0,class:"w-7"},oD=["title","src","alt"],lD={key:1,class:"capitalize"},rD={key:2},iD={class:"fct-table-mobile-gateway-col"},AD={class:"label"},dD={class:"value"},uD={key:0},cD=["href"];function pD(e,t,a,s,n,l){const d=b("Badge"),u=b("el-tooltip"),c=b("ConvertedTime");return A(),_("div",GQ,[(A(!0),_(H,null,X(a.transactions,(h,v)=>{var y,g;return A(),_("div",{class:"fct-table-mobile-row",key:v},[i("div",zQ,[i("div",jQ,[i("div",YQ,[(y=h==null?void 0:h.meta)!=null&&y.reason?(A(),U(u,{key:0,effect:"dark",placement:"top",content:l.translate((g=h==null?void 0:h.meta)==null?void 0:g.reason),"popper-class":"fct-label-hint-popover fct-tooltip"},{default:r(()=>{var B,w;return[((B=h==null?void 0:h.meta)==null?void 0:B.disputed)==="yes"&&((w=h==null?void 0:h.meta)==null?void 0:w.dispute_resolved)==="no"?(A(),U(d,{key:0,status:h.status},{default:r(()=>[O(m(h.status==="paid"?"Completed":h.status),1)]),_:2},1032,["status"])):(A(),U(d,{key:1,status:h.status},{default:r(()=>[O(m(h.status==="paid"?"Completed":h.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(A(),U(d,{key:1,status:h.status},{default:r(()=>[O(m(h.status==="paid"?"Completed":h.status),1)]),_:2},1032,["status"]))]),i("div",qQ,[i("span",WQ,"#"+m(h.id),1),t[0]||(t[0]=i("span",{class:"bullet"},"",-1)),o(c,{"date-time":h.created_at},null,8,["date-time"])])]),i("div",XQ,m(e.formatNumber(h.total)),1)]),i("div",JQ,[i("ul",ZQ,[i("li",eD,[i("div",tD,m(l.translate("Payment Method:")),1),i("div",aD,[i("div",sD,[l.getCardBrand(h.card_brand,h.payment_method_type)?(A(),_("div",nD,[i("img",{class:"w-full",title:h.payment_method,src:l.getCardBrand(h.card_brand,h.payment_method_type),alt:h.card_brand},null,8,oD)])):(A(),_("span",lD,m(h.payment_method_type),1)),h.card_last_4&&h.card_last_4!="0"?(A(),_("span",rD,m("..."+h.card_last_4),1)):x("",!0)])])]),i("li",iD,[i("div",AD,m(l.translate("Gateway ID:")),1),i("div",dD,[h.vendor_charge_id===""?(A(),_("span",uD,"--")):(A(),_("a",{key:1,class:"link",target:"_blank",href:h.url},m(h.vendor_charge_id),9,cD))])])])])])}),128))])}const xp=be(NQ,[["render",pD]]),fD={key:1,class:"fct-single-order-page"},hD={key:1,class:"fct-single-order-wrapper fct-layout-width"},mD={class:"single-page-header flex items-start justify-between"},_D={class:"single-page-header-title-wrap"},gD={class:"single-page-header-status-wrap"},vD={class:"single-page-header-text"},yD={class:"capitalize"},bD={class:"fct-btn-group sm"},wD={class:"single-page-body"},CD={class:"fct-single-order"},BD={class:"fct-single-order-main"},kD={class:"fct-card-header-title is-small"},FD={key:0,class:"fct-browse-product-form-group pb-5"},xD={class:"fct-ordered-product-list-container"},UD={key:0,class:"fct-ordered-product-list-wrapper"},SD={class:"fct-media-content-list -mt-4"},ED={key:0,class:"fct-media-content-list-item px-0"},QD={class:"product-thumbnail"},DD=["href"],ID=["src","alt"],$D=["src","alt"],TD={class:"product-details"},MD={class:"product-details-content-row"},VD={class:"product-details-content-first flex flex-col"},LD={class:"product-title m-0"},OD=["href"],HD={class:"product-variation-title m-0"},RD={key:0,class:"product-subscription-info"},PD=["innerHTML"],KD=["innerHTML"],ND={key:1,class:"product-details-quantity"},GD={key:2,class:"product-details-price-mobile"},zD={class:"product-details-quantity"},jD={key:0,class:"del"},YD={key:0,class:"product-details-content-second shrink-0 grow-0 basis-[90px]"},qD={class:"product-details-quantity"},WD={key:0,class:"del"},XD={class:"product-details-content-third shrink-0 grow-0 flex flex-row justify-end gap-2 basis-[100px]"},JD={key:0},ZD={key:1},eI={key:0},tI={key:1},aI={key:0,class:"product-details-action-row"},sI=["onClick"],nI=["onClick"],oI={key:1,class:"m-0 text-center"},lI={class:"fct-card-header-title is-small"},rI={class:"fct-table-border fct-table-order-details"},iI={key:0},AI={key:2},dI={key:3},uI={class:"total-amount-tr"},cI={class:"payment-tr"},pI={key:4,class:"payment-tr"},fI={key:5,class:"payment-tr"},hI={class:"font-semibold"},mI={key:6,class:"payment-tr"},_I={class:"font-semibold"},gI={key:7,class:"payment-tr total-refund-owed-tr"},vI={class:"flex flex-end m-0 items-center"},yI={class:"font-semibold"},bI={class:"fct-single-order-aside"},wI={class:"fct-admin-sidebar"},CI={key:0},BI={class:"fct-adjust-quantity-modal-content"},kI={class:"title"},FI={class:"fct-form-group"},xI={class:"dialog-footer"},UI={key:0},SI={name:"SingleOrder",props:["order_id"],components:{OrderBulkActions:vA,Alert:ja,Transaction:yA,Plans:Cp,Badge:ut,Refresh:Yi,ElMessageBox:os,CopyToClipboard:ma,Notes:er,Coupon:tr,CustomDiscount:ar,OrderCustomerInformation:$l,ShippingComponent:wA,UtmDetails:Fp,OrderUpDownIndicator:wu,TransactionMobile:xp,BundleProducts:Xi},provide(){return{triggerChange:this.triggerChange}},data(){return{notFound:{show:!1,message:"",buttonText:"",route:""},warningMessage:"",loading:!1,calculating:!1,customModal:!1,canceling_subscription:!1,reactivate_subscription:!1,fetching_subscription:!1,pausing_subscription:!1,resuming_subscription:!1,processing_refund:!1,nextInvoiceModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{item_name:"",item_price:0,quantity:1,is_physical:"yes"},transactionMedium:!1,otherData:{payment_method:"offline_payment",mark_paid_note:"",vendor_charge_id:""},paymentMethodOption:[{name:"Others",value:"others"}],timeout:"",widgets:[],order:!1,searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",actionableActivities:[],isSubscription:!1,subscriptionStatus:"",showManageActivity:!1,change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,showRefundModal:!1,isEditingItem:!1,shouldDisableEditing:!1,adjustQuantityModal:!1,adjustItem:[],selectedLabels:[],tmpAdjustedItem:{},coupons:[],appliedCoupons:[],hasCoupon:!1,shippingMethods:[],otherShippingMethods:[],uniqueItemsCount:0,markingOrderAsPaid:!1,isMobile:window.innerWidth<768,taxId:0}},watch:{order:{handler(e,t){this.changes_made++},deep:!0},order_id:{handler(e,t){this.changeTitle("Order #"+e),this.changes_made=0,this.fetch()}}},computed:{parentOrderId(){return!this.order||!this.order.parent_id?null:this.order.parent_id!=="0"?this.order.parent_id:null},transactionType(){return this.order.order_items.some(e=>e.payment_type==="subscription")?"subscription":"charge"},placeholderImage(){return`${De.get("asset_url")}images/empty-image.svg`}},methods:{triggerChange(){this.changes_made=1},handleResize(){this.isMobile=window.innerWidth<768},getDueRefund(){var e;return this.formatNumber(Math.abs(parseFloat(this.order.total_amount-((e=this.order)==null?void 0:e.total_paid))+parseFloat(this.order.total_refund)))},triggerRefundModal(){this.showRefundModal=!0},getNetPayment(){var e;return this.formatNumber(this.order.total_paid-((e=this.order)==null?void 0:e.total_refund))},getTotalDue(){var e;return this.formatNumber(Math.abs(this.order.total_amount-((e=this.order)==null?void 0:e.total_paid)))},markOrderAsPaid(){this.markingOrderAsPaid||(this.markingOrderAsPaid=!0,se.post("orders/"+this.order_id+"/mark-as-paid",{...this.otherData,transaction_type:this.transactionType}).then(e=>{this.markingOrderAsPaid=!1,this.transactionMedium=!1,Y.success(e.message),this.fetch()}).catch(e=>{var t;this.markingOrderAsPaid=!1,e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}))},handleCommand(e){e==="custom-payment-link"?this.nextInvoiceModal=!0:this.transactionMedium=!0},shouldSkipAdjustmentItem(e){return!(this.order.order_items.some(a=>a.payment_type==="subscription")&&e.payment_type==="adjustment")},handleAdjustQuantityModal(e){this.adjustItem={},this.adjustQuantityModal=!0,this.adjustItem=e},getImageUrl(e){var s,n,l,d;const t=(s=e==null?void 0:e.variants)==null?void 0:s.media;if(t&&Array.isArray(t.meta_value)&&((n=t.meta_value[0])!=null&&n.url))return t.meta_value[0].url;const a=(d=(l=e==null?void 0:e.variants)==null?void 0:l.product_detail)==null?void 0:d.featured_media;return!t&&a&&typeof a=="object"&&a!==null?a.url:this.placeholderImage},getClass(e){let t=null;return e.featured_media!=null&&(t=this.getImageUrl(e)),{"w-full":!0,"border border-solid border-gray-divider rounded":t&&t!==null&&t!==void 0}},shouldShowRefund(){var t;if(!this.order||(t=this.order.config)!=null&&t.upgraded_to)return!1;const e=parseInt(this.order.total_paid/100);return this.order.payment_status!=="refunded"&&e>0&&e>=parseInt(this.order.total_refund/100)},enableItemEditing(){this.isEditingItem=!0,this.fetchShippingMethods()},disableItemEditing(){this.isEditingItem=!1},handlePaymentActions(e){this.changes_made=0,e==="refund"?this.showRefundModal=!0:e==="create_next_invoice"&&(this.nextInvoiceModal=!0)},getOrderUrl(e){const t=De.get("dashboard_url")+"/orders/"+e+"/view";window.location=t},resetUnsaved(){this.changes_made=0},updateCustomModal(e){this.customModal=e},updateProductModal(e){this.createProductModal=e},updateSearchQuery(e){this.searchQuery=e,this.calculateLine()},updateQuantity(e,t,a){this.tmpAdjustedItem={quantity:e,updatedStock:t,item:a}},saveAdjustedProductQuantity(e){this.adjustQuantityModal=!1,Object.keys(e).length>0&&(parseInt(e.updatedStock)<0?Y.error(p("You have exceeded the stock limit! Current stock is : %s",e.updatedStock)):e.item.quantity=e.quantity,e.item.updated_stock=e.updatedStock,this.calculateLine())},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():bA(this.order,this.hasCoupon)},deleteProduct(e,t){t.id&&this.deletedItems.push(t.id),this.order.order_items.splice(e,1),this.calculateLine()},processCustom(e){e.order_id=this.order_id,this.order.order_items.unshift(e),this.customModal=!1,this.calculateLine()},update(){var t;this.loading=!0;const e={...this.order};delete e.customer,delete e.note,e.metaValue=((t=this.$refs.dynamicTemplates)==null?void 0:t.getFormStates())||{},se.post("orders/"+this.order_id,{...e,deletedItems:this.deletedItems,discount:this.discount,shipping:this.shippingSettings}).then(a=>{Y.success(a.message),this.fetch()}).catch(a=>{var s;a.status_code=="422"?Y.validationErrors(a):Y.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.loading=!1})},fetch(){this.notFound.show=!1,this.loading=!0,se.get("orders/"+this.order_id,{with:["widgets"]}).then(e=>{var t,a,s,n,l;this.coupons=e.order.applied_coupons||[],this.hasCoupon=this.coupons.length>0,this.appliedCoupons=this.coupons.map(d=>d.coupon_id),this.order=e.order,this.order.order_items=this.formatOrderItems(e.order.order_items),this.isSubscription=((t=this.order)==null?void 0:t.subscriptions)&&this.order.subscriptions.length>0,this.isSubscription&&(this.subscriptionStatus=(a=this.order.subscriptions[0])==null?void 0:a.status),this.shouldDisableEditing=["completed","archived","canceled"].includes(this.order.status)||this.isSubscription||this.order.payment_status==="paid",["completed","archived","canceled"].includes(this.order.status)&&(this.warningMessage=p("Order cannot be edited once it is %s",this.order.status)),this.order.payment_status==="paid"&&(this.warningMessage=p("Order cannot be edited once paid.")),this.isSubscription&&(this.warningMessage=p("Subscription Order cannot be edited.")),this.orderSettings=e.orderSettings,this.widgets=e.widgets,this.selectedProducts=this.availableProducts=[],this.discount.value=((s=e.discount_meta)==null?void 0:s.value)||0,this.discount.reason=((n=e.discount_meta)==null?void 0:n.reason)||"",this.discount.type=((l=e.discount_meta)==null?void 0:l.type)||"amount",this.selectedLabels=e.selected_labels||[],this.uniqueItemsCount=wf(e.order),e.shipping_meta&&e.shipping_meta.type&&(this.shippingSettings=e.shipping_meta),this.taxId=e.tax_id,Bp(this.discount),this.order.order_items.find(d=>d.payment_type==="subscription"),this.order.order_items=this.order.order_items.map(d=>{var u;return{...d,quantity:Number(d.quantity),updated_stock:parseInt((d==null?void 0:d.available)||((u=d==null?void 0:d.variants)==null?void 0:u.available))+parseInt(d.quantity)}}),this.resetUnsaved(),this.renderActionables(),de(()=>{this.changes_made=0})}).catch(e=>{var t;e.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=ve.get(e,"data.buttonText"),this.notFound.message=ve.get(e,"data.message"),this.notFound.route=ve.get(e,"data.route")):e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{this.loading=!1,(["completed","archived","canceled"].includes(this.order.status)||["unshippable"].includes(this.order.shipping_status))&&this.disableItemEditing()})},updateCustomDiscount(e){this.discount=e,this.changes_made++},updateCoupons(e,t,a){this.coupons=e,this.appliedCoupons=t,this.hasCoupon=a},updateShipping(e){this.shippingSettings=e,this.changes_made++},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},clearActivityAction(e){se.put("activity/"+e.id+"/mark-read",{id:e.id,status:"read"}).then(t=>{this.actionableActivities=this.actionableActivities.filter(a=>a.id!==e.id),this.handleSuccess(t==null?void 0:t.message)}).catch(t=>{var a;t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)})},renderActionables(){var a;let e=(a=this==null?void 0:this.order)==null?void 0:a.activities;const t=["warning","error"];this.actionableActivities=e==null?void 0:e.filter(s=>(s==null?void 0:s.read_status)==="unread"&&t.includes(s==null?void 0:s.status))},getCustomerTotalOrders(e){return e>0?e+" "+(e==1?this.$t("order"):this.$t("orders")):this.$t("No orders")},onChangeLabel(e){this.selectedLabels=e,this.changes_made++},saveNoteModal(e){this.order.note=e},hasSubscriptionProduct(e,t){return e.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===t?!0:!!(s.payment_type&&s.payment_type===t)).length>0},fetchShippingMethods(){const e=[];this.order.order_items.length>0&&this.order.order_items.forEach(t=>{e.push({id:t.object_id,quantity:t.quantity,unit_price:t.unit_price,discount_total:t.discount_total})}),se.get("orders/shipping_methods",{country_code:this.order.customer.country,order_items:e}).then(t=>{this.shippingMethods=t.shipping_methods,this.otherShippingMethods=t.other_shipping_methods}).finally(()=>{})},formatOrderItems:Uf},mounted(){this.changeTitle("Order #"+this.order_id),this.fetch(),window.onbeforeunload=()=>{if(this.changes_made>1)return!0},(De.get("payment_routes")??[]).filter(t=>!(t!=null&&t.upcoming)).forEach(t=>{var a;this.paymentMethodOption.unshift({name:(a=t==null?void 0:t.meta)==null?void 0:a.title,value:t==null?void 0:t.path})}),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}},EI=Object.assign(SI,{setup(e){const t=T(),a=()=>t.value.fetchBySearch(),s=()=>{a()};return(n,l)=>{var $,V;const d=b("el-breadcrumb-item"),u=b("el-breadcrumb"),c=b("el-button"),h=b("el-tooltip"),v=b("el-input"),y=b("router-link"),g=b("el-icon"),B=b("el-dropdown-item"),w=b("el-dropdown-menu"),C=b("el-dropdown"),F=b("el-option"),S=b("el-select"),E=b("el-form-item"),k=b("el-form"),Q=b("el-dialog"),I=b("el-skeleton-item"),D=b("el-skeleton"),M=Qt("loading");return A(),_(H,null,[n.notFound.show?(A(),U(Ml,{key:0,"button-text":n.notFound.buttonText,message:n.notFound.message,route:n.notFound.route},null,8,["button-text","message","route"])):x("",!0),n.notFound.show===!1?(A(),_("div",fD,[o(wn,{isActive:n.changes_made>=1&&!n.showRefundModal?"is-active":"",onDiscard:n.reloadOrder,onSave:n.update,loading:n.loading,saveButtonText:f(p)("Update"),loadingText:f(p)("Updating")},null,8,["isActive","onDiscard","onSave","loading","saveButtonText","loadingText"]),n.loading?(A(),U(RE,{key:0})):x("",!0),n.order?(A(),_("div",hD,[!n.loading&&n.order?(A(),_(H,{key:0},[i("div",mD,[i("div",null,[i("div",_D,[o(u,{"separator-icon":f(la)},{default:r(()=>[o(d,{to:{name:"orders"}},{default:r(()=>[O(m(f(p)("Orders")),1)]),_:1}),n.parentOrderId?(A(),U(d,{key:0,to:{name:"view_order",params:{}}},{default:r(()=>[i("a",{onClick:l[0]||(l[0]=L=>n.getOrderUrl(n.parentOrderId))}," #"+m(n.parentOrderId),1)]),_:1})):x("",!0),o(d,null,{default:r(()=>[O(" #"+m(f(nt)(e.order_id)),1)]),_:1})]),_:1},8,["separator-icon"]),i("div",gD,[o(ut,{status:n.order.status},null,8,["status"]),o(wu,{order:n.order},null,8,["order"])])]),i("div",vD,[o(Lt,{"date-time":n.order.created_at,"with-time":""},null,8,["date-time"]),l[23]||(l[23]=i("span",{class:"fct_separator"},null,-1)),n.order.invoice_no?(A(),_(H,{key:0},[i("span",null,m(n.order.invoice_no),1),l[22]||(l[22]=i("span",{class:"fct_separator"},null,-1))],64)):x("",!0),i("span",yD,m(n.order.type),1)])]),i("div",bD,[n.shouldShowRefund()?(A(),U(c,{key:0,onClick:l[1]||(l[1]=L=>n.handlePaymentActions("refund")),class:"bulk-action-hide-only-mobile"},{default:r(()=>[O(m(f(p)("Refund")),1)]),_:1})):x("",!0),n.isEditingItem?(A(),U(c,{key:2,onClick:n.disableItemEditing,class:"bulk-action-hide-only-mobile"},{default:r(()=>[O(m(f(p)("Disable Editing")),1)]),_:1},8,["onClick"])):(A(),U(c,{key:1,onClick:n.enableItemEditing,disabled:n.shouldDisableEditing,class:"bulk-action-hide-only-mobile"},{default:r(()=>[n.shouldDisableEditing?(A(),U(h,{key:0,placement:"top","popper-class":"fct-tooltip fct-disabled-edit-order-tooltip"},{content:r(()=>[O(m(n.warningMessage),1)]),default:r(()=>[O(" "+m(f(p)("Edit")),1)]),_:1})):(A(),_(H,{key:1},[O(m(f(p)("Edit")),1)],64))]),_:1},8,["onClick","disabled"])),o(vA,{onReload:l[2]||(l[2]=L=>n.reloadOrder()),onAddItem:a,onAddProduct:n.addProduct,onEnableItemEditing:n.enableItemEditing,onDisableItemEditing:n.disableItemEditing,onHandlePaymentActions:n.handlePaymentActions,"is-editing-item":n.isEditingItem,order:n.order,triggerMode:n.isMobile?"":"button",shouldShowRefund:n.shouldShowRefund(),warningMessage:n.warningMessage},null,8,["onAddProduct","onEnableItemEditing","onDisableItemEditing","onHandlePaymentActions","is-editing-item","order","triggerMode","shouldShowRefund","warningMessage"])])]),i("div",wD,[(A(!0),_(H,null,X(n.actionableActivities,L=>(A(),U(ja,{class:"mb-5",type:"error",key:L.id,content:L==null?void 0:L.content,closable:"",onClose:R=>n.clearActivityAction(L)},null,8,["content","onClose"]))),128)),i("div",CD,[i("div",BD,[o(re,{class:"overflow-hidden fct-order-items-card"},{default:r(()=>[o(Ae,{border_bottom:""},{title:r(()=>{var L,R;return[i("h2",kD,[O(m(f(p)("Order items"))+" ",1),((L=n.order)==null?void 0:L.fulfillment_type)==="physical"?(A(),U(ut,{key:0,status:(R=n.order)==null?void 0:R.shipping_status},{default:r(()=>{var K;return[O(m((K=n.order)==null?void 0:K.shipping_status),1)]}),_:1},8,["status"])):x("",!0)])]}),_:1}),o(le,null,{default:r(()=>[n.isEditingItem?(A(),_("div",FD,[o(v,{placeholder:f(p)("Search products..."),onKeyup:l[3]||(l[3]=L=>a()),modelValue:n.searchQuery,"onUpdate:modelValue":l[4]||(l[4]=L=>n.searchQuery=L)},{prefix:r(()=>[o(z,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),o(c,{onClick:s,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[O(m(f(p)("Browse")),1)]),_:1})])):x("",!0),i("div",xD,[n.order.order_items.length>0?(A(),_("div",UD,[i("div",SD,[(A(!0),_(H,null,X(n.order.order_items,(L,R)=>{var K,J,W,ae,Z,te,ie,P,j;return A(),_(H,{key:R},[L.payment_type!=="signup_fee"&&((K=L==null?void 0:L.other_info)==null?void 0:K.item_status)!=="adjusted"&&n.shouldSkipAdjustmentItem(L)?(A(),_("div",ED,[i("div",QD,[L!=null&&L.is_custom?(A(),_("a",{key:0,href:(J=L==null?void 0:L.other_info)==null?void 0:J.view_url,target:"_blank",rel:"noopener noreferrer",class:"link"},[i("img",{src:L.featured_media!=null?L.featured_media:n.getImageUrl(L),alt:L.title,class:oe(n.getClass(L))},null,10,ID)],8,DD)):(A(),U(y,{key:1,class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:r(()=>[i("img",{src:L.featured_media!=null?L.featured_media:n.getImageUrl(L),alt:L.title,class:oe(n.getClass(L))},null,10,$D)]),_:2},1032,["to"]))]),i("div",TD,[i("div",MD,[i("div",VD,[i("div",LD,[L!=null&&L.is_custom?(A(),_("a",{key:0,href:(W=L==null?void 0:L.other_info)==null?void 0:W.view_url,target:"_blank",rel:"noopener noreferrer",class:"link"},m(L==null?void 0:L.post_title),9,OD)):(A(),U(y,{key:1,class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:r(()=>[O(m(L==null?void 0:L.post_title),1)]),_:2},1032,["to"]))]),i("div",HD,"  "+m(L==null?void 0:L.title),1),(L==null?void 0:L.payment_type)==="subscription"?(A(),_("div",RD,[i("span",{innerHTML:L==null?void 0:L.payment_info},null,8,PD),((ae=L==null?void 0:L.other_info)==null?void 0:ae.manage_setup_fee)==="yes"?(A(),_("span",{key:0,innerHTML:L==null?void 0:L.setup_info},null,8,KD)):x("",!0)])):x("",!0),n.isEditingItem?(A(),_("div",ND,[i("span",null,m(n.formatNumber(L.unit_price)),1),l[24]||(l[24]=i("span",null,"x",-1)),i("span",null,m(f(nt)(L.quantity)),1)])):x("",!0),n.isEditingItem?x("",!0):(A(),_("div",GD,[i("div",zD,[((Z=L==null?void 0:L.variants)==null?void 0:Z.length)>0?(A(),_("span",jD,m(n.formatNumber(L.variants.compare_price)),1)):x("",!0),i("span",null,m(n.formatNumber(L.unit_price)),1),l[25]||(l[25]=i("span",null,"x",-1)),i("span",null,m(f(nt)(L.quantity)),1)])])),L.bundle_items.length>0?(A(),U(Xi,{key:3,product:L},null,8,["product"])):x("",!0)]),n.isEditingItem?x("",!0):(A(),_("div",YD,[i("div",qD,[((te=L==null?void 0:L.variants)==null?void 0:te.length)>0?(A(),_("span",WD,m(n.formatNumber(L.variants.compare_price)),1)):x("",!0),i("span",null,m(n.formatNumber(L.unit_price)),1),l[26]||(l[26]=i("span",null,"x",-1)),i("span",null,m(f(nt)(L.quantity)),1)])])),i("div",XD,[((ie=L==null?void 0:L.other_info)==null?void 0:ie.item_status)!=="adjusted"?(A(),_("span",JD,m(n.formatNumber(L.line_total)),1)):x("",!0),L.payment_type==="subscription"&&((P=L==null?void 0:L.other_info)==null?void 0:P.manage_setup_fee)==="yes"?(A(),_("div",ZD,[l[27]||(l[27]=i("span",null,"+ ",-1)),((j=L==null?void 0:L.other_info)==null?void 0:j.setup_fee_per_item)==="yes"?(A(),_("span",eI,[i("span",null,m(n.formatNumber(L.other_info.signup_fee*L.quantity)),1)])):(A(),_("span",tI,m(n.formatNumber(L.other_info.signup_fee)),1))])):x("",!0)])]),n.isEditingItem?(A(),_("div",aI,[i("a",{href:"#",onClick:je(G=>n.handleAdjustQuantityModal(L),["prevent"])},m(f(p)("Adjust Quantity")),9,sI),i("a",{href:"#",onClick:je(G=>n.deleteProduct(R,L),["prevent"])},m(f(p)("Remove Item")),9,nI)])):x("",!0)])])):x("",!0)],64)}),128))])])):x("",!0),n.order.order_items.length==0?(A(),_("p",oI,m(f(p)("No items found.")),1)):x("",!0)])]),_:1})]),_:1}),o(re,{class:"fct-order-payment-card"},{default:r(()=>[o(Ae,{border_bottom:""},{title:r(()=>[i("h2",lI,[i("span",null,m(f(p)("Payment")),1),o(ut,{status:n.order.payment_status,size:"small"},null,8,["status"])])]),_:1}),o(le,null,{default:r(()=>{var L,R,K,J,W,ae,Z;return[i("table",rI,[i("tbody",null,[i("tr",null,[i("td",null,m(f(p)("Subtotal")),1),i("td",null,[n.order.order_items.length>0?(A(),_("span",iI,m(f(nt)(n.uniqueItemsCount))+" "+m(f(ao)("item","items",n.uniqueItemsCount)),1)):x("",!0)]),i("td",null,m(n.formatNumber(n.order.subtotal)),1)]),o(wA,{order:n.order,shippingAttributes:n.shippingSettings,shouldEnableEditing:n.isEditingItem,"onUpdate:shipping":n.updateShipping,shippingMethodsProps:n.shippingMethods,otherShippingMethodsProps:n.otherShippingMethods},null,8,["order","shippingAttributes","shouldEnableEditing","onUpdate:shipping","shippingMethodsProps","otherShippingMethodsProps"]),n.order.order_items.length>0&&(n.isEditingItem||n.hasCoupon)?(A(),U(tr,{key:0,order:n.order,couponsAttributes:n.coupons,hasCouponAttributes:n.hasCoupon,appliedCouponsAttributes:n.appliedCoupons,action:"edit_order",shouldManageCoupon:n.isEditingItem,"onUpdate:coupons":n.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","couponsAttributes","hasCouponAttributes","appliedCouponsAttributes","shouldManageCoupon","onUpdate:coupons"])):x("",!0),n.hasCoupon?x("",!0):(A(),U(ar,{key:1,order:n.order,discountAttributes:n.discount,hasCoupon:n.hasCoupon,shouldEnableEditing:n.isEditingItem,"onUpdate:customDiscount":n.updateCustomDiscount},null,8,["order","discountAttributes","hasCoupon","shouldEnableEditing","onUpdate:customDiscount"])),n.order.tax_total?(A(),_("tr",AI,[i("td",null,m(f(p)("Tax"))+" "+m(parseInt(n.order.tax_behavior)==2?f(p)("(Included)"):f(p)("(Excluded)")),1),l[28]||(l[28]=i("td",null,null,-1)),i("td",null,m(n.formatNumber(n.order.tax_total)),1)])):x("",!0),n.order.shipping_tax?(A(),_("tr",dI,[i("td",null,m(f(p)("Shipping Tax"))+" "+m(parseInt(n.order.tax_behavior)==2?f(p)("(Included)"):f(p)("(Excluded)")),1),l[29]||(l[29]=i("td",null,null,-1)),i("td",null,m(n.formatNumber(n.order.shipping_tax)),1)])):x("",!0),i("tr",uI,[i("td",null,m(f(p)("Total")),1),l[30]||(l[30]=i("td",null,null,-1)),i("td",null,m(n.formatNumber(n.order.total_amount)),1)]),i("tr",cI,[i("td",null,m(f(p)("Total Paid")),1),l[31]||(l[31]=i("td",null,null,-1)),i("td",null,m(n.formatNumber((L=n.order)==null?void 0:L.total_paid)),1)]),((R=n.order)==null?void 0:R.total_refund)>0?(A(),_("tr",pI,[i("td",null,m(f(p)("Total Refund")),1),l[32]||(l[32]=i("td",null,null,-1)),i("td",null,"- "+m(n.formatNumber((K=n.order)==null?void 0:K.total_refund)),1)])):x("",!0),n.order.total_paid-((J=n.order)==null?void 0:J.total_refund)!=0?(A(),_("tr",fI,[i("td",null,m(f(p)("Net Payment")),1),l[33]||(l[33]=i("td",null,null,-1)),i("td",hI,m(n.getNetPayment()),1)])):x("",!0),n.order.total_amount-((W=n.order)==null?void 0:W.total_paid)>0?(A(),_("tr",mI,[i("td",null,m(f(p)("Total Due")),1),l[34]||(l[34]=i("td",null,null,-1)),i("td",_I,m(n.getTotalDue()),1)])):x("",!0),n.order.total_amount-(((ae=n.order)==null?void 0:ae.total_paid)-((Z=n.order)==null?void 0:Z.total_refund))<0?(A(),_("tr",gI,[i("td",null,[i("p",vI,[o(f(Df),{class:"w-6 text-amber-500 mr-2"}),O(" "+m(f(p)("Total Refund Owed")),1)])]),l[35]||(l[35]=i("td",null,null,-1)),i("td",yI,m(n.getTotalDue()),1)])):x("",!0)])])]}),_:1})]),_:1}),n.order.transactions&&n.order.transactions.length?pt((A(),U(re,{key:0,"element-loading-text":"Cancelling in progress...",class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Transaction Details"),border_bottom:"",title_size:"small"},{action:r(()=>{var L;return[n.order.total_amount-((L=n.order)==null?void 0:L.total_paid)>0&&n.order.status!=="canceled"&&n.markingOrderAsPaid===!1?(A(),U(C,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:n.handleCommand},{dropdown:r(()=>[o(w,null,{default:r(()=>[o(B,{command:"custom-payment-link"},{default:r(()=>[O(m(f(p)("Custom Payment Link"))+" ",1),o(h,{effect:"dark",content:f(p)("Due amount is remaining, Get a custom payment link to send to the customer."),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(g,null,{default:r(()=>[o(f(ca))]),_:1})]),_:1},8,["content"])]),_:1}),o(B,{command:"mark-order-paid"},{default:r(()=>[O(m(f(p)("Mark order as paid")),1)]),_:1})]),_:1})]),default:r(()=>[o(c,{size:"small"},{default:r(()=>[O(m(f(p)("Collect Payments"))+" ",1),o(z,{name:"ChevronDown"})]),_:1}),o(z,{name:"More"})]),_:1},8,["onCommand"])):x("",!0)]}),_:1},8,["title"]),o(le,{class:"p-0"},{default:r(()=>[o(yA,{onReload:l[5]||(l[5]=L=>n.reloadOrder()),onTriggerRefundModal:n.triggerRefundModal,transactions:n.order.transactions,order_id:n.order.id},null,8,["onTriggerRefundModal","transactions","order_id"]),o(xp,{onReload:l[6]||(l[6]=L=>n.reloadOrder()),transactions:n.order.transactions,order_id:n.order.id},null,8,["transactions","order_id"])]),_:1})]),_:1})),[[M,n.canceling_subscription]]):x("",!0),o(Q,{title:f(p)("Mark as paid"),modelValue:n.transactionMedium,"onUpdate:modelValue":l[10]||(l[10]=L=>n.transactionMedium=L)},{footer:r(()=>[pt((A(),U(c,{plan:"",type:"primary",onClick:n.markOrderAsPaid,disabled:n.markingOrderAsPaid},{default:r(()=>[O(m(f(p)("Mark Paid")),1)]),_:1},8,["onClick","disabled"])),[[M,n.markingOrderAsPaid]])]),default:r(()=>[i("div",null,[o(k,{"label-position":"top"},{default:r(()=>[o(E,{"label-position":"top",label:f(p)("Payment method")},{default:r(()=>[o(S,{modelValue:n.otherData.payment_method,"onUpdate:modelValue":l[7]||(l[7]=L=>n.otherData.payment_method=L)},{default:r(()=>[(A(!0),_(H,null,X(n.paymentMethodOption,L=>(A(),U(F,{key:L.value,label:L.name,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(E,{"label-position":"top",label:f(p)("Vendor charge id")},{default:r(()=>[o(v,{modelValue:n.otherData.vendor_charge_id,"onUpdate:modelValue":l[8]||(l[8]=L=>n.otherData.vendor_charge_id=L)},null,8,["modelValue"])]),_:1},8,["label"]),o(E,{"label-position":"top",label:f(p)("Notes")},{default:r(()=>[o(v,{rows:2,type:"textarea",placeholder:f(p)("Please enter the payment note..."),modelValue:n.otherData.mark_paid_note,"onUpdate:modelValue":l[9]||(l[9]=L=>n.otherData.mark_paid_note=L)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"]),n.order.licenses?(A(),U(re,{key:1,class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Licenses"),title_size:"small"},null,8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[o(Pi,{licenses:n.order.licenses,columns:["product"]},null,8,["licenses"])]),_:1})]),_:1})):x("",!0),o(re,{class:"overflow-hidden mb-0"},{default:r(()=>[o(Ae,{title:f(p)("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(wp,{onReload:n.reloadOrder,activities:n.order.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})]),i("div",bI,[i("div",wI,[(A(!0),_(H,null,X(n.order.subscriptions,(L,R)=>(A(),U(ZE,{key:L.id,subscription:L,order:n.order,orderId:e.order_id,index:R,onFetchOrder:l[11]||(l[11]=K=>n.$emit("fetch")),onReload:l[12]||(l[12]=K=>n.reloadOrder()),getOrderUrl:n.getOrderUrl},null,8,["subscription","order","orderId","index","getOrderUrl"]))),128)),n.order.customer?(A(),U($l,{key:0,order:n.order,shouldEnableEditing:!0},null,8,["order"])):x("",!0),o(er,{orderId:n.order.id,note:n.order.note,shouldEnableEditing:!0},null,8,["orderId","note"]),o(Il,{"bind-to-id":n.order.id,"bind-to-type":"Order",selectedLabels:n.selectedLabels,shouldEnableEditing:!0,"onUpdate:updateLabel":()=>{}},null,8,["bind-to-id","selectedLabels"]),($=n.order)!=null&&$.order_operation?(A(),U(Fp,{key:1,order_operation:(V=n.order)==null?void 0:V.order_operation},null,8,["order_operation"])):x("",!0),o(n3,{taxId:n.taxId},null,8,["taxId"])]),n.order?(A(),_("div",CI,[o(kn,{ref:"dynamicTemplates",filter:"single_order_page","widgets-query":{order_uuid:n.order.uuid,order_id:n.order.id},data:{order:n.order}},null,8,["widgets-query","data"])])):x("",!0)])]),o(Q,{modelValue:n.adjustQuantityModal,"onUpdate:modelValue":l[15]||(l[15]=L=>n.adjustQuantityModal=L),title:f(p)("Adjust Quantity"),width:"35%","align-center":"","append-to-body":!0,class:"fct-adjust-quantity-modal",onClose:l[16]||(l[16]=()=>{n.adjustQuantityModal=!1,n.adjustItem={},n.tmpAdjustedItem={}})},{footer:r(()=>[i("div",xI,[o(c,{onClick:l[13]||(l[13]=L=>n.adjustQuantityModal=!1),type:"info",soft:""},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(c,{type:"primary",onClick:l[14]||(l[14]=L=>n.saveAdjustedProductQuantity(n.tmpAdjustedItem))},{default:r(()=>[O(m(f(p)("Done")),1)]),_:1})])]),default:r(()=>[i("div",BI,[i("div",kI,[l[36]||(l[36]=O(" Adjust the quantity for ",-1)),i("strong",null,m(n.adjustItem.title),1)]),i("div",FI,[i("label",null,m(f(p)("Quantity")),1),n.isEditingItem?(A(),U(bp,{key:0,item:n.adjustItem,"onUpdate:value":n.updateQuantity},null,8,["item","onUpdate:value"])):x("",!0)])])]),_:1},8,["modelValue","title"]),o(yp,{ref_key:"productItemModal",ref:t,order_id:e.order_id,searchQueryParent:n.searchQuery,orderParent:n.order,"onUpdate:searchQuery":n.updateSearchQuery},null,8,["order_id","searchQueryParent","orderParent","onUpdate:searchQuery"]),o(Q,{"append-to-body":!0,width:"40%",modelValue:n.createProductModal,"onUpdate:modelValue":l[17]||(l[17]=L=>n.createProductModal=L),title:f(p)("Add New Product")},{default:r(()=>[n.createProductModal?(A(),_("div",UI,[o(Yl,{customModal:"order_modal","onUpdate:createProductModal":n.updateProductModal,onProcess_custom:n.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):x("",!0)]),_:1},8,["modelValue","title"]),o(Q,{"append-to-body":!0,modelValue:n.showRefundModal,"onUpdate:modelValue":l[19]||(l[19]=L=>n.showRefundModal=L),title:f(p)("Refund Transaction"),onClose:l[20]||(l[20]=()=>{n.changes_made=0,n.showRefundModal=!1,n.fetch()})},{default:r(()=>[pt(o(lE,{"element-loading-text":f(p)("Refund initiating on remote..."),order_id:e.order_id,order:n.order,showRefundModal:n.showRefundModal,onProcessing_refund:l[18]||(l[18]=L=>n.processing_refund=L),subscription:n.subscription,is_subscription:n.isSubscription,subscription_status:n.subscriptionStatus},null,8,["element-loading-text","order_id","order","showRefundModal","subscription","is_subscription","subscription_status"]),[[M,n.processing_refund]])]),_:1},8,["modelValue","title"]),n.loading?(A(),U(D,{key:0,animated:""},{default:r(()=>[o(I),o(I),o(I)]),_:1})):x("",!0),o(Q,{modelValue:n.nextInvoiceModal,"onUpdate:modelValue":l[21]||(l[21]=L=>n.nextInvoiceModal=L),title:f(p)("Custom payment link")},{default:r(()=>[o(gE,{order_id:e.order_id,order:n.order,onReload:n.fetch},null,8,["order_id","order","onReload"])]),_:1},8,["modelValue","title"])])],64)):x("",!0)])):x("",!0)])):x("",!0)],64)}}}),QI={class:"fct-create-order-wrapper fct-layout-width"},DI={class:"single-page-header"},II={class:"single-page-header-title-wrap"},$I={class:"single-page-body"},TI={class:"fct-create-order"},MI={class:"fct-create-order-main"},VI={class:"fct-browse-product-form-group pb-5 mx-5"},LI={key:0,class:"fct-table-wrap fct-table-transparent-header"},OI={class:"fct-product-info-card"},HI={class:"fct-product-info-media"},RI=["src","alt"],PI={class:"fct-product-info-details"},KI={class:"fct-product-info-name"},NI={class:"product-sub-name"},GI={class:"mt-1"},zI={key:0,class:"line-through mr-3"},jI={key:1},YI={key:0},qI={class:"fct-input-number-wrap"},WI={key:0},XI={key:0},JI={key:1},ZI={class:"fct-table-border fct-table-order-details"},e$={key:0},t$={key:3},a$={class:"fct-create-order-aside"},s$={class:"fct-admin-sidebar"},n$={key:0},o$={name:"CreateOrder",components:{OrderBulkActions:vA,Transaction:yA,Badge:ut,IconButton:we,CopyToClipboard:ma,Notes:er,Coupon:tr,CustomDiscount:ar,OrderCustomerInformation:$l,Shipping:wA},data(){return{loading:!1,calculating:!1,customModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{title:"",price:0,quantity:1,is_physical:"yes"},timeout:"",widgets:[],order:{applied_coupon:[],customer_id:"",customer:{id:null,full_name:"",email:"",phone:""},status:"processing",subtotal:0,manual_discount_total:0,shipping_tax:0,shipping_total:0,tax_total:0,total_amount:0,order_items:[],payment_status:"pending",payment_method:"offline_payment",shipping_status:"unshipped"},searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,coupons:[],appliedCoupons:[],hasCoupon:!1,selectedLabels:[],selectedCustomerCountry:"",shippingMethods:[],otherShippingMethods:[]}},watch:{order:{handler(){this.changes_made++},deep:!0}},computed:{beforeRouteLeave(e,t,a){this.redirectRouteName=e.name,this.changes_made?this.outerVisible=!0:a()}},methods:{getImageUrl(e,t){return e&&e!==null&&e!==void 0?e:t+"images/empty-image.svg"},getClass(e){return{"w-full":!0,"border border-solid border-gray-divider rounded":e&&e!==null&&e!==void 0}},resetUnsaved(){this.changes_made=0},updateCustomModal(e){this.customModal=e},updateProductModal(e){this.createProductModal=e},updateSearchQuery(e){this.searchQuery=e,this.calculateLine()},updateQuantity(e,t,a){parseInt(t)<0?this.handleError(`You have exceeded the stock limit! Current stock is :  ${t}`):a.quantity=e,a.updated_stock=t,this.calculateLine()},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():bA(this.order,this.hasCoupon)},deleteProduct(e,t){t.id&&this.deletedItems.push(t.id),this.order.order_items.splice(e,1),this.calculateLine()},processCustom(e){e.order_id=this.order_id,this.order.order_items.unshift(e),this.customModal=!1,this.calculateLine()},update(){delete this.order.customer.orders,this.loading=!0;const e={...this.order};delete e.customer,se.post("orders",{...e,discount:this.discount,shipping:this.shippingSettings,labels:this.selectedLabels,user_tz:ke.tz.guess(),trigger:"on_admin_create"}).then(t=>{Y.success(t.message),setTimeout(()=>{this.$router.push({name:"view_order",params:{order_id:t==null?void 0:t.order_id}})},300)}).catch(t=>{var a;t.status_code=="422"?Y.validationErrors(t):Y.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},onChangeLabel(e){this.selectedLabels=e},saveNoteModal(e){this.order.note=e},updateCustomDiscount(e){this.discount=e,this.changes_made++},updateCoupons(e,t,a){this.coupons=e,this.appliedCoupons=t,this.hasCoupon=a},updateShipping(e,t){var a;(a=this.order)==null||a.order_items.forEach((s,n)=>{s.shipping_charge=ve.get(e,`${s.id}.shipping_charge`)}),this.order.shipping_total=t,this.changes_made++},isDisabled(e){var t;return((t=e==null?void 0:e.other_info)==null?void 0:t.payment_type)==="subscription"},fetchShippingMethods(){const e=[];this.order.order_items.length>0&&this.order.order_items.forEach(t=>{e.push({id:t.object_id,quantity:t.quantity,unit_price:t.unit_price,discount_total:t.discount_total})}),se.get("orders/shipping_methods",{country_code:this.selectedCustomerCountry,order_items:e}).then(t=>{this.shippingMethods=t.shipping_methods,this.otherShippingMethods=t.other_shipping_methods}).finally(()=>{})}},mounted(){this.fetchShippingMethods(),window.onbeforeunload=()=>{if(this.changes_made>0)return!0}}},l$=Object.assign(o$,{setup(e){const t=T(),a=T(!0),s=()=>t.value.fetchBySearch(),n=()=>{s()};return(l,d)=>{const u=b("el-breadcrumb-item"),c=b("el-breadcrumb"),h=b("el-input"),v=b("el-button"),y=b("router-link"),g=b("el-table-column"),B=b("el-table"),w=b("el-dialog"),C=Qt("loading");return A(),_("div",QI,[o(wn,{isActive:l.changes_made>0?"is-active":"",onDiscard:l.reloadOrder,onSave:l.update,loading:l.loading},null,8,["isActive","onDiscard","onSave","loading"]),i("div",DI,[i("div",II,[o(c,{"separator-icon":f(la)},{default:r(()=>[o(u,{to:{name:"orders"}},{default:r(()=>[O(m(l.$t("Orders")),1)]),_:1}),o(u,null,{default:r(()=>[O(m(l.$t("Create Order")),1)]),_:1})]),_:1},8,["separator-icon"])])]),i("div",$I,[i("div",TI,[i("div",MI,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:l.$t("Products"),title_size:"small",border_bottom:""},null,8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[i("div",VI,[o(h,{placeholder:l.$t("Search products..."),onKeyup:d[0]||(d[0]=F=>s()),modelValue:l.searchQuery,"onUpdate:modelValue":d[1]||(d[1]=F=>l.searchQuery=F)},{prefix:r(()=>[o(z,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),o(v,{onClick:n,type:"info",soft:"",class:"el-button--x-small"},{default:r(()=>[O(m(l.$t("Browse")),1)]),_:1})]),l.order.order_items.length>0?(A(),_("div",LI,[pt((A(),U(B,{data:l.order.order_items,class:"fct-table w-full","row-key":"id","default-expand-all":"","element-loading-text":l.$t("Recalculating with product latest info...")},{default:r(()=>[o(g,{"min-width":"450",label:l.$t("Product")},{default:r(F=>{var S,E,k,Q;return[i("div",OI,[i("div",HI,[o(y,{class:"link",to:{name:"product_edit",params:{product_id:F.row.post_id}}},{default:r(()=>[i("img",{src:l.getImageUrl(F.row.featured_media,l.appVars.asset_url),alt:F.row.title,class:oe(l.getClass(F.row.featured_media))},null,10,RI)]),_:2},1032,["to"])]),i("div",PI,[i("div",KI,[o(y,{class:"link",to:{name:"product_edit",params:{product_id:F.row.post_id}}},{default:r(()=>[O(m(F.row.post_title)+" ",1),i("span",NI,"- "+m(F.row.title),1)]),_:2},1032,["to"])]),i("div",GI,[O(m(l.formatNumber(F.row.price))+" ",1),parseInt(F.row.unit_price)>parseInt(F.row.price)?(A(),_("span",zI,m(l.formatNumber(F.row.unit_price)),1)):x("",!0),F.row.payment_type==="subscription"&&((E=(S=F.row)==null?void 0:S.other_info)==null?void 0:E.manage_setup_fee)==="yes"?(A(),_("div",jI,[i("span",null,m(F.row.other_info.signup_fee_name)+" : "+m(l.formatNumber(F.row.other_info.signup_fee)),1),((Q=(k=F.row)==null?void 0:k.other_info)==null?void 0:Q.setup_fee_per_item)=="yes"?(A(),_("span",YI,[d[6]||(d[6]=i("span",null,"x",-1)),i("span",null,m(F.row.quantity),1)])):x("",!0)])):x("",!0)])])])]}),_:1},8,["label"]),o(g,{width:"120",label:l.$t("Quantity")},{default:r(F=>[i("div",qI,[o(bp,{item:F.row,"onUpdate:value":l.updateQuantity,isDisabled:l.isDisabled(F.row),min:1},null,8,["item","onUpdate:value","isDisabled"])])]),_:1},8,["label"]),o(g,{width:120,label:l.$t("Total")},{default:r(F=>{var S,E,k,Q;return[i("div",null,m(l.formatNumber(F.row.line_total)),1),F.row.payment_type=="subscription"&&((E=(S=F.row)==null?void 0:S.other_info)==null?void 0:E.manage_setup_fee)=="yes"?(A(),_("div",WI,[d[7]||(d[7]=i("span",null,"+",-1)),((Q=(k=F.row)==null?void 0:k.other_info)==null?void 0:Q.setup_fee_per_item)=="yes"?(A(),_("span",XI,[i("span",null,m(l.formatNumber(F.row.other_info.signup_fee*F.row.quantity)),1)])):(A(),_("span",JI,m(l.formatNumber(F.row.other_info.signup_fee)),1))])):x("",!0)]}),_:1},8,["label"]),o(g,{width:50},{default:r(F=>[o(we,{bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:je(S=>l.deleteProduct(F.$index,F.row),["prevent"])},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","element-loading-text"])),[[C,l.calculating]])])):x("",!0)]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{border_bottom:"",title:l.$t("Payment"),title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[i("table",ZI,[i("tbody",null,[i("tr",null,[i("td",null,m(l.$t("Subtotal")),1),i("td",null,[l.order.order_items.length>0?(A(),_("span",e$,m(f(nt)(l.order.order_items.length))+" "+m(l.order.order_items.length===1?l.$t("item"):l.$t("items")),1)):x("",!0)]),i("td",null,m(l.formatNumber(l.order.subtotal)),1)]),l.order.order_items.length>0&&!l.discount.value?(A(),U(tr,{key:0,order:l.order,couponsAttributes:[],hasCouponAttributes:!1,appliedCouponsAttributes:[],action:"create_order",shouldManageCoupon:!0,"onUpdate:coupons":l.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","onUpdate:coupons"])):x("",!0),l.hasCoupon?x("",!0):(A(),U(ar,{key:1,order:l.order,hasCoupon:l.hasCoupon,"onUpdate:customDiscount":l.updateCustomDiscount},null,8,["order","hasCoupon","onUpdate:customDiscount"])),x("",!0),l.order.tax_total?(A(),_("tr",t$,[i("td",null,m(l.$t("Estimated tax")),1),i("td",null,m(l.$t("Not Calculated")),1),i("td",null,m(l.formatNumber(l.order.tax_total)),1)])):x("",!0)]),i("tfoot",null,[i("tr",null,[i("td",null,m(l.$t("Total")),1),d[8]||(d[8]=i("td",null,null,-1)),i("td",null,m(l.formatNumber(l.order.total_amount)),1)])])])]),_:1})]),_:1})]),i("div",a$,[i("div",s$,[o(er,{note:l.order.note,onWhenNoteEditIsDone:d[2]||(d[2]=F=>{l.saveNoteModal(F)})},null,8,["note"]),o($l,{order:l.order,onOnAddressSelected:d[3]||(d[3]=F=>{if(l.fetchShippingMethods(),F===null){l.selectedCustomerCountry="";return}l.selectedCustomerCountry=F.country,F.type==="shipping"?l.order.shipping_address_id=F.id:l.order.billing_address_id=F.id}),onOnAddressRemove:d[4]||(d[4]=()=>{l.selectedCustomerCountry="",l.fetchShippingMethods()})},null,8,["order"]),o(Il,{selectedLabels:l.selectedLabels,"onUpdate:updateLabel":l.onChangeLabel},null,8,["selectedLabels","onUpdate:updateLabel"])])])]),o(yp,{ref_key:"productItemModal",ref:t,searchQueryParent:l.searchQuery,orderParent:l.order,"onUpdate:searchQuery":l.updateSearchQuery},null,8,["searchQueryParent","orderParent","onUpdate:searchQuery"]),o(w,{"append-to-body":!0,modelValue:l.createProductModal,"onUpdate:modelValue":d[5]||(d[5]=F=>l.createProductModal=F),title:l.$t("Add New Product")},{default:r(()=>[l.createProductModal?(A(),_("div",n$,[o(Yl,{customModal:"order_modal","onUpdate:createProductModal":l.updateProductModal,onProcess_custom:l.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):x("",!0)]),_:1},8,["modelValue","title"])])])}}});class r$ extends Xt{constructor(){super(...arguments);me(this,"data",{form:rA()})}get controllerKey(){return"Customer"}}function Up(){return r$.init()}const i$={class:"setting-wrap"},A$={class:"setting-wrap-inner"},d$={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},u$={class:"grid gap-3 mb-6"},c$={class:"grid gap-3 mb-6"},p$={class:"grid gap-3 mb-6"},f$={class:"grid gap-3"},Go=Object.assign({name:"StoreSettings"},{__name:"StoreSettings",setup(e){const t=Up(),{form:a}=t.data,s=Ao(),n=T([]),l=T([]),d=T(!0),u=T(!1),c=T(!0),h=T({}),v=oa(),y=T(v.name),g=T(v.meta.title||"Store Settings"),B=()=>{var E;u.value=!0;let S=a.values;Array.isArray(S.store_logo)&&S.store_logo.length>0&&(S.store_logo=(E=S.store_logo)==null?void 0:E[0]),S.settings_name=y.value,se.post("settings/store",{...S}).then(k=>{Y.success(p("Settings saved successfully")),y.value==="store_setup"&&setTimeout(()=>{window.location.reload()},300)}).catch(k=>{var Q;k.status_code=="422"?Y.validationErrors(k):Y.error((Q=k.data)==null?void 0:Q.message),a.setValidationErrors(k),h.value=k}).finally(()=>{u.value=!1,c.value=!1,d.value=!1})},w=T(!1),C=()=>{d.value=!0,w.value=!1,se.get("settings/store",{settings_name:y.value}).then(S=>{a.setSchema(S.fields).setDefaults(S.settings).initForm(),n.value=S.settings,l.value=S.fields,d.value=!1,c.value=!1,u.value=!1}).catch(S=>{w.value=!0,d.value=!1,c.value=!1,u.value=!1})},F=()=>{s.bind(["mod+s"],S=>{S.preventDefault(),B()})};return fe(()=>v.name,(S,E)=>{var k;y.value=S,g.value=((k=v.meta)==null?void 0:k.title)||"Store Settings",s.unbind("mod+s"),F(),C()}),he(()=>{F(),C()}),gu(()=>{s.unbind("mod+s")}),(S,E)=>{const k=b("el-skeleton-item"),Q=b("el-skeleton"),I=b("el-form");return A(),_("div",i$,[o(ea,{heading:g.value,loading:u.value,onOnSave:B},null,8,["heading","loading"]),i("div",A$,[w.value?(A(),U(re,{key:1},{default:r(()=>[o(le,null,{default:r(()=>[i("p",null,m(f(p)("There is an error in the form fields. Please try reloading the page.")),1)]),_:1})]),_:1})):(A(),_(H,{key:0},[c.value?(A(),_("div",d$,[o(Q,{loading:c.value,animated:""},{template:r(()=>[i("div",u$,[o(k,{variant:"p",class:"w-[20%]"}),o(k,{variant:"p"})]),i("div",c$,[o(k,{variant:"p",class:"w-[20%]"}),o(k,{variant:"p"})]),i("div",p$,[o(k,{variant:"p",class:"w-[20%]"}),o(k,{variant:"p"})]),i("div",f$,[o(k,{variant:"p",class:"w-[20%]"}),o(k,{variant:"p"})])]),_:1},8,["loading"])])):x("",!0),c.value?x("",!0):(A(),_(H,{key:1},[f(a).isReady?(A(),U(I,{key:0,class:"relative"},{default:r(()=>[d.value?(A(),U(re,{key:0},{default:r(()=>[o(le,null,{default:r(()=>[o(Q,{rows:5,animated:""},{default:r(()=>[o(k),o(k,{variant:"text"}),o(k,{variant:"text"})]),_:1})]),_:1})]),_:1})):x("",!0),d.value?x("",!0):(A(),U(Jl,{key:1,form:f(a),showSubmitButton:!0,onOnSubmitButtonClick:B,submitButtonText:f(p)("Save"),loading:u.value,onOnChange:E[0]||(E[0]=D=>{}),"validation-errors":h.value},null,8,["form","submitButtonText","loading","validation-errors"]))]),_:1})):x("",!0)],64))],64))])])}}}),h$={};function m$(e,t){const a=b("router-view");return A(),_("div",null,[o(a)])}const _$=be(h$,[["render",m$]]),g$={name:"licensing",props:["disabled"],components:{Lock:If,Refresh:Yi,CircleCheck:Tl,Badge:ut,DynamicIcon:z,CopyToClipboard:ma,SettingsHeader:ea,CardBody:le,CardContainer:re},data(){return{loading:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},computed:{purchaseLink(){return De.get("purchase_fluent_cart_link")}},methods:{formatDate:Ps,translate:p,getSettings(){this.errorMessage="",this.loading=!0,se.get("settings/license",{verify:!0}).then(e=>{this.licenseData=e}).catch(e=>{Y.error(e)}).finally(()=>{this.loading=!1})},verifyLicense(){if(!this.licenseKey){Y.error(p("Please provide a license key")),this.errorMessage=p("Please provide a license key");return}this.verifying=!0,this.errorMessage="",se.post("settings/license",{license_key:this.licenseKey}).then(e=>{this.licenseData=e,e.notice&&window.dispatchEvent(new CustomEvent("fct-license-updated",{detail:e.notice}))}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.data)}).finally(()=>{this.verifying=!1})},deactivateLicense(){this.verifying=!0,se.delete("settings/license").then(e=>{this.licenseData=e,e.notice&&window.dispatchEvent(new CustomEvent("fct-license-updated",{detail:e.notice}))}).catch(e=>{Y.error(e)}).finally(()=>{this.verifying=!1})},maskLicense(e){if(!e)return"";const t=e.slice(0,4),a=e.slice(-4),s="*".repeat(e.length-8);return`${t}${s}${a}`}},mounted(){this.disabled||this.getSettings()}},v$={class:"setting-wrap"},y$={class:"setting-wrap-inner"},b$={key:0,class:"fluent_cart_configure_integration_body"},w$={key:0,class:"fct-license-box-content"},C$=["href"],B$={class:"fct-license-box-content-details"},k$={class:"label"},F$={class:"license-key"},x$={class:"label"},U$={key:1,class:"w-full items-start"},S$={key:1,class:"fct-license-box-content"},E$={class:"fct-license-box-content-details"},Q$={key:0},D$={class:"label"},I$={class:"license-key"},$$={class:"label"},T$={key:2,class:"fct-license-box-content"},M$={key:0},V$=["href"],L$=["innerHTML"];function O$(e,t,a,s,n,l){const d=b("SettingsHeader"),u=b("el-skeleton"),c=b("DynamicIcon"),h=b("CopyToClipboard"),v=b("el-input"),y=b("el-button"),g=b("CardBody"),B=b("CardContainer"),w=Qt("loading");return A(),_("div",v$,[o(d,{heading:l.translate("Licensing"),"show-save-button":!1},null,8,["heading"]),i("div",y$,[o(B,null,{default:r(()=>[o(g,null,{default:r(()=>[o(u,{loading:n.loading,animated:"",rows:6},null,8,["loading"]),i("div",null,[!a.disabled&&!n.loading?pt((A(),_("div",b$,[i("div",{class:oe(["fluent_cart_license_box","fct_license_"+n.licenseData.status])},[n.licenseData.status=="expired"?(A(),_("div",w$,[n.showNewLicenseInput?(A(),_("div",U$,[i("h3",null,m(l.translate("Your License Key")),1),o(v,{modelValue:n.licenseKey,"onUpdate:modelValue":t[1]||(t[1]=C=>n.licenseKey=C),placeholder:l.translate("License Key")},null,8,["modelValue","placeholder"])])):(A(),_(H,{key:0},[o(c,{name:"GradientWarningCircle"}),i("h3",null,m(l.translate("Looks like your license key has been Expired!")),1),i("p",null,[O(m(l.translate("Have a new license Key?"))+" ",1),i("a",{onClick:t[0]||(t[0]=je(C=>n.showNewLicenseInput=!n.showNewLicenseInput,["prevent"])),href:"#"},m(l.translate("Click here")),1),t[7]||(t[7]=O()),n.licenseData.renew_url?(A(),_(H,{key:0},[t[6]||(t[6]=O("or ",-1)),i("a",{href:n.licenseData.renew_url,target:"_blank"},m(l.translate("Purchase a new license")),9,C$)],64)):x("",!0)]),i("div",B$,[i("p",null,[i("span",k$,m(l.translate("License Key")),1),i("span",F$,[O(m(l.maskLicense(n.licenseData.license_key))+" ",1),o(h,{text:n.licenseData.license_key,showMode:"basic_copy_btn",tooltipText:l.translate("Copy License")},null,8,["text","tooltipText"])])]),i("p",null,[i("span",x$,m(l.translate("Expired At")),1),O(" "+m(l.formatDate(n.licenseData.expires,!0)),1)])])],64))])):n.licenseData.status=="valid"?(A(),_("div",S$,[o(c,{name:"GradientCheckCircle"}),i("h3",null,m(l.translate("Congratulations! Your license key is valid and activated")),1),i("p",null,[O(m(l.translate("Want to deactivate this license?"))+" ",1),i("a",{onClick:t[2]||(t[2]=je(C=>l.deactivateLicense(),["prevent"])),href:"#"},m(l.translate("Click here")),1)]),i("div",E$,[n.licenseData.license_key?(A(),_("p",Q$,[i("span",D$,m(l.translate("License Key")),1),i("span",I$,m(l.maskLicense(n.licenseData.license_key)),1)])):x("",!0),i("p",null,[i("span",$$,m(l.translate("Expires")),1),O(" "+m(n.licenseData.expires!=="lifetime"?l.formatDate(n.licenseData.expires,!0):n.licenseData.expires),1)])])])):(A(),_("div",T$,[i("h3",null,m(l.translate("Please Provide a license key of"))+" FluentCart ",1),o(v,{modelValue:n.licenseKey,"onUpdate:modelValue":t[3]||(t[3]=C=>n.licenseKey=C),placeholder:l.translate("License Key")},null,8,["modelValue","placeholder"]),n.showNewLicenseInput?x("",!0):(A(),_("p",M$,[O(m(l.translate("Don't have a license key?"))+" ",1),i("a",{target:"_blank",href:l.purchaseLink},[O(m(l.translate("Purchase one here"))+" ",1),o(c,{name:"External",class:"w-4 h-4"})],8,V$)]))])),i("p",{class:"fluent_cart_warning",innerHTML:n.errorMessage},null,8,L$),n.licenseData.status==="expired"&&n.showNewLicenseInput?(A(),U(y,{key:3,type:"primary",onClick:t[4]||(t[4]=C=>l.verifyLicense())},{default:r(()=>[o(c,{name:"Lock",class:"w-5 h-5"}),O(" "+m(l.translate("Click Here to Renew your License")),1)]),_:1})):["valid","expired"].includes(n.licenseData.status)?x("",!0):(A(),U(y,{key:4,type:"primary",onClick:t[5]||(t[5]=C=>l.verifyLicense())},{default:r(()=>[o(c,{name:"Lock",class:"w-5 h-5"}),O(" "+m(l.translate("Verify License")),1)]),_:1}))],2)])),[[w,n.verifying]]):x("",!0)])]),_:1})]),_:1})])])}const H$=be(g$,[["render",O$]]),R$={class:"fct-single-order-loader-wrap fct-layout-width"},P$={class:"single-page-header fct-page-loader-header flex items-start justify-between"},K$={class:"single-page-body"},N$={class:"fct-single-order"},G$={class:"fct-single-order-main"},z$={class:"fct-single-order-aside"},j$={class:"fct-admin-sidebar"},Y$={__name:"SingleProductLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton");return A(),_("div",R$,[i("div",P$,[o(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:r(()=>[o(s,{class:"max-w-180"}),o(s,{class:"max-w-[100px]"})]),_:1}),o(n,{animated:"",class:"flex gap-2 max-w-[100px]"},{template:r(()=>[o(s,{class:"w-2/4"}),o(s,{class:"w-2/4"})]),_:1})]),i("div",K$,[i("div",N$,[i("div",G$,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small",title:t.$t("Title")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small",title:t.$t("Pricing")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:5})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small",title:t.$t("Inventory Management")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:6})]),_:1})]),_:1}),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small",title:t.$t("Downloadable Asset(s)")},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p"})]),_:1})]),_:1})]),_:1})]),i("div",z$,[i("div",j$,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"image",class:"rounded w-full h-[138px] mb-2"}),o(s,{variant:"image",class:"rounded w-[90px] h-[90px]"})]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Group By"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Product Organizer"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:"",rows:3})]),_:1})]),_:1})])])])])])}}},q$={class:"fct-product-route-wrap"},W$={__name:"ProductRoute",props:{product_id:{type:[String,Number],required:!0}},setup(e){const t=e,a=Kn({show:!1,message:"",buttonText:"",route:""}),s=T(!1),n=T(!1),l=T(!1),d=oa(),u=T(!0),c=()=>{l.value=!0,a.show=!1,se.get("products/"+t.product_id+"/pricing",{with:["product_menu"]}).then(g=>{s.value=g.product,s.value.variants=h(s.value.variants),n.value=g.taxonomies,s.value.post_date=ke.utc(s.value.post_date).local().format("YYYY-MM-DDTHH:mm:ssZ"),u.value&&jQuery("#fct_admin_menu_holder").append(g.product_menu),v(!0)}).catch(g=>{var B;(g==null?void 0:g.code)==="fluent_cart_entity_not_found"?(a.show=!0,a.buttonText=ve.get(g,"data.buttonText"),a.message=ve.get(g,"data.message"),a.route=ve.get(g,"data.route"),jQuery(".fct-admin-product-header").remove()):g.status_code=="422"?Y.validationErrors(g):Y.error((B=g.data)==null?void 0:B.message)}).finally(()=>{l.value=!1})},h=g=>{let B={};return g.forEach((w,C)=>{w.item_price=w.item_price?lt(w.item_price,!1):0,w.item_cost=w.item_cost?lt(w.item_cost,!1):0,w.compare_price=w.compare_price?lt(w.compare_price,!1):"",w.other_info&&(w.other_info.signup_fee=w.other_info.signup_fee?lt(w.other_info.signup_fee,!1):0),w.rowId=C,B[w.id]=w}),g},v=(g=!1)=>{let B=jQuery(".fct-admin-product-menu"),w=d.name;B.length&&(B.find("li").removeClass("active-menu"),B.find(`li.fct_menu_${w}`).addClass("active-menu")),g&&s.value&&(jQuery("#wp-admin-bar-root-default .fct_view_link").remove(),jQuery("#wp-admin-bar-root-default").append('<li class="fct_view_link" id="wp-admin-bar-view"><a class="ab-item" href="'+s.value.guid+'" target="_blank">View Product</a></li>'))};return fe(()=>t.product_id,(g,B)=>{g!==B&&c()}),he(()=>{c(),v(),window.addEventListener("hashchange",v)}),Ss(()=>{jQuery(".fct-admin-product-header").remove(),window.removeEventListener("hashchange",v)}),Li("reload",()=>{u.value=!1,c()}),(g,B)=>{const w=b("router-view");return A(),_("div",q$,[f(d).name==="product_edit"&&l.value?(A(),U(Y$,{key:0})):x("",!0),a.show?(A(),U(Ml,{key:1,"button-text":a.buttonText,message:a.message,route:a.route},null,8,["button-text","message","route"])):x("",!0),s.value&&a.show==!1?(A(),U(w,{key:2,product:s.value,taxonomies:n.value},null,8,["product","taxonomies"])):x("",!0)])}}};class X$ extends yn{setupInitialData(){super.setupInitialData(),this.data.sorting.sortBy="ID"}getTabs(){return{all:p("All"),publish:p("Published"),draft:p("Draft"),physical:p("Physical"),digital:p("Digital"),subscribable:p("Subscribable"),bundle:p("Bundle"),non_bundle:p("Non Bundle")}}getToggleableColumns(){return[{label:p("Type"),value:"product_type"},{label:p("Variation"),value:"variation_type"},{label:p("Stock"),value:"stock_availability"},{label:p("Price"),value:"item_price"},{label:p("Status"),value:"post_status"},{label:p("Date"),value:"post_date"}]}getSortableColumns(){return[{label:p("Product ID"),value:"ID"},{label:p("Title"),value:"post_title"},{label:p("Created at"),value:"post_date"}]}getSearchHint(){return p("Search by Id, product title or variation title")}getFetchUrl(){return"products"}parseResponse(t){return t.products}getTableName(){return"product_table"}getAdvanceFilterOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.product_filter_options.advance")}getSearchGuideOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.product_filter_options.guide")}getCustomColumns(){return ve.get(window,"fluentCartAdminApp.filter_options.product_filter_options.columns")||{}}with(){return["detail","variants:post_id,available"]}}function Sp(e){return X$.init(e)}const J$={key:0,class:"fct-dummy-product-content"},Z$={key:0,class:"title"},e5={class:"text"},t5={class:"fct-dummy-product-loading"},a5={class:"fct-loading-bars"},s5=["id"],n5={key:1,class:"fct-form-group"},o5={class:"required"},l5={class:"dialog-footer"},r5={__name:"CreateDummyProduct",props:{products:{}},emits:["onProductCreated"],setup(e,{emit:t}){const a=t,s=Je().ctx,n=T(!1),l=T([]),d=T(null),u=T(0),c=T(!1),h=T(null),v=T(0),y=w=>{n.value=w},g=(w=0)=>{if(d.value===null){B();return}c.value=!0;const C=l.value[d.value];if(h.value=C,w>C.count-1){setTimeout(()=>{B(),n.value=!1,a("onProductCreated")},1e3);return}u.value=w,s.$post("products/create-dummy",{category:C.category,index:w}).then(F=>{v.value=parseFloat(((w+1)/C.count*100).toFixed(0)),g(w+1)}).catch(F=>{F.code===400?B():g(w+1),s.handleError(F)})},B=()=>{v.value=0,u.value=0,c.value=!1,h.value=null};return he(()=>{l.value=De.get("dummy_product_info")}),(w,C)=>{const F=b("el-button"),S=b("el-progress"),E=b("el-option"),k=b("el-select"),Q=b("el-dialog");return A(),_(H,null,[o(F,{onClick:C[0]||(C[0]=I=>y(!0))},{default:r(()=>[o(z,{name:"Stars",class:"hidden lg:inline"}),O(" "+m(w.$t("Add Dummy Product")),1)]),_:1}),o(Q,{modelValue:n.value,"onUpdate:modelValue":C[4]||(C[4]=I=>n.value=I),title:w.$t("Create Dummy Product"),"append-to-body":!0},ft({default:r(()=>[c.value?(A(),_("div",J$,[h.value!=null?(A(),_("div",Z$,m(f(p)("Inserting %1$s of %2$s %3$s Product",u.value+1,h.value.count,h.value.title)),1)):x("",!0),i("div",e5,[O(m(w.$t("Can close the window - product will continue to insert."))+" ",1),i("div",t5,[i("div",a5,[(A(),_(H,null,X(8,I=>i("div",{key:I,class:"bar-block",id:`bar-block-${I+1}`},null,8,s5)),64))]),O(" "+m(f(p)("Uploading... %s%",v.value)),1)])]),o(S,{percentage:v.value,"striped-flow":"","stroke-width":6,striped:"","show-text":!1},null,8,["percentage"])])):(A(),_("div",n5,[i("label",o5,m(w.$t("Product Category")),1),o(k,{modelValue:d.value,"onUpdate:modelValue":C[1]||(C[1]=I=>d.value=I),clearable:"",placeholder:w.$t("Select a Product Category")},{default:r(()=>[(A(!0),_(H,null,X(l.value,(I,D)=>(A(),U(E,{key:D,label:I.title,value:D},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]))]),_:2},[c.value?void 0:{name:"footer",fn:r(()=>[i("div",l5,[o(F,{onClick:C[2]||(C[2]=I=>y(!1))},{default:r(()=>[O(m(w.$t("Cancel")),1)]),_:1}),o(F,{type:"primary",onClick:C[3]||(C[3]=()=>{g()}),disabled:!d.value},{default:r(()=>[O(m(w.$t("Create Products")),1)]),_:1},8,["disabled"])])]),key:"0"}]),1032,["modelValue","title"])],64)}}},i5={class:"table-cell"},A5={class:"fct-product-info-card w-full"},d5={class:"fct-product-info-media"},u5={class:"fct-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},c5={class:"fct-product-info-name flex flex-col items-start gap-3"},p5={class:"table-cell"},f5={class:"table-cell"},h5={class:"table-cell"},m5={class:"table-cell"},_5={class:"table-cell"},g5={class:"table-cell"},v5={class:"table-cell"},y5={__name:"ProductsLoader",props:{nextPageCount:{type:Number,default:0},productTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=Array.from({length:t.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=b("el-table-column"),d=b("el-skeleton-item"),u=b("el-table"),c=b("el-skeleton");return A(),U(c,{animated:""},{template:r(()=>[o(u,{data:f(a),class:"w-full compact-table responsive fct-loader-table"},{empty:r(()=>n[0]||(n[0]=[])),default:r(()=>[o(l,{selectable:()=>!1,type:"selection",width:"45"}),o(l,{label:s.$t("Products"),width:"380"},{default:r(()=>[i("div",i5,[i("div",A5,[i("div",d5,[o(d,{varient:"image",class:"w-10 h-10.5 flex-none"})]),i("div",u5,[i("div",c5,[o(d,{varient:"p",class:"max-w-[190px]"}),o(d,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),e.productTable.isColumnVisible("product_type")?(A(),U(l,{key:0,label:s.$t("Type"),width:"100"},{default:r(()=>[i("div",p5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("variation_type")?(A(),U(l,{key:1,label:s.$t("Variation"),width:"150"},{default:r(()=>[i("div",f5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("item_price")?(A(),U(l,{key:2,label:s.$t("Price"),width:"130"},{default:r(()=>[i("div",h5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("stock_availability")?(A(),U(l,{key:3,label:s.$t("Stock"),width:"100"},{default:r(()=>[i("div",m5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("post_status")?(A(),U(l,{key:4,label:s.$t("Status"),width:"130"},{default:r(()=>[i("div",_5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("post_date")?(A(),U(l,{key:5,label:s.$t("Date"),width:"120"},{default:r(()=>[i("div",g5,[o(d,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):x("",!0),o(l,{label:s.$t("Actions"),width:"80",align:"right"},{default:r(()=>[i("div",v5,[o(d,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})}}},b5={},w5={class:"px-4 py-3"},C5={class:"flex items-center justify-between mb-3"},B5={class:"grid grid-cols-3 gap-5 mt-5"};function k5(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),U(s,{animated:""},{template:r(()=>[i("div",w5,[i("div",C5,[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})]),i("div",B5,[(A(),_(H,null,X(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const F5=be(b5,[["render",k5]]),x5={class:"fct-product-action show-on-mobile absolute right-0 top-1"},U5={class:"more-btn pr-3"},S5={class:"flex items-center gap-2"},E5={key:0},Q5={key:1},D5={key:2},I5={key:0},$5={key:1},T5={key:0},M5={key:1},V5={key:0},L5={key:1},O5={class:"flex items-center gap-0.5"},H5={key:0},R5={key:1},P5=["innerHTML"],K5=["innerHTML"],N5={class:"fct-product-id hidden",title:"Product ID"},G5={class:"more-btn pr-3"},z5={__name:"ProductsTable",props:{productTable:{type:Object,required:!0}},emits:["delete","duplicate","selectionChange"],setup(e,{expose:t,emit:a}){const s=a,n=T(null),l=y=>{y.action==="delete"?Kt(p("Are you sure you want to delete this product : %s ?",y.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{s("delete",y.product.ID)}).catch(g=>{console.log(g," handle product delete errors")}):y.action==="duplicate"&&s("duplicate",y.product)},d=y=>y.min_price===y.max_price?lt(y.min_price,!0):`${lt(y.min_price,!0)} - ${lt(y.max_price,!0)}`,u=y=>{switch(y){case"physical":return p("Physical");case"digital":return p("Digital");case"bundle":return p("Bundle");default:rt.headline(y)}},c=y=>{switch(y){case"simple":return p("Simple");case"simple_variations":return p("Simple Variations");default:rt.headline(y)}},h=y=>{s("selectionChange",y)};return t({clearSelection:()=>{var y,g;(g=(y=n.value)==null?void 0:y.clearSelection)==null||g.call(y)}}),(y,g)=>{const B=b("el-table-column"),w=b("router-link"),C=b("el-dropdown-item"),F=b("el-dropdown-menu"),S=b("el-dropdown"),E=b("el-tooltip"),k=b("el-table");return A(),U(k,{ref_key:"elTableRef",ref:n,data:e.productTable.getTableData(),class:"w-full compact-table",onSelectionChange:h},{empty:r(()=>[o(Te,{icon:"Empty/ListView","has-dark":!0,text:e.productTable.emptyMessage},null,8,["text"])]),default:r(()=>[o(B,{type:"selection",width:"45"}),o(B,{label:f(p)("Products"),width:"380"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[o(Ki,{product:Q.row,class:"fct-product-table-product-info"},null,8,["product"])]),_:2},1032,["to"]),i("div",x5,[o(S,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:l,placement:"bottom-end"},{dropdown:r(()=>[o(F,null,{default:r(()=>[Q.row.ID?(A(),U(C,{key:0,class:"item-link"},{default:r(()=>[o(w,{to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(C,{command:{action:"duplicate",product:Q.row}},{default:r(()=>[o(z,{name:"Duplicate"}),O(" "+m(f(p)("Duplicate")),1)]),_:2},1032,["command"]),o(C,{command:{action:"delete",product:Q.row},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",U5,[o(z,{name:"More"})])]),_:2},1024)])]),_:1},8,["label"]),e.productTable.isColumnVisible("product_type")?(A(),U(B,{key:0,label:f(p)("Type"),width:"170"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>{var I,D;return[i("div",S5,[((D=(I=Q.row.detail)==null?void 0:I.other_info)==null?void 0:D.is_bundle_product)==="yes"?(A(),_("span",E5,m(f(p)("Bundle"))+" - ",1)):x("",!0),Q.row.detail?(A(),_("span",Q5,m(u(Q.row.detail.fulfillment_type)),1)):(A(),_("span",D5,m(f(p)("N/A")),1))])]}),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("variation_type")?(A(),U(B,{key:1,label:f(p)("Variation"),width:"150"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[Q.row.detail?(A(),_("span",I5,m(c(Q.row.detail.variation_type)),1)):(A(),_("span",$5,m("N/A")))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("item_price")?(A(),U(B,{key:2,label:f(p)("Price"),width:"130"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[Q.row.detail?(A(),_("span",T5,m(d(Q.row.detail)),1)):(A(),_("span",M5,m(f(p)("Set Price")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("stock_availability")?(A(),U(B,{key:3,label:f(p)("Stock"),width:"100"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[Q.row.detail?(A(),_("span",V5,[Q.row.detail.manage_stock.toString()==="0"?(A(),_(H,{key:0},[O(m(f(p)("Unlimited")),1)],64)):(A(),_(H,{key:1},[O(m(f(nt)(f(ve).sum(Q.row.variants,"available"))),1)],64))])):(A(),_("span",L5,m("")))]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("post_status")?(A(),U(B,{key:4,label:f(p)("Status"),width:"130"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[i("div",O5,[(A(),U(ut,{key:Q.row.ID,status:Q.row.post_status==="future"?"scheduled":Q.row.post_status},null,8,["status"])),Q.row.post_status==="future"?(A(),U(E,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[O(m(f(p)("Publishes On: %s",f(Ps)(Q.row.post_date,!0))),1)]),default:r(()=>[o(z,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)])]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),e.productTable.isColumnVisible("post_date")?(A(),U(B,{key:5,label:f(p)("Date"),width:"120"},{default:r(Q=>[o(wt,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[o(Lt,{"date-time":Q.row.post_date,"with-time":!1},null,8,["date-time"])]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),(A(!0),_(H,null,X(e.productTable.getCustomColumns(),Q=>(A(),U(B,{label:Q.label},{default:r(I=>[Q.render_template?(A(),_("div",H5,[(A(),U($a(ku),{templateContent:Q.template,data:{column:Q,product:I.row,index:I.$index}},null,8,["templateContent","data"]))])):(A(),_("div",R5,[Q.as_link!==!1?(A(),U(wt,{key:0,class:"hover:no-underline",to:{name:"product_edit",params:{product_id:I.row.ID}}},{default:r(()=>[i("div",{innerHTML:f(ve).get(I.row,Q.accessor)},null,8,P5)]),_:2},1032,["to"])):(A(),_("div",{key:1,innerHTML:f(ve).get(I.row,Q.accessor)},null,8,K5))]))]),_:2},1032,["label"]))),256)),o(B,{label:f(p)("Actions"),width:"80",align:"right"},{default:r(Q=>[i("span",N5,"ID: "+m(Q.row.ID),1),o(S,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:l,placement:"bottom-end"},{dropdown:r(()=>[o(F,null,{default:r(()=>[Q.row.ID?(A(),U(C,{key:0,class:"item-link"},{default:r(()=>[o(w,{to:{name:"product_edit",params:{product_id:Q.row.ID}}},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(C,{command:{action:"duplicate",product:Q.row}},{default:r(()=>[o(z,{name:"Duplicate"}),O(" "+m(f(p)("Duplicate")),1)]),_:2},1032,["command"]),o(C,{command:{action:"delete",product:Q.row},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",G5,[o(z,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])}}},j5={class:"fct-product-table-mobile-wrap"},Y5={class:"fct-product-table-mobile-header"},q5={key:0,class:"fct-product-table-post-status-col"},W5={class:"flex items-center gap-1.5"},X5={class:"fct-product-action"},J5={class:"more-btn"},Z5=["onClick"],eT={class:"fct-product-table-mobile-body-header"},tT={class:"fct-product-table-date-col"},aT={class:"invoice-no",title:"Product ID"},sT={key:0,class:"fct-product-table-price-col"},nT={key:0},oT={key:1},lT={class:"fct-product-table-product-col"},rT=["onClick"],iT={key:0,class:"fct-product-table-product-type"},AT={class:"title"},dT={key:0,class:"value"},uT={key:1,class:"value"},cT={key:1,class:"fct-product-table-variation-col"},pT={class:"title"},fT={key:0,class:"value"},hT={key:1,class:"value"},mT={key:2,class:"fct-product-table-stock-col"},_T={class:"title"},gT={key:0,class:"value"},vT={key:1},yT={key:0,class:"fct-product-table-mobile-footer"},bT={class:"fct-product-table-stock-col"},wT={key:0,class:"title"},CT=["innerHTML"],BT=["innerHTML"],kT={__name:"ProductsTableMobile",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(e,{emit:t}){const a=t,s=u=>{u.action==="delete"&&Kt(p("Are you sure you want to delete this product : %s ?",u.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{a("delete",u.product.ID)}).catch(c=>{console.log(c," handle product delete errors")})},n=u=>u.min_price===u.max_price?lt(u.min_price,!0):`${lt(u.min_price,!0)} - ${lt(u.max_price,!0)}`,l=u=>{switch(u){case"physical":return p("Physical");case"digital":return p("Digital");default:rt.headline(u)}},d=u=>{switch(u){case"simple":return p("Simple");case"simple_variations":return p("Simple Variations");default:rt.headline(u)}};return(u,c)=>{const h=b("el-tooltip"),v=b("router-link"),y=b("el-dropdown-item"),g=b("el-dropdown-menu"),B=b("el-dropdown");return A(),_("div",j5,[(A(!0),_(H,null,X(e.productTable.getTableData(),(w,C)=>(A(),_("div",{key:w.id,class:"fct-product-table-mobile-row"},[i("div",Y5,[e.productTable.isColumnVisible("post_status")?(A(),_("div",q5,[i("div",W5,[(A(),U(ut,{key:w.ID,status:w.post_status,onClick:F=>u.$router.push({name:"product_edit",params:{product_id:w.ID}})},null,8,["status","onClick"])),w.post_status==="future"?(A(),U(h,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[O(m(f(p)("Publishes On: %s",f(Ps)(w.post_date,!0))),1)]),default:r(()=>[o(z,{name:"InformationFill",class:"w-4 h-4"})]),_:2},1024)):x("",!0)])])):x("",!0),i("div",X5,[o(B,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(g,null,{default:r(()=>[w.ID?(A(),U(y,{key:0,class:"item-link"},{default:r(()=>[o(v,{to:{name:"product_edit",params:{product_id:w.ID}}},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(y,{command:{action:"delete",product:w},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",J5,[o(z,{name:"More"})])]),_:2},1024)])]),i("div",{class:"fct-product-table-mobile-body",onClick:F=>u.$router.push({name:"product_edit",params:{product_id:w.ID}})},[i("div",eT,[i("div",tT,[e.productTable.isColumnVisible("post_date")?(A(),_(H,{key:0},[o(Lt,{class:"date","date-time":w.post_date,"with-time":!1},null,8,["date-time"]),c[0]||(c[0]=i("span",{class:"bullet"},"",-1))],64)):x("",!0),i("span",aT,"#"+m(w.ID),1)]),e.productTable.isColumnVisible("item_price")?(A(),_("div",sT,[w.detail?(A(),_("span",nT,m(n(w.detail)),1)):(A(),_("span",oT,m(f(p)("Set Price")),1))])):x("",!0)]),i("div",lT,[o(Ki,{product:w},null,8,["product"])])],8,Z5),i("div",{class:"fct-product-table-mobile-footer",onClick:F=>u.$router.push({name:"product_edit",params:{product_id:w.ID}})},[e.productTable.isColumnVisible("product_type")?(A(),_("div",iT,[i("div",AT,m(f(p)("Type")),1),w.detail?(A(),_("span",dT,m(l(w.detail.fulfillment_type)),1)):(A(),_("span",uT,m("N/A")))])):x("",!0),e.productTable.isColumnVisible("variation_type")?(A(),_("div",cT,[i("div",pT,m(f(p)("Variation")),1),w.detail?(A(),_("span",fT,m(d(w.detail.variation_type)),1)):(A(),_("span",hT,m("N/A")))])):x("",!0),e.productTable.isColumnVisible("stock_availability")?(A(),_("div",mT,[i("div",_T,m(f(p)("Stock")),1),w.detail?(A(),_("span",gT,[w.detail.manage_stock.toString()==="0"?(A(),_(H,{key:0},[O(m(f(p)("Unlimited")),1)],64)):(A(),_(H,{key:1},[O(m(f(nt)(f(ve).sum(w.variants,"available"))),1)],64))])):(A(),_("span",vT,m("")))])):x("",!0)],8,rT),e.productTable.getCustomColumns()?(A(),_("div",yT,[(A(!0),_(H,null,X(e.productTable.getCustomColumns(),F=>(A(),_("div",bT,[F.label?(A(),_("div",wT,m(F.label),1)):x("",!0),F.render_template?(A(),U($a(ku),{key:1,templateContent:F.template,data:F,column:F,row:w},null,8,["templateContent","data","column","row"])):(A(),_(H,{key:2},[F.as_link!==!1?(A(),U(wt,{key:0,class:"hover:no-underline",to:{name:"product_edit",params:{product_id:w.ID}}},{default:r(()=>[i("div",{innerHTML:f(ve).get(w,F.accessor)},null,8,CT)]),_:2},1032,["to"])):(A(),_("div",{key:1,innerHTML:f(ve).get(w,F.accessor)},null,8,BT))],64))]))),256))])):x("",!0)]))),128))])}}},FT={class:"product-action-modal"},xT={class:"fct-alert-content"},UT={class:"fct-alert-title"},ST={class:"fct-alert-text"},ET={class:"fct-alert-subtext"},QT={key:1,class:"product-info"},DT={class:"info-text"},IT={key:0},$T={key:1},TT={key:2},MT={key:2,class:"options-wrapper"},VT={key:4,class:"products-preview"},LT={class:"preview-title"},OT={class:"product-list"},HT={class:"product-name"},RT={key:0,class:"remaining-count"},PT={key:5,class:"progress-section"},KT={class:"progress-text"},NT={key:6,class:"results-section"},GT={class:"dialog-footer"},zT={key:0,class:"el-icon-delete"},jT={__name:"ProductActionModal",props:{modelValue:{type:Boolean,default:!1},action:{type:String,required:!0,validator:e=>["duplicate","delete"].includes(e)},productId:{type:[Number,String],default:null},productName:{type:String,default:""},products:{type:Array,default:()=>[]},productIds:{type:Array,default:()=>[]}},emits:["update:modelValue","completed"],setup(e,{emit:t}){const a=e,s=t,n=T(a.modelValue),l=T(!1),d=T(!1),u=T(!1),c=T(0),h=T(0),v=T(0),y=T({importStockManagement:!0,importLicenseSettings:!0,importDownloadableFiles:!0}),g=De.get("app_config.isProActive"),B=De.get("modules_settings.stock_management.active"),w=q(()=>a.action==="duplicate"),C=q(()=>a.action==="delete"),F=q(()=>a.products&&a.products.length>0||a.productIds&&a.productIds.length>0),S=q(()=>a.products&&a.products.length>0?a.products.length:a.productIds&&a.productIds.length>0?a.productIds.length:1),E=q(()=>F.value?p(w.value?"Bulk Duplicate Products":"Bulk Delete Products"):p(w.value?"Duplicate Product":"Delete Product")),k=q(()=>C.value?p(F.value?"Delete Products":"Delete Product"):p(F.value?"Duplicate Products":"Duplicate Product")),Q=q(()=>a.products.slice(0,5)),I=q(()=>{const te=S.value-5;return te>0?te:0}),D=q(()=>S.value===0?0:Math.round(c.value/S.value*100)),M=q(()=>{if(v.value>0&&c.value===S.value)return"exception";if(c.value===S.value)return"success"});fe(()=>a.modelValue,te=>{n.value=te,te&&(y.value={importStockManagement:!0,importLicenseSettings:!0,importDownloadableFiles:!0},d.value=!1,u.value=!1,c.value=0,h.value=0,v.value=0,l.value=!1)}),fe(n,te=>{s("update:modelValue",te)});const $=()=>{!d.value&&!l.value&&(n.value=!1,(u.value&&h.value>0||!F.value&&!u.value)&&s("completed"))},V=()=>{F.value?J():L()},L=()=>{l.value=!0,w.value?R():K()},R=()=>{se.post(`products/${a.productId}/duplicate`,{import_stock_management:y.value.importStockManagement,import_license_settings:y.value.importLicenseSettings,import_downloadable_files:y.value.importDownloadableFiles}).then(te=>{Y.success(te.message||p("Product duplicated successfully")),s("completed"),$()}).catch(te=>{var ie,P;((ie=te.status_code)==null?void 0:ie.toString())==="422"?Y.validationErrors(te):Y.error(((P=te.data)==null?void 0:P.message)||p("Failed to duplicate product"))}).finally(()=>{l.value=!1})},K=()=>{se.delete(`products/${a.productId}`).then(te=>{Y.success(te.message||p("Product deleted successfully")),s("completed"),$()}).catch(te=>{var ie,P;((ie=te.status_code)==null?void 0:ie.toString())==="422"?Y.validationErrors(te):Y.error(((P=te.data)==null?void 0:P.message)||p("Failed to delete product"))}).finally(()=>{l.value=!1})},J=async()=>{d.value=!0,c.value=0,h.value=0,v.value=0,w.value?await W():await ae(),d.value=!1,u.value=!0,Z()},W=async()=>{const te={import_stock_management:y.value.importStockManagement,import_license_settings:y.value.importLicenseSettings,import_downloadable_files:y.value.importDownloadableFiles},ie=a.productIds&&a.productIds.length>0?a.productIds:a.products.map(P=>P.ID);for(const P of ie){try{await se.post(`products/${P}/duplicate`,te),h.value++}catch(j){console.error(`Failed to duplicate product ${P}:`,j),v.value++}c.value++}},ae=async()=>{const te=a.products&&a.products.length>0?a.products:[];for(const ie of te){try{await se.delete(`products/${ie.ID}`),h.value++}catch(P){console.error(`Failed to delete product ${ie.ID}:`,P),v.value++}c.value++}},Z=()=>{const te=w.value?"duplicated":"deleted";h.value>0&&v.value===0?Y.success({message:p(`All products ${te} successfully`)}):h.value>0&&v.value>0?Y.warning({message:p(`Some products were ${te} successfully`)}):Y.error({message:p(`Failed to ${te.replace("ed","")} products`)})};return(te,ie)=>{const P=b("el-checkbox"),j=b("el-progress"),G=b("el-alert"),N=b("el-button"),ee=b("el-dialog");return A(),U(ee,{modelValue:n.value,"onUpdate:modelValue":ie[3]||(ie[3]=ne=>n.value=ne),title:E.value,"append-to-body":!0,width:"500px",onClose:$,"modal-class":"fct-duplicate-product-modal"},{footer:r(()=>[i("div",GT,[o(N,{onClick:$,disabled:d.value},{default:r(()=>[O(m(d.value||u.value?f(p)("Close"):f(p)("Cancel")),1)]),_:1},8,["disabled"]),u.value?x("",!0):(A(),U(N,{key:0,type:C.value?"danger":"primary",loading:l.value||d.value,disabled:l.value||d.value,onClick:V},{default:r(()=>[C.value?(A(),_("i",zT)):x("",!0),O(" "+m(k.value),1)]),_:1},8,["type","loading","disabled"]))])]),default:r(()=>[i("div",FT,[C.value?(A(),U(ja,{key:0,icon:"WarningFill",type:"error"},{content:r(()=>[i("div",xT,[i("h3",UT,m(f(p)("Are you sure?")),1),i("p",ST,[O(m(f(p)("You are about to permanently delete"))+" ",1),i("strong",null,m(S.value),1),O(" "+m(f(p)(S.value===1?"product":"products"))+". ",1)]),i("p",ET,m(f(p)("This action cannot be undone.")),1)])]),_:1})):x("",!0),w.value?(A(),_("div",QT,[i("div",DT,[O(m(f(p)(F.value?"You are about to duplicate":"Select which settings to import from"))+" ",1),F.value?(A(),_("strong",IT,m(S.value),1)):(A(),_("strong",$T,m(e.productName),1)),F.value?(A(),_("span",TT,m(f(p)(S.value===1?"product":"products")),1)):x("",!0)])])):x("",!0),w.value?(A(),_("div",MT,[o(P,{modelValue:y.value.importDownloadableFiles,"onUpdate:modelValue":ie[0]||(ie[0]=ne=>y.value.importDownloadableFiles=ne),label:f(p)("Import Downloadable Files"),size:"large"},null,8,["modelValue","label"]),o(P,{modelValue:y.value.importLicenseSettings,"onUpdate:modelValue":ie[1]||(ie[1]=ne=>y.value.importLicenseSettings=ne),label:f(p)("Import License Settings"),size:"large"},null,8,["modelValue","label"]),f(B)==="yes"?(A(),_(H,{key:0},[f(g)?(A(),U(P,{key:0,modelValue:y.value.importStockManagement,"onUpdate:modelValue":ie[2]||(ie[2]=ne=>y.value.importStockManagement=ne),label:f(p)("Import Stock Management"),size:"large"},null,8,["modelValue","label"])):(A(),U(P,{key:1,disabled:!0,size:"large"},{default:r(()=>[O(m(f(p)("Import Stock Management"))+" ",1),o(z,{name:"Crown",class:"w-4 h-4 text-warning-500"})]),_:1}))],64)):x("",!0)])):x("",!0),w.value?(A(),U(ja,{key:3,type:"warning",icon:"InformationFill"},{default:r(()=>[i("span",null,m(f(p)(F.value?"All duplicated products will be created as drafts":"The duplicated product will be created as a draft")),1)]),_:1})):x("",!0),C.value&&F.value&&!d.value&&!u.value?(A(),_("div",VT,[i("p",LT,m(f(p)("Products to be deleted:")),1),i("ul",OT,[(A(!0),_(H,null,X(Q.value,ne=>(A(),_("li",{key:ne.ID,class:"product-item"},[i("span",HT,m(ne.post_title),1)]))),128)),I.value>0?(A(),_("li",RT,m(f(p)("... and %s more",I.value)),1)):x("",!0)])])):x("",!0),F.value&&d.value?(A(),_("div",PT,[o(j,{percentage:D.value,status:M.value},null,8,["percentage","status"]),i("p",KT,m(f(p)(C.value?"Deleting":"Duplicating"))+" "+m(c.value)+" / "+m(S.value),1)])):x("",!0),F.value&&u.value?(A(),_("div",NT,[h.value>0?(A(),U(G,{key:0,title:f(p)(C.value?"Successfully deleted %s product(s)":"Successfully duplicated %s product(s)",h.value),type:"success",closable:!1,"show-icon":""},null,8,["title"])):x("",!0),v.value>0?(A(),U(G,{key:1,title:f(p)(C.value?"Failed to delete %s product(s)":"Failed to duplicate %s product(s)",v.value),type:"error",closable:!1,"show-icon":"",style:{"margin-top":"10px"}},null,8,["title"])):x("",!0)])):x("",!0)])]),_:1},8,["modelValue","title"])}}},YT={class:"fct-all-products-page fct-layout-width"},qT={class:"fct-all-products-wrap"},WT={key:0,class:"bulk-actions-bar"},XT={class:"bulk-left flex items-center gap-2"},JT={class:"bulk-right"},ZT={key:1},eM={__name:"AllProducts",setup(e){const t=Sp({instance:Je()}),a=T(!1),s=T(!1),n=T("duplicate"),l=T(null),d=T([]),u=T(""),c=T(!1),h=()=>{c.value=window.innerWidth<768},v=D=>{se.delete(`products/${D}`).then(M=>{Y.success(M),t.fetch()}).catch(M=>{var $;M.status_code.toString()==="422"?Y.validationErrors(M):Y.error(($=M.data)==null?void 0:$.message)})},y=D=>{l.value=D,d.value=[],n.value="duplicate",s.value=!0},g=()=>{t.fetch(),l.value=null,d.value=[]},B=()=>{var D,M;t.fetch(),d.value=[],u.value="",(M=(D=I.value)==null?void 0:D.clearSelection)==null||M.call(D)},w=D=>{d.value=D},C=()=>{if(d.value.length===0){Y.warning({message:p("Please select at least one product to duplicate")});return}l.value=null,n.value="duplicate",s.value=!0},F=()=>{if(d.value.length===0){Y.warning({message:p("Please select at least one product to delete")});return}l.value=null,n.value="delete",s.value=!0},S=()=>{if(!u.value){Y.warning({message:p("Please select a bulk action")});return}u.value==="duplicate"?C():u.value==="delete"&&F()},E=q(()=>d.value.map(D=>D.ID)),k=q(()=>d.value.length>0),Q=q(()=>d.value.length>0),I=T(null);return he(()=>{h(),window.addEventListener("resize",h)}),Re(()=>{window.removeEventListener("resize",h)}),(D,M)=>{const $=b("el-button"),V=b("el-option"),L=b("el-select"),R=b("el-dialog");return A(),_("div",YT,[o(Ua,{title:f(p)("Products")},{action:r(()=>[o(tt,{permission:"products/create"},{default:r(()=>[o(r5,{onOnProductCreated:M[0]||(M[0]=K=>f(t).fetch()),products:f(t).getTableData()},null,8,["products"]),o($,{type:"primary",onClick:M[1]||(M[1]=()=>{a.value=!0})},{default:r(()=>[O(m(f(p)("Add Product")),1)]),_:1})]),_:1})]),_:1},8,["title"]),o(tt,{permission:"products/view"},{default:r(()=>[i("div",qT,[o(bn,{table:f(t),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:r(()=>[f(t).isLoading()?(A(),U(F5,{key:0})):x("",!0),o(kT,{"product-table":f(t),onDelete:v,onDuplicate:y},null,8,["product-table"])]),default:r(()=>[o(Nn,{name:"slide-fade"},{default:r(()=>[k.value?(A(),_("div",WT,[i("div",XT,[o(L,{size:"small",class:"bulk-select min-w-[180px]",placeholder:f(p)("Select Bulk Action"),modelValue:u.value,"onUpdate:modelValue":M[2]||(M[2]=K=>u.value=K)},{default:r(()=>[o(V,{label:f(p)("Duplicate"),value:"duplicate"},null,8,["label"]),o(V,{label:f(p)("Delete"),value:"delete"},null,8,["label"])]),_:1},8,["placeholder","modelValue"]),o($,{size:"small",type:u.value==="delete"?"danger":"primary",onClick:S},{default:r(()=>[u.value==="delete"?(A(),U(z,{key:0,name:"Delete",class:"w-4 h-4"})):(A(),U(z,{key:1,name:"Copy",class:"w-4 h-4"})),O(" "+m(f(p)("Confirm")),1)]),_:1},8,["type"])]),i("div",JT,m(d.value.length)+" "+m(f(p)("item(s) selected")),1)])):x("",!0)]),_:1}),f(t).isLoading()?(A(),U(y5,{key:0,productTable:f(t),"next-page-count":f(t).nextPageCount},null,8,["productTable","next-page-count"])):(A(),_("div",ZT,[o(z5,{ref_key:"productTableRef",ref:I,"product-table":f(t),onDelete:v,onDuplicate:y,onSelectionChange:w},null,8,["product-table"])]))]),_:1},8,["table"])])]),_:1}),o(tt,{permission:"products/create"},{default:r(()=>{var K,J;return[o(R,{"append-to-body":!0,modelValue:a.value,"onUpdate:modelValue":M[3]||(M[3]=W=>a.value=W),title:f(p)("Add New Product")},{default:r(()=>[a.value?(A(),U(Yl,{key:0})):x("",!0)]),_:1},8,["modelValue","title"]),o(jT,{modelValue:s.value,"onUpdate:modelValue":M[4]||(M[4]=W=>s.value=W),action:n.value,"product-id":(K=l.value)==null?void 0:K.ID,"product-name":(J=l.value)==null?void 0:J.post_title,products:Q.value?d.value:[],"product-ids":Q.value?E.value:[],onCompleted:M[5]||(M[5]=W=>Q.value?B():g())},null,8,["modelValue","action","product-id","product-name","products","product-ids"])]}),_:1})])}}},tM=be(eM,[["__scopeId","data-v-96641757"]]);class aM extends Xt{constructor(){super(...arguments);me(this,"data",{options:{status:[{title:"Published",value:"published"},{title:"Draft",value:"draft"}],fulfilment:[{title:"Physical",value:"physical"},{title:"Digital",value:"digital"}],variation:[{title:"Simple",value:"simple"},{title:"Simple Variations",value:"simple_variations"}]},dummies:{productDetail:{variation_type:"simple",manage_stock:1,fulfillment_type:"physical",stock_availability:"in-stock"},variation:{variation_title:"",item_price:0,compare_price:0,serial_index:1,fulfillment_type:"",manage_stock:1,total_stock:100,available:100,committed:0,on_hold:0,stock_status:"in-stock"},variationDetail:{description:"",payment_type:"onetime",times:"",repeat_interval:"",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},variationImage:{id:"",url:"",title:""},gallery:{id:"",url:"",title:""},downloadableFile:{title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:"",serial:1}}});me(this,"ensureProductVariantIsArray",a=>{Array.isArray(a.variants)||(a.variants=[])})}getDummyVariation(a){var l;const s=a==null?void 0:a.variants,n={...this.data.dummies.variation};return n.serial_index=Array.isArray(s)?s.length+1:1,n.fulfillment_type=(l=a==null?void 0:a.detail)==null?void 0:l.fulfillment_type,n.other_info={...this.data.dummies.variationDetail},n.media=[],n}addVariationToProduct(a){this.ensureProductVariantIsArray(a),a.variants.push(this.getDummyVariation(a))}handleVariationChanged(a,s){s==="simple_variations"?this.addVariationToProduct(a):a.variants=[]}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}addDummyDownloadableFiles(a){const s=a;Array.isArray(s.downloadable_files)||(s.downloadable_files=[]),s.downloadable_files.push(this.downloadableFileSchema)}}class sM{constructor(){me(this,"confirmBox",os.confirm);me(this,"promptBox",os.prompt)}confirm(t,a,s){return this.confirmBox(t,a,s)}ofDelete(t=null,a=null,s){return t===null&&(t=p("Are you sure you want to delete this?. This action is not recoverable")),a===null&&(a=p("Confirm Delete!")),s={confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),confirmButtonClass:"el-button--primary",type:"warning",...s??{}},this.confirm(t,a,s)}confirmWithInput(t,a,s){return this.promptBox(t,a,s)}confirmDeleteWithInput(t,a=null,s=null,n){a===null&&(a=p("Are you sure you want to delete this?. This action is not recoverable"));const l=p('You must type "%s" exactly to proceed',`<span >${t}</span>`);return a=`<label for=""><p>${a}</p>
        <p>${l}</p></label>`,s===null&&(s=p("Confirm Delete!")),n={confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),confirmButtonClass:"el-button--primary",inputPattern:new RegExp(`^${t}$`),inputErrorMessage:p("You must type %s exactly to proceed",t),dangerouslyUseHTMLString:!0,type:"warning",...n??{}},this.confirmWithInput(a,s,n)}}const CA=new sM;class nM extends aM{constructor(){super(...arguments);me(this,"data",{product:{},original_product:{},product_changes:{},validationErrors:{},excerptWordCount:0,maxExcerptWordCount:0,hasChange:!1,saving:!1,product_snapshot:{},savedVariationLength:0,productDownloadableModel:null,metaValue:null,hasChangeLongDescEditor:!1,reloader:()=>{},onProductUpdatedListener:{}});me(this,"router",Va());me(this,"addDummyVariant",()=>({post_id:this.product.detail.post_id,serial_index:this.variantsLength()+1,variation_title:"",item_price:"",compare_price:"",manage_cost:"yes",item_cost:"",profit:"--",profit_margin:"--",manage_stock:this.product.detail.manage_stock,stock_status:"in-stock",total_stock:1,on_hold:0,committed:0,available:1,fulfillment_type:this.product.detail.fulfillment_type,media:[],other_info:{description:"",payment_type:"onetime",times:"",repeat_interval:"yearly",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},downloadable:"true"}));me(this,"formatPricing",a=>{let s={};return a.forEach((n,l)=>{n.item_price=n.item_price?lt(n.item_price,!1):0,n.item_cost=n.item_cost?lt(n.item_cost,!1):0,n.compare_price=n.compare_price?lt(n.compare_price,!1):0,n.other_info.signup_fee=n.other_info.signup_fee?lt(n.other_info.signup_fee,!1):0,n.rowId=l,s[n.id]=n}),a});me(this,"onChangePricing",(a,s,n)=>{this.ensureVariationIndex(s),this.product.variants[s][a]=n,a==="item_price"&&this.onChangePricingPayment(this.product.variants[s],n,s),this.data.product_changes.detail||(this.data.product_changes.detail.id=this.product.detail.id),this.data.product_changes.variants[s][a]=n,this.data.product_changes.variants[s].id=this.product.variants[s].id,this.setHasChange(!0)});me(this,"updateLongDescEditorChange",a=>{this.setHasChangeLongDescEditor(!0),se.post(`products/${this.product.ID}/update-long-desc-editor-mode`,{active_editor:a??"wp-editor"}).then(s=>{Y.success(s.message)}).catch(s=>{s&&s.message&&Y.error(s)}).finally(()=>{this.setHasChangeLongDescEditor(!1)})});me(this,"onChangePricingPayment",(a,s,n)=>{var l;if(a.item_price!==""&&a.other_info.repeat_interval!==""){let d=parseInt(a.other_info.times)?p("for %s Times",(l=a==null?void 0:a.other_info)==null?void 0:l.times):p("Until Cancel");return this.data.product_changes.variants[n].billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${d}`,this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=`${a.item_price} ${a.other_info.repeat_interval} ${d}`}return this.data.product_changes.variants[n].billing_summary="",this.data.product_changes.variants[n].id=a.id,this.data.product_changes.detail.id=this.product.detail.id,a.other_info.billing_summary=""});me(this,"onUploadPricingMedia",(a,s,n)=>{this.product.variants[s][a]=[],this.product.variants[s][a]=[...this.product.variants[s][a],...n];const l=this.product.variants[s].id;se.post(`products/variants/${l}/setMedia`,{media:this.product.variants[s].media}).then(d=>{Y.success(d.message)}).catch(d=>{var u;d.status_code=="422"?Y.validationErrors(d):Y.error((u=d.data)==null?void 0:u.message)}).finally(()=>{})});me(this,"afterCreatingOrUpdatingPricing",(a,s)=>{s.created_at=s.created_at??new Date().toLocaleDateString()+""+new Date().toLocaleTimeString(),a!==void 0&a!=null?this.product.variants[a]=s:(s.rowId=this.variantsLength()>0?this.data.product.variants[this.variantsLength()-1].rowId+1:this.variantsLength(),this.data.product.variants.push(s),a=this.variantsLength()-1),this.data.productDownloadableModel.setDownloadableFiles(this.data.product.downloadable_files)});me(this,"createOrUpdatePricing",a=>{this.setSaving(!0),this.setValidationErrors({});let s="";return a.id!=null?s=se.post(`products/variants/${a.id}`,{variants:a}):s=se.post("products/variants",{variants:a}),s.then(n=>(Y.success(n.message),Object.values(this.data.onProductUpdatedListener).forEach(l=>{typeof l=="function"&&l(this.product)}),n)).catch(n=>{var l;n.status_code=="422"?(Y.validationErrors(n),this.setValidationErrors(n.data)):Y.error((l=n.data)==null?void 0:l.message)}).finally(()=>{this.setSaving(!1)})});me(this,"updatePricingValue",(a,s,n,l,d)=>{if(n.includes(".")&&(n=n.split(".").pop()),this.ensureVariationIndex(n),n!==void 0&&this.clearValidationError(`${n}.${a}`),l[a]=s,a==="item_price"&&this.onChangePricingPayment(l,s,n),a==="fulfillment_type"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.fulfillment_type=s,this.data.product_changes.variants[n].fulfillment_type=s),a==="item_cost"){const u=parseFloat(s);l.item_cost=isNaN(u)||u<0?0:u}parseFloat(l.item_cost)>parseFloat(l.item_price)&&(l.item_cost=0),this.data.product_changes.variants[n][a]=a==="item_cost"?l[a]:s,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id,this.product.detail.variation_type==="simple"&&(a==="fulfillment_type"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.fulfillment_type=s,this.data.product_changes.variants[n].fulfillment_type=s),this.product.variants[0]=l,this.setHasChange(!0))});me(this,"updatePricingOtherValue",(a,s,n=null,l,d="")=>{this.ensureVariationIndex(n),["payment_type","times","repeat_interval","manage_setup_fee","signup_fee_name","signup_fee","billing_summary","setup_fee_per_item","purchasable"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),l.other_info[a]=s,this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),this.data.product_changes.variants[n].other_info[a]=s,l.other_info.payment_type==="subscription"&&(a==="times"&&parseInt(s)<0&&(l.other_info.times=0),l.other_info.times=l.other_info.times??"",l.other_info.repeat_interval=l.other_info.repeat_interval??"",l.other_info.trial_days=l.other_info.trial_days??0,l.other_info.billing_summary=l.other_info.billing_summary??"",l.other_info.manage_setup_fee=l.other_info.manage_setup_fee??"no",l.other_info.signup_fee_name=l.other_info.signup_fee_name??"",l.other_info.signup_fee=l.other_info.signup_fee??"",l.other_info.setup_fee_per_item=l.other_info.setup_fee_per_item??"no"),this.data.product_changes.variants[n].other_info=l.other_info,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id,this.onChangePricingPayment(l,s,n)),["media"].includes(a)&&(l.media=[],l.media=[...l.media,...s],this.data.product_changes.variants[n].media=l.media,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),["description"].includes(a)&&(n!==void 0&&this.clearValidationError(`${n}.other_info.${a}`),this.data.product_changes.variants[n].other_info||(this.data.product_changes.variants[n].other_info={}),l.other_info[a]=s,this.data.product_changes.variants[n].other_info[a]=s,this.data.product_changes.variants[n].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),this.product.detail.variation_type==="simple"&&(this.product.variants[0]=l,this.data.product_changes.variants=[],this.data.product_changes.variants[0]=l,this.data.product_changes.variants[0].id=l.id,this.data.product_changes.detail.id=this.product.detail.id),d==="add"&&this.setHasChange(!0)});me(this,"afterDeletingPricing",a=>{this.product.variants.splice(a,1)});me(this,"deletePricing",(a,s)=>{CA.ofDelete(p("Are you sure, you want to delete this price?")).then(()=>{a!==void 0&&se.delete(`products/variants/${a}`).then(n=>{Y.success(n.message),this.afterDeletingPricing(s)}).catch(n=>{n.status_code=="422"?Y.validationErrors(n):Y.error(n==null?void 0:n.data)})}).catch(()=>{})});me(this,"getDownloadableHeaderClass",()=>{var s;const a=this.product.downloadable_files&&Array.isArray(this.product.downloadable_files)&&this.product.downloadable_files.length>0;return{"!border-0":((s=this.product.detail)==null?void 0:s.manage_downloadable)=="0"||!a}});me(this,"onChangeInventoryStatus",a=>{this.product.variants.filter(s=>s.manage_stock=a),this.setHasChange(!0)});me(this,"ensureVariationIndex",a=>{var s;(s=this.data.product_changes)!=null&&s.detail||(this.data.product_changes.detail={}),this.data.product_changes.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants[a]||(this.data.product_changes.variants[a]={})});me(this,"onChangeNewStock",(a,s,n)=>{this.product.variants[n]||(this.data.product_changes.variants=[]),this.ensureVariationIndex(n),s===""&&(this.product.variants[n].new_stock=0,this.data.product_changes.variants[n].new_stock=0);let l=this.product.variants[n].total_stock??0,d=this.product.variants[n].new_stock??0,u=parseInt(d.toString())-parseInt(l);this.product.variants[n].adjusted_quantity=u,this.data.product_changes.variants[n].adjusted_quantity=u,this.data.product_changes.variants[n].id=this.product.variants[n].id});me(this,"onChangeAdjustedQuantity",(a,s,n)=>{this.ensureVariationIndex(n),s===""&&(s=0);let l=this.product.variants[n].total_stock+parseInt(s);this.product.variants[n].new_stock=l<0?0:l});me(this,"onChangeInputField",(a,s,n=!0)=>{var l,d,u,c,h;if(a==="post_title"&&this.product.detail.variation_type==="simple"&&Array.isArray(this.product.variants)&&this.variantsLength()>0&&(this.product.variants[0].variation_title=s,(l=this.data.product_changes)!=null&&l.variants||(this.data.product_changes.variants=[]),this.ensureVariationIndex(0),this.data.product_changes.variants[0].variation_title=s,this.data.product_changes.variants[0].id=this.product.variants[0].id),a==="post_date"&&(this.product[a]=ke(s).format("YYYY-MM-DDTHH:mm:ssZ"),this.data.product_changes[a]=this.product[a]),a==="default_variation_id"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.product.detail||(this.product.detail={}),this.data.product_changes.detail.default_variation_id=s),a==="shipping_class"&&(this.data.product_changes.detail||(this.data.product_changes.detail={}),this.product.detail||(this.product.detail={}),(d=this.product.detail)!=null&&d.other_info||(this.product.detail.other_info={}),this.product.detail.other_info[a]=s,(u=this.data.product_changes.detail)!=null&&u.other_info||(this.data.product_changes.detail.other_info={}),this.data.product_changes.detail.other_info[a]=s,this.product.variants.forEach((v,y)=>{this.product.variants[y].shipping_class=s,this.ensureVariationIndex(y),this.data.product_changes.variants[y].shipping_class=s,this.data.product_changes.variants[y].id=v.id})),["tax_class","group_pricing_by","use_pricing_table","active_editor","sold_individually"].includes(a)&&(this.ensureVariationIndex(0),this.data.product_changes.detail||(this.data.product_changes.detail={}),(c=this.product.detail)!=null&&c.other_info||(this.product.detail.other_info={}),(h=this.data.product_changes.detail)!=null&&h.other_info||(this.data.product_changes.detail.other_info={}),this.product.detail.other_info[a]=s,this.data.product_changes.detail.other_info[a]=s,this.product.detail.variation_type==="simple"&&(this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes.variants[0].id=this.product.variants[0].id)),a==="post_excerpt"){this.product[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id,this.data.product_changes[a]=this.product[a];const v=s.trim();v.length===0?this.setExcerptWordCount(0):this.setExcerptWordCount(v.split(" ").length)}else this.product[a]=s,this.data.product_changes[a]=s,this.data.product_changes.detail||(this.data.product_changes.detail={}),this.data.product_changes.detail.id=this.product.detail.id;n&&this.setHasChange(!0)});me(this,"hasValidationError",a=>this.validationErrors&&this.validationErrors.hasOwnProperty(a));me(this,"clearValidationError",a=>{this.validationErrors&&this.validationErrors.hasOwnProperty(a)&&delete this.validationErrors[a]});me(this,"discard",()=>window.location.reload());me(this,"update",async(a=null)=>{var d,u,c,h,v;let s=this.data.product_changes;if(s={...this.product},s.metaValue=this.data.metaValue,this.data.product_changes.post_status||(this.data.product_changes.post_status=this.product.post_status),this.data.product_changes.post_title||(this.data.product_changes.post_title=this.product.post_title),this.data.product_changes.detail?((d=this.data.product_changes.detail)!=null&&d.fulfillment_type||(this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type),(u=this.data.product_changes.detail)!=null&&u.variation_type||(this.data.product_changes.detail.variation_type=this.product.detail.variation_type)):(this.data.product_changes.detail={},this.data.product_changes.detail.fulfillment_type=this.product.detail.fulfillment_type,this.data.product_changes.detail.variation_type=this.product.detail.variation_type),s=this.data.product_changes,s.metaValue=this.data.metaValue,this.setValidationErrors({}),this.setSaving(!0),((c=s.detail)==null?void 0:c.variation_type)==="simple"&&(s.variants||(s.variants=[]),(!Array.isArray(s.variants)||s.variants.length===0)&&(s.variants[0]={variation_title:s.post_title,item_price:"",post_id:s.ID})),delete s.taxonomies,delete s.product_terms,delete s.variantOptions,delete s.downloadable_files,((h=s.detail)==null?void 0:h.variation_type)!=="simple"&&s.variants){let y=[];s.variants.forEach(g=>{y.push({id:g.id,variation_title:g.variation_title,item_price:g.item_price,compare_price:g.compare_price,other_info:g.other_info,manage_stock:g.manage_stock,serial_index:g.serial_index,total_stock:g.total_stock,available:g.available,committed:g.committed,on_hold:g.on_hold,stock_status:g.stock_status,sold_individually:g.sold_individually})}),s.variants=y}((v=s.downloadable_files)==null?void 0:v.length)<1&&(s.variantOptions=[]);const n=se.post(`products/${this.product.ID}/pricing`,s);let l=document.querySelector(".fct-admin-product-info .badge");n.then(y=>{Y.success(a||y.message),this.setHasChange(!1),l.innerText=y.data.post_status,this.product.view_url=y.data.viewUrl,y.data.post_status==="publish"&&(l.classList.remove("warning"),l.classList.add("success")),y.data.post_status==="future"&&(l.innerText=p("Publishes on: %s",Ps(y.data.post_date,!0)),l.classList.remove("success"),l.classList.add("warning")),y.data.post_status==="draft"?(l.classList.remove("success"),l.classList.add("info")):(l.classList.remove("info"),l.classList.add("success")),this.product.detail.variation_type==="simple"&&Array.isArray(y.data.variants)&&y.data.variants.length>0&&(this.product.variants[0].id=y.data.variants[0].id,this.product.variants[0].created_at=y.data.variants[0].created_at),this.product.variants=this.product.variants.filter((g,B,w)=>B===w.findIndex(C=>C.id===g.id)),this.data.product_changes={},Object.values(this.data.onProductUpdatedListener).forEach(g=>{typeof g=="function"&&g(this.product)})}).catch(y=>{var g;console.log(y),y.status_code.toString()==="422"?(Y.validationErrors(y),this.setValidationErrors(y)):Y.error((g=y.data)==null?void 0:g.message)}).finally(async()=>{this.setSaving(!1)})});me(this,"delete",()=>{Kt(p("Are you sure you want to delete this product?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.setHasChange(!1),se.delete(`products/${this.product.ID}`).then(a=>{Y.success(a.message),this.router.push({name:"products"})}).catch(a=>{var s;a.status_code=="422"?Y.validationErrors(a):Y.error((s=a.data)==null?void 0:s.message)})}).catch(()=>{})});me(this,"updateVariationType",(a,s)=>{var d,u;this.product.detail[a]=s;let n={variation_type:s,variation_ids:[(u=(d=this.product)==null?void 0:d.variants[0])==null?void 0:u.id],action:"change_variation_type"};se.post(`products/detail/${this.product.detail.id}`,n).then(c=>{Y.info(c.message),a==="variation_type"&&s==="simple"&&(this.product.variants=this.product.variants.slice(0,1),this.variantsLength()>0&&(this.product.variants[0].manage_stock=this.product.detail.manage_stock))}).catch(c=>{var h;c.status_code=="422"?Y.validationErrors(c):Y.error((h=c.data)==null?void 0:h.message)}).finally(()=>{})});me(this,"getMaxExcerptWordCount",()=>{se.get("products/get-max-excerpt-word-count").then(a=>{this.setMaxExcerptWordCount(a.count)}).catch(a=>{})});me(this,"shouldShowShippingMethodAlert",()=>De.get("available_shipping_method_count").toString()!=="0"?!1:this.hasPhysicalVariation());me(this,"hasDigitalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="digital"));me(this,"isAllDigitalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="digital"));me(this,"hasPhysicalVariation",()=>this.product.variants.some(a=>a.fulfillment_type==="physical"));me(this,"isTaxEnabled",()=>De.get("is_tax_enabled"));me(this,"isAllPhysicalVariation",()=>this.product.variants.every(a=>a.fulfillment_type==="physical"));me(this,"isBundleProduct",()=>ve.get(this.data.product,"detail.other_info.is_bundle_product")==="yes")}addOnProductUpdatedListener(a,s){this.data.onProductUpdatedListener[a]=s}addOnProductUpdatedListener(a,s){this.data.onProductUpdatedListener[a]=s}setProductDownloadableModel(a){this.data.productDownloadableModel=a}setReloader(a){this.data.reloader=a}saveSnapshot(){this.data.product_snapshot=this.data.product}restoreSnapshot(){this.data.product_snapshot=this.data.product}get product(){return this.data.product}get validationErrors(){return this.data.validationErrors}get excerptWordCount(){return this.data.excerptWordCount}get maxExcerptWordCount(){return this.data.maxExcerptWordCount}get hasChange(){return this.data.hasChange}get hasChangeLongDescEditor(){return this.data.hasChangeLongDescEditor}get saving(){return this.data.saving}beforeInit(){this.data.product={ID:"",post_title:"",post_name:"",post_content:"",post_excerpt:"",post_status:"publish",post_date:new Date,comment_status:"close",variants:!1},this.vueInstance=Je().ctx}setProduct(a){let s=document.querySelector(".fct-admin-product-info .badge");a.post_status==="future"&&(s.innerText=p("Publishes on: %s",Ps(a.post_date,!0)),s.classList.add("warning")),this.data.product=a,this.data.original_product={...a}}setValidationErrors(a){this.data.validationErrors=a}setExcerptWordCount(a){this.data.excerptWordCount=a}setMaxExcerptWordCount(a){this.data.maxExcerptWordCount=a}setHasChange(a){this.data.hasChange=a}setHasChangeLongDescEditor(a){this.data.hasChangeLongDescEditor=a}setSaving(a){this.data.saving=a}isInDraft(){return this.product.post_status==="draft"}viewUrl(){return this.product.view_url??""}variantsLength(){return this.product.variants.length??0}updateVariantSerialIndexes(a){var s;a.forEach((n,l)=>{n.serial_index=l+1}),(s=this.data.product_changes)!=null&&s.variants||(this.data.product_changes.variants=[]),this.data.product_changes.variants=a.map(n=>({id:n.id,serial_index:n.serial_index})),this.setHasChange(!0)}addDummyDownloadableFile(){super.addDummyDownloadableFiles(this.product),this.setHasChange(!0)}updateMedia(a,s){this.product[a]=s,this.data.product_changes[a]=s,this.setHasChange(!0)}shippingSettingsUrl(){return De.get("admin_url")+"settings/shipping"}}function oM(){return nM.init()}function lM(){he(()=>{document.addEventListener("keydown",t)}),Ss(()=>{document.removeEventListener("keydown",t)});let e;function t(s){(s.ctrlKey||s.metaKey)&&s.shiftKey&&s.keyCode===83&&(s.preventDefault(),typeof e=="function"&&e())}function a(s){e=s}return{onSave:a}}const rM={id:"gt",class:"fct-custom-gutenberg-editor-wrap w-full",style:{height:"400px",position:"relative"}},iM={key:0,class:"iframe-loader"},AM=["src"],dM={class:"iframe-controls"},uM={class:"dialog-header"},cM={id:"gt",class:"fct-custom-gutenberg-editor-wrap",style:{position:"relative"}},pM={key:0,class:"iframe-loader"},fM=["src"],hM={__name:"GutenbergEditor",props:{post_id:{required:!0},product:{type:Object},reload:Function,productEditModel:Object},setup(e){const t=e,a=T(!1),s=T(!0),n=T(!0),l=T(),d=T(null),u=T(null);oa();const c=()=>{const F=window.location.origin;l.value=F+"/wp-admin"},h=()=>{setTimeout(()=>{s.value=!1},500)},v=()=>{n.value=!1,setTimeout(()=>{},500)},y=()=>{a.value=!0,n.value=!0},g=()=>{n.value=!1,a.value=!1,t.productEditModel.data.reloader()},B=()=>{s.value=!0,d.value&&(d.value.src=d.value.src.toString())},w=()=>{n.value=!0,u.value&&(u.value.src=u.value.src.toString())},C=F=>{const{type:S,content:E}=F.data;S==="gutenbergContentChanged"&&B()};return he(()=>{c(),window.addEventListener("message",C)}),(F,S)=>{const E=b("el-icon"),k=b("el-button"),Q=b("el-breadcrumb-item"),I=b("el-breadcrumb"),D=b("el-dialog");return A(),_(H,null,[i("div",rM,[S[2]||(S[2]=i("div",{class:"fct-custom-gutenberg-editor-wrap-overlay"},null,-1)),s.value?(A(),_("div",iM,[i("span",null,[O(m(f(p)("Loading preview..."))+" ",1),o(E,{class:"is-loading"},{default:r(()=>[o(f(il))]),_:1})])])):x("",!0),i("iframe",{ref_key:"previewIframeRef",ref:d,class:"scrollbar-none preview-iframe",src:`${l.value}/post.php?post=${e.post_id}&action=edit&custom-editor=true&is-preview-mode=true`,width:"100%",height:"400px",onLoad:h,style:sa({visibility:s.value?"hidden":"visible"})},null,44,AM)]),i("div",dM,[o(k,{onClick:y},{default:r(()=>[O(m(f(p)("Show Content Editor")),1)]),_:1})]),o(D,{"append-to-body":!0,"show-close":!1,"modal-class":"fct-custom-gutenberg-editor-dialog",width:"800px",modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=M=>a.value=M),onClose:g,onOpen:S[1]||(S[1]=()=>{w()})},{header:r(()=>[i("div",uM,[o(I,{separator:"/"},{default:r(()=>[o(Q,null,{default:r(()=>[i("span",{class:"fct-custom-gutenberg-editor-product-title",onClick:g},m(e.product.post_title),1)]),_:1}),o(Q,null,{default:r(()=>S[3]||(S[3]=[O("Editor",-1)])),_:1,__:[3]})]),_:1}),n.value?x("",!0):(A(),U(k,{key:0,class:"fct-custom-gutenberg-editor-close-btn",onClick:g},{default:r(()=>[o(z,{name:"Cross"}),O(" "+m(f(p)("Close")),1)]),_:1}))])]),default:r(()=>[i("div",cM,[n.value?(A(),_("div",pM,[i("span",null,[O(m(f(p)("Loading editor..."))+" ",1),o(E,{class:"is-loading"},{default:r(()=>[o(f(il))]),_:1})])])):x("",!0),i("iframe",{ref_key:"dialogIframeRef",ref:u,class:"dialog-iframe",src:`${l.value}/post.php?post=${e.post_id}&action=edit&custom-editor=true`,width:"100%",height:"700px",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-top-navigation",onLoad:v,style:sa({visibility:n.value?"hidden":"visible"})},null,44,fM)])]),_:1},8,["modelValue"])],64)}}},mM={class:"fct-product-info-wrap"},_M={class:"fct-admin-input-wrapper"},gM={class:"fct-admin-input-wrapper"},vM={class:"form-note"},yM={class:"mt-[7px]"},bM={class:"editor-tabs-nav"},wM={class:"fct-custom-long-desc-wrap fct-admin-input-wrapper"},CM={class:"custom-wp-editor-wrapper relative"},BM={class:"relative rounded overflow-hidden"},kM={class:"editor-tab-content"},FM={class:"editor-tab-content"},xM={__name:"ProductInfo",props:{product:Object,productEditModel:Object,reload:Function},setup(e){const t=e,a=T(!1),s=T("wp-editor");T("#gt"),oa();const n=T(),l=d=>{t.productEditModel.updateLongDescEditorChange(d),s.value=d};return he(()=>{var d,u,c,h,v,y;a.value=!0,t.productEditModel.getMaxExcerptWordCount(),((d=t.product)==null?void 0:d.post_excerpt)!==void 0&&((u=t.product)==null?void 0:u.post_excerpt.toString().length)>0&&t.productEditModel.setExcerptWordCount((c=t.product)==null?void 0:c.post_excerpt.toString().split(" ").length),(y=(v=(h=t.product)==null?void 0:h.detail)==null?void 0:v.other_info)!=null&&y.active_editor&&(s.value=t.product.detail.other_info.active_editor)}),(d,u)=>{const c=b("el-input"),h=b("el-form-item"),v=b("el-form"),y=Qt("loading");return A(),_("div",mM,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(v,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[i("div",_M,[o(h,{label:f(p)("Title"),required:""},{default:r(()=>[o(c,{class:oe(e.productEditModel.hasValidationError("post_title")?"is-error":""),id:"post_title",placeholder:f(p)("Title"),type:"text",modelValue:e.product.post_title,"onUpdate:modelValue":u[0]||(u[0]=g=>e.product.post_title=g),onInput:u[1]||(u[1]=g=>{e.productEditModel.onChangeInputField("post_title",g)}),onFocus:u[2]||(u[2]=g=>e.productEditModel.clearValidationError("post_title"))},null,8,["class","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":"post_title"},null,8,["validation-errors"])]),_:1},8,["label"])]),i("div",gM,[o(h,{label:f(p)("Short description")},{default:r(()=>[o(c,{onInput:u[3]||(u[3]=g=>{e.productEditModel.onChangeInputField("post_excerpt",g)}),modelValue:e.product.post_excerpt,"onUpdate:modelValue":u[4]||(u[4]=g=>e.product.post_excerpt=g),rows:2,type:"textarea",onFocus:u[5]||(u[5]=g=>e.productEditModel.clearValidationError("post_excerpt"))},null,8,["modelValue"]),i("div",null,[i("div",vM,[i("p",yM,m(f(p)("%1$s Words of %2$s",f(p)(e.productEditModel.data.excerptWordCount),f(p)(e.productEditModel.maxExcerptWordCount))),1)]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":"post_excerpt"},null,8,["validation-errors"])])]),_:1},8,["label"])])]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Long Description")},{action:r(()=>[pt((A(),_("div",bM,[o(Oi,null,{default:r(()=>[o(ll,{label:f(p)("Classic Editor"),class:oe(s.value==="wp-editor"?"active":""),onClick:u[6]||(u[6]=g=>l("wp-editor"))},null,8,["label","class"]),o(ll,{label:f(p)("Builder"),class:oe(s.value==="gutenberg"?"active":""),onClick:u[7]||(u[7]=g=>l("gutenberg"))},null,8,["label","class"])]),_:1})])),[[y,e.productEditModel.hasChangeLongDescEditor]])]),_:1},8,["title"]),o(le,null,{default:r(()=>[o(v,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[i("div",wM,[o(h,null,{default:r(()=>[i("div",CM,[i("div",BM,[pt(i("div",kM,[o(xs,{ref_key:"wpEditor",ref:n,modelValue:e.product.post_content,onUpdate:u[8]||(u[8]=g=>{e.productEditModel.onChangeInputField("post_content",g)})},null,8,["modelValue"])],512),[[zr,s.value==="wp-editor"]]),pt(i("div",FM,[o(hM,{post_id:e.product.ID,product:e.product,reload:e.reload,productEditModel:e.productEditModel},null,8,["post_id","product","reload","productEditModel"])],512),[[zr,s.value==="gutenberg"]])])])]),_:1})])]),_:1})]),_:1})]),_:1})])}}},UM={class:"fct-product-pricing-form-wrap"},SM={key:0,class:"fct-admin-input-wrapper"},EM={class:"fct-select-payment-type-block"},QM={class:"payment-type-block-head"},DM={class:"title"},IM={class:"text"},$M={key:0,class:"fct-product-variation-select"},TM={class:"payment-type-block-body"},MM={class:"fct-admin-input-wrapper"},VM=["innerHTML"],LM={key:0},OM={class:"fct-admin-input-wrapper"},HM=["innerHTML"],RM={class:"fct-admin-input-wrapper"},PM=["innerHTML"],KM={key:0,class:"fct-admin-input-wrapper"},NM=["innerHTML"],GM={class:"fct-admin-input-wrapper"},zM={key:0},jM={class:"fct-admin-input-wrapper"},YM={class:"fct-admin-input-wrapper"},qM=["innerHTML"],WM={class:"fct-admin-input-wrapper"},XM={class:"fct-admin-input-wrapper"},JM=["innerHTML"],ZM={class:"fct-admin-input-wrapper"},e6={class:"fct-admin-input-wrapper"},t6={class:"fct-admin-input-wrapper"},a6={class:"fct-admin-input-wrapper"},s6={key:0,class:"dialog-footer"},Ep={__name:"ProductPricingForm",props:{modeType:String,index:Number,fieldKey:String,product:Object,productEditModel:Object},emits:["createOrUpdateVariant","closeModal"],setup(e,{emit:t}){const a=e,s=T({}),n=T(),l=t,d=Ao(),u=T(0),c=T(0),h=E=>{a.productEditModel.updatePricingOtherValue("manage_setup_fee",E,a.fieldKey,s.value,a.modeType),E==="no"?(c.value=Number(s.value.other_info.signup_fee),a.productEditModel.updatePricingOtherValue("signup_fee","0",a.fieldKey,s.value,a.modeType)):a.productEditModel.updatePricingOtherValue("signup_fee",c.value,a.fieldKey,s.value,a.modeType)},v=q(()=>De.get("fulfillment_types")??{}),y=q(()=>{var E;return((E=window.fluentCartAdminApp)==null?void 0:E.subscription_intervals)??[]}),g=T(),B=(E,k,Q,I)=>{a.productEditModel.updatePricingOtherValue(E,k,Q,I,a.modeType)};let w=a.product.variants.length>0;he(()=>{setTimeout(()=>{var E,k,Q,I;if(((E=a.product.detail)==null?void 0:E.variation_type)==="simple")Array.isArray(a.product.variants)&&a.product.variants.length===0?(s.value=a.productEditModel.addDummyVariant(),((k=a.product.detail)==null?void 0:k.variation_type)==="simple"&&(s.value.variation_title=a.product.post_title)):s.value=a.product.variants[0];else if(a.modeType==="create")s.value=a.productEditModel.addDummyVariant();else if(a.modeType==="update"){const D=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(D)}else if(a.modeType==="duplicate"){const D=JSON.stringify(a.product.variants[a.index]);s.value=JSON.parse(D),s.value.serial_index=a.productEditModel.variantsLength()+1,delete s.value.id}g.value=s.value.item_price*(((I=(Q=s==null?void 0:s.value)==null?void 0:Q.other_info)==null?void 0:I.times)??1)},100)});const C=()=>{var E,k,Q;return((E=s==null?void 0:s.value)==null?void 0:E.other_info)&&["subscription"].includes((Q=(k=s==null?void 0:s.value)==null?void 0:k.other_info)==null?void 0:Q.payment_type)},F=async(E,k)=>{try{a.modeType==="duplicate"&&(k=a.productEditModel.variantsLength(),E.rowId=E.rowId+1);let Q=await a.productEditModel.createOrUpdatePricing(E);E.id=Q.data.id,a.productEditModel.afterCreatingOrUpdatingPricing(k,E),l("createOrUpdateVariant"),u.value=0}catch(Q){console.log(Q),u.value=0}},S=De.get("app_config.isProActive");return fe(s,()=>{u.value++},{deep:!0}),d.bind(["mod+s"],E=>{E.preventDefault(),u.value&&F(s.value,a.index)}),(E,k)=>{const Q=b("el-input"),I=b("el-form-item"),D=b("el-col"),M=b("el-option"),$=b("el-select"),V=b("el-row"),L=b("el-button"),R=b("el-dropdown-item"),K=b("el-dropdown-menu"),J=b("el-dropdown"),W=b("el-checkbox"),ae=b("el-tooltip"),Z=b("el-switch"),te=b("el-form");return A(),_("div",UM,[o(te,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>{var ie,P,j;return[((ie=e.product.detail)==null?void 0:ie.variation_type)==="simple_variations"?(A(),_("div",SM,[o(V,{gutter:15},{default:r(()=>[o(D,{lg:10},{default:r(()=>[o(I,{required:"",class:"has-tooltip-and-required"},{default:r(()=>[o(Ge,{title:f(p)("Title"),placement:"bottom",content:f(p)("Name this pricing variant (e.g., size, type, color) for clear customer selection."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.variation_title`)?"is-error":""),id:`${a.fieldKey}.variation_title`,placeholder:f(p)("e.g. Small, Medium, Large"),type:"text",modelValue:s.value.variation_title,"onUpdate:modelValue":k[0]||(k[0]=G=>s.value.variation_title=G),onInput:k[1]||(k[1]=G=>{e.productEditModel.updatePricingValue("variation_title",G,a.fieldKey,s.value,e.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.variation_title`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(D,{lg:6},{default:r(()=>[o(I,null,{default:r(()=>[o(Ge,{title:f(p)("SKU"),placement:"bottom",content:f(p)("Stock Keeping Unit")},null,8,["title","content"]),o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.sku`)?"is-error":""),id:`${a.fieldKey}.sku`,placeholder:f(p)("SKU"),type:"text",modelValue:s.value.sku,"onUpdate:modelValue":k[2]||(k[2]=G=>s.value.sku=G),maxlength:"30","show-word-limit":"",onInput:k[3]||(k[3]=G=>{e.productEditModel.updatePricingValue("sku",G,a.fieldKey,s.value,e.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.sku`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(D,{lg:8},{default:r(()=>[o(I,{required:"",class:"has-tooltip-and-required"},{default:r(()=>[o(Ge,{title:f(p)("Fulfillment Type"),placement:"bottom",content:f(p)("Choosing the Type will impact your order status change flow upon successful payment. For physical items, the status changes from On-Hold to Processing, while for digital items, it changes from On-Hold to Completed."),style:{"margin-bottom":"8px"}},null,8,["title","content"]),o($,{modelValue:s.value.fulfillment_type,"onUpdate:modelValue":k[4]||(k[4]=G=>s.value.fulfillment_type=G),placeholder:f(p)("Select")},{default:r(()=>[(A(!0),_(H,null,X(v.value,(G,N)=>(A(),U(M,{label:G,value:N},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})])):x("",!0),i("div",EM,[i("div",QM,[i("div",null,[i("h4",DM,m(f(p)("Select Payment Term")),1),i("p",IM,m(f(p)("Select your referenced Payment.")),1)]),(P=s.value)!=null&&P.other_info?(A(),_("div",$M,[o(J,{trigger:"click",onCommand:k[5]||(k[5]=G=>{e.productEditModel.updatePricingOtherValue("payment_type",G,null,s.value,e.modeType),s.value.other_info.repeat_interval="",G=="subscription"&&de(()=>{s.value.other_info.repeat_interval="yearly",s.value.other_info.times==""&&n.value.focus()})}),"popper-class":"fct-dropdown"},{dropdown:r(()=>[o(K,null,{default:r(()=>[o(R,{command:"onetime",class:oe({active:s.value.other_info.payment_type==="onetime"})},{default:r(()=>[O(m(f(p)("One Time")),1)]),_:1},8,["class"]),o(R,{command:"subscription",class:oe({active:s.value.other_info.payment_type==="subscription"})},{default:r(()=>[O(m(f(p)("Subscription")),1)]),_:1},8,["class"])]),_:1})]),default:r(()=>[o(L,{plain:"",size:"small"},{default:r(()=>[O(m(s.value.other_info.payment_type==="onetime"?f(p)("One Time"):f(p)("Subscription"))+" ",1),o(z,{name:"ChevronDown"})]),_:1})]),_:1})])):x("",!0)]),i("div",TM,[o(V,{gutter:15},{default:r(()=>{var G;return[o(D,{lg:12},{default:r(()=>{var N,ee;return[i("div",MM,[o(I,{label:((ee=(N=s.value)==null?void 0:N.other_info)==null?void 0:ee.installment)==="yes"?f(p)("Installment Price"):f(p)("Price"),required:""},{default:r(()=>{var ne,Ce;return[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.item_price`)?"is-error":""),id:`${a.fieldKey}.item_price`,placeholder:((Ce=(ne=s.value)==null?void 0:ne.other_info)==null?void 0:Ce.installment)==="yes"?f(p)("Installment Price"):f(p)("Price"),min:1,modelValue:s.value.item_price,"onUpdate:modelValue":k[6]||(k[6]=Qe=>s.value.item_price=Qe),modelModifiers:{number:!0},onInput:k[7]||(k[7]=Qe=>{e.productEditModel.updatePricingValue("item_price",Qe,a.fieldKey,s.value,e.modeType),g.value=Qe*(s.value.other_info.times??1)})},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,VM)]),suffix:r(()=>{var Qe,_e,Ie,xe;return[((_e=(Qe=s.value)==null?void 0:Qe.other_info)==null?void 0:_e.installment)==="yes"?(A(),_("span",LM,"x "+m((xe=(Ie=s.value)==null?void 0:Ie.other_info)==null?void 0:xe.times),1)):x("",!0)]}),_:1},8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_price`},null,8,["validation-errors","field-key"])]}),_:1},8,["label"])])]}),_:1}),o(D,{lg:12},{default:r(()=>[i("div",OM,[o(I,null,{label:r(()=>[o(Ge,{title:f(p)("Compare at price"),content:f(p)("Set a higher price to show with a strike-through, highlighting a discount for sales")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.compare_price`)?"is-error":""),id:`${a.fieldKey}.compare_price`,placeholder:f(p)("Compare at price"),min:0,modelValue:s.value.compare_price,"onUpdate:modelValue":k[8]||(k[8]=N=>s.value.compare_price=N),onInput:k[9]||(k[9]=N=>{e.productEditModel.updatePricingValue("compare_price",N,a.fieldKey,s.value,e.modeType)})},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,HM)]),_:1},8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.compare_price`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),C()?(A(),_(H,{key:0},[o(D,{lg:12},{default:r(()=>[i("div",RM,[o(I,{label:f(p)("Interval"),required:""},{default:r(()=>[o($,{class:oe(["fct-repeat-payment-every-select",e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.repeat_interval`)?"is-error":""]),id:`${a.fieldKey}.other_info.repeat_interval`,modelValue:s.value.other_info.repeat_interval,"onUpdate:modelValue":k[10]||(k[10]=N=>s.value.other_info.repeat_interval=N),placeholder:f(p)("Interval"),onChange:k[11]||(k[11]=N=>{e.productEditModel.updatePricingOtherValue("repeat_interval",N,a.fieldKey,s.value,e.modeType)})},{default:r(()=>[(A(!0),_(H,null,X(y.value,N=>(A(),U(M,{key:N.value,label:N.label,value:N.value},null,8,["label","value"]))),128))]),_:1},8,["class","id","modelValue","placeholder"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.repeat_interval`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])])]),_:1}),o(D,{lg:12},{default:r(()=>[o(I,{class:"has-tooltip"},{label:r(()=>[o(Ge,{title:f(p)("Trial Days"),content:f(p)("Enter the number of days the free trial will last. The trial period cannot exceed 365 days.")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.trial_days`)?"is-error":""),id:`${a.fieldKey}.other_info.trial_days`,placeholder:f(p)("Trial Days"),type:"number",min:1,max:365,modelValue:s.value.other_info.trial_days,"onUpdate:modelValue":k[12]||(k[12]=N=>s.value.other_info.trial_days=N),modelModifiers:{number:!0},autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n,onInput:k[13]||(k[13]=N=>{e.productEditModel.updatePricingOtherValue("trial_days",N,a.fieldKey,s.value,e.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.trial_days`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(D,{lg:24},{default:r(()=>[o(I,null,{default:r(()=>[o(W,{"true-value":"yes","false-value":"no",label:f(p)("Enable installment payment"),class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.installment`)?"is-error":""),id:`${a.fieldKey}.other_info.installment`,placeholder:f(p)("Occurrence"),type:"number",modelValue:s.value.other_info.installment,"onUpdate:modelValue":k[14]||(k[14]=N=>s.value.other_info.installment=N),modelModifiers:{number:!0},disabled:!f(S),onChange:k[15]||(k[15]=N=>{if(B("installment",N,a.fieldKey,s.value),N==="no"){B("times",0,a.fieldKey,s.value);return}s.value.other_info.times?g.value=s.value.item_price*s.value.other_info.times:(B("times",1,a.fieldKey,s.value),g.value=s.value.item_price)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["label","class","id","placeholder","modelValue","disabled"]),f(S)?x("",!0):(A(),U(ae,{key:0,"popper-class":"fct-tooltip"},{content:r(()=>[O(m(f(p)("This feature is available in pro version only.")),1)]),default:r(()=>[o(z,{name:"Crown",class:"fct-pro-icon",style:{"margin-left":"5px"}})]),_:1})),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(na,{visible:((G=s.value.other_info)==null?void 0:G.installment)==="yes",accordion:""},{default:r(()=>[o(V,{gutter:12},{default:r(()=>{var N;return[o(D,{lg:12},{default:r(()=>[o(I,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ge,{title:f(p)("Installment Count"),content:f(p)("Number of payments to split the price over the installment period.")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,placeholder:f(p)("Installment Count"),type:"number",min:1,modelValue:s.value.other_info.times,"onUpdate:modelValue":k[16]||(k[16]=ee=>s.value.other_info.times=ee),modelModifiers:{number:!0},onInput:k[17]||(k[17]=ee=>{B("times",ee,a.fieldKey,s.value),g.value=s.value.item_price*(s.value.other_info.times??1)}),autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),((N=s.value.other_info)==null?void 0:N.installment)==="yes"?(A(),U(D,{key:0,lg:12},{default:r(()=>[o(I,null,{label:r(()=>[o(Ge,{title:f(p)("Total Price"),content:f(p)("Final price after all installments, excluding any fees.")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.times`)?"is-error":""),id:`${a.fieldKey}.other_info.times`,type:"number",min:1,disabled:"",modelValue:g.value,"onUpdate:modelValue":k[18]||(k[18]=ee=>g.value=ee),onInput:B,autofocus:"",ref_key:"inputSubscriptionTimesRef",ref:n},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,PM)]),_:1},8,["class","id","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.times`},null,8,["validation-errors","field-key"])]),_:1})]),_:1})):x("",!0)]}),_:1})]),_:1},8,["visible"])],64)):x("",!0)]}),_:1})])]),o(V,{gutter:15,style:{display:"none"}},{default:r(()=>[o(D,{lg:16},{default:r(()=>[s.value&&s.value.other_info?(A(),_("div",KM,[o(I,{label:f(p)("Billing summary")},{default:r(()=>[o(Q,{type:"text",modelValue:s.value.other_info.billing_summary,"onUpdate:modelValue":k[19]||(k[19]=G=>s.value.other_info.billing_summary=G),onInput:k[20]||(k[20]=G=>{e.productEditModel.updatePricingOtherValue("billing_summary",G,a.fieldKey,s.value,e.modeType)}),disabled:!0},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,NM)]),_:1},8,["modelValue"])]),_:1},8,["label"])])):x("",!0)]),_:1})]),_:1}),C()?(A(),U(V,{key:1,gutter:15},{default:r(()=>{var G,N;return[o(D,{lg:24},{default:r(()=>[i("div",GM,[o(I,null,{default:r(()=>[o(Z,{disabled:!f(S),modelValue:s.value.other_info.manage_setup_fee,"onUpdate:modelValue":k[21]||(k[21]=ee=>s.value.other_info.manage_setup_fee=ee),"active-value":"yes","inactive-value":"no",onChange:h,"active-text":f(p)("Setup fee")},null,8,["disabled","modelValue","active-text"]),f(S)?x("",!0):(A(),_("span",zM,[o(ae,{"popper-class":"fct-tooltip"},{content:r(()=>[O(m(f(p)("This feature is available in pro version only.")),1)]),default:r(()=>[o(z,{name:"Crown",class:"fct-pro-icon",style:{"margin-left":"5px"}})]),_:1})]))]),_:1})])]),_:1}),o(na,{visible:((N=(G=s.value)==null?void 0:G.other_info)==null?void 0:N.manage_setup_fee)=="yes",accordion:""},{default:r(()=>[o(V,{gutter:15,class:"fct-setup-fee-wrap px-[7.5px]"},{default:r(()=>[o(D,{lg:12},{default:r(()=>[i("div",jM,[o(I,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ge,{title:f(p)("Setup fee label"),content:f(p)("Name the one-time setup fee (e.g., Initial Setup)")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee_name`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee_name`,placeholder:f(p)("Setup fee name"),type:"text",modelValue:s.value.other_info.signup_fee_name,"onUpdate:modelValue":k[22]||(k[22]=ee=>s.value.other_info.signup_fee_name=ee),onInput:k[23]||(k[23]=ee=>{e.productEditModel.updatePricingOtherValue("signup_fee_name",ee,a.fieldKey,s.value,e.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee_name`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1}),o(D,{lg:12},{default:r(()=>[i("div",YM,[o(I,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ge,{title:f(p)("Setup fee amount"),content:f(p)("Set the one-time setup fee amount (e.g., $50) per order. This fee does not apply to quantity.")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.other_info.signup_fee`)?"is-error":""),id:`${a.fieldKey}.other_info.signup_fee`,placeholder:f(p)("Setup fee amount"),modelValue:s.value.other_info.signup_fee,"onUpdate:modelValue":k[24]||(k[24]=ee=>s.value.other_info.signup_fee=ee),modelModifiers:{number:!0},min:1,onInput:k[25]||(k[25]=ee=>{e.productEditModel.updatePricingOtherValue("signup_fee",ee,a.fieldKey,s.value,e.modeType)})},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,qM)]),_:1},8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.signup_fee`},null,8,["validation-errors","field-key"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.other_info.setup_fee_per_item`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])]}),_:1})):x("",!0),o(V,{gutter:15},{default:r(()=>{var G;return[s.value.manage_cost?(A(),U(D,{key:0,lg:24},{default:r(()=>[i("div",WM,[o(I,null,{default:r(()=>[o(Z,{modelValue:s.value.manage_cost,"onUpdate:modelValue":k[26]||(k[26]=N=>s.value.manage_cost=N),"active-value":"true","inactive-value":"false",onChange:k[27]||(k[27]=N=>{f(w)&&e.productEditModel.updatePricingOtherValue("manage_cost",N,a.fieldKey,s.value,e.modeType),uf(w)?w.value=!0:w=!0}),"active-text":f(p)("Calculate profit/cost")},null,8,["modelValue","active-text"])]),_:1})])]),_:1})):x("",!0),o(na,{visible:s.value.manage_cost==="true",accordion:""},{default:r(()=>[o(V,{gutter:15,class:"fct-cost-profit-wrap px-[7.5px]"},{default:r(()=>{var N,ee,ne;return[o(D,{lg:((N=e.product.detail)==null?void 0:N.variation_type)==="simple_variations"?12:8},{default:r(()=>[i("div",XM,[o(I,null,{label:r(()=>[o(Ge,{title:f(p)("Cost per item"),content:f(p)("Customers won't see this")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.item_cost`)?"is-error":""),id:`${a.fieldKey}.item_cost`,placeholder:f(p)("Cost per item"),min:0,modelValue:s.value.item_cost,"onUpdate:modelValue":k[28]||(k[28]=Ce=>s.value.item_cost=Ce),onChange:k[29]||(k[29]=Ce=>{e.productEditModel.updatePricingValue("item_cost",Ce,a.fieldKey,s.value,e.modeType)})},{prefix:r(()=>[i("span",{innerHTML:E.appVars.shop.currency_sign},null,8,JM)]),_:1},8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.item_cost`},null,8,["validation-errors","field-key"])]),_:1})])]),_:1},8,["lg"]),o(D,{lg:((ee=e.product.detail)==null?void 0:ee.variation_type)==="simple_variations"?6:8},{default:r(()=>[i("div",ZM,[o(I,{label:f(p)("Profit")},{default:r(()=>[o(Q,{disabled:"",placeholder:f(Cf)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"]),o(D,{lg:((ne=e.product.detail)==null?void 0:ne.variation_type)==="simple_variations"?6:8},{default:r(()=>[i("div",e6,[o(I,{label:f(p)("Margin")},{default:r(()=>[o(Q,{disabled:"",placeholder:f(Bf)(s.value)},null,8,["placeholder"])]),_:1},8,["label"])])]),_:1},8,["lg"])]}),_:1})]),_:1},8,["visible"]),o(D,{lg:24},{default:r(()=>[i("div",t6,[(s.value.other_info,x("",!0))])]),_:1}),((G=e.product.detail)==null?void 0:G.variation_type)==="simple_variations"?(A(),U(D,{key:1,lg:24},{default:r(()=>[i("div",a6,[o(I,{label:f(p)("Image")},{default:r(()=>[o(yl,{multiple:!0,attachments:s.value.media,onMediaUploaded:k[32]||(k[32]=N=>{e.productEditModel.updatePricingOtherValue("media",N,a.fieldKey,s.value,e.modeType)}),onRemoveImage:k[33]||(k[33]=N=>{s.value.media.splice(N,1),e.modeType==="add"&&e.productEditModel.setHasChange()})},null,8,["attachments"])]),_:1},8,["label"])])]),_:1})):x("",!0)]}),_:1}),((j=e.product.detail)==null?void 0:j.variation_type)==="simple"?(A(),U(V,{key:2,gutter:10},{default:r(()=>[o(D,{lg:12},{default:r(()=>[o(I,null,{label:r(()=>[o(Ge,{title:f(p)("SKU"),placement:"bottom",content:f(p)("Stock Keeping Unit")},null,8,["title","content"])]),default:r(()=>[o(Q,{class:oe(e.productEditModel.hasValidationError(`${a.fieldKey}.sku`)?"is-error":""),id:`${a.fieldKey}.sku`,placeholder:f(p)("SKU"),type:"text",modelValue:s.value.sku,"onUpdate:modelValue":k[34]||(k[34]=G=>s.value.sku=G),maxlength:"30","show-word-limit":"",onInput:k[35]||(k[35]=G=>{e.productEditModel.updatePricingValue("sku",G,a.fieldKey,s.value,e.modeType)})},null,8,["class","id","placeholder","modelValue"]),o(st,{"validation-errors":e.productEditModel.validationErrors,"field-key":`${a.fieldKey}.sku`},null,8,["validation-errors","field-key"])]),_:1})]),_:1}),o(D,{lg:12},{default:r(()=>[o(I,{required:"",class:"has-tooltip-and-required"},{label:r(()=>[o(Ge,{title:f(p)("Fulfillment Type"),placement:"bottom",content:f(p)("Choosing the Type will impact your order status change flow upon successful payment. For physical items, the status changes from On-Hold to Processing, while for digital items, it changes from On-Hold to Completed.")},null,8,["title","content"])]),default:r(()=>[o($,{modelValue:s.value.fulfillment_type,"onUpdate:modelValue":k[36]||(k[36]=G=>s.value.fulfillment_type=G),onChange:k[37]||(k[37]=G=>{e.productEditModel.updatePricingValue("fulfillment_type",G,a.fieldKey,s.value,e.modeType)}),placeholder:f(p)("Select")},{default:r(()=>[(A(!0),_(H,null,X(v.value,(G,N)=>(A(),U(M,{label:G,value:N},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1})):x("",!0)]}),_:1}),e.modeType!=="add"?(A(),_("span",s6,[o(L,{onClick:k[38]||(k[38]=()=>{l("closeModal")})},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(L,{disabled:e.productEditModel.saving,onClick:k[39]||(k[39]=()=>F(s.value,e.index)),type:"primary"},{default:r(()=>[O(m(typeof s.value.id>"u"?f(p)("Save"):f(p)("Update")),1)]),_:1},8,["disabled"])])):x("",!0)])}}},n6={class:"fct-product-button-and-drawer-wrap"},o6={key:0,class:"fct-product-add-more-price-wrap text-right pr-6"},l6={key:1,class:"fct-btn-group sm"},r6={class:"more-btn"},Pr={__name:"ProductPricingActions",props:{modeType:String,index:Number,variant:{type:Object,default:{}},product:Object,productEditModel:Object},setup(e){const t=e,a=T(!1);let s=T(null);const n=T(1),l=T("");T(!1);const d=q(()=>({product:t.product,variant:t.variant,index:t.index,productEditModel:t.productEditModel,openPricingModal:y=>{l.value=y,a.value=!0},vueContext:Je().ctx})),u=T([]),c=()=>{var w,C;const y=((w=window==null?void 0:window.fluent_cart_admin)==null?void 0:w.hooks)||(window==null?void 0:window.fluentCartAdminHooks),g=[],B=(C=y==null?void 0:y.applyFilters)==null?void 0:C.call(y,"fluent_cart_product_pricing_actions_dropdown_items",g,d.value);u.value=Array.isArray(B)?B:g},h=y=>y?typeof y.disabled=="function"?!!y.disabled(d.value):!!y.disabled:!1;he(()=>{s.value=t.index,c(),setTimeout(c,0)});const v=y=>{var g,B;if(y&&typeof y=="object"){if(typeof y.onClick=="function")return y.onClick(d.value);if(y.command){const w=((g=window==null?void 0:window.fluent_cart_admin)==null?void 0:g.hooks)||(window==null?void 0:window.fluentCartAdminHooks);return(B=w==null?void 0:w.doAction)==null?void 0:B.call(w,"fluent_cart_product_pricing_actions_dropdown_command",y.command,d.value,y)}}y==="duplicate_pricing"?(s.value=null,l.value="duplicate",a.value=!0):y==="delete_variant"&&(l.value="delete",t.productEditModel.deletePricing(t.variant.id,t.index))};return(y,g)=>{const B=b("el-button"),w=b("el-checkbox"),C=b("el-dropdown-item"),F=b("el-dropdown-menu"),S=b("el-dropdown"),E=b("el-drawer");return A(),_("div",n6,[t.modeType=="add"?(A(),_("div",o6,[e.product.detail.variation_type!=="simple"?(A(),U(B,{key:0,text:"",type:"primary",onClick:g[0]||(g[0]=()=>{l.value="create",a.value=!0})},{default:r(()=>[o(z,{name:"Plus"}),O(" "+m(e.product.variants.length>0?y.$t("Add more"):y.$t("Add Pricing")),1)]),_:1})):x("",!0)])):x("",!0),t.modeType=="action"?(A(),_("div",l6,[o(we,{class:"hide-on-mobile",size:"small",tag:"button",onClick:g[1]||(g[1]=()=>{l.value="update",a.value=!0})},{default:r(()=>[o(z,{name:"Edit"})]),_:1}),o(S,{class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:v,trigger:"click",onVisibleChange:g[5]||(g[5]=k=>{k&&c()})},{dropdown:r(()=>[o(F,null,{default:r(()=>[e.product.detail&&e.product.detail.manage_stock=="1"?(A(),U(C,{key:0,class:"item-checkbox"},{default:r(()=>[o(w,{modelValue:e.variant.manage_stock,"onUpdate:modelValue":g[2]||(g[2]=k=>e.variant.manage_stock=k),onChange:g[3]||(g[3]=k=>{e.productEditModel.onChangePricing("manage_stock",f(s),k)}),"true-value":"0","false-value":"1"},{default:r(()=>[O(m(y.$t("Skip inventory")),1)]),_:1},8,["modelValue"])]),_:1})):x("",!0),o(C,{class:"show-on-mobile",onClick:g[4]||(g[4]=()=>{l.value="update",a.value=!0})},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(y.$t("Edit")),1)]),_:1}),e.product.detail&&e.product.detail.variation_type!=="simple"?(A(),U(C,{key:1,command:"duplicate_pricing"},{default:r(()=>[o(z,{name:"Duplicate"}),O(" "+m(y.$t("Duplicate")),1)]),_:1})):x("",!0),o(C,null,{default:r(()=>[e.variant.id?(A(),U(ma,{key:0,class:"fct-copy-wrap-inline",text:e.variant.id,showMode:"icon_with_text",buttonText:y.$t("Copy Variation ID")},null,8,["text","buttonText"])):x("",!0)]),_:1}),o(C,{disabled:e.product.post_status!=="publish"&&e.product.post_status!=="private"&&e.variant.id!=""},{default:r(()=>{var k;return[(e.product.post_status==="publish"||e.product.post_status==="private")&&e.variant.id?(A(),U(ma,{key:0,class:"fct-copy-wrap-inline",text:((k=y.appVars)==null?void 0:k.frontend_url)+"=instant_checkout&item_id="+e.variant.id+"&quantity=1",showMode:"icon_with_text",buttonText:y.$t("Direct Checkout"),tooltipContent:y.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):(A(),_(H,{key:1},[o(z,{name:"Copy"}),O(" "+m(y.$t("Direct Checkout"))+" ",1),o(Ge,{content:y.$t("This product is currently in draft. You can't share direct checkout link")},null,8,["content"])],64))]}),_:1},8,["disabled"]),(A(!0),_(H,null,X(u.value,(k,Q)=>(A(),U(C,{key:"js_item_"+Q,command:k,class:oe(k==null?void 0:k.class),divided:!!(k!=null&&k.divided),disabled:h(k)},{default:r(()=>[k!=null&&k.icon?(A(),U(z,{key:0,name:k.icon},null,8,["name"])):x("",!0),O(" "+m(k==null?void 0:k.label),1)]),_:2},1032,["command","class","divided","disabled"]))),128)),e.productEditModel.variantsLength()>n.value?(A(),U(C,{key:2,command:"delete_variant",class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(y.$t("Delete")),1)]),_:1})):x("",!0)]),_:1})]),default:r(()=>[i("span",r6,[o(z,{name:"More"})])]),_:1})])):x("",!0),o(E,{"show-close":!0,modelValue:a.value,"onUpdate:modelValue":g[8]||(g[8]=k=>a.value=k),title:y.$t("Pricing"),size:"500px","append-to-body":!0,"close-on-click-modal":!0,"close-on-press-escape":!1,"destroy-on-close":!0,onBeforeClose:()=>{},class:"fct-variant-drawer"},{default:r(()=>[o(Ep,{index:t.index,modeType:l.value,fieldKey:"variants",product:e.product,productEditModel:e.productEditModel,onCreateOrUpdateVariant:g[6]||(g[6]=k=>a.value=!1),onCloseModal:g[7]||(g[7]=()=>{e.productEditModel.setValidationErrors({}),a.value=!1})},null,8,["index","modeType","product","productEditModel"])]),_:1},8,["modelValue","title"])])}}},i6={class:"fct-product-pricing-table-wrap"},A6={class:"fct-table-draggable hide-on-mobile"},d6={class:"is-right"},u6={key:0,class:"fct-drag-handle drag-icon"},c6={class:"fct-product-pricing-table-item"},p6={class:"media relative"},f6={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},h6={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},m6=["src","alt"],_6=["src"],g6={class:"fct-product-pricing-table-item"},v6={key:0,class:"fct-variant-badge"},y6={class:"fct-product-pricing-table-item"},b6=["innerHTML"],w6={key:0,class:"fct-variant-badge"},C6={class:"fct-product-pricing-table-item"},B6=["innerHTML"],k6={class:"is-right"},F6={class:"fct-product-pricing-table-item"},x6={class:"fct-table-draggable fct-product-pricing-table-mobile-wrap"},U6={key:0,class:"fct-drag-handle drag-icon"},S6={class:"fct-product-pricing-table-mobile-item-inner"},E6={class:"fct-product-pricing-table-item"},Q6={class:"media relative"},D6={class:"absolute top-0 left-0 w-full h-full z-10 rounded opacity-0"},I6={key:0,class:"absolute top-0 left-0 w-full h-full z-0 rounded"},$6=["src","alt"],T6=["src"],M6={class:"fct-product-pricing-table-item-content"},V6={class:"title"},L6={key:0,class:"fct-variant-badge"},O6={key:0,class:"compare-price"},H6=["innerHTML"],R6={class:"price"},P6=["innerHTML"],K6={key:0,class:"capitalize"},N6={class:"fct-product-pricing-table-item-action"},G6={__name:"ProductPricingTable",props:{product:Object,productEditModel:Object},setup(e){const t=e;he(()=>{setTimeout(()=>{document.querySelectorAll(".el-input__wrapper input[type='number']").forEach(n=>{n.addEventListener("wheel",l=>{document.activeElement===n&&l.preventDefault()})}),t.product.variants.filter(n=>{const l=n.media?n.media.meta_value||[]:[];return n.media=l})},50)});const a=q(()=>({animation:600,ghostClass:"ghost"}));return(s,n)=>{const l=b("el-input");return A(),_("div",i6,[i("div",A6,[i("table",null,[n[3]||(n[3]=i("colgroup",null,[i("col"),i("col",{width:"50"}),i("col",{width:"300"}),i("col"),i("col"),i("col")],-1)),i("thead",null,[i("tr",null,[n[2]||(n[2]=i("th",null,null,-1)),i("th",null,m(s.$t("Image")),1),i("th",null,m(s.$t("Title")),1),i("th",null,m(s.$t("Price")),1),i("th",null,m(s.$t("Compare at price")),1),i("th",d6,m(s.$t("Action")),1)])]),o(f(xl),gt(a.value,{list:e.product.variants,"item-key":"id",onEnd:n[0]||(n[0]=d=>{e.productEditModel.updateVariantSerialIndexes(e.product.variants)}),tag:"tbody",handle:".fct-drag-handle"}),{default:r(()=>[(A(!0),_(H,null,X(e.product.variants,(d,u)=>{var c,h,v,y,g,B,w;return A(),_("tr",{key:d.id},[i("td",null,[e.product.variants.length>1?(A(),_("span",u6,[o(z,{name:"ReorderDotsVertical"})])):x("",!0)]),i("td",null,[i("div",c6,[i("div",p6,[i("div",f6,[o(yl,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:d==null?void 0:d.media,onMediaUploaded:C=>{e.productEditModel.onUploadPricingMedia("media",u,C)}},null,8,["attachments","onMediaUploaded"])]),typeof(d==null?void 0:d.media)<"u"&&((c=d==null?void 0:d.media)==null?void 0:c.length)>0?(A(),_("div",h6,[i("img",{src:(h=d.media[0])==null?void 0:h.url,alt:(v=d.media[0])==null?void 0:v.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,m6)])):(A(),_("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,_6))])])]),i("td",null,[i("div",g6,[o(l,{class:oe(e.productEditModel.hasValidationError(`variants.${u}.variation_title`)?"is-error":""),id:`variants.${u}.variation_title`,placeholder:s.$t("e.g. Small, Medium, Large"),type:"text",modelValue:d.variation_title,"onUpdate:modelValue":C=>d.variation_title=C,onInput:C=>{e.productEditModel.onChangePricing("variation_title",u,C)},disabled:((g=(y=e.product)==null?void 0:y.detail)==null?void 0:g.variation_type)==="simple",onFocus:C=>e.productEditModel.clearValidationError(`variants.${u}.variation_title`)},null,8,["class","id","placeholder","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((B=d.other_info)==null?void 0:B.installment)==="yes"?(A(),_("span",v6,m(d.other_info.times)+" "+m(f(p)("Installment")),1)):x("",!0)])]),i("td",null,[i("div",y6,[o(l,{placeholder:s.$t("Price"),class:oe(e.productEditModel.hasValidationError(`variants.${u}.item_price`)?"is-error":""),id:`variants.${u}.item_price`,type:"number",min:1,modelValue:d.item_price,"onUpdate:modelValue":C=>d.item_price=C,modelModifiers:{number:!0},onInput:C=>{e.productEditModel.onChangePricing("item_price",u,C)},disabled:d.expanded,onFocus:C=>e.productEditModel.clearValidationError(`variants.${u}.item_price`)},{prefix:r(()=>[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,b6)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","onInput","disabled","onFocus"]),((w=d.other_info)==null?void 0:w.payment_type)==="subscription"?(A(),_("span",w6,m(d.other_info.repeat_interval),1)):x("",!0)])]),i("td",null,[i("div",C6,[o(l,{placeholder:s.$t("Compare price"),class:oe(e.productEditModel.hasValidationError(`variants.${u}.compare_price`)?"is-error":""),id:`variants.${u}.compare_price`,type:"number",min:1,modelValue:d.compare_price,"onUpdate:modelValue":C=>d.compare_price=C,modelModifiers:{number:!0},disabled:d.expanded,onInput:C=>{e.productEditModel.onChangePricing("compare_price",u,C)},onFocus:C=>e.productEditModel.clearValidationError(`variants.${u}.compare_price`)},{prefix:r(()=>[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,B6)]),_:2},1032,["placeholder","class","id","modelValue","onUpdate:modelValue","disabled","onInput","onFocus"])])]),i("td",k6,[i("div",F6,[o(Pr,{modeType:"action",index:u,variant:d,product:e.product,productEditModel:e.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])])]),i("div",x6,[o(f(xl),gt(a.value,{list:e.product.variants,"item-key":"id",onEnd:n[1]||(n[1]=d=>{e.productEditModel.updateVariantSerialIndexes(e.product.variants)}),handle:".fct-drag-handle"}),{default:r(()=>[(A(!0),_(H,null,X(e.product.variants,(d,u)=>{var c,h,v,y,g;return A(),_("div",{key:d.id,class:"fct-product-pricing-table-mobile-row"},[e.product.variants.length>1?(A(),_("span",U6,[o(z,{name:"ReorderDotsVertical"})])):x("",!0),i("div",S6,[i("div",E6,[i("div",Q6,[i("div",D6,[o(yl,{previewImage:!1,showList:!1,multiple:!0,showDeleteButton:!1,attachments:d==null?void 0:d.media,onMediaUploaded:B=>{e.productEditModel.onUploadPricingMedia("media",u,B)}},null,8,["attachments","onMediaUploaded"])]),typeof(d==null?void 0:d.media)<"u"&&((c=d==null?void 0:d.media)==null?void 0:c.length)>0?(A(),_("div",I6,[i("img",{src:(h=d.media[0])==null?void 0:h.url,alt:(v=d.media[0])==null?void 0:v.title,class:"!object-contain rounded border border-solid border-gray-outline dark:border-dark-400"},null,8,$6)])):(A(),_("img",{key:1,src:s.appVars.asset_url+"images/empty-image.svg",alt:"No Image"},null,8,T6))]),i("div",M6,[i("div",V6,[O(m(d.variation_title)+" ",1),((y=d.other_info)==null?void 0:y.installment)==="yes"?(A(),_("span",L6,m(d.other_info.times)+" "+m(f(p)("Installment")),1)):x("",!0)]),i("ul",null,[i("li",null,[d.compare_price?(A(),_("div",O6,[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,H6),O(" "+m(d.compare_price),1)])):x("",!0),i("div",R6,[i("span",{innerHTML:s.appVars.shop.currency_sign},null,8,P6),O(" "+m(d.item_price),1)])]),((g=d.other_info)==null?void 0:g.payment_type)==="subscription"?(A(),_("li",K6,m(d.other_info.repeat_interval),1)):x("",!0)])])]),i("div",N6,[o(Pr,{modeType:"action",index:u,variant:d,product:e.product,productEditModel:e.productEditModel},null,8,["index","variant","product","productEditModel"])])])])}),128))]),_:1},16,["list"])]),o(Pr,{modeType:"add",product:e.product,productEditModel:e.productEditModel},null,8,["product","productEditModel"])])}}},z6={class:"fct-product-pricing-wrap"},j6={class:"w-[150px] fct-select-gray"},Y6={__name:"ProductPricing",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(e){var u,c;const t=e;T(!1);const a=T((c=(u=t.product)==null?void 0:u.detail)==null?void 0:c.variation_type),s=T(null),n=h=>{var y;const v=((y=t.product.variants)==null?void 0:y.length)??0;h==="simple"&&t.product.detail.variation_type==="simple_variations"&&v>1?(s.value=h,a.value=t.product.detail.variation_type,CA.confirmDeleteWithInput("proceed",p("Switching to 'Simple' will permanently delete all variations except the first one.")).then(()=>{l()}).catch(()=>{s.value||(s.value=null)})):d(h)},l=()=>{s.value&&d(s.value),s.value=null},d=h=>{a.value=h,t.productEditModel.updateVariationType("variation_type",h)};return(h,v)=>{var B,w;const y=b("el-option"),g=b("el-select");return A(),_("div",z6,[o(re,{class:oe(((w=(B=e.product)==null?void 0:B.detail)==null?void 0:w.variation_type)==="simple_variations"?"overflow-hidden":"")},{default:r(()=>{var C,F;return[o(Ae,{title:h.$t("Pricing"),border_bottom:""},{action:r(()=>[i("div",j6,[e.product.detail?(A(),U(g,{key:0,size:"small",class:oe(e.productEditModel.hasValidationError("detail.variation_type")?"is-error":""),modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=S=>a.value=S),placeholder:h.$t("Select Variation"),onChange:n},{default:r(()=>[o(y,{label:h.$t("Simple"),value:"simple"},null,8,["label"]),o(y,{label:h.$t("Simple Variations"),value:"simple_variations"},null,8,["label"])]),_:1},8,["class","modelValue","placeholder"])):x("",!0)])]),_:1},8,["title"]),o(le,{class:oe(((F=(C=e.product)==null?void 0:C.detail)==null?void 0:F.variation_type)==="simple_variations"?"pb-0":"")},{default:r(()=>{var S,E,k,Q,I,D,M,$,V,L,R;return[((E=(S=e.product)==null?void 0:S.detail)==null?void 0:E.variation_type)==="simple"?(A(),U(Ep,{key:0,index:0,modeType:"add",fieldKey:"variants.0",product:e.product,productEditModel:e.productEditModel},null,8,["product","productEditModel"])):x("",!0),((Q=(k=e.product)==null?void 0:k.detail)==null?void 0:Q.variation_type)==="simple"&&(((I=e.product)==null?void 0:I.post_status)==="publish"||((D=e.product)==null?void 0:D.post_status)==="private")&&(($=(M=e.product)==null?void 0:M.variants[0])!=null&&$.id)?(A(),U(ma,{key:1,class:"fct-copy-wrap-inline",text:((V=h.appVars)==null?void 0:V.frontend_url)+"=instant_checkout&item_id="+e.product.variants[0].id+"&quantity=1",showMode:"icon_with_text",placement:"top",buttonText:h.$t("Direct Checkout"),tooltipContent:h.$t("Share direct checkout link to let customers buy this variation directly.")},null,8,["text","buttonText","tooltipContent"])):x("",!0),((R=(L=e.product)==null?void 0:L.detail)==null?void 0:R.variation_type)==="simple_variations"?(A(),U(G6,{key:2,product:e.product,productEditModel:e.productEditModel},null,8,["product","productEditModel"])):x("",!0)]}),_:1},8,["class"])]}),_:1},8,["class"])])}}},q6={key:0,class:"fct-product-inventory-wrap"},W6={class:"fct-product-inventory-inner-wrap hide-on-mobile"},X6={class:"relative"},J6={key:0,class:"fct-variant-badge absolute -top-2 right-1.5 bg-white border border-solid border-gray-outline text-primary-500 rounded-xs dark:bg-primary-700 dark:text-gray-50 dark:border-primary-500"},Z6={class:"fct-adjust-by-wrap"},e9={class:"fct-adjust-by-row"},t9={class:"fct-adjust-by-col"},a9={class:"title"},s9={class:"fct-adjust-by-col"},n9={class:"title"},o9={class:"fct-adjust-by-action"},l9=["onClick"],r9={class:"fct-product-inventory-inner-wrap-mobile"},i9={key:0,class:"fct-product-inventory-mobile-col"},A9={class:"title"},d9={key:0,class:"text-xs text-gray-500 mt-1"},u9={class:"fct-product-inventory-mobile-col"},c9={class:"fct-adjust-by-wrap"},p9={class:"fct-adjust-by-row"},f9={class:"fct-adjust-by-col"},h9={class:"title"},m9={class:"fct-adjust-by-col"},_9={class:"title"},g9={class:"fct-adjust-by-action"},v9=["onClick"],y9={class:"fct-product-inventory-mobile-col"},b9={__name:"ProductInventory",props:{product:Object,productEditModel:Object},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,s=T([]),n=T([]),l=T([]),d=De.get("modules_settings.stock_management.active");he(()=>{const g=Object.keys(a.product.variants).length;s.value=Array.from({length:g},()=>!1),n.value=Array.from({length:g},()=>!1),a.product.variants.filter(B=>(B.new_stock=B.total_stock,B.adjusted_quantity=0,B))});const u=g=>a.product.detail.variation_type==="simple_variations"&&g.row.manage_stock==0?"disable_inventory_row":"",c=g=>a.product.detail.variation_type==="simple_variations"&&g.manage_stock==0?"disable_inventory_row":"",h=g=>{let B=parseInt(a.product.variants[g].new_stock);a.product.variants[g].total_stock=B<0?0:B;let w=parseInt(a.product.variants[g].total_stock)-parseInt(a.product.variants[g].committed)-parseInt(a.product.variants[g].on_hold);a.product.variants[g].available=w<0?0:w,de(()=>{s.value[g]=!1,n.value[g]=!1}),a.product.variants[g].adjusted_quantity=0,a.product.variants[g].new_stock=a.product.variants[g].total_stock,se.put(`products/${a.product.ID}/update-inventory/${a.product.variants[g].id}`,{total_stock:a.product.variants[g].total_stock,available:a.product.variants[g].available}).then(C=>{Y.success(C.message)}).catch(C=>{var F;C.status_code=="422"?Y.validationErrors(C):Y.error((F=C.data)==null?void 0:F.message)}).finally(()=>{})},v=g=>{se.put(`products/${a.product.ID}/update-manage-stock`,{manage_stock:a.product.detail.manage_stock}).then(B=>{Y.success(B.message),a.product.variants.forEach(w=>{w.manage_stock=g,w.total_stock=1,w.available=1})}).catch(B=>{var w;B.status_code=="422"?Y.validationErrors(B):Y.error((w=B.data)==null?void 0:w.message)}).finally(()=>{})},y=(g,B)=>{B==="desktop"?s.value=s.value.map((w,C)=>C===g):n.value=n.value.map((w,C)=>C===g)};return(g,B)=>{const w=b("el-switch"),C=b("el-input"),F=b("el-table-column"),S=b("el-button"),E=b("el-popover"),k=b("el-table");return f(d)==="yes"?(A(),_("div",q6,[o(re,{class:"overflow-hidden"},{default:r(()=>{var Q,I;return[o(Ae,{class:oe(((Q=e.product.detail)==null?void 0:Q.manage_stock.toString())==="0"?"pb-5":"")},{action:r(()=>{var D;return[(D=e.product.detail)!=null&&D.manage_stock?(A(),U(w,{key:0,modelValue:e.product.detail.manage_stock,"onUpdate:modelValue":B[0]||(B[0]=M=>e.product.detail.manage_stock=M),onChange:v,"active-value":"1","inactive-value":"0","active-text":f(p)("Inventory Management")},null,8,["modelValue","active-text"])):x("",!0)]}),_:1},8,["class"]),o(na,{visible:((I=e.product.detail)==null?void 0:I.manage_stock.toString())==="1",accordion:""},{default:r(()=>[o(le,{class:"px-0 pb-0"},{default:r(()=>[i("div",W6,[o(k,{data:e.product.variants,"row-class-name":u},{default:r(()=>[e.product.detail.variation_type==="simple_variations"?(A(),U(F,{key:0,label:f(p)("Title"),width:"140"},{default:r(D=>{var M;return[i("div",X6,[o(C,{disabled:"",size:"small",modelValue:D.row.variation_title,"onUpdate:modelValue":$=>D.row.variation_title=$},null,8,["modelValue","onUpdate:modelValue"]),((M=D.row.other_info)==null?void 0:M.payment_type)==="subscription"?(A(),_("span",J6,m(D.row.other_info.repeat_interval),1)):x("",!0)])]}),_:1},8,["label"])):x("",!0),o(F,{label:f(p)("SKU"),width:"140"},{default:r(D=>[o(C,{disabled:"",size:"small",modelValue:D.row.sku,"onUpdate:modelValue":M=>D.row.sku=M,placeholder:f(p)("SKU")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["label"]),o(F,{label:f(p)("Total Stock"),width:"160"},{default:r(D=>[i("div",null,[o(C,{modelValue:D.row.total_stock,"onUpdate:modelValue":M=>D.row.total_stock=M,class:"input-with-total-stock fct-input-group",readonly:"",size:"small"},{append:r(()=>[i("div",{ref_key:"filter_popover_wrapper",ref:l},[o(E,{visible:s.value[D.$index],"popper-class":"fct-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:r(()=>[i("div",{onClick:M=>y(D.$index,"desktop")},[o(z,{name:"Configuration",class:"w-3.5 h-3.5"})],8,l9)]),default:r(()=>[i("div",Z6,[i("div",e9,[i("div",t9,[i("span",a9,m(f(p)("Adjust by")),1),o(C,{size:"small",class:oe(e.productEditModel.hasValidationError(`${D.$index}.adjusted_quantity`)?"is-error":""),placeholder:f(p)("Quantity"),type:"number",modelValue:D.row.adjusted_quantity,"onUpdate:modelValue":M=>D.row.adjusted_quantity=M,modelModifiers:{number:!0},onKeyup:M=>{e.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",M.target.value,D.$index)},onChange:M=>{e.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",M,D.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),i("div",s9,[i("span",n9,m(f(p)("New Stock")),1),o(C,{size:"small",class:oe(e.productEditModel.hasValidationError(`${D.$index}.new_stock`)?"is-error":""),placeholder:f(p)("New Stock"),type:"number",min:1,modelValue:D.row.new_stock,"onUpdate:modelValue":M=>D.row.new_stock=M,modelModifiers:{number:!0},onKeyup:M=>{e.productEditModel.onChangeNewStock("new_stock",M.target.value,D.$index)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),i("div",o9,[o(S,{size:"small",type:"info",soft:"",onClick:M=>s.value[D.$index]=!1},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:2},1032,["onClick"]),o(S,{size:"small",type:"primary",onClick:M=>h(D.$index),disabled:D.row.new_stock===""},{default:r(()=>[O(m(f(p)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),o(F,{label:f(p)("Available"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:f(p)(D.row.available)},null,8,["placeholder"])]),_:1},8,["label"]),o(F,{label:f(p)("On hold"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:f(p)(D.row.on_hold)},null,8,["placeholder"])]),_:1},8,["label"]),o(F,{label:f(p)("Delivered"),width:"100"},{default:r(D=>[o(C,{disabled:"",size:"small",placeholder:f(p)(D.row.committed)},null,8,["placeholder"])]),_:1},8,["label"])]),_:1},8,["data"])]),i("div",r9,[(A(!0),_(H,null,X(e.product.variants,(D,M)=>(A(),_("div",{key:M,class:oe(["fct-product-inventory-mobile-row",c(D)])},[e.product.detail.variation_type==="simple_variations"?(A(),_("div",i9,[i("div",A9,[O(m(D.variation_title)+" ",1),D.sku?(A(),_("div",d9,"SKU: "+m(D.sku),1)):x("",!0)])])):x("",!0),i("div",u9,[o(C,{modelValue:D.total_stock,"onUpdate:modelValue":$=>D.total_stock=$,class:"input-with-total-stock fct-input-group",readonly:"",size:"small"},{append:r(()=>[i("div",{ref_for:!0,ref_key:"filter_popover_wrapper",ref:l},[o(E,{visible:n.value[M],"popper-class":"fct-stock-dropdown",trigger:"click",placement:"bottom-end"},{reference:r(()=>[i("div",{onClick:$=>y(M,"mobile")},[o(z,{name:"Configuration",class:"w-3.5 h-3.5"})],8,v9)]),default:r(()=>[i("div",c9,[i("div",p9,[i("div",f9,[i("span",h9,m(f(p)("Adjust by")),1),o(C,{size:"small",class:oe(e.productEditModel.hasValidationError(`${M}.adjusted_quantity`)?"is-error":""),placeholder:f(p)("Quantity"),type:"number",modelValue:D.adjusted_quantity,"onUpdate:modelValue":$=>D.adjusted_quantity=$,modelModifiers:{number:!0},onKeyup:$=>{e.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",$.target.value,M)},onChange:$=>{e.productEditModel.onChangeAdjustedQuantity("adjusted_quantity",$,M)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup","onChange"])]),i("div",m9,[i("span",_9,m(f(p)("New Stock")),1),o(C,{size:"small",class:oe(e.productEditModel.hasValidationError(`${M}.new_stock`)?"is-error":""),placeholder:f(p)("New Stock"),type:"number",min:1,modelValue:D.new_stock,"onUpdate:modelValue":$=>D.new_stock=$,modelModifiers:{number:!0},onKeyup:$=>{e.productEditModel.onChangeNewStock("new_stock",$.target.value,M)}},null,8,["class","placeholder","modelValue","onUpdate:modelValue","onKeyup"])])]),i("div",g9,[o(S,{size:"small",type:"info",soft:"",onClick:$=>n.value[M]=!1},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:2},1032,["onClick"]),o(S,{size:"small",type:"primary",onClick:$=>h(M),disabled:D.new_stock===""},{default:r(()=>[O(m(f(p)("Apply")),1)]),_:2},1032,["onClick","disabled"])])])]),_:2},1032,["visible"])],512)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),i("div",y9,[i("ul",null,[i("li",null,[i("span",null,m(f(p)("Available"))+":",1),O(" "+m(D.available.toString()),1)]),i("li",null,[i("span",null,m(f(p)("On Hold"))+":",1),O(" "+m(D.on_hold.toString()),1)]),i("li",null,[i("span",null,m(f(p)("Delivered"))+":",1),O(" "+m(D.committed.toString()),1)])])])],2))),128))])]),_:1})]),_:1},8,["visible"])]}),_:1})])):x("",!0)}}},w9={class:"fct-file-uploader-wrap"},C9={key:0,class:"fct-file-upload-rename"},B9={class:"fct-form-group"},k9={for:"filename_input"},F9={style:{display:"flex","justify-content":"space-between"}},x9={key:0},U9={class:"fct-btn-group sm fct-file-upload-rename-actions"},S9={key:0,class:"fct-form-group"},E9={key:1,class:"fct-file-upload-list-empty"},Q9={class:"el-upload__text"},D9=["innerHTML"],I9={key:1,class:"fct-file-upload-progress"},$9={class:"upload-progress-head"},T9={class:"upload-progress-body"},M9={key:0,class:"fct-file-upload-name"},V9={class:"fct-file-upload-text"},L9={key:0},O9={__name:"FileUploader",props:{driver:String,storageDriverModel:Object},emits:["onUploaded"],setup(e,{expose:t,emit:a}){const s=e,n=a,l=T(),d=T(null),u=T(""),c=T(),h=T([]),v=T(!1),y=T(0),g=()=>window.fluentCartRestVars.rest.url+"/files/upload",B=()=>({name:u.value,driver:s.driver,bucket:l.value}),w=M=>M.name.length>160?(Y.error(p("Filename too long. Maximum 160 characters allowed")),h.value=[],M.value=null,u.value="",v.value=!1,y.value=0,!1):!0,C=M=>{M!=null&&M.message&&Y.success(M.message),h.value=[],c.value=null,u.value="",v.value=!1,y.value=0};t({reset:C});const F=M=>{c.value=M,u.value=M.name.replace(/\.[^/.]+$/,"")},S=()=>{d.value.handleRemove(c.value),C()},E=(M,$,V)=>{y.value=parseInt(M.percent+"")},k=(M,$,V)=>{var L,R;C(M),(R=(L=s.storageDriverModel)==null?void 0:L.fileUploaded)==null||R.call(L,M),n("onUploaded",M,$,V)},Q=()=>{v.value=!0,d.value.submit()},I=M=>u.value+"."+M.split(".").pop(),D=()=>({"X-WP-Nonce":se.getNonce()});return(M,$)=>{const V=b("el-input"),L=b("el-button"),R=b("el-option"),K=b("el-select"),J=b("el-upload"),W=b("el-progress");return A(),_("div",w9,[h.value.length>0?(A(),_(H,{key:0},[v.value?x("",!0):(A(),_("div",C9,[i("div",B9,[i("label",k9,m(M.$t("File Name")),1),o(V,{id:"filename_input",modelValue:u.value,"onUpdate:modelValue":$[0]||($[0]=ae=>u.value=ae)},null,8,["modelValue"]),i("div",F9,[i("div",null,[u.value.length>160?(A(),_("span",x9,m(f(p)("File name Must not exceed %s characters",160)),1)):x("",!0)]),i("div",null,m(u.value.length)+"/160 ",1)])]),i("div",U9,[o(L,{type:"primary",onClick:Q,disabled:u.value.length>160},{default:r(()=>[O(m(M.$t("Upload")),1)]),_:1},8,["disabled"]),o(we,{onClick:je(C,["prevent"]),tag:"button"},{default:r(()=>[o(z,{name:"Delete"})]),_:1})])]))],64)):x("",!0),i("div",{class:oe({hidden:h.value.length>0})},[e.storageDriverModel.hasBucket(e.driver)?(A(),_("div",S9,[i("label",null,m(f(p)("Select Bucket")),1),o(K,{filterable:"",modelValue:l.value,"onUpdate:modelValue":$[1]||($[1]=ae=>l.value=ae),placeholder:f(p)("Select"),"popper-class":"fct-bucket-list-popover"},{default:r(()=>[(A(!0),_(H,null,X(e.storageDriverModel.data.buckets[e.driver],(ae,Z)=>(A(),U(R,{key:Z,label:ae.label,value:ae.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])):x("",!0),e.storageDriverModel.hasBucket(e.driver)&&!l.value?(A(),_("div",E9,m(f(p)("Please select a bucket to upload files.")),1)):x("",!0),!e.storageDriverModel.hasBucket(e.driver)||l.value?(A(),U(J,{key:2,class:"fct-file-uploader",ref_key:"uploaderRef",ref:d,data:B(),"file-list":h.value,"onUpdate:fileList":$[2]||($[2]=ae=>h.value=ae),drag:"",action:g(),"on-progress":E,"on-success":k,"on-error":(ae,Z,te)=>{ae.toString().includes("Request Entity Too Large")?f(Y).error(f(p)("File too large")):f(Y).error(f(p)("Cant upload the file")),h.value=[],u.value="",v.value=!1,y.value=0},"auto-upload":!1,"on-change":F,multiple:!1,limit:1,"show-file-list":!1,headers:D(),"before-upload":w},{default:r(()=>[o(we,{circle:"",bg:"primary",soft:""},{default:r(()=>[o(z,{name:"Upload"})]),_:1}),i("div",Q9,[i("span",{innerHTML:f(p)("Drag & Drop or %1$s Browse/Upload %2$s Files","<em>","</em>")},null,8,D9),i("span",null,m(f(p)("Any Format upto %s",f(ze).serverMaxUploadSize())),1)])]),_:1},8,["data","file-list","action","on-error","headers"])):x("",!0)],2),v.value?(A(),_("div",I9,[i("div",$9,[o(we,{bg:"info",soft:"",size:"small"},{default:r(()=>[o(z,{name:"Files"})]),_:1})]),i("div",T9,[h.value.length>0?(A(),_("div",M9,m(I(h.value[0].name)),1)):x("",!0),o(W,{"stroke-width":5,percentage:y.value,striped:"","striped-flow":"",duration:40},{default:r(()=>[i("div",V9,[h.value.length>0?(A(),_("span",L9,m(f(Sf)(h.value[0].size*(y.value/100),h.value[0].size)),1)):x("",!0),i("span",null,m(f(p)("%s% Uploaded",y.value)),1)])]),_:1},8,["percentage"])]),i("div",{class:"fct-file-upload-progress-cancel",onClick:S},[o(z,{name:"Close"})])])):x("",!0)])}}},H9={key:0,class:"fct-form-group"},R9={class:"fct-file-upload-search-wrap"},P9={key:0},K9={key:1,class:"fct-file-upload-list"},N9={class:"file-name"},G9={key:1},z9={key:2,class:"fct-file-upload-list-empty"},j9={__name:"FileList",props:{driver:String,buckets:Array,storageDriverModel:Object,multiple:{type:Boolean,default:!0}},emits:["onFileSelected"],setup(e,{emit:t}){const a=e,s=T([]),n=T(!1),l=()=>{n.value=!0,s.value=[],u.value=[],v([]),a.storageDriverModel.getFileList(a.driver,d.value,g.value).then(k=>{s.value=k}).catch(k=>{Y.error(k)}).finally(()=>{n.value=!1})},d=T(""),u=T([]),c=T(!1),h=T(!1),v=k=>{h.value=!1;const Q=k.map(I=>(I.name.length>185&&(h.value=!0),{name:I.name,size:I.size,bucket:I.bucket,driver:I.driver}));Q.value=k,c.value=Q.value.length>0,C("onFileSelected",Q,h.value)},y=q(()=>s.value&&s.value.errors&&Object.keys(s.value.errors).length>0),g=T(""),B=T(null),w=k=>k.includes("_____fluent-cart_____")?k.split("_____fluent-cart_____")[0]:k.split("__fluent-cart__")[0];fe(()=>a.driver,()=>{v([])});const C=t,F=T(null),S=k=>{n.value=!0;const Q=k.file;Q.bucket!==g.value?(g.value=Q.bucket,s.value=[Q]):s.value.unshift(Q),v([...u.value,Q]),n.value=!1,de(()=>{F.value&&F.value.toggleRowSelection(k.file,!0)})};he(()=>{a.storageDriverModel.hasBucket(a.driver)||l(),a.storageDriverModel.onFileUploaded(S,a.driver)});const E=async(k,Q)=>{k.deleting=!0,await se.delete("files/delete",{file_path:k.name,driver:a.driver,bucket:g.value}).then(I=>{Y.success(I.message),s.value.splice(Q,1),v([])}).catch(I=>{Y.error(I.message)}).finally(()=>{k.deleting=!1})};return(k,Q)=>{const I=b("el-option"),D=b("el-select"),M=b("el-input"),$=b("el-table-column"),V=b("el-skeleton-item"),L=b("el-skeleton"),R=b("el-table"),K=b("el-radio"),J=b("el-popconfirm");return A(),_(H,null,[e.storageDriverModel.hasBucket(e.driver)?(A(),_("div",H9,[i("label",null,m(f(p)("Select Bucket")),1),o(D,{filterable:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":Q[0]||(Q[0]=W=>g.value=W),placeholder:f(p)("Type to search"),"popper-class":"fct-bucket-list-popover",onChange:l,disabled:n.value},{default:r(()=>[(A(!0),_(H,null,X(e.storageDriverModel.data.buckets[e.driver],(W,ae)=>(A(),U(I,{key:ae,label:W.label,value:W.value,loading:e.storageDriverModel.isBucketLoading(e.driver)},null,8,["label","value","loading"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])):x("",!0),!e.storageDriverModel.hasBucket(e.driver)||g.value&&e.storageDriverModel.isBucketLoaded(e.driver)?(A(),_(H,{key:1},[i("div",R9,[o(M,{modelValue:d.value,"onUpdate:modelValue":Q[1]||(Q[1]=W=>d.value=W),class:"fct-file-search-input",placeholder:f(p)("Search and hit enter"),clearable:"",onKeyup:Q[2]||(Q[2]=Ma(()=>{l()},["enter"]))},null,8,["modelValue","placeholder"])]),n.value?(A(),_("div",P9,[o(R,{data:[1,2,3,4,5]},{default:r(()=>[o($,{type:"selection",width:"45"}),o($,{label:f(p)("File Name")},{default:r(()=>[o(L,{animated:""},{template:r(()=>[o(V,{varient:"p",class:"max-w-[190px]"})]),_:1})]),_:1},8,["label"]),o($,{label:f(p)("Size"),width:"150"},{default:r(()=>[o(L,{animated:""},{template:r(()=>[o(V,{varient:"p",class:"max-w-[100px]"})]),_:1})]),_:1},8,["label"])]),_:1})])):x("",!0),n.value?x("",!0):(A(),_("div",K9,[y.value?(A(),_("div",G9,[i("p",null,m(f(p)("Error: Unable to load the file list.")),1)])):(A(),U(R,{key:0,ref_key:"tableRef",ref:F,data:s.value.filter(W=>W.size>0),onSelectionChange:v},{empty:r(()=>[i("span",null,m(f(p)("No file found.")),1)]),default:r(()=>[e.multiple?(A(),U($,{key:0,type:"selection",width:"45",selectable:W=>!W.deleting&&W.size>0,onSelectionChange:v},null,8,["selectable"])):(A(),U($,{key:1,label:"",width:"45"},{default:r(W=>[o(K,{modelValue:B.value,"onUpdate:modelValue":Q[3]||(Q[3]=ae=>B.value=ae),label:W.row,disabled:W.row.size==0,onChange:ae=>v([W.row])},null,8,["modelValue","label","disabled","onChange"])]),_:1})),o($,{label:f(p)("File Name")},{default:r(W=>[i("span",N9,m(w(W.row.name)),1)]),_:1},8,["label"]),o($,{label:f(p)("Size"),width:"150"},{default:r(W=>[i("span",null,m(f(ze).readableFileSizeFromBytes(W.row.size)),1)]),_:1},8,["label"]),o($,{label:f(p)("Actions"),width:"80"},{default:r(W=>[o(J,{title:f(p)("Are you sure you want to delete this file? This action is not recoverable."),"confirm-button-text":f(p)("Yes, Confirm!"),"cancel-button-text":f(p)("Cancel"),onConfirm:ae=>E(W.row,W.$index),width:"250","popper-class":"fct-delete-confirm-popover"},{reference:r(()=>[o(we,{size:"small",tag:"button",disabled:W.row.deleting},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["disabled"])]),_:2},1032,["title","confirm-button-text","cancel-button-text","onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"]))]))],64)):x("",!0),!g.value&&e.storageDriverModel.hasBucket(e.driver)?(A(),_("div",z9,m(f(p)("Please select a bucket to view the files.")),1)):x("",!0)],64)}}};class Y9 extends Xt{constructor(){super(...arguments);me(this,"data",{drivers:{},selectedDriver:"",isDriversLoaded:!1,loadingDriver:!1,buckets:{},bucketLoadingStates:{},loadingFiles:!1,onFileUploadedCallbacks:{}});me(this,"getActiveDrivers",()=>{this.data.drivers=[],se.get("settings/storage-drivers/active-drivers").then(a=>{this.data.drivers=a.drivers,this.data.drivers.length>0&&(this.data.selectedDriver.value=this.data.drivers[0].route),Object.values(this.data.drivers).forEach(s=>{s.has_bucket&&(this.data.buckets[s.route]=s.buckets,this.data.bucketLoadingStates[s.route]=!0)})}).catch(a=>{console.log(a,"errors")}).finally(()=>{this.data.isDriversLoaded=!0})});me(this,"getBuckets",a=>this.data.bucketLoadingStates[a]===!1?(this.loadBucketList(a),[]):this.data.buckets[a]?this.data.buckets[a]:[]);me(this,"loadBucketList",a=>{this.isBucketLoaded(a)||this.isBucketLoading(a)||(this.data.bucketLoadingStates[a]="loading",se.get("files/bucket-list",{driver:a}).then(s=>{this.data.bucketLoadingStates[a]=!0,this.data.buckets[a]=s.buckets}).catch(s=>{this.data.bucketLoadingStates[a]=!1}).finally(()=>{}))});me(this,"getFileList",async(a,s="",n)=>{if(s=s.trim(),this.hasBucket(a)&&!n)return[];let l=[];return this.data.loadingFiles=!0,await se.get("files",{driver:a,activeBucket:n,search:s}).then(d=>{l=d.files}).catch(d=>{Y.error(d)}).finally(()=>{this.data.loadingFiles=!1}),l});me(this,"onFileUploaded",(a,s)=>{typeof a=="function"&&!this.data.onFileUploadedCallbacks.hasOwnProperty(s)&&(this.data.onFileUploadedCallbacks[s]=a)});me(this,"fileUploaded",a=>{const s=a.file.driver;!s||!this.data.onFileUploadedCallbacks.hasOwnProperty(s)||typeof this.data.onFileUploadedCallbacks[s]=="function"&&this.data.onFileUploadedCallbacks[s](a)})}get drivers(){return Object.values(this.data.drivers)}hasBucket(a){return this.data.buckets.hasOwnProperty(a)}isBucketLoading(a){return this.data.bucketLoadingStates[a]==="loading"}isBucketLoaded(a){return this.data.bucketLoadingStates[a]===!0}}function q9(){return Y9.init()}const W9={class:"fct-driver-wrap"},X9={class:"fct-driver-content"},J9={key:0,class:"empty-driver-text"},Z9={class:"fct-driver-tabs-label"},eV={class:"fct-driver-arrow-icon"},tV={class:"fct-driver-tabs-label"},aV={key:0},sV={class:"fct-driver-tabs-label"},nV={key:0,class:"dialog-footer"},Qp={__name:"FileUploaderDialog",props:{isDisabled:String,uploadBtnText:{default:p("Choose File")},uploadBtnIcon:{default:"Upload"},uploadBtnSize:{type:String,default:"large"},isMultiple:{type:Boolean,default:!0}},emits:["onUploaded","onFileSelected"],setup(e,{emit:t}){const a=e,s=t,n=T(!1),l=T(),d=Je().ctx,u=T([]),c=T("local"),h=T([]),v=[];T(!1);const y=T(!1),g=q9();he(()=>{g.getActiveDrivers()});const B=E=>{c.value=E,g.getBuckets(E)},w=()=>{if(!v.value||v.value.length===0){d.handleMessage(p("Please select a file"),"error","fct-file-upload-message");return}if(h.value=[],a.isMultiple)v.value.forEach(E=>{const k=E.name;let Q=k.split("_____fluent-cart_____")[0];Q=Q.split("__fluent-cart__")[0],h.value.push({id:"",title:Q,type:k.slice(k.lastIndexOf(".")+1),driver:E.driver,bucket:E.bucket,file_name:k,file_size:E.size,settings:{download_limit:"",download_expiry:"",bucket:E.bucket},serial:""})});else{const E=v.value[0],k=E.name;let Q=k.split("_____fluent-cart_____")[0];Q=Q.split("__fluent-cart__")[0],h.value.push({id:"",title:Q,type:k.slice(k.lastIndexOf(".")+1),driver:E.driver,bucket:E.bucket,file_name:k,file_size:E.size,settings:{download_limit:"",download_expiry:"",bucket:E.bucket},serial:""})}n.value=!1,y.value=!1,s("onFileSelected",h)},C=T("list"),F=T(!1),S=(E,k)=>{v.value=E,y.value=v.value.length>0,F.value=k};return(E,k)=>{const Q=b("el-button"),I=b("router-link"),D=b("el-tab-pane"),M=b("el-tabs"),$=b("el-dialog");return A(),_("div",W9,[o(Q,{class:"fct-upload-btn",type:"info",plain:"",onClick:k[0]||(k[0]=V=>n.value=!0),disabled:e.isDisabled,size:e.uploadBtnSize},{default:r(()=>[e.uploadBtnIcon?(A(),U(z,{key:0,name:e.uploadBtnIcon},null,8,["name"])):x("",!0),O(" "+m(e.uploadBtnText),1)]),_:1},8,["disabled","size"]),o($,{modelValue:n.value,"onUpdate:modelValue":k[6]||(k[6]=V=>n.value=V),"append-to-body":!0,title:f(p)("Storage Providers"),"modal-class":"fct-file-upload-dialog",onClose:()=>{}},{default:r(()=>[i("div",X9,[f(g).drivers.length<1?(A(),_("span",J9,[O(m(f(p)("No active storage provider found!"))+" ",1),o(I,{to:"/settings/storage"},{default:r(()=>[O(m(f(p)("Go to setting to active")),1)]),_:1})])):x("",!0),f(g).drivers.length>0?(A(),U(M,{key:1,class:"fct-driver-tabs",modelValue:c.value,"onUpdate:modelValue":k[4]||(k[4]=V=>c.value=V),"tab-position":"left",onTabChange:B},{default:r(()=>[(A(!0),_(H,null,X(f(g).drivers,V=>(A(),U(D,{name:V.route,key:V.route},{label:r(()=>[i("div",Z9,[o(z,{name:V.title==="S3"?"FolderCloud":"Folder"},null,8,["name"]),i("span",null,m(V.title),1),i("div",eV,[o(z,{name:"ChevronRight"})])])]),default:r(()=>[o(M,{modelValue:C.value,"onUpdate:modelValue":k[3]||(k[3]=L=>C.value=L),class:"fct-file-tabs","tab-position":"top"},{default:r(()=>[o(D,{name:"list"},{label:r(()=>[i("div",tV,m(f(p)("Select Files")),1)]),default:r(()=>[o(j9,{storageDriverModel:f(g),buckets:u.value,driver:V.route,onOnFileSelected:k[1]||(k[1]=(L,R)=>{S(L,R)}),multiple:e.isMultiple},null,8,["storageDriverModel","buckets","driver","multiple"]),F.value?(A(),_("span",aV,m(f(p)("File name must not exceed %s characters",160)),1)):x("",!0)]),_:2},1024),o(D,{name:"upload"},{label:r(()=>[i("div",sV,m(f(p)("Upload")),1)]),default:r(()=>[o(O9,{storageDriverModel:f(g),onOnUploaded:k[2]||(k[2]=(L,R,K)=>{C.value="list"}),driver:V.route,ref_for:!0,ref:V.route==="local"?l.value:""},null,8,["storageDriverModel","driver"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):x("",!0)]),f(g).drivers.length>0?(A(),_("div",nV,[o(Q,{onClick:k[5]||(k[5]=V=>n.value=!1),type:"info",soft:""},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(Q,{type:"primary",onClick:w,disabled:!y.value||F.value},{default:r(()=>[O(m(f(p)("Confirm")),1)]),_:1},8,["disabled"])])):x("",!0)]),_:1},8,["modelValue","title"])])}}},oV={class:"el-form el-form--default el-form--label-top"},lV={class:"m-0 mt-1"},rV={class:"m-0"},Dp={__name:"SingleFileForm",props:{product:Object,file:Object,index:Number,productDownloadableModel:Object,singleMode:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},setup(e){const t=e;return Ns(()=>{if(t.file&&typeof t.file.product_variation_id=="string")try{t.file.product_variation_id=JSON.parse(t.file.product_variation_id),t.file.product_variation_id=t.file.product_variation_id.map(a=>parseInt(a))}catch{}}),(a,s)=>{const n=b("el-option"),l=b("el-select"),d=b("el-form-item"),u=b("el-input");return A(),_("div",oV,[o(d,{label:a.$t("Choose variant"),class:"mb-2.5"},{default:r(()=>[o(l,{class:"",size:"small",modelValue:e.file.product_variation_id,"onUpdate:modelValue":s[0]||(s[0]=c=>e.file.product_variation_id=c),multiple:"",id:`downloadable_files.${e.index}.product_variation_id`,placeholder:a.$t("Keep empty for all"),"popper-class":"fct-choose-variant-popover","collapse-tags":"","collapse-tags-tooltip":""},{default:r(()=>[(A(!0),_(H,null,X(e.productDownloadableModel.generateVariantOptions(e.product),c=>(A(),U(n,{key:c.id,label:c.variation_title,value:c.id},{default:r(()=>[o(Ul,{variant:c},null,8,["variant"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","id","placeholder"]),o(st,{"validation-errors":e.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${e.index}.product_variation_id`},null,8,["validation-errors","field-key"])]),_:1},8,["label"]),e.isEditing||e.productDownloadableModel.insertableFiles.length===1?(A(),U(d,{key:0,class:"mb-2.5"},{default:r(()=>[o(Qp,{isMultiple:!e.singleMode,onOnFileSelected:s[1]||(s[1]=c=>{const h=e.index,v=c;v.value.forEach((y,g)=>{e.isEditing?(v.value[g].serial=h+1,v.value[g].settings.download_limit=e.productDownloadableModel.data.downloadableFiles[h].settings.download_limit,v.value[g].settings.download_expiry=e.productDownloadableModel.data.downloadableFiles[h].settings.download_expiry,v.value.length>1?(v.value[g].product_variation_id=e.productDownloadableModel.data.downloadableFiles[h].product_variation_id,e.file=v.value[g]):(v.value[g].product_variation_id=e.productDownloadableModel.data.downloadableFiles[h].product_variation_id,e.file.file_name=v.value[g].file_name,e.file.file_path=v.value[g].file_path,e.file.file_size=v.value[g].file_size,e.file.file_url=v.value[g].file_url,e.file.title=v.value[g].title,e.file.type=v.value[g].type,e.file.settings=v.value[g].settings)):(v.value[g].serial=h+1,v.value[g].settings.download_limit=e.productDownloadableModel.insertableFiles[h].settings.download_limit,v.value[g].settings.download_expiry=e.productDownloadableModel.insertableFiles[h].settings.download_expiry,v.value.length>1?(v.value[g].product_variation_id=e.productDownloadableModel.insertableFiles[h].product_variation_id,e.productDownloadableModel.insertableFiles[h+g]=v.value[g]):(v.value[g].product_variation_id=e.productDownloadableModel.insertableFiles[h].product_variation_id,e.productDownloadableModel.insertableFiles[h]=v.value[g]))})})},null,8,["isMultiple"]),o(st,{"validation-errors":e.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${e.index}.file_url`},null,8,["validation-errors","field-key"])]),_:1})):x("",!0),e.file.title?(A(),U(d,{key:1,class:"mb-2.5",label:a.$t("File Title")},{default:r(()=>[i("p",lV,m(e.file.title),1),x("",!0),o(st,{"validation-errors":e.productDownloadableModel.data.validationErrors,"field-key":`downloadable_files.${e.index}.title`},null,8,["validation-errors","field-key"])]),_:1},8,["label"])):x("",!0),e.file.driver?(A(),U(d,{key:2},{default:r(()=>[i("p",rV,m(f(p)("Driver: %s",e.file.driver)),1)]),_:1})):x("",!0)])}}},iV={key:0,class:"text-right"},AV={key:1,class:"px-6 py-3"},dV={class:"fct-product-download-inner-wrap flex flex-col gap-4"},uV={class:"rounded p-3 bg-gray-25 dark:bg-dark-500 relative"},cV={key:1},pV={__name:"ProductDownloadAddModal",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(e){const t=q(()=>window.innerWidth<=768?"90%":"34%");return(a,s)=>{const n=b("el-button"),l=b("el-drawer");return A(),_(H,null,[i("div",{class:oe(["add-download-btn",e.productDownloadableModel.hasVariationOption(e.product)?"px-6 py-3 border border-solid border-gray-divider border-x-0 border-b-0 dark:border-dark-400":""])},[e.productDownloadableModel.hasVariationOption(e.product)?(A(),_("div",iV,[o(n,{text:"",type:"primary",onClick:s[0]||(s[0]=()=>{e.productDownloadableModel.openAddModal()})},{default:r(()=>[o(z,{name:"Plus"}),O(" "+m(a.$t("Add")),1)]),_:1})])):(A(),_("div",AV,m(a.$t("No pricing added yet")),1))],2),o(l,{modelValue:e.productDownloadableModel.data.addModal.isModalOpen,"onUpdate:modelValue":s[4]||(s[4]=d=>e.productDownloadableModel.data.addModal.isModalOpen=d),size:t.value,onClose:s[5]||(s[5]=()=>{e.productDownloadableModel.clearInsertableFile()}),onOpen:s[6]||(s[6]=()=>{e.productDownloadableModel.addDummyInsertableFile()})},{header:r(()=>[o(Ge,{title:a.$t("Add Downloadable Asset(s)"),content:a.$t("Attach the WordPress-supported digital files that customers will receive after purchasing this product. If this downloadable file is only for a specific product variation (e.g., 'eBook Version' or 'Audiobook Version'), please select that variant. Otherwise, you may leave the 'Choose variant' field empty to make the file available for all variants of this product. Please note that any additional files added after any sell will be accessible to both existing and new orders."),placement:"bottom"},null,8,["title","content"])]),footer:r(()=>[i("div",null,[o(n,{onClick:s[2]||(s[2]=d=>e.productDownloadableModel.data.addModal.isModalOpen=!1)},{default:r(()=>[O(m(a.$t("Cancel")),1)]),_:1}),o(n,{type:"primary",onClick:s[3]||(s[3]=()=>{e.productDownloadableModel.attachInsertableFiles(e.product.ID)})},{default:r(()=>[O(m(a.$t("Save Asset")),1)]),_:1})])]),default:r(()=>[i("div",dV,[e.productDownloadableModel.insertableFiles.length?(A(!0),_(H,{key:0},X(e.productDownloadableModel.insertableFiles,(d,u)=>(A(),_("div",uV,[e.productDownloadableModel.insertableFiles.length>1?(A(),U(n,{key:0,onClick:c=>e.productDownloadableModel.deleteInsertableFile(u),size:"small",plain:"",class:"absolute right-2 top-2 p-0 border-none hover:text-red-500"},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])):x("",!0),o(Dp,{product:e.product,file:d,index:u,productDownloadableModel:e.productDownloadableModel},null,8,["product","file","index","productDownloadableModel"])]))),256)):x("",!0),e.productDownloadableModel.insertableFiles.length>1?(A(),_("div",cV,[o(Qp,{uploadBtnText:f(p)("Add More Files"),onOnFileSelected:s[1]||(s[1]=d=>{const u=e.productDownloadableModel.insertableFiles.length-1,c=d;c.value.forEach((h,v)=>{c.value[v].serial=u+1,c.value[v].settings.download_limit=e.productDownloadableModel.insertableFiles[u].settings.download_limit,c.value[v].settings.download_expiry=e.productDownloadableModel.insertableFiles[u].settings.download_expiry,c.value[v].product_variation_id=e.productDownloadableModel.insertableFiles[u].product_variation_id,e.productDownloadableModel.insertableFiles.push(c.value[v])})})},null,8,["uploadBtnText"])])):x("",!0),(A(!0),_(H,null,X(e.product.variants,(d,u)=>(A(),_("div",{key:u},[o(st,{"validation-errors":e.productDownloadableModel.data.validationErrors,"field-key":`variants.${u}.downloadable`},null,8,["validation-errors","field-key"])]))),128))])]),_:1},8,["modelValue","size"])],64)}}},fV={class:"fluent-cart-admin-pages"},hV={class:"fct-product-download-inner-wrap flex flex-col gap-4"},mV={class:"rounded p-3 bg-gray-25 dark:bg-dark-500"},_V={__name:"ProductDownloadEditModal",props:{product:Object,productDownloadable:Object,productEditModel:Object,productDownloadableModel:Object,index:Number|String},setup(e){const t=e,a=q(()=>window.innerWidth<=768?"90%":"40%"),s=T({...t.productDownloadable}),n=t.productDownloadableModel.data.editModal.states;return Ns(()=>{n[t.index]={},n[t.index].visible=!1}),(l,d)=>{const u=b("el-button"),c=b("el-drawer");return A(),_(H,null,[o(c,{"append-to-body":"",modelValue:f(n)[e.index].visible,"onUpdate:modelValue":d[1]||(d[1]=h=>f(n)[e.index].visible=h),size:a.value,title:f(p)("Edit Downloadable Asset"),onClose:d[2]||(d[2]=()=>{e.productDownloadableModel.closeEditModal(e.index)})},{footer:r(()=>[o(u,{type:"primary",loading:e.productDownloadableModel.saving,onClick:d[0]||(d[0]=()=>{e.productDownloadableModel.updateDownloadableFile()})},{default:r(()=>[O(m(e.productDownloadableModel.saving?f(p)("Updating"):f(p)("Update")),1)]),_:1},8,["loading"])]),default:r(()=>[i("div",fV,[i("div",hV,[i("div",mV,[o(Dp,{product:e.product,file:s.value,index:e.index,productDownloadableModel:e.productDownloadableModel,singleMode:!0,"is-editing":""},null,8,["product","file","index","productDownloadableModel"])])])])]),_:1},8,["modelValue","size","title"]),i("div",{class:"el-dropdown-menu__item w-full",onClick:d[3]||(d[3]=je(()=>{f(n)[e.index].visible=!0,e.productDownloadableModel.openEditModal(e.index,s.value)},["prevent"]))},[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)])],64)}}},gV={class:"fct-product-download-wrap"},vV={key:0,class:"fct-product-download-inner-wrap border border-x-0 border-b-0 border-solid border-gray-divider dark:border-dark-400"},yV={class:"fct-media-content-list"},bV={class:"product-thumbnail bg-gray-100 rounded flex items-center justify-center dark:bg-dark-500"},wV={class:"product-details"},CV={class:"product-details-content-row"},BV={class:"product-details-content-first"},kV={class:"product-title text-sm font-medium text-system-dark dark:text-gray-50"},FV={key:0,class:"font-normal text-system-mid"},xV={class:"product-variation-title inline-flex"},UV={key:1,class:"product-variation-title"},SV={class:"product-details-content-second"},EV={class:"more-btn"},QV={__name:"ProductDownload",props:{product:Object,productEditModel:Object,productDownloadableModel:Object},setup(e){const t=e,a=function(n){se.get(`products/getDownloadableUrl/${n.id}`).then(l=>{Vl.copy(l.url)}).catch(l=>{Y.error({title:p("Error"),message:p("Failed to copy file URL")})})},s=n=>{n.action==="copy-download-link"?a(n.data):n.action==="delete"&&t.productDownloadableModel.deleteDownloadableFile(n.data.id,n.idx)};return(n,l)=>{const d=b("el-switch"),u=b("el-popover"),c=b("el-dropdown-item"),h=b("el-dropdown-menu"),v=b("el-dropdown");return A(),_("div",gV,[o(re,null,{default:r(()=>{var y;return[o(Ae,{class:"pb-5"},{action:r(()=>[e.product.detail?(A(),U(d,{key:0,modelValue:e.product.detail.manage_downloadable,"onUpdate:modelValue":l[0]||(l[0]=g=>e.product.detail.manage_downloadable=g),"active-value":"1","inactive-value":"0","active-text":n.$t("Downloadable Asset(s)"),onChange:l[1]||(l[1]=g=>{(g.toString()==="0"||e.productDownloadableModel.hasDownloadableFiles())&&e.productEditModel.setHasChange(!0)})},null,8,["modelValue","active-text"])):x("",!0)]),_:1}),o(na,{visible:((y=e.product.detail)==null?void 0:y.manage_downloadable.toString())==="1",accordion:""},{default:r(()=>[o(le,{class:"p-0"},{default:r(()=>[e.productDownloadableModel.hasDownloadableFiles()?(A(),_("div",vV,[i("div",yV,[(A(!0),_(H,null,X(e.productDownloadableModel.downloadableFiles,(g,B)=>(A(),_("div",{class:"fct-media-content-list-item",key:B},[i("div",bV,m(g.type),1),i("div",wV,[i("div",CV,[i("div",BV,[i("div",kV,[O(m(g.title)+" ",1),g.driver!=="local"?(A(),_("span",FV," - "+m(g.driver),1)):x("",!0)]),e.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,e.product).length?(A(),U(u,{key:0,placement:"top",trigger:"hover",width:200},{reference:r(()=>[i("div",xV,"  "+m(e.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,e.product)),1)]),default:r(()=>[(A(!0),_(H,null,X(e.productDownloadableModel.getHiddenVariationNames(g.product_variation_id,e.product),(w,C)=>(A(),_("div",{style:{"margin-top":"4px"},key:C},m(w),1))),128))]),_:2},1024)):(A(),_("div",UV,"  "+m(e.productDownloadableModel.generateDownloadableVariationName(g.product_variation_id,e.product)),1))]),i("div",SV,[o(v,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",placement:"bottom-end",onCommand:s},{dropdown:r(()=>[o(h,null,{default:r(()=>[o(c,{class:"item-link"},{default:r(()=>[o(_V,{product:e.product,productDownloadableModel:e.productDownloadableModel,productEditModel:e.productEditModel,productDownloadable:g,index:B},null,8,["product","productDownloadableModel","productEditModel","productDownloadable","index"])]),_:2},1024),o(c,{command:{action:"copy-download-link",data:g}},{default:r(()=>[o(z,{name:"Copy"}),O(" "+m(f(p)("Copy Download Link")),1)]),_:2},1032,["command"]),o(c,{command:{action:"delete",data:g,idx:B},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",EV,[o(z,{name:"More"})])]),_:2},1024)])])])]))),128))])])):x("",!0),o(pV,{product:e.product,productEditModel:e.productEditModel,productDownloadableModel:e.productDownloadableModel},null,8,["product","productEditModel","productDownloadableModel"])]),_:1})]),_:1},8,["visible"])]}),_:1})])}}},DV={class:"fct-product-status-wrap"},IV={class:"fct-admin-summary-item-list"},$V={class:"fct-admin-summary-item"},TV={class:"fct-admin-summary-item-title"},MV={class:"fct-product-status-chosen-wrap",id:"fct-product-status-chosen-wrap"},VV={id:"fct-product-status-chosen-dropdown",class:"fct-product-status-chosen-dropdown"},LV={key:0,style:{"margin-top":"20px"}},OV={class:"title"},HV={key:1},RV={class:"text-sm text-gray-500 mt-4"},PV={class:"capitalize"},KV={key:1},NV={class:"fct-admin-summary-item"},GV={class:"fct-admin-summary-item-title flex items-center gap-1"},zV=["href"],jV={class:"fct-product-url-slug-container"},YV={class:"filter-popover-item fct-admin-summary-popover-item"},qV={class:"filter-popover-title"},WV={class:"filter-popover-input-group"},XV={class:"fct-product-url-label"},JV=["href"],ZV={class:"fct-product-url-slug"},eL={key:0,class:"fct-admin-summary-item"},tL={class:"fct-admin-summary-item-title"},aL={class:"fct-admin-summary-item-select"},sL={key:1,class:"fct-admin-summary-item"},nL={class:"fct-admin-summary-item-title"},oL={key:0,class:"fct-admin-summary-item-select"},lL={key:0,class:"mt-4 pt-4"},Zd={__name:"ProductStatus",props:{product:Object,productEditModel:Object},setup(e){const t=e,a=T(""),s=T(""),n=T(""),l=T(!1),d=p("Customize the product's URL ending. Remember, this will affect SEO and readability. The URL will be activated when publish. Check Google's %s Structure Best Practices.",'<a href="https://developers.google.com/search/docs/crawling-indexing/url-structure">'+p("URL")+"</a>"),u=()=>t.product.variants.filter(g=>g.created_at).length>0,c=y=>{t.productEditModel.onChangeInputField("post_status",y),(y==="draft"||y==="publish")&&(l.value=!1)},h=()=>p("Status controls the product's visibility on the public page and its purchasability. 'Publish' indicates that it is live and can be purchased, 'Draft' signifies that it is in private editing, and 'Schedule' means it will be publish on a specified date. 'Private' means,  Only visible to adminstrators but can be purchased via direct purchase link. The status can only be changed once pricing is set."),v={use_pricing_table:"no",group_pricing_by:"payment_type",sold_individually:"no"};return fe(()=>t.product.detail,y=>{y&&(!y.other_info||Object.keys(y.other_info).length===0)&&(t.product.detail.other_info={...v})},{immediate:!0}),he(()=>{a.value=window.location.protocol,s.value=window.location.hostname,n.value=`${a.value}//${s.value}`}),(y,g)=>{const B=b("el-radio"),w=b("el-radio-group"),C=b("el-date-picker"),F=b("el-button"),S=b("el-popover"),E=b("el-input"),k=b("el-option"),Q=b("el-select"),I=b("el-checkbox");return A(),_("div",DV,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>{var D,M;return[i("ul",IV,[i("li",$V,[i("span",TV,[o(Ge,{title:f(p)("Status"),content:h()},null,8,["title","content"])]),i("div",MV,[u()?(A(),U(S,{key:0,trigger:"click",placement:"bottom-end",width:"300","popper-class":"filter-popover"},{reference:r(()=>[u()?(A(),U(F,{key:0,id:"fct-product-status-toggle",type:"primary",class:"is-tertiary el-button--x-small"},{default:r(()=>[i("span",PV,m(e.product.post_status==="future"?f(p)("Scheduled"):e.product.post_status),1),o(z,{name:"ChevronUpDown"})]),_:1})):(A(),_("span",KV,m(f(rt).headline(e.product.post_status)),1))]),default:r(()=>[i("div",VV,[o(w,{class:"fct-radios-blocks",modelValue:e.product.post_status,"onUpdate:modelValue":g[0]||(g[0]=$=>e.product.post_status=$),onChange:c},{default:r(()=>[o(B,{value:"draft"},{default:r(()=>[O(m(f(p)("Draft")),1)]),_:1}),o(B,{value:"future"},{default:r(()=>[O(m(f(p)("Scheduled")),1)]),_:1}),o(B,{value:"private"},{default:r(()=>[O(m(f(p)("Private (Invisible except Admin)")),1)]),_:1}),o(B,{value:"publish"},{default:r(()=>[O(m(f(p)("Publish")),1)]),_:1})]),_:1},8,["modelValue"]),e.product.post_status==="future"?(A(),_("div",LV,[i("h3",OV,m(f(p)("Scheduled Date")),1),o(C,{clearable:!1,modelValue:e.product.post_date,"onUpdate:modelValue":g[1]||(g[1]=$=>e.product.post_date=$),type:"datetime",placeholder:f(p)("Schedule Date"),"value-format":"YYYY-MM-DDTHH:mm:ssZ",onChange:g[2]||(g[2]=$=>{e.productEditModel.onChangeInputField("post_date",$)})},null,8,["modelValue","placeholder"])])):e.product.post_status==="private"?(A(),_("div",HV,[i("p",RV,m(f(p)("Note: Private products are only visible to administrators but can be purchased via direct purchase link.")),1)])):x("",!0)])]),_:1})):x("",!0)])]),i("li",NV,[i("span",GV,[O(m(f(p)("URL Slug"))+" ",1),i("a",{href:e.product.view_url,class:"focus:outline-none focus:shadow-none",target:"_blank"},[o(z,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})],8,zV)]),i("div",jV,[o(S,{trigger:"click",placement:"bottom-end",width:"250","popper-class":"filter-popover"},{reference:r(()=>[o(F,{type:"primary",class:"is-tertiary el-button--x-small"},{default:r(()=>[i("span",null,m(e.product.post_name),1),o(z,{name:"ChevronUpDown"})]),_:1})]),default:r(()=>[i("div",YV,[i("h3",qV,m(f(p)("URL")),1),i("div",WV,[o(Ge,{title:f(p)("Permalink"),content:f(d),hideAfter:300},null,8,["title","content"]),o(E,{placeholder:f(p)("Slug"),type:"text",modelValue:e.product.post_name,"onUpdate:modelValue":g[3]||(g[3]=$=>e.product.post_name=$),onInput:g[4]||(g[4]=$=>{e.productEditModel.onChangeInputField("post_name",$)})},null,8,["placeholder","modelValue"])]),i("div",XV,m(f(p)("View Product")),1),i("a",{class:"fct-product-url-slug-wrap",target:"_blank",href:e.product.view_url,rel:"external noreferrer noopener"},[i("span",ZV,m(e.product.view_url),1),o(ma,{text:e.product.view_url,showMode:"basic_copy_btn",tooltipText:f(p)("Copy Link")},null,8,["text","tooltipText"])],8,JV)])]),_:1})])]),((D=e.product.detail)==null?void 0:D.variation_type)==="simple_variations"?(A(),_("li",eL,[i("span",tL,[o(Ge,{title:f(p)("Default Variant"),content:f(p)("Select the default variant that users will see pre-selected on the product page.")},null,8,["title","content"])]),i("div",aL,[o(Q,{class:"el-select--x-small",modelValue:e.product.detail.default_variation_id,"onUpdate:modelValue":g[5]||(g[5]=$=>e.product.detail.default_variation_id=$),placeholder:f(p)("Select Default Variant"),onChange:g[6]||(g[6]=$=>{e.productEditModel.onChangeInputField("default_variation_id",$)}),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(e.product.variants,$=>(A(),U(k,{key:$.id,label:$.variation_title,value:$.id.toString()},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])):x("",!0),((M=e.product.detail)==null?void 0:M.variation_type)==="simple_variations"?(A(),_("li",sL,[i("span",nL,[o(Ge,{title:f(p)("Group By"),content:f(p)("Organize product variations by repeat interval (Monthly, Yearly) or payment term (One time, Subscription).")},null,8,["title","content"])]),e.product.detail?(A(),_("div",oL,[o(Q,{class:"el-select--x-small",clearable:"",modelValue:e.product.detail.other_info.group_pricing_by,"onUpdate:modelValue":g[7]||(g[7]=$=>e.product.detail.other_info.group_pricing_by=$),placeholder:f(p)("Group by"),onChange:g[8]||(g[8]=$=>{e.productEditModel.onChangeInputField("group_pricing_by",$)})},{default:r(()=>[o(k,{label:f(p)("Payment Term"),value:"payment_type"},null,8,["label"]),o(k,{label:f(p)("Repeat Interval"),value:"repeat_interval"},null,8,["label"]),o(k,{label:f(p)("None"),value:"none"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])):x("",!0)])):x("",!0)]),e.product.detail?(A(),_("div",lL,[o(I,{onChange:g[9]||(g[9]=$=>{e.productEditModel.onChangeInputField("sold_individually",$)}),modelValue:e.product.detail.other_info.sold_individually,"onUpdate:modelValue":g[10]||(g[10]=$=>e.product.detail.other_info.sold_individually=$),"true-value":"yes","false-value":"no"},{default:r(()=>[O(m(f(p)("Limit purchases to 1 item per order")),1)]),_:1},8,["modelValue"])])):x("",!0)]}),_:1})]),_:1})])}}},rL={name:"Gallery",display:"Transition",components:{DynamicIcon:z,draggable:xl,MediaButton:Uu,IconButton:we,VueEasyLightbox:tp},props:{attachments:{type:Array,default:()=>[]},featured_image_id:{type:[String,Number,null],default:null}},data(){return{visible:!1,imageIndex:0,lightboxData:[],images:T([])}},emits:["removeImage","mediaUploaded","onMediaChange"],methods:{showLightbox(e){this.imageIndex=e,this.visible=!0},removeImageEvent(e){this.$emit("removeImage",e)},onMediaSelected(e){this.images=e.map(t=>({id:t.id,title:t.title,url:t.url})),this.$emit("mediaUploaded",this.images)},onMediaChange(e){this.$emit("onMediaChange",this.attachments)}},computed:{dragOptions(){return{animation:600}}},mounted(){this.attachments!==void 0&&this.attachments.map((e,t)=>{this.lightboxData.push(e.url)})},watch:{attachments:{handler:function(e,t){return this.lightboxData=[],Array.isArray(e)&&e.length>0&&e.map((a,s)=>{this.lightboxData.push(a.url)}),e},deep:!0}}},iL={class:"fct-gallery-wrap"},AL={key:0,class:"icon-move"},dL=["onClick"],uL=["src","alt"];function cL(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("IconButton"),c=b("el-tag"),h=b("MediaButton"),v=b("draggable"),y=b("VueEasyLightbox");return A(),_(H,null,[i("div",iL,[o(v,gt({class:"fct-gallery-drag-area",list:a.attachments,tag:"ul"},l.dragOptions,{draggable:".gallery-drag-item",onChange:l.onMediaChange}),{default:r(()=>[o(cf,{type:"transition",name:"flip-list"},{default:r(()=>[(A(!0),_(H,null,X(a.attachments,(g,B)=>(A(),_("li",{class:"gallery-drag-item",key:B},[o(u,{tag:"button",size:"tiny",onClick:je(w=>l.removeImageEvent(B),["prevent"]),title:e.$t("Delete media")},{default:r(()=>[o(d,{name:"Delete"})]),_:2},1032,["onClick","title"]),B!==0?(A(),_("div",AL,t[1]||(t[1]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"10",viewBox:"0 0 8 10",fill:"none"},[i("rect",{x:"0.333313",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"0.333313",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"0.333313",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5.00018",y:"3.6665",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"}),i("rect",{x:"5.00018",y:"7.3335",width:"2.66667",height:"2.66667",rx:"0.666667",fill:"white"})],-1)]))):x("",!0),B===0?(A(),U(c,{key:1,type:"primary"},{default:r(()=>[O(m(e.$t("Featured")),1)]),_:1})):x("",!0),i("div",{class:"gallery-drag-item-overlay",onClick:w=>l.showLightbox(B)},null,8,dL),i("img",{src:g.url,alt:g.title},null,8,uL)]))),128)),(A(),_("li",{class:oe(a.attachments.length<1?"is-full-media":""),key:a.attachments.length},[o(h,{icon:"GalleryAdd",title:a.attachments.length<1?e.$t("Add Media"):"",attachments:a.attachments,onOnMediaSelected:l.onMediaSelected,multiple:!0},null,8,["title","attachments","onOnMediaSelected"])],2))]),_:1})]),_:1},16,["list","onChange"])]),o(y,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:t[0]||(t[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"])],64)}const pL=be(rL,[["render",cL]]),fL={class:"fct-product-media-wrap"},hL={class:"fct-admin-summary-item"},eu={__name:"ProductMedia",props:{product:Object,productEditModel:Object},setup(e){return(t,a)=>(A(),_("div",fL,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[i("div",hL,[o(pL,{attachments:e.product.gallery,featured_image_id:e.product.featured_image_id,onMediaUploaded:a[0]||(a[0]=s=>{e.product.gallery=s,e.productEditModel.updateMedia("gallery",s)}),onRemoveImage:a[1]||(a[1]=s=>{e.product.gallery.splice(s,1),e.product.gallery=[...e.product.gallery],e.productEditModel.updateMedia("gallery",e.product.gallery)}),onOnMediaChange:a[2]||(a[2]=s=>{e.productEditModel.updateMedia("gallery",s)})},null,8,["attachments","featured_image_id"])])]),_:1})]),_:1})]))}},mL={class:"fct-term-input-item"},_L={class:"el-tag__content"},gL=["innerHTML"],vL=["innerHTML"],yL={class:"pt-1.5 text-right"},bL={class:"relative w-3 h-3"},wL={class:"fct-term-add-input-wrap"},CL={__name:"TermInput",props:{modelValue:Array,taxonomy:Object,product_id:Number},emits:["update:modelValue","onChanged"],setup(e,{emit:t}){Je().ctx;const a=e,s=t,n=T([]),l=T(!1),d=T(),u=T(""),c=T([]),h=T(""),v=T(!1);he(()=>{n.value=a.modelValue,c.value=a.taxonomy.terms,fe(()=>a.taxonomy.terms,(I,D)=>{c.value=I}),fe(()=>a.modelValue,(I,D)=>{v.value=!0,n.value=I})});const y=I=>{I.stopPropagation(),I.preventDefault(),F()},g=()=>{v.value&&se.post("products/sync-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,terms:n.value}).then(I=>{Y.success(I.message),s("update:modelValue",n.value)}).catch(I=>{var D;I.status_code=="422"?Y.validationErrors(I):Y.error((D=I.data)==null?void 0:D.message)}).finally(()=>{v.value=!1})},B=Wi.debounce(I=>{C(I)},1200),w=()=>{s("update:modelValue",n.value)},C=I=>{v.value=!1,se.post("products/delete-taxonomy-term/"+a.product_id,{taxonomy:a.taxonomy.name,term:I}).then(D=>{Ls(D.message),s("update:modelValue",n.value)}).catch(D=>{var M;D.status_code=="422"?Y.validationErrors(D):Y.error((M=D.data)==null?void 0:M.message)}).finally(()=>{v.value=!1})};[...n.value];const F=()=>{v.value=!0,se.post("products/add-product-terms",{term:{name:u.value,taxonomy:a.taxonomy.name,parent:h.value}}).then(I=>{l.value=!1,u.value="",I.term_ids.forEach(function(D,M){c.value.push({value:D,label:I.names[M]}),n.value.push(D)}),g()}).catch(I=>{})},S=()=>{l.value=!l.value,l.value&&de(()=>{d.value.focus()})},E={categories:"Category",types:"Type"};q(()=>{let I=a.taxonomy.label.replace(/product\s*/i,"").trim();return Object.keys(E).forEach(D=>{I.toLowerCase().includes(D)&&(I=I.replace(new RegExp(D,"i"),E[D]))}),I});const k=I=>{const D=n.value.indexOf(I);D>-1&&n.value.splice(D,1),v.value=!1,B(I)},Q=I=>{const D=M=>{for(const $ of M){if($.value==I)return $.label;if($.children&&$.children.length>0){const V=D($.children);if(V)return V}}return null};return D(c.value)};return(I,D)=>{const M=b("el-tag"),$=b("el-tree-select"),V=b("el-button"),L=b("el-input");return A(),_("div",mL,[o($,{modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=R=>n.value=R),data:c.value,multiple:"","render-after-expand":!1,"show-checkbox":"","check-strictly":"","check-on-click-node":"",onCheck:D[1]||(D[1]=()=>{v.value=!0}),onBlur:g,onChange:w,onRemoveTag:D[2]||(D[2]=R=>{v.value=!1,f(B)(R)})},{tag:r(()=>[(A(!0),_(H,null,X(n.value,(R,K)=>(A(),U(M,{key:K,closable:"",onClose:J=>k(R)},{default:r(()=>[i("span",_L,[i("span",{class:"el-select__tags-text",innerHTML:Q(R)},null,8,gL)])]),_:2},1032,["onClose"]))),128))]),default:r(({data:R})=>[i("span",{innerHTML:R.label},null,8,vL)]),_:1},8,["modelValue","data"]),i("div",yL,[o(V,{text:"",onClick:S,size:"small"},{default:r(()=>[i("span",bL,[o(na,{visible:l.value,fade:""},{default:r(()=>[o(z,{name:"Cross",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"]),o(na,{visible:!l.value,fade:""},{default:r(()=>[o(z,{name:"Plus",class:"absolute justify-center inset-0 w-full he-full"})]),_:1},8,["visible"])]),O(" "+m(f(p)("Add %s",a.taxonomy.labels.singular_name)),1)]),_:1})]),o(na,{visible:l.value,accordion:""},{default:r(()=>[i("div",wL,[o(L,{modelValue:u.value,"onUpdate:modelValue":D[3]||(D[3]=R=>u.value=R),ref_key:"inputRef",ref:d,onKeydown:Ma(y,["enter"])},null,8,["modelValue"]),o(V,{type:"info",plain:"",onClick:F,class:"el-button--x-small"},{default:r(()=>[O(m(f(p)("Add")),1)]),_:1})])]),_:1},8,["visible"])])}}},BL={class:"fct-product-simple-wrap"},kL={__name:"ProductTermTaxonomy",props:{product:Object,productEditModel:Object},setup(e){return(t,a)=>(A(),_("div",BL,[o(re,null,{default:r(()=>[o(Ae,{title:t.$t("Product Taxonomies"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[(A(!0),_(H,null,X(e.product.taxonomies,s=>(A(),_("div",{class:"fct-admin-summary-item",key:s.id},[i("h4",null,m(s.labels.name),1),o(CL,{product_id:e.product.ID,taxonomy:s,modelValue:e.product.product_terms[s.name],"onUpdate:modelValue":n=>e.product.product_terms[s.name]=n},null,8,["product_id","taxonomy","modelValue","onUpdate:modelValue"])]))),128))]),_:1})]),_:1})]))}};class FL extends Xt{constructor(){super(...arguments);me(this,"data",{downloadableFiles:{},sourceProduct:null,addModal:{files:[],isModalOpen:!1},editModal:{file:{},isCurrentlyEditing:!1,states:{},currentIndex:-1},validationErrors:{},saving:!1});me(this,"generateDownloadableVariationName",(a,s)=>{if(!a)return p("For all variants");let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{}else typeof a=="object"&&(n=Object.values(a));if(n.length===0)return p("For all variants");const l=s.variants.reduce((u,c)=>(u[c.id]=c.variation_title,u),{}),d=n.map(u=>l[u]).filter(Boolean);return d.length===0?"--":d.length===1?d[0]:`${d[0]} +${d.length-1}`});me(this,"deleteDownloadableFile",(a,s)=>{CA.ofDelete(p("Deleting this asset will break the download link in existing purchase emails. To update the file, edit the asset instead of deleting it.")).then(()=>{se.delete(`products/${a}/delete`).then(()=>{Y.success(p("Downloadable File Deleted Successfully")),this.downloadableFiles.splice(s,1)}).catch(n=>{Y.error(p("Failed To Delete"))})}).catch(()=>{})});me(this,"addDummyDownloadableFileForAllVariant",a=>{this.data.addModal.files=this.data.addModal.files.filter(s=>Object.values(s).every(n=>n!=null&&n!=="")),Object.values(this.generateVariantOptions(a)).forEach(s=>{s.id>0&&this.addDummyInsertableFile(s.id)})});me(this,"deleteInsertableFile",a=>{this.insertableFiles.splice(a,1)});me(this,"clearInsertableFile",()=>{this.data.addModal.files=[]});me(this,"attachInsertableFiles",a=>{se.post(`products/${a}/sync-downloadable-files`,{downloadable_files:this.insertableFiles}).then(s=>{this.setDownloadableFiles(s.downloadable_files),this.syncToSourceProduct(),this.closeAddModal(),Y.success(p("Variations Synced Successfully"))}).catch(s=>{s.status_code=="422"?this.setValidationError(s.data):Y.error(p("Please fill up all the fields"))})});me(this,"openAddModal",()=>{this.data.addModal.isModalOpen=!0});me(this,"closeAddModal",()=>{this.data.addModal.isModalOpen=!1,this.resetValidationError()});me(this,"openEditModal",(a,s)=>{this.data.editModal.isCurrentlyEditing=!0,this.data.editModal.states[a].visible=!0,this.data.editModal.states[a].file=s,this.data.editModal.currentIndex=a});me(this,"closeEditModal",a=>{this.data.editModal.isCurrentlyEditing=!1,this.data.editModal.states[a].visible=!1,this.data.editModal.states[a].file=null,this.data.editModal.currentIndex=-1,this.resetValidationError()});me(this,"isEditModalOpen",()=>this.data.editModal.isCurrentlyEditing===!0);me(this,"setValidationError",a=>{this.data.validationErrors=a});me(this,"hasValidationError",a=>this.data.validationErrors.hasOwnProperty(a));me(this,"clearValidationError",()=>{this.data.validationErrors={}});me(this,"deleteValidationError",a=>{this.data.validationErrors.hasOwnProperty(a)&&delete this.data.validationErrors[a]})}setDownloadableFiles(a,s=null){a=a.map(n=>{if(typeof n.settings=="string")try{n.settings=JSON.parse(n.settings)}catch{}return n}),this.data.downloadableFiles=a,s&&(this.data.sourceProduct=s)}syncToSourceProduct(){this.data.sourceProduct&&Array.isArray(this.data.downloadableFiles)&&(this.data.sourceProduct.downloadable_files=[...this.data.downloadableFiles])}get downloadableFiles(){return this.data.downloadableFiles}get saving(){return this.data.saving}setSaving(a){this.data.saving=a}hasDownloadableFiles(){return Array.isArray(this.data.downloadableFiles)&&this.data.downloadableFiles.length>0}getHiddenVariationNames(a,s){if(!a)return[];let n=[];if(typeof a=="string")try{n=JSON.parse(a)}catch{return[]}else typeof a=="object"&&(n=Object.values(a));const l=s.variants.reduce((u,c)=>(u[c.id]=c.variation_title,u),{});return n.map(u=>l[u]).filter(Boolean).slice(1)}generateVariantOptions(a){return[...a.variants.filter(n=>n.created_at)]}hasVariationOption(a){return Object.values(this.generateVariantOptions(a)).length>0}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",file_size:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}setInsertableFiles(a){this.data.addModal.files=a}get insertableFiles(){return this.data.addModal.files}addDummyInsertableFile(a=null){const s=this.downloadableFileSchema;a&&(s.product_variation_id=[a]),this.data.addModal.files.push(s)}getCurrentEditableIndex(){return this.data.editModal.currentIndex}getCurrentEditableFile(){var a;return((a=this.data.editModal.states[this.getCurrentEditableIndex()])==null?void 0:a.file)??null}updateDownloadableFile(){this.setSaving(!0);const a=this.getCurrentEditableFile(),s=this.getCurrentEditableIndex();if(!a||s<0){console.error(["File or Index is missing",a,s]);return}se.put("products/"+a.id+"/update",a).then(n=>{this.closeEditModal(s),Y.success(n.message),this.downloadableFiles[s]={...a},this.syncToSourceProduct()}).catch(n=>{n.hasOwnProperty("message")?Y.error(n.message):Y.error(p("Failed To Update"))}).finally(()=>{this.setSaving(!1)})}resetValidationError(){this.data.validationErrors={}}isAddModalOpen(){return this.data.addModal.isModalOpen}}function xL(){return FL.init()}const UL={class:"fct-product-simple-wrap"},SL={class:"flex items-center gap-1 justify-between w-full"},EL={class:"fct-shipping-class-select-wrap relative"},QL={class:"fct-select-option-with-leftright-value"},DL={class:"text-sm text-gray-500"},IL={class:"pt-1.5 text-right"},$L={key:0},TL={class:"mb-0 mt-2"},ML={__name:"ShippingClass",props:{product:Object,productEditModel:Object},setup(e){const t=e,a=T(ve.get(t,"product.detail.other_info.shipping_class")),s=T(),n=T(!1),l=T(!1),d=T([]),u=De.get("admin_url")+"settings/shipping/shipping_classes",c=(w="")=>{l.value=!0,d.value=[],se.get("shipping/classes",{search:w}).then(C=>{d.value=C.shipping_classes.data,v()}).finally(()=>{l.value=!1})},h=w=>{c(),w.id&&(a.value=w.id,t.productEditModel.onChangeInputField("shipping_class",a.value))},v=()=>{const w=ve.where(d.value,"id",a.value);s.value=ve.get(w,"0")},y=()=>{n.value=!0},g=()=>{a.value&&se.post("products/"+t.product.ID+"/shipping-class",{shipping_class:a.value}).then(w=>{Y.success(w.message)}).catch(w=>{var C;w.status_code=="422"?Y.validationErrors(w):Y.error((C=w.data)==null?void 0:C.message)})},B=()=>{se.post("products/"+t.product.ID+"/shipping-class/remove").then(w=>{Y.success(w.message)}).catch(w=>{var C;w.status_code=="422"?Y.validationErrors(w):Y.error((C=w.data)==null?void 0:C.message)})};return he(()=>{c()}),(w,C)=>{const F=b("el-option"),S=b("el-select"),E=b("el-button");return A(),_("div",UL,[o(re,null,{default:r(()=>[o(Ae,{border_bottom:""},{default:r(()=>[i("div",SL,[o(Ge,{title:f(p)("Shipping Class"),content:f(p)("Use a shipping class to group products with similar shipping requirements. This allows you to set specific shipping rates for different types of items, such as 'Bulky Items', 'Fragile Goods'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default shipping rates.")},null,8,["title","content"]),i("a",{href:u,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[o(z,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),o(le,null,{default:r(()=>[i("div",EL,[o(S,{modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=k=>a.value=k),remote:"",placeholder:f(p)("Search Shipping Class"),"remote-method":c,loading:l.value,filterable:"",clearable:"",onChange:g,onClear:B,"popper-class":"fct-shipping-class-select"},{default:r(()=>[(A(!0),_(H,null,X(d.value,k=>(A(),U(F,{key:k.id,label:k.name,value:k.id},{default:r(()=>[i("div",QL,[O(m(k.name)+" ",1),i("span",DL,m(k.type==="percentage"?k.cost+"%":f(Be).formatNumber(k.cost*100,!0)),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),i("div",IL,[o(E,{onClick:je(y,["stop"]),size:"small",text:""},{default:r(()=>[o(z,{name:"Plus",class:"w-3 h-3"}),O(" "+m(f(p)("Add Shipping Class")),1)]),_:1})])]),s.value?(A(),_("div",$L,[i("p",TL,m(f(p)("Cost: %s",s.value.type==="percentage"?s.value.cost+"%":f(Be).formatNumber(s.value.cost*100,!0))),1)])):x("",!0)]),_:1})]),_:1}),o(Kf,{modelValue:n.value,"onUpdate:modelValue":C[1]||(C[1]=k=>n.value=k),onSaved:h},null,8,["modelValue"])])}}},VL={class:"dialog-footer"},LL={__name:"TaxClassDrawer",props:{modelValue:{type:Boolean,required:!0},classData:{type:Object,default:null},initialData:{type:Object,default:()=>({title:"",description:"",priority:10,categories:[]})}},emits:["update:modelValue","saved","closed"],setup(e,{emit:t}){const a=e,s=t,n=T(null),l=T(!1),d=T(!1),u=T([]),c=T({...a.initialData}),h={title:[{required:!0,message:p("Please enter a tax class name"),trigger:"blur"}],priority:[{required:!0,message:p("Please enter a priority"),trigger:"blur"}]},v=q(()=>!!a.classData),y=q({get:()=>a.modelValue,set:F=>s("update:modelValue",F)});fe(()=>a.classData,F=>{var S,E;F?c.value={title:F.title||"",description:F.description||"",priority:((S=F.meta)==null?void 0:S.priority)||10,categories:((E=F.meta)==null?void 0:E.categories)||[]}:c.value={...a.initialData}},{immediate:!0,deep:!0});const g=()=>{u.value.length>0||(d.value=!0,se.get("products/fetch-term").then(F=>{u.value=F.taxonomies["product-categories"].terms}).catch(F=>{console.error("Error fetching product categories:",F),Y.error(p("Failed to fetch product categories"))}).finally(()=>{d.value=!1}))},B=()=>{n.value.validate(F=>{if(!F)return;l.value=!0;const S=v.value?"put":"post",E=v.value?`/tax/classes/${a.classData.id}`:"/tax/classes",k={title:c.value.title,description:c.value.description,priority:c.value.priority,categories:c.value.categories};se[S](E,k).then(Q=>{Y.success(Q.message),s("saved",Q.tax_class||Q),w()}).catch(Q=>{console.error("Error saving tax class:",Q),Y.error(p("Failed to save tax class"))}).finally(()=>{l.value=!1})})},w=()=>{s("update:modelValue",!1)},C=()=>{v.value||(c.value={title:"",description:"",priority:10,categories:[]}),s("closed")};return he(()=>{g()}),(F,S)=>{const E=b("el-input"),k=b("el-form-item"),Q=b("el-input-number"),I=b("el-option"),D=b("el-select"),M=b("el-form"),$=b("el-button"),V=b("el-drawer"),L=Qt("loading");return A(),U(V,{modelValue:y.value,"onUpdate:modelValue":S[4]||(S[4]=R=>y.value=R),title:v.value?f(p)("Edit Tax Class"):f(p)("Add Tax Class"),width:"500px","append-to-body":"","close-on-click-modal":!0,class:"fct-tax-class-drawer",onClosed:C},{footer:r(()=>[i("span",VL,[o($,{onClick:w},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o($,{type:"primary",onClick:B,loading:l.value},{default:r(()=>[O(m(v.value?f(p)("Update"):f(p)("Save")),1)]),_:1},8,["loading"])])]),default:r(()=>[o(M,{model:c.value,rules:h,ref_key:"formRef",ref:n,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(k,{prop:"title"},{label:r(()=>[o(Ge,{title:f(p)("Tax Class Name"),content:f(p)("Give the tax class a friendly name to help identify it when setting up tax rates for your products. For instance: Standard Rate, Reduced Rate, Zero Rate, and so on."),placement:"bottom"},null,8,["title","content"])]),default:r(()=>[o(E,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=R=>c.value.title=R),placeholder:f(p)("Enter tax class name")},null,8,["modelValue","placeholder"])]),_:1}),o(k,{prop:"description"},{label:r(()=>[o(Ge,{title:f(p)("Description"),content:f(p)("Enter a description for this tax class to help you and your team understand when to use it.")},null,8,["title","content"])]),default:r(()=>[o(E,{modelValue:c.value.description,"onUpdate:modelValue":S[1]||(S[1]=R=>c.value.description=R),type:"textarea",rows:3,placeholder:f(p)("Enter tax class description")},null,8,["modelValue","placeholder"])]),_:1}),o(k,{prop:"priority"},{label:r(()=>[o(Ge,{title:f(p)("Priority"),content:f(p)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first when multiple classes could apply to a product.")},null,8,["title","content"])]),default:r(()=>[o(Q,{modelValue:c.value.priority,"onUpdate:modelValue":S[2]||(S[2]=R=>c.value.priority=R),min:0,max:10,step:1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1}),o(k,{prop:"categories"},{label:r(()=>[o(Ge,{title:f(p)("Product Categories"),content:f(p)("Select the product categories that this tax class will be applied to. Leave empty to apply to all categories.")},null,8,["title","content"])]),default:r(()=>[pt((A(),U(D,{modelValue:c.value.categories,"onUpdate:modelValue":S[3]||(S[3]=R=>c.value.categories=R),filterable:"",multiple:"",placeholder:f(p)("Select Product Categories"),class:"w-full"},{default:r(()=>[(A(!0),_(H,null,X(u.value,R=>(A(),U(I,{key:R.value,label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[L,d.value]])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},OL={class:"fct-product-simple-wrap"},HL={class:"flex items-center gap-1 justify-between w-full"},RL={class:"fct-tax-class-select-wrap relative"},PL={class:"fct-select-option-with-leftright-value"},KL={class:"pt-1.5 text-right"},NL={key:0},GL={class:"mb-0 mt-2"},zL={__name:"TaxClass",props:{product:Object,productEditModel:Object},setup(e){const t=e,a=T(ve.get(t,"product.detail.other_info.tax_class")),s=T(),n=T(!1),l=T(!1),d=T([]),u=De.get("admin_url")+"settings/tax_settings",c=(w="")=>{l.value=!0,d.value=[],se.get("tax/classes",{search:w}).then(C=>{d.value=C.tax_classes,v()}).finally(()=>{l.value=!1})},h=w=>{c(),w.id&&(a.value=w.id,t.productEditModel.onChangeInputField("tax_class",a.value))},v=()=>{const w=ve.where(d.value,"id",a.value);s.value=ve.get(w,"0")},y=()=>{n.value=!0},g=()=>{a.value&&se.post("products/"+t.product.ID+"/tax-class",{tax_class:a.value}).then(w=>{Y.success(w.message),v()}).catch(w=>{var C;w.status_code=="422"?Y.validationErrors(w):Y.error((C=w.data)==null?void 0:C.message)})},B=()=>{se.post("products/"+t.product.ID+"/tax-class/remove").then(w=>{Y.success(w.message),v()}).catch(w=>{var C;w.status_code=="422"?Y.validationErrors(w):Y.error((C=w.data)==null?void 0:C.message)})};return he(()=>{c()}),(w,C)=>{const F=b("el-option"),S=b("el-select"),E=b("el-button");return A(),_("div",OL,[o(re,null,{default:r(()=>[o(Ae,{border_bottom:""},{default:r(()=>[i("div",HL,[o(Ge,{title:f(p)("Tax Class"),content:f(p)("Use a tax class to group products with similar tax treatment. This allows you to set specific tax rates for different types of items, such as 'Standard Rate', 'Reduced Rate', 'Zero Rate'. Select an existing class from the search box or click + Add to create a new one. If no class is assigned, the product will use your store's default tax rates.")},null,8,["title","content"]),i("a",{href:u,class:"focus:outline-none focus:shadow-none w-4 h-4 inline-flex items-center justify-center",target:"_blank"},[o(z,{name:"Redirect",class:"w-3 h-3 text-primary-500 dark:text-gray-200"})])])]),_:1}),o(le,null,{default:r(()=>[i("div",RL,[o(S,{modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=k=>a.value=k),remote:"",placeholder:f(p)("Search Tax Class"),"remote-method":c,loading:l.value,filterable:"",clearable:"",onChange:g,onClear:B,"popper-class":"fct-tax-class-select"},{default:r(()=>[(A(!0),_(H,null,X(d.value,k=>(A(),U(F,{key:k.id,label:k.title,value:k.id},{default:r(()=>[i("div",PL,m(k.title),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"]),i("div",KL,[o(E,{onClick:je(y,["stop"]),size:"small",text:""},{default:r(()=>[o(z,{name:"Plus",class:"w-3 h-3"}),O(" "+m(f(p)("Add Tax Class")),1)]),_:1})])]),s.value?(A(),_("div",NL,[i("p",GL,m(f(p)("Description: %s",s.value.description||f(p)("No description available"))),1)])):x("",!0)]),_:1})]),_:1}),o(LL,{modelValue:n.value,"onUpdate:modelValue":C[1]||(C[1]=k=>n.value=k),onSaved:h},null,8,["modelValue"])])}}},jL={key:0,class:"fct-product-inventory-wrap"},YL={class:"fct-product-inventory-inner-wrap hide-on-mobile"},qL={class:"space-x-5"},WL={key:0,class:"fct-variant-badge bg-white border border-solid border-gray-outline text-primary-500 rounded-xs dark:bg-primary-700 dark:text-gray-50 dark:border-primary-500"},XL={key:1},JL={class:"fct-card-header-title"},ZL={class:"fct-product-inventory-pro-text"},eO={class:"m-0"},tO={__name:"ProductBundleSelector",props:{product:Object,productEditModel:Object},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,s=De.get("app_config.isProActive"),n=T([]);he(()=>{a.productEditModel.addOnProductUpdatedListener("bundle",function(){u()}),u()});const l=(c,h)=>{se.post(`products/save-bundle-info/${c}`,{bundle_child_ids:h}).then(v=>{Y.success(p("Bundle info saved successfully"))}).catch(v=>{(v==null?void 0:v.status_code)=="422"?Y.validationErrors(v):Y.error(v==null?void 0:v.message)})},d=T(!0),u=()=>{d.value=!0,se.get(`products/get-bundle-info/${a.product.ID}`).then(c=>{n.value=c,d.value=!1})};return(c,h)=>{const v=b("el-table-column"),y=b("el-table");return f(s)?(A(),_("div",jL,[o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Map bundle items")},null,8,["title"]),o(na,{visible:!0,accordion:""},{default:r(()=>[o(le,{class:"px-0 pb-0"},{default:r(()=>[i("div",YL,[d.value?x("",!0):(A(),U(y,{key:0,data:n.value},{default:r(()=>[e.product.detail.variation_type==="simple_variations"?(A(),U(v,{key:0,label:f(p)("Title"),width:"140"},{default:r(g=>{var B;return[i("div",qL,[i("span",null,m(g.row.variation_title),1),((B=g.row.other_info)==null?void 0:B.payment_type)==="subscription"?(A(),_("span",WL,m(g.row.other_info.repeat_interval),1)):x("",!0)])]}),_:1},8,["label"])):x("",!0),o(v,{label:f(p)("Bundle Items"),width:"140"},{default:r(g=>[o(Iu,{modelValue:g.row.bundle_child_ids,"onUpdate:modelValue":B=>g.row.bundle_child_ids=B,is_multiple:!0,popoverClass:"fct-create-new-order-bump-modal-popover",onVisibleChange:B=>{B||l(g.row.id,g.row.bundle_child_ids)},scopes:["nonBundle"]},null,8,["modelValue","onUpdate:modelValue","onVisibleChange"])]),_:1},8,["label"])]),_:1},8,["data"]))])]),_:1})]),_:1})]),_:1})])):(A(),_("div",XL,[o(re,null,{default:r(()=>[o(Ae,{border_bottom:""},{title:r(()=>[i("h2",JL,[O(m(f(p)("Map bundle items"))+" ",1),o(z,{name:"Crown",class:"w-4 h-4 text-warning-500"})])]),_:1}),o(le,null,{default:r(()=>[i("div",ZL,[i("p",eO,m(f(p)("This feature is only available for pro version.")),1)])]),_:1})]),_:1})]))}}},aO={class:"fct-edit-product-wrapper fct-layout-width"},sO={class:"fct-btn-group sm"},nO={class:"hide-on-mobile"},oO={class:"show-on-mobile"},lO=["href"],rO={key:1,class:"single-page-body"},iO=["innerHTML"],AO={class:"fct-product-edit"},dO={class:"fct-product-main"},uO={class:"fct-show-on-tablet fct-product-publish-and-media-widgets el-form el-form--default el-form--label-top"},cO={class:"fct-product-aside"},pO={class:"el-form el-form--default el-form--label-top"},fO={key:2},hO={__name:"EditProduct",props:{product:Object,product_id:String,taxonomies:Object},setup(e){const t=e,a=T(),s=oM();let n=null;const l=xL();s.setProductDownloadableModel(l);const d=T(!1),u=B=>{var w,C;d.value=!1,s.setProduct(B),n=s.data.product,l.setDownloadableFiles(B.downloadable_files,B),n.gallery=((C=(w=n==null?void 0:n.detail)==null?void 0:w.gallery_image)==null?void 0:C.meta_value)??[],n.taxonomies=t.taxonomies,n.product_terms={},Object.keys(n.taxonomies).map(F=>{n.product_terms[F]=n[F]??[]}),d.value=!0};lM().onSave(()=>{var B;s.data.metaValue=(B=a.value)==null?void 0:B.getFormStates(),s.update()});const h=Ao();h.bind(["mod+s"],B=>{var w;B.preventDefault(),s.data.hasChange&&(l.isAddModalOpen()?l.attachInsertableFiles(t.product.ID):l.isEditModalOpen()?l.updateDownloadableFile():(s.data.metaValue=(w=a.value)==null?void 0:w.getFormStates(),s.update()))});const v=()=>{s.setHasChange(!0)},y=B=>{B==="delete"&&s.delete()};Li("triggerChange",v);const g=Ql("reload");return fe(()=>t.product,(B,w)=>{B!==w&&u(B)}),he(()=>{u(t.product),s.setReloader(g);const B=document.querySelector(".fct-admin-product-header");B&&document.querySelector("#fluent_cart_plugin_app").prepend(B),s.addOnProductUpdatedListener("formreset",function(){var w;(w=a.value)==null||w.resetForms()})}),gu(()=>{h.unbind("mod+s")}),(B,w)=>{const C=b("el-button"),F=b("el-dropdown-item"),S=b("el-dropdown-menu"),E=b("el-dropdown");return A(),_("div",aO,[(A(),U(Dl,{to:"#fct-admin-product-header-buttons"},[i("div",sO,[o(E,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:y},{dropdown:r(()=>[o(S,null,{default:r(()=>[o(F,{command:"preview",class:"item-link"},{default:r(()=>[i("a",{href:f(s).viewUrl(),target:"_blank"},[o(z,{name:"Eye"}),O(" "+m(f(p)("Preview")),1)],8,lO)]),_:1}),o(F,{command:"delete",class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:1})]),_:1})]),default:r(()=>[o(C,null,{default:r(()=>[i("span",nO,[O(m(f(p)("More Actions"))+" ",1),o(z,{name:"ChevronDown"})]),i("span",oO,[o(z,{name:"More"})])]),_:1})]),_:1})])])),d.value?(A(),U(wn,{key:0,isActive:f(s).data.hasChange?"is-active":"",loading:f(s).data.saving,onDiscard:f(s).discard,onSave:w[0]||(w[0]=()=>{var k;f(s).data.metaValue=(k=a.value)==null?void 0:k.getFormStates(),f(s).update()}),saveButtonText:f(p)("Update"),loadingText:f(p)("Updating"),"show-cmnd-icon":!0},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"])):x("",!0),d.value?(A(),_("div",rO,[f(s).shouldShowShippingMethodAlert()?(A(),U(ja,{key:0,class:"mb-3",type:"warning",icon:"InformationFill"},{default:r(()=>[i("span",{innerHTML:f(p)("This Product has physical variants. Please %s",'<a href="'+f(s).shippingSettingsUrl()+'" target="_blank">'+f(p)("Add Shipping")+"</a>")},null,8,iO)]),_:1})):x("",!0),f(s).isInDraft()?(A(),U(ja,{key:1,class:"mb-3",type:"warning",icon:"InformationFill",content:f(p)("This product is currently in draft and cannot be sold to customers. Please publish the product to make it available for purchase.")},null,8,["content"])):x("",!0),i("div",AO,[i("div",dO,[o(xM,{product:f(n),productEditModel:f(s),reload:f(g)},null,8,["product","productEditModel","reload"]),i("div",uO,[o(Zd,{product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"]),o(eu,{product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"])]),o(Y6,{product:f(n),productEditModel:f(s),productDownloadableModel:f(l)},null,8,["product","productEditModel","productDownloadableModel"]),o(b9,{product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"]),f(s).isBundleProduct()?(A(),U(tO,{key:0,product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"])):x("",!0),f(s).isBundleProduct()?x("",!0):(A(),U(QV,{key:1,product:f(n),productEditModel:f(s),productDownloadableModel:f(l)},null,8,["product","productEditModel","productDownloadableModel"]))]),i("div",cO,[i("div",pO,[o(Zd,{class:"fct-hide-on-tablet",product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"]),o(eu,{class:"fct-hide-on-tablet",product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"]),o(kL,{product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"]),f(s).hasPhysicalVariation()?(A(),U(ML,{key:0,product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"])):x("",!0),f(s).isTaxEnabled()?(A(),U(zL,{key:1,product:f(n),productEditModel:f(s)},null,8,["product","productEditModel"])):x("",!0),f(n)?(A(),_("div",fO,[o(kn,{ref_key:"dynamicTemplates",ref:a,filter:"single_product_page","widgets-query":{product_id:f(n).ID},data:{editableProduct:f(n)}},null,8,["widgets-query","data"])])):x("",!0)])])])])):x("",!0)])}}},mO={class:"fct-upgrade-path-drawer-content"},_O={class:"fct-form-group"},gO={class:"fct-form-group"},vO={class:"fct-form-group"},yO={class:"fct-form-group"},bO={__name:"AddModal",props:{pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,productId:{type:[Number,String]}},emits:["pathGenerated"],setup(e,{expose:t,emit:a}){const s=e,n=a,l=T(!1),d=()=>{l.value=!0},u={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},c=T({...u}),h=T({}),v=De.get("shop.currency_sign"),y=()=>{h.value={};const w={...c.value};(!Array.isArray(w.to_variants)||w.to_variants.length===0)&&(w.to_variants=[]),se.post(`products/${s.productId}/upgrade-path`,{...w}).then(C=>{Y.success(C.message),c.value={...u},l.value=!1,n("pathGenerated")}).catch(C=>{if(h.value=C,C.message)return Y.error(C.message)})},g=()=>c.value.from_variant?s.allVariants.filter(w=>{var C,F;return!((C=s.existingUpgradePathMap[c.value.from_variant])!=null&&C.includes(w.id)||(F=s.existingUpgradePathMap[c.value.from_variant])!=null&&F.includes(w.id.toString()))&&w.id!==c.value.from_variant}):[],B=w=>{let C=w==null?void 0:w.toString().replace(/^0+(?=\d)/,"");C===""&&(C="0"),parseInt(C)<0&&(C="0"),c.value.discount_amount=C};return t({openModal:d}),(w,C)=>{const F=b("el-option"),S=b("el-select"),E=b("el-checkbox"),k=b("el-input"),Q=b("el-button"),I=b("el-drawer");return A(),U(I,{title:f(p)("Add Upgrade Path"),modelValue:l.value,"onUpdate:modelValue":C[5]||(C[5]=D=>l.value=D),onClosed:C[6]||(C[6]=()=>{l.value=!1,c.value={...u}}),"append-to-body":"",class:oe(f(pe).isAdminBarEnabled()?"admin-bar-enable":""),"close-on-click-modal":!1},{footer:r(()=>[o(Q,{onClick:C[4]||(C[4]=D=>l.value=!1)},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(Q,{onClick:y,type:"primary"},{default:r(()=>[O(m(f(p)("Save")),1)]),_:1})]),default:r(()=>[i("div",mO,[i("div",_O,[i("label",null,m(f(p)("From Plan")),1),o(S,{modelValue:c.value.from_variant,"onUpdate:modelValue":C[0]||(C[0]=D=>c.value.from_variant=D),placeholder:f(p)("Select"),"popper-class":"fct-variation-select"},{default:r(()=>[(A(!0),_(H,null,X(e.pathOptions,D=>(A(),U(F,{key:D.id,label:D.variation_title,value:D.id,disabled:c.value.to_variants.includes(D.id)},{default:r(()=>[o(Ul,{variant:D},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","placeholder"]),h.value.hasOwnProperty("from_variant")?(A(),U(st,{key:0,"validation-errors":h.value,"field-key":"from_variant"},null,8,["validation-errors"])):x("",!0)]),i("div",gO,[i("label",null,m(f(p)("To Plan(s)")),1),o(S,{disabled:!c.value.from_variant,modelValue:c.value.to_variants,"onUpdate:modelValue":C[1]||(C[1]=D=>c.value.to_variants=D),multiple:"",placeholder:f(p)("Select"),clearable:"","popper-class":"fct-variation-select"},{default:r(()=>[(A(!0),_(H,null,X(g(),D=>(A(),U(F,{key:D.id,label:D.variation_title,value:D.id,disabled:D.id==c.value.from_variant},{default:r(()=>[o(Ul,{variant:D},null,8,["variant"])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue","placeholder"]),h.value.hasOwnProperty("to_variants")?(A(),U(st,{key:0,"validation-errors":h.value,"field-key":"to_variants"},null,8,["validation-errors"])):x("",!0)]),i("div",vO,[o(E,{"true-value":"1","false-value":"0",modelValue:c.value.is_prorate,"onUpdate:modelValue":C[2]||(C[2]=D=>c.value.is_prorate=D)},{default:r(()=>[O(m(f(p)("Prorate")),1)]),_:1},8,["modelValue"])]),i("div",yO,[i("label",null,m(f(p)("Discount Amount")),1),o(k,{modelValue:c.value.discount_amount,"onUpdate:modelValue":C[3]||(C[3]=D=>c.value.discount_amount=D),type:"number",min:0,onInput:B},{prepend:r(()=>[O(m(f(v)),1)]),_:1},8,["modelValue"]),h.value.hasOwnProperty("discount_amount")?(A(),U(st,{key:0,"validation-errors":h.value,"field-key":"discount_amount"},null,8,["validation-errors"])):x("",!0)])])]),_:1},8,["title","modelValue","class"])}}},wO={class:"fct-upgrade-path-drawer-content"},CO={class:"fct-form-group"},BO={class:"text"},kO={class:"fct-form-group"},FO={class:"fct-form-group"},xO={class:"fct-form-group"},tu={__name:"EditModal",props:{fromName:String,preSelectedFromVariant:{type:[String,Number]},preSelectedToVariants:{type:Array},preSelectedIsProrate:{type:[String,Number]},preSelectedDiscountAmount:{type:[String,Number]},pathOptions:Object,allVariants:Object,existingUpgradePathMap:Object,pathId:{type:[Number,String]}},emits:["pathGenerated"],setup(e,{emit:t}){const a=e,s=T({...a.existingUpgradePathMap}),n=t,l=T(!1),d={from_variant:"",to_variants:[],is_prorate:"0",discount_amount:"0"},u=T({...d}),c=T({}),h=()=>{c.value={};const B={...u.value};(!Array.isArray(B.to_variants)||B.to_variants.length===0)&&(B.to_variants=[]),se.post(`products/upgrade-path/${a.pathId}/update`,{...B}).then(w=>{Y.success(w.message),u.value={...d},l.value=!1,n("pathGenerated")}).catch(w=>{if(c.value=w,w.message)return Y.error(w.message)})},v=()=>u.value.from_variant?a.allVariants.filter(B=>{var w,C;return!((w=s[u.value.from_variant])!=null&&w.includes(B.id)||(C=s[u.value.from_variant])!=null&&C.includes(B.id.toString()))&&B.id.toString()!==u.value.from_variant.toString()}):[],y=()=>{u.value.from_variant=a.preSelectedFromVariant,u.value.is_prorate=a.preSelectedIsProrate,u.value.discount_amount=a.preSelectedDiscountAmount,u.value.to_variants=[];for(const B of a.preSelectedToVariants)u.value.to_variants.push(parseInt(B))},g=B=>{let w=B==null?void 0:B.toString().replace(/^0+(?=\d)/,"");w===""&&(w="0"),parseInt(w)<0&&(w="0"),u.value.discount_amount=w};return Ns(()=>{y()}),(B,w)=>{const C=b("el-option"),F=b("el-select"),S=b("el-checkbox"),E=b("el-input"),k=b("el-button"),Q=b("el-drawer");return A(),_(H,null,[o(we,{size:"x-small",tag:"button",onClick:w[0]||(w[0]=()=>{l.value=!0})},{default:r(()=>[o(z,{name:"Edit"})]),_:1}),o(Q,{modelValue:l.value,"onUpdate:modelValue":w[5]||(w[5]=I=>l.value=I),title:B.$t("Update Upgrade Path"),onClosed:w[6]||(w[6]=()=>{l.value=!1,u.value={...d}}),onOpen:y,"append-to-body":""},{footer:r(()=>[o(k,{onClick:w[4]||(w[4]=I=>l.value=!1),size:"small"},{default:r(()=>[O(m(B.$t("Cancel")),1)]),_:1}),o(k,{onClick:h,size:"small",type:"primary"},{default:r(()=>[O(m(B.$t("Update")),1)]),_:1})]),default:r(()=>[i("div",wO,[i("div",CO,[i("label",null,m(B.$t("From Plan")),1),i("div",BO,m(e.fromName),1)]),i("div",kO,[i("label",null,m(B.$t("To Plan(s)")),1),o(F,{disabled:!u.value.from_variant,modelValue:u.value.to_variants,"onUpdate:modelValue":w[1]||(w[1]=I=>u.value.to_variants=I),multiple:"",placeholder:"Select",clearable:""},{default:r(()=>[(A(!0),_(H,null,X(v(),I=>(A(),U(C,{key:I.id,label:I.variation_title,value:I.id,disabled:I.id==u.value.from_variant},null,8,["label","value","disabled"]))),128))]),_:1},8,["disabled","modelValue"]),c.value.hasOwnProperty("to_variants")?(A(),U(st,{key:0,"validation-errors":c.value,"field-key":"to_variants"},null,8,["validation-errors"])):x("",!0)]),i("div",FO,[o(S,{class:"m-2","true-value":"1","false-value":"0",modelValue:u.value.is_prorate,"onUpdate:modelValue":w[2]||(w[2]=I=>u.value.is_prorate=I)},{default:r(()=>[o(Ge,{class:"flex items-center",title:B.$t("Prorate"),content:`The prorated amount, based on the remaining days, will be credited to the new plan. Upgrading from one-time payment, the full amount will be credited.
          `},null,8,["title"])]),_:1},8,["modelValue"])]),i("div",xO,[i("label",null,m(B.$t("Discount Amount")),1),o(E,{modelValue:u.value.discount_amount,"onUpdate:modelValue":w[3]||(w[3]=I=>u.value.discount_amount=I),type:"number",min:"0",onInput:g},null,8,["modelValue"]),c.value.hasOwnProperty("discount_amount")?(A(),U(st,{key:0,"validation-errors":c.value,"field-key":"discount_amount"},null,8,["validation-errors"])):x("",!0)])])]),_:1},8,["modelValue","title"])],64)}}},UO={__name:"UpgradePathsLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton"),l=b("el-table-column"),d=b("el-table");return A(),U(d,{data:[1,2,3,4,5]},{default:r(()=>[o(l,{label:f(p)("From Plan"),prop:"object_id",width:300},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("To Plan"),width:200},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Discount Amount"),width:110},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Is Prorate"),width:100},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),o(l,{width:100},{default:r(()=>[o(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:r(()=>[o(s,{varient:"p",class:"w-3/5"})]),_:1})]),_:1})]),_:1})}}},SO={class:"fct-upgrade-paths-wrap fct-layout-width"},EO={class:"grid gap-1"},QO={class:"text-system-dark dark:text-gray-50"},DO={class:"text-xs text-system-mid dark:text-gray-300"},IO={class:"flex gap-1 flex-wrap"},$O={key:0},TO={key:1},MO={class:"fct-btn-group sm"},VO={key:2,class:"fct-upgrade-paths-mobile"},LO={class:"from-plan"},OO={class:"title"},HO={class:"plan-title"},RO={key:0,class:"plan-billing-summary"},PO={class:"to-plan"},KO={class:"title"},NO={class:"discount-amount"},GO={class:"title"},zO={key:0},jO={key:1},YO={class:"is-prorate"},qO={class:"title"},WO={class:"path-actions"},XO={class:"title"},JO={class:"fct-btn-group sm mt-3"},ZO={key:0,class:"py-6 text-center"},eH={key:1},tH={key:1,class:"border border-solid border-gray-divider mt-5 pt-5 border-x-0 border-b-0 dark:border-dark-400"},aH={key:2,class:"border border-solid border-gray-divider mt-5 border-x-0 border-b-0 dark:border-dark-400"},sH={__name:"UpgradePaths",props:{product:{type:Object,required:!0},product_id:{type:[String,Number],required:!0}},setup(e){const t=e,a=q(()=>ve.get(t.product,"detail.other_info.is_bundle_product")==="yes"),s=T(!1),n=T(null);T([]),T({status:"yes",paths:{}});const l=De.get("app_config.isProActive"),d=T([]),u=q(()=>t.product.variants.filter(F=>{var E;return(((E=B.value[F.id])==null?void 0:E.length)||0)<g.value-1})),c=F=>{h()},h=async()=>{s.value=!0,se.get(`products/${t.product_id}/upgrade-paths`).then(function(F){d.value=F.data,w()}).catch(function(F){console.log(F)}).finally(()=>{s.value=!1})},v=T({}),y=T({}),g=T(ve.get(t.product,"variants",[]).length),B=T({}),w=()=>{t.product.variants.entries().forEach(([F,S])=>{v.value[S.id]=S.variation_title,y.value[S.id]=S.other_info.billing_summary}),B.value={},d.value.forEach(F=>{B.value.hasOwnProperty(F.object_id)?(B.value[F.object_id]=[...B.value[F.object_id].concat([...F.meta_value.to_variants])],B.value[F.object_id]=[...new Set(B.value[F.object_id])]):B.value[F.object_id]=[...F.meta_value.to_variants]})},C=F=>{se.delete(`products/upgrade-path/${F}/delete`).then(function(S){h(),Y.success(S.message)}).catch(function(S){})};return he(()=>{h();const F=document.querySelector("#fct_admin_menu_holder .fct-admin-product-header");F&&document.querySelector("#fluent_cart_plugin_app").prepend(F)}),(F,S)=>{const E=b("el-table-column"),k=b("el-tag"),Q=b("el-table"),I=b("el-button");return A(),_(H,null,[i("div",SO,[o(f(re),null,{default:r(()=>[o(f(Ae),{title:f(p)("Upgrade Paths")},null,8,["title"]),f(l)&&!a.value?(A(),_(H,{key:0},[o(f(le),{class:"px-0 pb-0"},{default:r(()=>[s.value?(A(),U(UO,{key:0})):x("",!0),s.value?x("",!0):(A(),U(Q,{key:1,class:"hide-on-mobile",data:d.value},{empty:r(()=>[O(m(f(p)("Control available upgrade options and offer tailored discounts when moving between plans.")),1)]),default:r(()=>[o(E,{label:f(p)("From Plan"),prop:"object_id",width:300},{default:r(D=>[i("div",EO,[i("div",QO,m(f(ve).get(v.value,D.row.object_id,"")),1),i("div",DO,m(f(ve).get(y.value,D.row.object_id,"")),1)])]),_:1},8,["label"]),o(E,{label:f(p)("To Plan"),width:200},{default:r(D=>[i("div",IO,[(A(!0),_(H,null,X(f(ve).get(D.row,"meta_value.to_variants",[]),M=>(A(),_(H,{key:M},[f(ve).get(v.value,M)?(A(),U(k,{key:0},{default:r(()=>[O(m(f(ve).get(v.value,M)),1)]),_:2},1024)):x("",!0)],64))),128))])]),_:1},8,["label"]),o(E,{label:f(p)("Discount Amount"),width:110},{default:r(D=>[D.row.meta_value.discount_amount>0?(A(),_("span",$O,m(f(ve).get(D.row,"meta_value.discount_amount","0")),1)):(A(),_("span",TO,"--"))]),_:1},8,["label"]),o(E,{label:f(p)("Is Prorate"),width:100},{default:r(D=>[O(m(f(ve).get(D.row,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),_:1},8,["label"]),o(E,{width:100},{default:r(D=>[i("div",MO,[o(tu,{pathId:D.row.id,preSelectedToVariants:f(ve).get(D.row,"meta_value.to_variants",[]),preSelectedIsProrate:f(ve).get(D.row,"meta_value.is_prorate","0"),preSelectedDiscountAmount:f(ve).get(D.row,"meta_value.discount_amount","0"),pathOptions:u.value,"all-variants":e.product.variants,existingUpgradePathMap:B.value,fromName:f(ve).get(v.value,D.row.object_id,""),preSelectedFromVariant:D.row.object_id,onPathGenerated:c},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),o(we,{size:"x-small",tag:"button",outline:"",onClick:()=>C(D.row.id)},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),s.value?x("",!0):(A(),_("div",VO,[(A(!0),_(H,null,X(d.value,(D,M)=>(A(),_("div",{class:"fct-upgrade-paths-mobile-row",key:M},[i("div",LO,[i("div",OO,m(f(p)("From Plan"))+": ",1),i("div",null,[i("div",HO,m(f(ve).get(v.value,D.object_id,"")),1),f(ve).get(y.value,D.object_id,"")?(A(),_("div",RO,m(f(ve).get(y.value,D.object_id,"")),1)):x("",!0)])]),i("div",PO,[i("div",KO,m(f(p)("To Plan"))+": ",1),(A(!0),_(H,null,X(f(ve).get(D,"meta_value.to_variants",[]),$=>(A(),_(H,{key:$},[f(ve).get(v.value,$)?(A(),U(k,{key:0},{default:r(()=>[O(m(f(ve).get(v.value,$)),1)]),_:2},1024)):x("",!0)],64))),128))]),i("div",NO,[i("div",GO,m(f(p)("Discount Amount"))+": ",1),D.meta_value.discount_amount>0?(A(),_("span",zO,m(f(ve).get(D,"meta_value.discount_amount","0")),1)):(A(),_("span",jO,"--"))]),i("div",YO,[i("div",qO,m(f(p)("Is Prorate"))+": ",1),i("span",null,m(f(ve).get(D,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),i("div",WO,[i("div",XO,m(f(p)("Actions"))+": ",1),i("div",JO,[o(tu,{pathId:D.id,preSelectedToVariants:f(ve).get(D,"meta_value.to_variants",[]),preSelectedIsProrate:f(ve).get(D,"meta_value.is_prorate","0"),preSelectedDiscountAmount:f(ve).get(D,"meta_value.discount_amount","0"),pathOptions:u.value,"all-variants":e.product.variants,existingUpgradePathMap:B.value,fromName:f(ve).get(v.value,D.object_id,""),preSelectedFromVariant:D.object_id,onPathGenerated:c},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),o(we,{size:"x-small",tag:"button",outline:"",onClick:()=>C(D.id)},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128)),d.value.length==0?(A(),_("div",ZO,m(f(p)("No upgrade paths found.")),1)):x("",!0)]))]),_:1}),s.value?x("",!0):(A(),U(f(Ji),{key:0},{default:r(()=>[u.value.length?(A(),U(I,{key:0,text:"",onClick:S[0]||(S[0]=()=>{var D;return(D=n.value)==null?void 0:D.openModal()})},{default:r(()=>[o(z,{name:"Plus"}),O(" "+m(f(p)("Add Path")),1)]),_:1})):(A(),_("span",eH,m(f(p)("No more upgrade paths available")),1))]),_:1}))],64)):f(l)?a.value?(A(),_("div",aH,[o(Te,{icon:"Empty/WebPage",title:f(p)("Upgrade Paths Temporarily Unavailable for Bundle Products"),text:f(p)("Upgrade paths feature is temporarily disabled for bundle products. This feature will be enabled in a future update.")},null,8,["title","text"])])):x("",!0):(A(),_("div",tH,[o(Hi,{class:"py-7.5",title:f(p)("Get access to this feature by Upgrading to FluentCart Pro"),text:f(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]))]),_:1})]),a.value?x("",!0):(A(),U(bO,{key:0,productId:e.product.ID,onPathGenerated:c,ref_key:"addModalRef",ref:n,pathOptions:u.value,"all-variants":e.product.variants,existingUpgradePathMap:B.value},null,8,["productId","pathOptions","all-variants","existingUpgradePathMap"]))],64)}}},nH={name:"ProductIntegrations",props:["product","product_id"],components:{IconButton:we,Empty:Te,DynamicIcon:z,CardFooter:Ji,CardBody:le,CardHeader:Ae,CardContainer:re},data(){return{product_id:this.product_id,selectedIntegrationType:"",integrationLists:[],showIntegrationDialog:!1,feeds:[],available_integrations:{},all_module_config_url:{},totalActiveModules:0,loading:!1}},computed:{Str(){return rt},hasActiveModules(){return Object.values(this.available_integrations).some(e=>e.enabled)}},methods:{isEmpty:qi,fetchIntegrations(){this.loading=!0,this.$get(`products/${this.product_id}/integrations`).then(e=>{this.available_integrations=e.available_integrations,this.feeds=e.feeds,this.all_module_config_url=e.all_module_config_url}).catch(e=>{this.handleError(e.message||"Failed to load integrations")}).finally(()=>{this.loading=!1})},add(e){let t=this.available_integrations[e];if(!t.enabled){this.$confirm(t.configure_message,t.configure_title,{confirmButtonText:t.configure_button_text,cancelButtonText:"Cancel",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{window.location.href=t.global_configure_url});return}this.$router.push({name:"product_integration_feed_editor",params:{integration_id:0,integration_name:e}})},edit(e){this.$router.push({name:"product_integration_feed_editor",params:{integration_id:e.id,integration_name:e.provider}})},handleActive(e){let t={status:e.enabled,notification_id:e.id};this.$post(`products/${this.product_id}/integrations/feed/change-status`,t).then(a=>{this.handleSuccess(a.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})},remove(e,t){let a=t.$index,s={integration_id:e};this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`products/${this.product_id}/integrations/${e}`,s).then(n=>{this.handleSuccess(n.message),this.feeds.splice(a,1)}).catch(n=>console.log(n))}).catch(()=>{})},handleSuccess(e){this.$notify({type:"success",message:e,offset:40})},handleError(e){this.$notify({type:"error",message:e,offset:40})}},mounted(){this.fetchIntegrations();const e=document.querySelector("#fct_admin_menu_holder .fct-admin-product-header");e&&document.querySelector("#fluent_cart_plugin_app").prepend(e)}},oH={class:"fct-integration-settings fct-layout-width"},lH={key:0,class:"integration-actions"},rH={key:0,class:"fct-empty-integration-wrap px-4 text-center mx-auto mb-5 md:max-w-[600px]"},iH={class:"text-sm"},AH={key:1,class:"fct-integrations-table-wrap"},dH={class:"fct-integration-logo-wrap"},uH=["src","alt"],cH={class:"text-xs text-gray-700"},pH=["onClick"],fH={class:"fct-event-triggers"},hH={class:"fct-event-triggers"},mH={class:"fct-btn-group sm"},_H={class:"fct-integration-table-footer"},gH=["href"],vH={target:"_blank",rel:"noopener",href:"https://docs.fluentcart.com"};function yH(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-button"),c=b("el-dropdown-item"),h=b("el-dropdown-menu"),v=b("el-dropdown"),y=b("CardHeader"),g=b("el-skeleton"),B=b("el-switch"),w=b("el-table-column"),C=b("el-tag"),F=b("el-popover"),S=b("IconButton"),E=b("el-tooltip"),k=b("Empty"),Q=b("el-table"),I=b("CardBody"),D=b("CardContainer"),M=Qt("loading");return A(),_("div",oH,[o(D,null,{default:r(()=>[o(y,{title:e.$t("Product Integrations")},{action:r(()=>[l.hasActiveModules?(A(),_("div",lH,[o(v,{onCommand:l.add,trigger:"click","popper-class":"fct-dropdown"},{dropdown:r(()=>[o(h,null,{default:r(()=>[(A(!0),_(H,null,X(n.available_integrations,($,V)=>(A(),U(c,{key:V,command:V},{default:r(()=>[O(m($.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:r(()=>[o(u,{type:"info",plain:"",size:"small"},{default:r(()=>[O(m(e.$t("Add Integration"))+" ",1),o(d,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):x("",!0)]),_:1},8,["title"]),o(I,{class:"px-0 pb-0 pt-4"},{default:r(()=>[o(g,{class:"px-5 pb-5",loading:n.loading,animated:"",rows:6},null,8,["loading"]),n.loading?x("",!0):(A(),_(H,{key:0},[l.hasActiveModules?(A(),_("div",AH,[pt((A(),U(Q,{data:n.feeds},{empty:r(()=>[o(k,{icon:"Folder",text:e.$t("No Integrations Available.")},null,8,["text"])]),default:r(()=>[o(w,{label:e.$t("Status"),width:90},{default:r($=>[o(B,{"active-value":"yes","inactive-value":"no",onChange:V=>l.handleActive($.row),modelValue:$.row.enabled,"onUpdate:modelValue":V=>$.row.enabled=V},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),o(w,{width:160,label:e.$t("Integration")},{default:r($=>{var V,L;return[i("div",dH,[(V=n.available_integrations[$.row.provider])!=null&&V.logo?(A(),_("img",{key:0,style:{"min-width":"24px"},class:"fct-integration-logo",src:n.available_integrations[$.row.provider].logo,alt:$.row.provider},null,8,uH)):x("",!0),i("span",cH,m(((L=n.available_integrations[$.row.provider])==null?void 0:L.title)||$.row.provider),1)])]}),_:1},8,["label"]),o(w,{"min-width":150,label:e.$t("Title")},{default:r($=>[i("a",{class:"fct-action-link-btn",onClick:je(V=>l.edit($.row),["prevent"]),href:"#"},m($.row.name),9,pH)]),_:1},8,["label"]),o(w,{"min-width":150,label:e.$t("Triggers")},{default:r($=>[i("div",fH,[(A(!0),_(H,null,X(($.row.feed.event_trigger||[]).slice(0,2),(V,L)=>(A(),U(C,{key:V},{default:r(()=>[o(d,{name:"Trigger"}),O(" "+m(l.Str.headline(V)),1)]),_:2},1024))),128)),($.row.feed.event_trigger||[]).length>2?(A(),U(F,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:r(()=>[o(C,{type:"info"},{default:r(()=>[O(" +"+m(($.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:r(()=>[i("div",hH,[(A(!0),_(H,null,X(($.row.feed.event_trigger||[]).slice(2),(V,L)=>(A(),U(C,{key:V+L},{default:r(()=>[o(d,{name:"Trigger"}),O(" "+m(l.Str.headline(V)),1)]),_:2},1024))),128))])]),_:2},1024)):x("",!0)])]),_:1},8,["label"]),o(w,{width:90},{default:r($=>[i("div",mH,[o(E,{effect:"dark",content:e.$t("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(S,{tag:"button",onClick:V=>l.edit($.row),size:"x-small",hover:"primary"},{default:r(()=>[o(d,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),o(E,{effect:"dark",content:e.$t("Delete"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(S,{tag:"button",size:"x-small",onClick:V=>l.remove($.row.id,$),hover:"danger"},{default:r(()=>[o(d,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[M,n.loading]])])):(A(),_("div",rH,[i("p",iH,m(e.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),o(u,{tag:"a",type:"primary",href:n.all_module_config_url},{default:r(()=>[O(m(e.$t("Configure Modules")),1)]),_:1},8,["href"])])),i("div",_H,[i("a",{href:n.all_module_config_url},m(e.$t("Check Global Integration Settings")),9,gH),i("a",vH,m(e.$t("View Documentations")),1)])],64))]),_:1})]),_:1})])}const au=be(nH,[["render",yH]]),bH={name:"SingleIntegration",props:["product","product_id","integration_id","integration_type"],components:{CardFooter:Ji,CardBody:le,CardHeader:Ae,CardContainer:re},data(){return{integration_id:this.integration_id,product_id:this.product_id,integration_type:this.integration_type||"",saving:!1,formData:{values:{name:"",integrationName:this.integration_type||"",description:""},fields:{integrationName:{type:"select",label:"Integration Type",placeholder:"Select Integration",options:[]}}}}},methods:{saveIntegration(){if(!this.formData.values.name){this.$notify({type:"error",message:"Integration name is required",offset:40});return}this.saving=!0;const e=this.integration_id?`products/${this.product_id}/integrations/${this.integration_id}`:`products/${this.product_id}/integrations`,t=this.integration_id?"put":"post";this[`$${t}`](e,{integration:this.formData.values}).then(a=>{this.saving=!1,this.$notify({type:"success",message:a.message||"Integration saved successfully",offset:40}),this.$router.push({name:"ProductIntegrations",params:{product_id:this.product_id}})}).catch(a=>{console.log(a),this.saving=!1,this.$notify({type:"error",message:(a==null?void 0:a.message)||"Failed to save integration",offset:40})})},fetchIntegrationData(){if(!this.integration_id){this.fetchIntegrationType();return}this.$get(`products/${this.product_id}/integrations/${this.integration_id}`).then(e=>{e.integration&&(this.formData.values={...e.integration},this.integration_type=e.integration.integrationName,this.fetchIntegrationType())}).catch(e=>{this.$notify({type:"error",message:e.message||"Failed to load integration data",offset:40})})},fetchIntegrationType(){this.integration_type&&this.$get(`integration/settings?integration_name=${this.integration_type}`).then(e=>{e.settings_fields&&(this.formData.fields=e.settings_fields),Object.keys(this.formData.fields).forEach(t=>{this.formData.values[t]===void 0&&(this.formData.values[t]="")})}).catch(e=>{this.$notify({type:"error",message:e.message||"Failed to load integration fields",offset:40})})},compare(e,t,a){switch(t){case"=":return e===a;case"!=":return e!==a;default:return!0}},dependancyPass(e){if(e.dependency){const a=e.dependency.depends_on.split("/").reduce((s,n)=>s[n],this.formData.values);return this.compare(a,e.dependency.operator,e.dependency.value)}return!0}},mounted(){this.fetchIntegrationData()}},wH={class:"fct-integration-settings fct-layout-width"};function CH(e,t,a,s,n,l){const d=b("el-button"),u=b("CardHeader"),c=b("el-input"),h=b("el-form-item"),v=b("el-option"),y=b("el-select"),g=b("el-form"),B=b("CardBody"),w=b("CardContainer");return A(),_("div",wH,[o(w,null,{default:r(()=>[o(u,{border_bottom:"",title:n.integration_id?e.$t("Edit Integration"):e.$t("Add Integration")},{action:r(()=>[o(d,{onClick:l.saveIntegration,type:"primary",loading:n.saving},{default:r(()=>[O(m(e.$t("Save")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"]),o(B,null,{default:r(()=>[o(g,{"label-position":"top",model:n.formData.values,class:"integration-form"},{default:r(()=>[o(h,{label:e.$t("Integration Name"),required:""},{default:r(()=>[o(c,{modelValue:n.formData.values.name,"onUpdate:modelValue":t[0]||(t[0]=C=>n.formData.values.name=C),placeholder:"Enter a name for this integration"},null,8,["modelValue"])]),_:1},8,["label"]),n.integration_id?x("",!0):(A(),U(h,{key:0,label:e.$t("Integration Type")},{default:r(()=>[o(y,{modelValue:n.formData.values.integrationName,"onUpdate:modelValue":t[1]||(t[1]=C=>n.formData.values.integrationName=C),disabled:"",class:"fct-select"},{default:r(()=>[(A(!0),_(H,null,X(n.formData.fields.integrationName.options,C=>(A(),U(v,{key:C.value,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])),(A(!0),_(H,null,X(n.formData.fields,(C,F)=>(A(),_(H,{key:F},[F!=="integrationName"&&l.dependancyPass(C)?(A(),U(h,{key:0,label:C.label},{default:r(()=>[C.type==="text"?(A(),U(c,{key:0,modelValue:n.formData.values[F],"onUpdate:modelValue":S=>n.formData.values[F]=S,placeholder:C.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):C.type==="select"?(A(),U(y,{key:1,modelValue:n.formData.values[F],"onUpdate:modelValue":S=>n.formData.values[F]=S,placeholder:C.placeholder,class:"fct-select"},{default:r(()=>[(A(!0),_(H,null,X(C.options,S=>(A(),U(v,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):C.type==="textarea"?(A(),U(c,{key:2,type:"textarea",modelValue:n.formData.values[F],"onUpdate:modelValue":S=>n.formData.values[F]=S,placeholder:C.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):x("",!0)]),_:2},1032,["label"])):x("",!0)],64))),128))]),_:1},8,["model"])]),_:1})]),_:1})])}const BH=be(bH,[["render",CH],["__scopeId","data-v-b582f090"]]),kH={class:"setting-wrap"};const FH={class:"setting-wrap-inner"},xH={key:0,class:"fct-all-notification-table-wrap"},UH={class:"m-0 mb-1"},SH={class:"m-0"},EH={class:"m-0"},QH={class:"fct-all-notification-actions flex items-center gap-3"},DH={key:1,class:"text-gray-500 text-sm"},IH={class:"fct-btn-group sm"},$H={__name:"EmailNotificationSettings",setup(e){Je().ctx;const t=T(!0),a=T([]);Va(),oa();const s=()=>{t.value=!0,se.get("email-notification").then(u=>{a.value=Object.values(u.data)}).catch(u=>{}).finally(()=>{t.value=!1})},n=(u,c)=>{se.post("email-notification/enable-notification/"+c,{active:u}).then(h=>{Y.success(h.message)}).catch(h=>{var v;h.status_code=="422"?Y.validationErrors(h):Y.error((v=h.data)==null?void 0:v.message)}).finally(()=>{})},l=()=>{t.value=!0,se.post("email-notification/reset").then(u=>{a.value=Object.values(u.data),Y.success(u.message)}).catch(u=>{var c;u.status_code=="422"?Y.validationErrors(u):Y.error((c=u.data)==null?void 0:c.message)}).finally(()=>{t.value=!1})},d=T(!1);return he(()=>{s()}),(u,c)=>{const h=b("el-button"),v=b("el-popconfirm"),y=b("el-dialog"),g=b("el-skeleton"),B=b("el-table-column"),w=b("el-switch"),C=b("el-tooltip"),F=b("el-table");return A(),_("div",kH,[o(ea,{heading:f(p)("Notifications"),"show-save-button":!1},{action:r(()=>[x("",!0)]),_:1},8,["heading"]),i("div",FH,[o(y,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=S=>d.value=S),title:f(p)("Coming Soon"),width:"300"},{default:r(()=>[i("span",null,m(f(p)("Editing this email will be available later")),1)]),_:1},8,["modelValue","title"]),o(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Email Notifications")},null,8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[o(g,{class:"px-5 pb-5",loading:t.value,rows:5,animated:""},null,8,["loading"]),t.value?x("",!0):(A(),_("div",xH,[o(F,{data:a.value},{empty:r(()=>[o(Te,{icon:"Empty/EmailNotification","has-dark":!0,text:f(p)("No email notifications available! Please reactivate FluentCart!")},null,8,["text"])]),default:r(()=>[o(B,{prop:"title",label:f(p)("Notification Name"),width:"250"},{default:r(S=>[i("h4",UH,m(S.row.title),1),i("p",SH,m(S.row.description),1)]),_:1},8,["label"]),o(B,{prop:"recipient",label:f(p)("Recipient"),width:"100"},{default:r(S=>[i("p",EH,m(f(rt).headline(S.row.recipient)),1)]),_:1},8,["label"]),o(B,{label:f(p)("Enabled"),width:"80"},{default:r(S=>{var E,k;return[i("div",QH,[((E=S.row)==null?void 0:E.manage_toggle)!=="no"?(A(),U(w,{key:0,autocomplete:"rutjfkde",onChange:Q=>n(Q,S.row.name),modelValue:S.row.settings.active,"onUpdate:modelValue":Q=>S.row.settings.active=Q,"active-value":"yes","inactive-value":"no"},null,8,["onChange","modelValue","onUpdate:modelValue"])):x("",!0),((k=S.row)==null?void 0:k.manage_toggle)==="no"?(A(),_("span",DH,m(f(p)("Auto-enabled for offline payments")),1)):x("",!0),i("div",IH,[o(C,{effect:"dark",content:f(p)("Edit"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{to:{name:"email_notifications/edit",params:{name:S.row.name}},size:"x-small",hover:"primary"},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["to"])]),_:2},1032,["content"])])])]}),_:1},8,["label"])]),_:1},8,["data"])]))]),_:1})]),_:1})])])}}},TH={class:"setting-wrap fct-edit-email-notification-wrapper"},MH={class:"capitalize"},VH={class:"setting-wrap-inner"},LH={class:"grid gap-5"},OH={class:"mb-5"},HH={key:0,class:"setting-switcher"},RH={key:1,class:"setting-switcher text-system-mid text-sm dark:text-gray-300"},PH={class:"setting-save-action"},KH={__name:"EditEmailNotification",props:{name:{type:String,required:!0}},setup(e){const t=e,a=T(!1),s=T(!1),n=T(t.name),l=T({title:"",description:"",event:"",name:"",recipient:"",smartcode_groups:[],template_path:"",is_async:!1,settings:{active:"",is_default_body:"yes",email_body:"",subject:""}}),d=T({}),u=T(!1),c=y=>{l.value.settings.subject+=y},h=()=>{a.value=!0,se.get("email-notification/"+n.value).then(y=>{l.value=y.data,d.value=y.shortcodes}).catch(y=>{var g;y.status_code=="422"?Y.validationErrors(y):Y.error((g=y.data)==null?void 0:g.message)}).finally(()=>{a.value=!1})},v=()=>{s.value=!0,se.put("email-notification/"+n.value,l.value).then(y=>{Y.success(y.message)}).catch(y=>{var g;y.status_code=="422"?Y.validationErrors(y):Y.error((g=y.data)==null?void 0:g.message)}).finally(()=>{s.value=!1})};return he(()=>{h()}),(y,g)=>{var $;const B=b("el-breadcrumb-item"),w=b("el-breadcrumb"),C=b("el-skeleton-item"),F=b("el-skeleton"),S=b("el-switch"),E=b("el-input"),k=b("el-form-item"),Q=b("el-radio-button"),I=b("el-radio-group"),D=b("el-form"),M=b("el-button");return A(),_("div",TH,[o(ea,{loading:s.value,"loading-text":f(p)("Updating"),"save-button-text":f(p)("Update"),onOnSave:v},{heading:r(()=>[o(w,{class:"mb-0","separator-icon":f(la)},{default:r(()=>[o(B,{to:{path:"/settings/email_notifications"}},{default:r(()=>[O(m(y.$t("Email Notifications")),1)]),_:1}),o(B,null,{default:r(()=>[i("span",MH,m(l.value.title),1)]),_:1})]),_:1},8,["separator-icon"])]),_:1},8,["loading","loading-text","save-button-text"]),i("div",VH,[o(F,{loading:a.value,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:r(()=>[o(C,{variant:"h3",class:"w-[150px] mb-5"}),i("div",LH,[i("div",null,[o(C,{variant:"h3",class:"w-[50px] mb-3"}),o(C,{variant:"p"})]),i("div",null,[o(C,{variant:"h3",class:"w-[50px] mb-3"}),o(C,{variant:"p"})])])]),_:1},8,["loading"]),a.value?x("",!0):(A(),_(H,{key:0},[i("div",OH,[(($=l.value)==null?void 0:$.manage_toggle)!=="no"?(A(),_("div",HH,[o(S,{modelValue:l.value.settings.active,"onUpdate:modelValue":g[0]||(g[0]=V=>l.value.settings.active=V),"active-value":"yes","inactive-value":"no","active-text":f(p)("Enable this email notification!")},null,8,["modelValue","active-text"])])):(A(),_("div",RH,m(f(p)("Auto-enabled for offline payments")),1))]),o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(D,{"label-position":"top"},{default:r(()=>[o(k,{label:f(p)("Email Subject")},{default:r(()=>[o(E,{modelValue:l.value.settings.subject,"onUpdate:modelValue":g[1]||(g[1]=V=>l.value.settings.subject=V),class:oe({"is-focus":u.value}),onFocus:g[2]||(g[2]=V=>u.value=!0),onBlur:g[3]||(g[3]=V=>u.value=!1),label:f(p)("Email Subject")},{append:r(()=>[o(Eu,{data:d.value,onCommand:c,btnType:"info",btnSize:"small",plain:"",placement:"bottom"},{default:r(()=>[O(m(f(p)("Add ShortCodes")),1)]),_:1},8,["data"])]),_:1},8,["modelValue","class","label"])]),_:1},8,["label"]),o(k,{label:f(p)("Email Body Type")},{default:r(()=>[o(I,{modelValue:l.value.settings.is_default_body,"onUpdate:modelValue":g[4]||(g[4]=V=>l.value.settings.is_default_body=V)},{default:r(()=>[o(Q,{label:f(p)("Default Body"),value:"yes"},null,8,["label"]),o(Q,{label:f(p)("Customized Body"),value:"no"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),l.value.settings.is_default_body==="no"&&!a.value?(A(),U(k,{key:0,label:f(p)("Email Body")},{default:r(()=>[o(xs,{modelValue:l.value.settings.email_body,"onUpdate:modelValue":g[5]||(g[5]=V=>l.value.settings.email_body=V),"short-codes":d.value,emailTemplateEditor:!0,onUpdate:g[6]||(g[6]=V=>{l.value.settings.email_body=V})},null,8,["modelValue","short-codes"])]),_:1},8,["label"])):x("",!0)]),_:1})]),_:1})]),_:1})],64)),i("div",PH,[o(M,{onClick:v,type:"primary",disabled:s.value,loading:s.value},{default:r(()=>[O(m(s.value?f(p)("Updating"):f(p)("Update")),1)]),_:1},8,["disabled","loading"])])])])}}},NH={name:"StorageSettings",props:["settings"],components:{Badge:ut,CardBody:le,CardContainer:re,SettingsHeader:ea},data(){return{loading:!1,availableDrivers:[]}},methods:{translate:p,getBadgeTitle(e){return e===!0?"active":"inactive"},getLogo(e){return e},getStorageDrivers(){this.loading=!0,this.$get("settings/storage-drivers").then(e=>{this.availableDrivers=e.drivers}).catch(e=>{this.handleError(e)}).finally(()=>{this.loading=!1})}},mounted(){this.getStorageDrivers()}},GH={class:"setting-wrap"},zH={class:"setting-wrap-inner"},jH={key:0,class:"storage-setting-list fct-content-card-list"},YH=["src","alt"],qH={class:"fct-content-card-list-head"},WH={class:"title-wrap"},XH={class:"fct-content-card-list-content"},JH={class:"fct-content-card-list-action"};function ZH(e,t,a,s,n,l){const d=b("SettingsHeader"),u=b("el-skeleton"),c=b("Badge"),h=b("el-button"),v=b("CardBody"),y=b("CardContainer");return A(),_("div",GH,[o(d,{heading:l.translate("Storage Settings"),"show-save-button":!1},null,8,["heading"]),i("div",zH,[o(y,null,{default:r(()=>[o(v,null,{default:r(()=>[o(u,{loading:n.loading,animated:"",rows:6},null,8,["loading"]),n.loading?x("",!0):(A(),_("div",jH,[(A(!0),_(H,null,X(n.availableDrivers,(g,B)=>(A(),_("div",{class:"fct-content-card-list-item",key:B},[i("div",{class:oe(`fct-content-card-list-icon ${g.title.toLowerCase()}`)},[i("img",{src:l.getLogo(g.logo),alt:g.title},null,8,YH)],2),i("div",qH,[i("div",WH,[i("h6",null,m(g.title),1)]),o(c,{size:"small",status:g.status?"active":"info","hide-icon":!0},{default:r(()=>[O(m(e.$t(l.getBadgeTitle(g.status))),1)]),_:2},1032,["status"])]),i("div",XH,[i("p",null,m(g.description),1)]),i("div",JH,[o(h,{size:"small",onClick:()=>e.$router.push({name:g.route})},{default:r(()=>[O(m(e.$t("Manage")),1)]),_:2},1032,["onClick"])])]))),128))]))]),_:1})]),_:1})])])}const e7=be(NH,[["render",ZH]]),t7={class:"fct-setting-header"},a7={class:"fct-setting-header-action"},s7={class:"setting-wrap-inner"},n7={__name:"GlobalStorageComponents",setup(e){T({});const t=T({}),a=T(!1),s=T(!1);T(!1);const n=T("top"),l=T("");T([]);const d=T("");T(!1),T(!1),T(!1);const u=rA(),c=T({}),h=oa(),v=Gs(),y=()=>{s.value=!0,se.get("settings/storage-drivers/"+d.value).then(C=>{s.value=!1,u.setSchema(C.fields).setDefaults(C.settings).initForm()})},g=()=>{let C=u.values;a.value=!0,se.post("settings/storage-drivers",{settings:{...C},driver:d.value}).then(F=>{var S;t.value.is_active=(S=F.data)==null?void 0:S.is_active,Y.success(F.message||p("Storage Settings updated!")),u.values=F.data,F.data.shouldReload&&y()}).catch(F=>{var S;F.status_code=="422"?Y.validationErrors(F):Y.error((S=F.data)==null?void 0:S.message)}).finally(()=>{a.value=!1})},B=()=>{d.value=h.name,l.value=`settings/storage/${h.name}`},w=()=>{let C="";return h.meta.title?C=h.meta.title+" Settings":C=h.name.charAt(0).toUpperCase()+h.name.slice(1).toLowerCase()+" Settings",C};return fe(h,(C,F)=>{B(),y(),w()}),v.onSave(()=>{g()}),he(()=>{B(),y(),window.outerWidth<500&&(n.value="top")}),(C,F)=>{const S=b("el-breadcrumb-item"),E=b("el-breadcrumb"),k=b("el-button"),Q=b("el-skeleton");return A(),_("div",{class:oe(["setting-wrap",d.value])},[i("div",t7,[o(E,{class:"mb-0","separator-icon":f(la)},{default:r(()=>[o(S,{to:{name:"storage"}},{default:r(()=>[O(m(f(p)("Storage Providers")),1)]),_:1}),f(rt).headline(d.value)?(A(),U(S,{key:0},{default:r(()=>[O(m(f(rt).headline(d.value)),1)]),_:1})):x("",!0)]),_:1},8,["separator-icon"]),i("div",a7,[o(k,{type:"primary",onClick:g,loading:a.value,disabled:a.value||s.value,size:"small"},{default:r(()=>[O(m(f(p)("Save")),1)]),_:1},8,["loading","disabled"])])]),i("div",s7,[s.value?(A(),U(re,{key:0},{default:r(()=>[o(le,null,{default:r(()=>[o(Q,{loading:s.value,animated:"",rows:5},null,8,["loading"])]),_:1})]),_:1})):(A(),U(Jl,{key:1,form:f(u),showSubmitButton:!1,loading:a.value,onOnChange:F[0]||(F[0]=I=>{}),"validation-errors":c.value},null,8,["form","loading","validation-errors"]))])],2)}}},o7={class:"fluent-cart-admin-validation-error-wrapper `${fieldKey}`"},ns=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:{type:String,default:""}},setup(e){return(t,a)=>(A(),_("div",o7,[(A(!0),_(H,null,X(e.validationErrors,(s,n)=>(A(),_("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},m(s),1))),128))]))}}),l7=["innerHTML"],r7={class:"fct-select-template-wrap"},i7={class:"fct-select-template-wrap flex gap-2 flex-row"},A7={class:"setting-save-action"},d7={__name:"AddEmailNotification",setup(e){const t=Je().ctx,a=T(),s=T(!0),n=T(!1),l=T({}),d=T(),u=T([{label:"After Order Created",value:"fluent_cart/order_created"},{label:"After Order Updated",value:"fluent_cart/order_updated"},{label:"After Payment Paid",value:"fluent_cart/order_paid"},{label:"After User Created",value:"fluent_cart/user_created"},{label:"After Refund made",value:"fluent_cart/order_refunded"}]),c=T({}),h=T([{label:"Admin Email",value:"{wp.admin_email}"},{label:"Customer Email",value:"{order.customer.email}"},{label:"User Email",value:"{user.user_email}"}]);T(!0);const v=T({}),y=T({});Va(),oa();let g=null;const B=T([]),w=T([]),C=T({});Gs().onSave(()=>{Q(event)});const S=L=>{const R=L;t.$post("email-notification/getTemplate/",{template:R}).then(K=>{var J;l.value.content=K.data.content,(J=a.value)==null||J.setContent(l.value.content)}).catch(K=>{}).finally(()=>{s.value=!1})},E=()=>{var L;(L=a.value)==null||L.setContent("")},k=()=>{s.value=!0,t.$get("email-notification/get-short-codes").then(L=>{c.value=L.data.shortcodes,v.value=L.data.email_templates,y.value=Object.keys(L.data.buttons).map(R=>({[R]:L.data.buttons[R]}))}).catch(L=>{}).finally(()=>{s.value=!1})},Q=L=>{L.preventDefault(),C.value={},s.value=!0,t.$post("email-notification/create",l.value).then(R=>{t.handleSuccess(R)}).catch(R=>{var K;R.status_code=="422"?(Y.validationErrors(R),C.value=R.data):Y.error((K=R.data)==null?void 0:K.message)}).finally(()=>{s.value=!1})};T(!1);const I=()=>{n.value=!0,d.value=l.value.content};he(()=>{k()});const D=L=>{g=L},M=L=>{C.value&&C.value.hasOwnProperty(L)&&delete C.value[L]},$=()=>{l.value.to=B.value},V=()=>{l.value.from=w.value};return(L,R)=>{const K=b("el-dialog"),J=b("el-input"),W=b("el-form-item"),ae=b("el-option"),Z=b("el-select"),te=b("el-col"),ie=b("el-row"),P=b("el-tooltip"),j=b("el-button"),G=b("el-form");return A(),U(re,null,{default:r(()=>[o(Ae,{title:l.value.title?l.value.title:"Add Notification",title_size:"small",border_bottom:"",icon:"Message"},{action:r(()=>R[20]||(R[20]=[])),_:1},8,["title"]),o(le,null,{default:r(()=>[o(K,{modelValue:n.value,"onUpdate:modelValue":R[0]||(R[0]=N=>n.value=N),title:L.$t("Preview")},{default:r(()=>[i("div",{innerHTML:d.value},null,8,l7)]),_:1},8,["modelValue","title"]),o(G,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(W,{label:L.$t("Notification Name"),required:""},{default:r(()=>{var N,ee;return[o(J,{modelValue:l.value.title,"onUpdate:modelValue":R[1]||(R[1]=ne=>l.value.title=ne),onFocus:R[2]||(R[2]=ne=>M("title"))},null,8,["modelValue"]),o(ns,{"validation-errors":(ee=(N=C.value)==null?void 0:N.title)==null?void 0:ee.required},null,8,["validation-errors"])]}),_:1},8,["label"]),o(W,{label:L.$t("Select notification event"),required:""},{default:r(()=>{var N,ee;return[o(Z,{multiple:!0,modelValue:l.value.events,"onUpdate:modelValue":R[3]||(R[3]=ne=>l.value.events=ne),placeholder:L.$t("Select Events"),onFocus:R[4]||(R[4]=ne=>M("events")),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(u.value,ne=>(A(),U(ae,{key:ne.value,label:ne.label,value:ne.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(ns,{"validation-errors":(ee=(N=C.value)==null?void 0:N.events)==null?void 0:ee.required},null,8,["validation-errors"])]}),_:1},8,["label"]),o(ie,{gutter:15},{default:r(()=>[o(te,{lg:12},{default:r(()=>[o(W,{label:L.$t("Mail From:"),required:""},{default:r(()=>{var N,ee;return[o(J,{modelValue:l.value.from,"onUpdate:modelValue":R[7]||(R[7]=ne=>l.value.from=ne),onFocus:R[8]||(R[8]=ne=>M("from")),placeholder:L.$t("Select a Field or Type Custom Value")},{append:r(()=>[o(Z,{modelValue:w.value,"onUpdate:modelValue":R[5]||(R[5]=ne=>w.value=ne),onChange:R[6]||(R[6]=ne=>V()),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(h.value,ne=>(A(),U(ae,{key:ne.value,label:ne.label,value:ne.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"]),o(ns,{"validation-errors":(ee=(N=C.value)==null?void 0:N.from)==null?void 0:ee.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),o(te,{lg:12},{default:r(()=>[o(W,{label:L.$t("Send Mail To:"),required:""},{default:r(()=>{var N,ee;return[o(J,{modelValue:l.value.to,"onUpdate:modelValue":R[11]||(R[11]=ne=>l.value.to=ne),onFocus:R[12]||(R[12]=ne=>M("to"))},{append:r(()=>[o(Z,{modelValue:B.value,"onUpdate:modelValue":R[9]||(R[9]=ne=>B.value=ne),onChange:R[10]||(R[10]=ne=>$()),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(h.value,ne=>(A(),U(ae,{key:ne.value,label:ne.label,value:ne.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),o(ns,{"validation-errors":(ee=(N=C.value)==null?void 0:N.to)==null?void 0:ee.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})]),_:1}),o(W,{label:L.$t("Cc:")},{default:r(()=>[o(J,{modelValue:l.value.cc,"onUpdate:modelValue":R[13]||(R[13]=N=>l.value.cc=N)},null,8,["modelValue"])]),_:1},8,["label"]),o(W,{label:L.$t("Mail Subject:"),required:""},{default:r(()=>{var N,ee;return[o(J,{modelValue:l.value.subject,"onUpdate:modelValue":R[14]||(R[14]=ne=>l.value.subject=ne),onFocus:R[15]||(R[15]=ne=>M("subject"))},null,8,["modelValue"]),o(ns,{"validation-errors":(ee=(N=C.value)==null?void 0:N.subject)==null?void 0:ee.required},null,8,["validation-errors"])]}),_:1},8,["label"]),i("div",null,[o(xs,{ref_key:"wpEditor",ref:a,"short-codes":c.value,buttons:y.value,onOnEditorReady:D,onUpdate:R[18]||(R[18]=N=>{l.value.content=N}),modelValue:l.value.content,"onUpdate:modelValue":R[19]||(R[19]=N=>l.value.content=N)},{action:r(()=>[i("div",r7,[o(Z,{onChange:R[16]||(R[16]=N=>{var ee;(ee=a.value)==null||ee.setContent(N)}),placeholder:L.$t("Select button"),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(y.value,(N,ee)=>(A(),U(ae,{key:ee,label:Object.keys(N)[0],value:Object.values(N)[0]},null,8,["label","value"]))),128))]),_:1},8,["placeholder"])]),i("div",i7,[o(Z,{onChange:R[17]||(R[17]=N=>{S(N)}),placeholder:L.$t("Select template"),clearable:""},{default:r(()=>[(A(!0),_(H,null,X(v.value,(N,ee)=>(A(),U(ae,{key:ee,label:N.label,value:N.path},null,8,["label","value"]))),128))]),_:1},8,["placeholder"]),i("span",null,[o(P,{effect:"dark",content:L.$t("Reset Template"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{onClick:je(E,["prevent"]),tag:"button"},{default:r(()=>[o(z,{name:"Refresh"})]),_:1})]),_:1},8,["content"])])])]),preview_button:r(()=>[f(g)!==null?(A(),U(P,{key:0,effect:"dark",content:L.$t("Preview Template"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{onClick:je(I,["prevent"]),tag:"button"},{default:r(()=>[o(z,{name:"Eye"})]),_:1})]),_:1},8,["content"])):x("",!0)]),_:1},8,["short-codes","buttons","modelValue"])]),i("div",A7,[o(j,{onClick:Q,type:"primary",disabled:s.value,loading:s.value},{default:r(()=>[O(m(L.$t("Save Notification")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})}}};class u7 extends yn{getTabs(){return{all:p("All"),success:p("Success"),warning:p("Warning"),error:p("Error"),failed:p("Failed"),info:p("Info"),api:p("API Only")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Content",value:"content"},{label:"Date",value:"date"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Created At"),value:"created_at"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"activity"}parseResponse(t){return t.activities}getTableName(){return"log_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}}function c7(e){return u7.init(e)}const p7={class:"fct-table-mobile-wrap fct-logs-table-mobile-wrap"},f7={class:"fct-table-mobile-header"},h7={class:"fct-table-date-col"},m7={class:"mark-read-unread-wrap"},_7=["onClick","title"],g7=["onClick","title"],v7=["title"],y7={class:"fct-table-mobile-body"},b7={key:0,class:"fct-table-title-col"},w7={key:1,class:"fct-table-content-col"},C7={class:"fct-table-mobile-footer"},B7={class:"fct-table-mobile-footer-row"},k7={class:"fct-table-status-col"},F7={class:"title"},x7={class:"fct-table-module-col"},U7={class:"title"},S7={class:"value"},E7={key:0,class:"fct-table-actions-col"},Q7={class:"title"},D7={__name:"LogsTableMobile",props:{table:{type:Object}},emits:["changeStatus"],setup(e,{emit:t}){const a=t,s=(n,l)=>{a("changeStatus",n,l)};return(n,l)=>{const d=b("el-icon"),u=b("router-link");return A(),_("div",p7,[(A(!0),_(H,null,X(e.table.getTableData(),(c,h)=>(A(),_("div",{key:c.id,class:"fct-table-mobile-row"},[i("div",f7,[i("div",h7,[i("div",m7,[c.read_status!=="unread"?(A(),_("span",{key:0,onClick:v=>s(c,"unread"),title:f(p)("Mark as unread")},[o(d,null,{default:r(()=>[o(f(rl))]),_:1})],8,_7)):(A(),_("span",{key:1,onClick:v=>s(c,"read"),title:f(p)("Mark as read")},[o(d,null,{default:r(()=>[o(f(Tl))]),_:1})],8,g7))]),i("div",{title:f(p)("Logs ID: %s",c.id),class:"invoice-no"}," #"+m(c.id),9,v7),e.table.isColumnVisible("date")?(A(),_(H,{key:0},[l[0]||(l[0]=i("span",{class:"bullet"},"",-1)),o(Lt,{class:"date","date-time":c.created_at,"with-time":!0},null,8,["date-time"])],64)):x("",!0)])]),i("div",y7,[e.table.isColumnVisible("title")?(A(),_("div",b7,m(c.title),1)):x("",!0),e.table.isColumnVisible("content")?(A(),_("div",w7,m(c.content),1)):x("",!0)]),i("div",C7,[i("div",B7,[i("div",k7,[i("div",F7,m(f(p)("Status")),1),(A(),U(ut,{status:c.status,size:"small",key:c.id},null,8,["status"]))]),i("div",x7,[i("div",U7,m(f(p)("Module")),1),i("div",S7,m(c.module_name),1)]),e.table.isColumnVisible("actions")?(A(),_("div",E7,[i("div",Q7,m(f(p)("Actions")),1),o(u,{class:"value",to:{name:"view_order",params:{order_id:c.module_id}}},{default:r(()=>[O(m(f(p)("View Order")),1)]),_:2},1032,["to"])])):x("",!0)])])]))),128))])}}},I7={},$7={class:"px-4 py-3"},T7={class:"grid grid-cols-3 gap-5 mt-5"};function M7(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),U(s,{animated:""},{template:r(()=>[i("div",$7,[(A(),_(H,null,X(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",T7,[(A(),_(H,null,X(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const V7=be(I7,[["render",M7]]),L7={class:"table-cell"},O7={class:"table-cell"},H7={class:"table-cell"},R7={class:"table-cell"},P7={class:"table-cell"},K7={class:"table-cell"},N7={class:"table-cell"},G7={__name:"LogsLoader",props:{nextPageCount:{type:Number,default:0},logTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=Array.from({length:t.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=b("el-skeleton-item"),d=b("el-skeleton"),u=b("el-table-column"),c=b("el-table");return A(),U(c,{data:f(a),class:"w-full compact-table full-compact"},{default:r(()=>[o(u,{width:100,label:f(p)("ID")},{default:r(()=>[i("div",L7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),e.logTable.isColumnVisible("date")?(A(),U(u,{key:0,label:f(p)("Date"),width:120},{default:r(()=>[i("div",O7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),e.logTable.isColumnVisible("title")?(A(),U(u,{key:1,label:f(p)("Title"),width:200},{default:r(()=>[i("div",H7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),e.logTable.isColumnVisible("content")?(A(),U(u,{key:2,label:f(p)("Content"),width:200},{default:r(()=>[i("div",R7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:f(p)("Status"),width:100},{default:r(()=>[i("div",P7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),o(u,{label:f(p)("Module"),width:100},{default:r(()=>[i("div",K7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"]),e.logTable.isColumnVisible("actions")?(A(),U(u,{key:3,label:f(p)("Actions"),width:100},{default:r(()=>[i("div",N7,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},z7={class:"fct-all-logs-page fct-layout-width"},j7={key:1},Y7={class:"inline-flex items-center gap-1"},q7=["onClick","title"],W7=["onClick","title"],X7={__name:"Logs",setup(e){const t=Je().ctx,a=c7(),s=T([]),n=(l,d)=>{t.$put("activity/"+l.id+"/mark-read",{id:l.id,status:d}).then(u=>{s.value.find(c=>c.id===l.id).read_status=d,t.handleSuccess(u)}).catch(u=>{var c;u.status_code=="422"?Y.validationErrors(u):Y.error((c=u.data)==null?void 0:c.message)})};return a.onDataLoaded(function(){s.value=a.getTableData()}),(l,d)=>{const u=b("el-icon"),c=b("el-table-column"),h=b("el-button"),v=b("el-table");return A(),_("div",z7,[o(Ua,{title:f(p)("Logs")},null,8,["title"]),o(bn,{table:f(a),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:r(()=>[f(a).isLoading()?(A(),U(V7,{key:0})):x("",!0),f(a).isLoading()?x("",!0):(A(),U(D7,{key:1,table:f(a),onChangeStatus:n},null,8,["table"]))]),default:r(()=>[f(a).isLoading()?(A(),U(G7,{key:0,logTable:f(a),"next-page-count":f(a).nextPageCount},null,8,["logTable","next-page-count"])):(A(),_("div",j7,[o(v,{class:"w-full",data:f(a).getTableData()},{empty:r(()=>[o(Te,{icon:"Empty/ListView",text:f(p)("We could't find any logs matching your filter.")},null,8,["text"])]),default:r(()=>[o(c,{label:f(p)("ID"),width:100},{default:r(y=>[i("div",Y7,[y.row.read_status!=="unread"?(A(),_("span",{key:0,onClick:g=>n(y.row,"unread"),title:f(p)("Mark as unread"),class:"cursor-pointer"},[o(u,null,{default:r(()=>[o(f(rl))]),_:1})],8,q7)):(A(),_("span",{key:1,onClick:g=>n(y.row,"read"),title:f(p)("Mark as read"),class:"cursor-pointer"},[o(u,null,{default:r(()=>[o(f(Tl))]),_:1})],8,W7)),O(" #"+m(f(nt)(y.row.id)),1)])]),_:1},8,["label"]),f(a).isColumnVisible("date")?(A(),U(c,{key:0,label:f(p)("Date"),width:120},{default:r(y=>[o(Lt,{"date-time":y.row.created_at},null,8,["date-time"])]),_:1},8,["label"])):x("",!0),f(a).isColumnVisible("title")?(A(),U(c,{key:1,label:f(p)("Title"),width:200},{default:r(y=>[O(m(y.row.title),1)]),_:1},8,["label"])):x("",!0),f(a).isColumnVisible("content")?(A(),U(c,{key:2,label:f(p)("Content"),width:200},{default:r(y=>[O(m(y.row.content),1)]),_:1},8,["label"])):x("",!0),o(c,{label:f(p)("Status"),width:100},{default:r(y=>[(A(),U(ut,{status:y.row.status,size:"small",key:y.row.id},null,8,["status"]))]),_:1},8,["label"]),o(c,{label:f(p)("Module"),width:100},{default:r(y=>[O(m(y.row.module_name),1)]),_:1},8,["label"]),f(a).isColumnVisible("actions")?(A(),U(c,{key:3,label:f(p)("Actions"),width:100},{default:r(y=>[o(h,{tag:"router-link",class:"el-button--x-small",to:{name:"view_order",params:{order_id:y.row.module_id}}},{default:r(()=>[O(m(f(p)("View Order")),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])}}},J7=["title"],Z7={__name:"RemoveButton",props:{filterKey:{type:String,required:!0},itemId:{type:[String,Number],default:null}},emits:["remove"],setup(e,{emit:t}){const a=e,s=t,n=()=>{s("remove",{filterKey:a.filterKey,itemId:a.itemId})};return(l,d)=>(A(),_("button",{class:"fct-applied-filter-remove",onClick:n,title:l.$t("Remove")},[o(z,{name:"Close"})],8,J7))}},eR={__name:"StatusFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(e){const a=e.filterState;return(s,n)=>{const l=b("el-option"),d=b("el-select");return A(),U(d,{modelValue:f(a).data.selectedFilters[e.filterItemKey].value,"onUpdate:modelValue":n[0]||(n[0]=u=>f(a).data.selectedFilters[e.filterItemKey].value=u),placeholder:s.$t("Select Status"),filterable:"",onChange:f(a).applyFilterChange,"popper-class":"fct-dropdown-compact",size:"small"},{default:r(()=>[(A(!0),_(H,null,X(e.filterItem.options,u=>(A(),U(l,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])}}},Ip={__name:"DateRangeFilter",props:{modelValue:Array,type:{type:String,default:"daterange"},separator:{type:String,default:"-"},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},unlinkPanels:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom-end"},showArrow:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},filterState:{type:[Object]}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=e,s=t,n=a.filterState,l=T(null),d=q({get:()=>a.modelValue,set:v=>s("update:modelValue",v)}),u=q(()=>De.get("app_config.isProActive"));function c(v){s("change",v)}function h(){n.data.dateRange=[At.withTimezone(ke().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),At.withTimezone(ke().format("YYYY-MM-DD 23:59:59"))],s("change",n.data.dateRange)}return Ss(()=>{}),(v,y)=>{const g=b("el-date-picker"),B=Qt("translate-numbers");return A(),_("div",{class:oe(`fct-date-range-filter ${e.clearable?"is-clearable":""}`)},[pt(o(g,{ref_key:"datePickerRef",ref:l,modelValue:d.value,"onUpdate:modelValue":y[0]||(y[0]=w=>d.value=w),type:e.type,"range-separator":e.separator,"start-placeholder":e.startPlaceholder||f(p)("Start date"),"end-placeholder":e.endPlaceholder||f(p)("End date"),"unlink-panels":e.unlinkPanels,clearable:e.clearable,shortcuts:f(Su),onChange:c,placement:e.placement,disabled:e.disabled||!u.value},null,8,["modelValue","type","range-separator","start-placeholder","end-placeholder","unlink-panels","clearable","shortcuts","placement","disabled"]),[[B,"translate-numbers"]]),e.showArrow?(A(),U(z,{key:0,name:"ChevronDown",class:"fct-applied-filter-expand-icon"})):x("",!0),u.value&&e.clearable?(A(),U(z,{key:1,onClick:h,name:"CircleClose",class:"fct-applied-filter-clear-all"})):x("",!0)],2)}}},$p={__name:"CurrencyFilter",props:{modelValue:String,currencies:{type:Array,required:!0}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=e,s=t,n=q({get:()=>a.modelValue,set:d=>s("update:modelValue",d)}),l=d=>{s("change",d)};return(d,u)=>{const c=b("el-option"),h=b("el-select");return A(),U(h,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=v=>n.value=v),placeholder:d.$t("Select Currency"),filterable:"",onChange:l,"popper-class":"fct-dropdown-compact",size:"small"},{default:r(()=>[(A(!0),_(H,null,X(e.currencies,(v,y)=>(A(),U(c,{key:y,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},tR={__name:"ResetFilters",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>(A(),_("button",{onClick:n[0]||(n[0]=(...l)=>f(a).resetFilters&&f(a).resetFilters(...l)),class:"reset-filters-btn"},m(s.$t("Reset Filters")),1))}},aR={__name:"MultiselectFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(e){const t=e,a=t.filterState,s=q({get:()=>{var n;return((n=a.data.selectedFilters[t.filterItemKey])==null?void 0:n.value)??[]},set:n=>{a.setMultiSelectChange(t.filterItemKey,n)}});return(n,l)=>{const d=b("el-option"),u=b("el-select");return A(),U(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),placeholder:n.$t("Select Order Type"),multiple:"",filterable:"","popper-class":"fct-dropdown-compact fct-multi-select-filter",size:"small"},{default:r(()=>[(A(!0),_(H,null,X(e.filterItem.options,c=>(A(),U(d,{key:c.value,label:c.label,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},sR={class:"fct-compare-to-filter"},nR={class:"fct-applied-filter-label"},oR={class:"fct-applied-filter-actions"},lR={class:"fct-compare-to-select"},rR={class:"fct-compare-to-date"},iR={__name:"CompareToFilter",props:{filterState:{type:[Object]}},emits:["selectChange","dateChange"],setup(e,{emit:t}){const a=e,s=t,n=a.filterState,l=q({get:()=>{var c;return((c=n.data.selectedFilters.compareType)==null?void 0:c.value)??n.data.compareType},set:c=>{n.setCompareTypeChange(c),s("selectChange",c)}}),d=q({get:()=>{var c;return((c=n.data.selectedFilters.compareDate)==null?void 0:c.value)??n.data.compareDate},set:c=>{n.setCompareDateChange(c),s("dateChange",c)}}),u=q(()=>De.get("app_config.isProActive"));return(c,h)=>{const v=b("el-option"),y=b("el-select"),g=b("el-date-picker");return A(),_("div",sR,[i("div",nR,m(f(p)("Compare to")),1),i("div",oR,[i("div",lR,[o(y,{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=B=>l.value=B),"popper-class":"fct-dropdown-compact",disabled:!u.value},{default:r(()=>[o(v,{label:f(p)("Previous Period"),value:"previous_period"},null,8,["label"]),o(v,{label:f(p)("Previous Month"),value:"previous_month"},null,8,["label"]),o(v,{label:f(p)("Previous Quarter"),value:"previous_quarter"},null,8,["label"]),o(v,{label:f(p)("Previous Year"),value:"previous_year"},null,8,["label"]),o(v,{label:f(p)("Custom"),value:"custom"},null,8,["label"]),o(v,{label:f(p)("No Comparison"),value:"no_comparison"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),i("div",rR,[l.value==="custom"?(A(),U(g,{key:0,modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=B=>d.value=B),type:"date",size:"small",placeholder:f(p)("Select Date")},null,8,["modelValue","placeholder"])):x("",!0)])])])}}},AR={style:{"flex-wrap":"wrap","row-gap":"4px",display:"flex","align-items":"center"}},dR={key:0},Tp={__name:"TreeSelectFilter",props:{filterState:{type:Object,required:!0}},setup(e){const a=e.filterState,s=T([]),n=T([]),l=T(!1),d=Je().ctx,u=g=>{const B=ze.get("product_variations");if(B&&(s.value=B),s.value.length&&!g){n.value=[...s.value];return}if(g&&s.value.length){n.value=s.value.filter(w=>w.label.toLowerCase().includes(g.toLowerCase()));return}l.value=!0,d.$get("products/searchVariantByName",{name:g}).then(w=>{s.value=w,n.value=w,ze.set("product_variations",w)}).catch(()=>{}).finally(()=>{l.value=!1})},c=(g,B)=>{const w=B.checkedNodes||[];a.setTreeSelectItem(w)},h=g=>{a.removeTreeSelectItem(g)},v=()=>{a.clearTreeSelect()},y=q(()=>{let g={},B={};n.value.forEach(C=>{g[C.label]=C.children,C.children.forEach(F=>{B[F.value]={productName:C.label,variationName:F.label}})});let w={};return a.data.variation_ids.forEach(C=>{if(B[C]){let F=B[C];w[F.productName]||(w[F.productName]=[]),w[F.productName].push(F.variationName)}else w.Unknown||(w.Unknown=[]),w.Unknown.push(C)}),Object.keys(w).forEach(C=>{var F;w[C].length===((F=g[C])==null?void 0:F.length)&&(w[C]=[])}),w});return he(()=>{const g=a.retrieveSavedReportFilters();g&&g.variation_ids&&(a.data.variation_ids=g.variation_ids),u("")}),(g,B)=>{const w=b("el-tag"),C=b("el-tree-select");return A(),U(C,{placeholder:g.$t("Select Products"),modelValue:f(a).data.variation_ids,"onUpdate:modelValue":B[0]||(B[0]=F=>f(a).data.variation_ids=F),data:n.value,"filter-method":f(Wi).debounce(u),filterable:"","show-checkbox":"",multiple:"",clearable:"",loading:l.value,onCheck:c,"popper-class":"fct-tooltip-long",onRemoveTag:h,onClear:v,size:"small"},{tag:r(()=>[i("div",AR,[(A(!0),_(H,null,X(y.value,(F,S)=>(A(),U(w,{style:{"margin-right":"4px"}},{default:r(()=>[O(m(S)+" ",1),F.length?(A(),_("span",dR," | "+m(F.join(", ")),1)):x("",!0)]),_:2},1024))),256))])]),_:1},8,["placeholder","modelValue","data","filter-method","loading"])}}},uR={class:"fct-applied-filters-wrap"},cR={class:"fct-applied-filter-list"},pR={class:"fct-applied-filter fct-applied-filter-date"},fR={class:"fct-applied-filter-label"},hR={class:"fct-applied-filter-value"},mR={key:0,class:"fct-applied-filter fct-applied-filter-compare-to"},_R={class:"fct-applied-filter-label"},gR={class:"fct-applied-filter-value"},vR={key:2,class:"fct-applied-filter-clear-wrap"},yR={__name:"AppliedFilters",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState,s=oa(),n=({filterKey:c,itemId:h})=>{a.removeFilter(c,h)},l=c=>!(["dateRange","compareType","compareDate"].includes(c)||s.name==="reports_customer"),d=q(()=>["reports_revenue","reports_subscriptions","reports_products","reports_customer","reports_sales","reports_orders","reports_refunds","reports_sources"].includes(s.name)),u=q(()=>Object.keys(a.data.selectedFilters).filter(c=>!(c==="orderTypes"&&s.name==="reports_subscriptions")).reduce((c,h)=>(c[h]=a.data.selectedFilters[h],c),{}));return fe(a.data.dateRange,c=>{console.log("dateRange changed:",c)}),(c,h)=>(A(),_("div",uR,[i("ul",cR,[i("li",pR,[i("div",fR,m(c.$t("Date:")),1),i("div",hR,[o(Ip,{modelValue:f(a).data.dateRange,"onUpdate:modelValue":h[0]||(h[0]=v=>f(a).data.dateRange=v),placement:"bottom-start",reRenderDate:f(a).data.reRenderDate,showArrow:!0,size:"small",onChange:f(a).setDateRange,clearable:"",filterState:f(a)},null,8,["modelValue","reRenderDate","onChange","filterState"])])]),d.value?(A(),_("li",mR,[o(iR,{filterState:f(a)},null,8,["filterState"])])):x("",!0),Object.keys(u.value).length?(A(!0),_(H,{key:1},X(u.value,(v,y)=>(A(),_(H,{key:y},[l(y)?(A(),_("li",{key:0,class:oe(`fct-applied-filter ${y==="variation_ids"?"fct-applied-filter-variation":""} ${y==="orderTypes"?"fct-applied-filter-order-types":""}`)},[i("div",_R,m(v.label)+":",1),i("div",gR,[v.type==="list"?(A(),U(eR,{key:0,"filter-state":f(a),"filter-item":v,"filter-item-key":y},null,8,["filter-state","filter-item","filter-item-key"])):x("",!0),v.type==="multi-list"?(A(),U(aR,{key:1,"filter-state":f(a),"filter-item":v,"filter-item-key":y},null,8,["filter-state","filter-item","filter-item-key"])):y==="variation_ids"?(A(),U(Tp,{key:2,"filter-state":f(a)},null,8,["filter-state"])):y==="currency"?(A(),U($p,{key:3,modelValue:f(a).data.currency,"onUpdate:modelValue":h[1]||(h[1]=g=>f(a).data.currency=g),currencies:f(a).currencies,onChange:g=>{f(a).setSelectChange(g,{...v,value:y})}},null,8,["modelValue","currencies","onChange"])):x("",!0)]),y!=="variation_ids"?(A(),U(Z7,{key:0,filterKey:y,itemId:y==="variation_ids"?v.value[0].id:null,onRemove:n},null,8,["filterKey","itemId"])):x("",!0)],2)):x("",!0)],64))),128)):x("",!0),Object.keys(u.value).length?(A(),_("li",vR,[o(tR,{"filter-state":f(a)},null,8,["filter-state"])])):x("",!0)])]))}},bR={class:"fct-filter-dropdown-header"},wR={key:0,class:"fct-filter-back-wrapper"},CR={class:"fct-filter-active-label"},BR={key:1,class:"fct-filter-dropdown-search-input"},kR={__name:"FilterHeader",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>{const l=b("el-input");return A(),_("div",bR,[f(a).data.activeFilter!=null?(A(),_("div",wR,[i("button",{class:"fct-filter-back-button",onClick:n[0]||(n[0]=d=>f(a).selectActiveFilter(null))},[o(z,{name:"ArrowLeft"})]),i("span",CR,m(f(a).activeFilterOptions.label),1)])):(A(),_("div",BR,[o(l,{modelValue:f(a).data.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=d=>f(a).data.searchQuery=d),placeholder:s.$t("Search Filter..."),clearable:""},null,8,["modelValue","placeholder"])]))])}}},FR={class:"fct-filter-dropdown-active-filter-list"},xR=["onClick"],UR={__name:"StatusList",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>(A(),_("ul",FR,[(A(!0),_(H,null,X(f(a).activeFilterOptions.options,(l,d)=>(A(),_("li",{key:d,class:oe(["fct-filter-active-option-item",{"is-selected":f(a).isFilterOptionSelected(l)}])},[i("div",{class:"fct-filter-dropdown-active-button",onClick:u=>f(a).selectFilterOption(l)},m(l.label),9,xR)],2))),128))]))}},SR={class:"fct-filter-dropdown-active-filter-list is-multi-list"},ER=["onClick"],QR={__name:"MultiList",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>(A(),_("ul",SR,[(A(!0),_(H,null,X(f(a).activeFilterOptions.options,(l,d)=>(A(),_("li",{key:d,class:oe(["fct-filter-active-option-item",{"is-selected":f(a).isFilterOptionSelectedMulti(l)}])},[i("div",{class:"fct-filter-dropdown-active-button",onClick:u=>f(a).selectFilterOptionMulti(l)},m(l.label),9,ER)],2))),128))]))}},DR={class:"fct-filter-dropdown-active-filter"},IR={__name:"SelectedFilters",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>(A(),_("div",DR,[f(a).activeFilterOptions.type==="list"?(A(),U(UR,{key:0,"filter-state":f(a)},null,8,["filter-state"])):x("",!0),f(a).activeFilterOptions.type==="multi-list"?(A(),U(QR,{key:1,"filter-state":f(a)},null,8,["filter-state"])):x("",!0),f(a).activeFilterOptions.type==="date"?(A(),U(Ip,{key:2,modelValue:f(a).data.dateRange,"onUpdate:modelValue":n[0]||(n[0]=l=>f(a).data.dateRange=l),onChange:f(a).setDateRange},null,8,["modelValue","onChange"])):x("",!0),f(a).activeFilterOptions.type==="currency"?(A(),U($p,{key:3,modelValue:f(a).data.currency,"onUpdate:modelValue":n[1]||(n[1]=l=>f(a).data.currency=l),currencies:f(a).currencies,onChange:f(a).setSelectChange},null,8,["modelValue","currencies","onChange"])):x("",!0),f(a).activeFilterOptions.type==="tree-select"?(A(),U(Tp,{key:4,"filter-state":f(a)},null,8,["filter-state"])):x("",!0)]))}},$R={class:"fct-filter-dropdown-list"},TR=["onClick"],MR={key:1,class:"fct-filter-dropdown-list-item filter-not-found"},VR={__name:"FilterOptionList",props:{filterState:{type:[Object]}},setup(e){const a=e.filterState;return(s,n)=>(A(),_("ul",$R,[f(a).visibleFilters.length?(A(!0),_(H,{key:0},X(f(a).visibleFilters,(l,d)=>(A(),_("li",{class:"fct-filter-dropdown-list-item",key:d},[i("div",{class:"fct-filter-dropdown-button",onClick:u=>f(a).selectActiveFilter(l)},[o(z,{name:l.icon},null,8,["name"]),O(" "+m(l.label),1)],8,TR)]))),128)):(A(),_("li",MR,m(f(a).data.searchQuery?f(p)("No filter found"):f(p)("All filters selected")),1))]))}},LR={key:0,class:"fct-filter-dropdown"},OR={class:"fct-filter-dropdown-body"},HR={key:1},RR={__name:"FilterDropdown",props:{filterState:{type:[Object]}},setup(e){const t=e,a=T(null),s=t.filterState,n=De.get("app_config.isProActive"),l=[{label:p("Order Type"),icon:"AppsLine",type:"multi-list",value:"orderTypes",disableRoutes:["reports_customer","reports_subscriptions"],options:[{label:p("All"),value:"all"},{label:p("One time"),value:"payment"},{label:p("Subscription"),value:"subscription"},{label:p("Renewal"),value:"renewal"}]},{label:p("Subscription Type"),icon:"Reload",type:"list",value:"subscriptionType",disableRoutes:["reports_revenue","reports_products","reports_customer","reports_sales","reports_refunds","reports_orders","reports_sales"],options:[{label:p("Active"),value:"subscription"},{label:p("Renewal"),value:"renewal"},{label:p("Expired"),value:"expired"},{label:p("Canceled"),value:"canceled"}]},{label:p("Currency"),icon:"Currency",type:"currency",value:"currency",disableRoutes:["reports_products","reports_customer","reports_subscriptions"]},{label:p("Products"),icon:"ListView",type:"tree-select",value:"variation_ids",disableRoutes:["reports_customer"]}];s.setFilterOption(l);const d=u=>{const c=a.value,h=u.target,v=document.querySelectorAll(".el-picker-panel"),y=Array.from(v).some(g=>g.contains(h));c!=null&&c.contains(h)||y||(s.data.searchQuery="",s.dropdownOpen&&s.toggleDropdown())};return he(()=>{document.addEventListener("click",d)}),Ss(()=>{document.removeEventListener("click",d)}),(u,c)=>(A(),_("div",{ref_key:"dropdownRef",ref:a,class:"fct-filter-dropdown-container",onClick:c[0]||(c[0]=je(()=>{},["stop"]))},[o(we,{class:"fct-filter-dropdown-toggle-button",size:"small",tag:"button",onClick:f(s).toggleDropdown},{default:r(()=>[o(z,{name:"Filter"})]),_:1},8,["onClick"]),o(Nn,{name:"fade-scale","enter-active-class":"transition ease-out duration-200","leave-active-class":"transition ease-in duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:r(()=>[f(s).dropdownOpen?(A(),_("div",LR,[f(n)?(A(),_(H,{key:0},[o(kR,{"filter-state":f(s)},null,8,["filter-state"]),i("div",OR,[f(s).data.activeFilter!=null?(A(),U(IR,{key:0,"filter-state":f(s)},null,8,["filter-state"])):(A(),U(VR,{key:1,"filter-state":f(s)},null,8,["filter-state"]))])],64)):(A(),_("div",HR,[o(Hi,{class:"py-7.5",title:f(p)("Upgrade to Pro for filtering"),text:f(p)("This feature is only available in FluentCart Pro.")},null,8,["title","text"])]))])):x("",!0)]),_:1})],512))}},PR={class:"fct-report-nav-links-wrap"},KR={class:"fct-settings-nav-collapse-button-wrapper"},NR={class:"fct-menu-collapse-button-text"},GR=["onClick"],zR={class:"fct-settings-nav-link-text"},jR={class:"fct-settings-nav-child-list"},YR=["onClick"],Kr="fluentcart_reports_menu_collapsed",qR={__name:"ReportNavLinks",emits:["update:menuState"],setup(e,{emit:t}){const a=Va(),s=oa(),n=[{route:"reports_overview",label:p("Overview"),url:"/reports/overview",icon:"Overview"},{route:"reports_sales",label:p("Sales"),url:"/reports/sales",icon:"LineChart"},{route:"reports_orders",label:p("Orders"),url:"/reports/orders",icon:"Cart"},{route:"reports_revenue",label:p("Revenue"),url:"/reports/revenue",icon:"Revenue"},{route:"reports_refunds",label:p("Refunds"),url:"/reports/refunds",icon:"Refund"},{route:"reports_subscriptions",label:p("Subscriptions"),url:"/reports/subscriptions",icon:"Subscription",always_open:!0,child:[{route:"subscriptions-retention",label:p("Retention"),url:"/reports/subscriptions/subscriptions-retention"},{route:"subscriptions-cohorts",label:p("Cohorts"),url:"/reports/subscriptions/subscriptions-cohorts"},{route:"future_renewals",label:p("Future Renewals"),url:"/reports/subscriptions/future-renewals"}]},{route:"reports_products",label:p("Products"),url:"/reports/products",icon:"Product"},{route:"reports_customer",label:p("Customers"),url:"/reports/customer",icon:"Users"},{route:"reports_sources",label:p("Sources"),url:"/reports/sources",icon:"Source"}],l=T(!0),d=T(!1),u=T(window.innerWidth>=1024),c=t,h=T(null),v=T(null),y=I=>I.child?g(I)||I.always_open:!1,g=I=>{const D=s.path;return!!(I.child&&I.child.length&&I.child.some($=>D===$.url||D.includes($.url))||D===I.url||D.includes(I.url))},B=(I,D,M)=>s.path===I.url,w=I=>{a.push({name:I.route}).catch(M=>{M.name!=="NavigationDuplicated"&&console.error("Navigation error:",M)});const D=document.querySelector("#fct-report-body");D&&(D.scrollTop=0)},C=()=>{if(!u.value){h.value&&h.value.classList.remove("is-nav-open"),v.value&&v.value.classList.remove("is-overlay-open");return}l.value=!l.value,d.value=!1;try{localStorage.setItem(Kr,l.value?"1":"0")}catch{}},F=()=>{u.value||(h.value&&h.value.classList.remove("is-nav-open"),v.value&&v.value.classList.remove("is-overlay-open"))},S=()=>{const I=window.innerWidth,D=u.value;if(u.value=I>=1024,!D&&u.value){h.value&&h.value.classList.remove("is-nav-open"),v.value&&v.value.classList.remove("is-overlay-open");try{const M=localStorage.getItem(Kr);l.value=M===null?!0:M==="1"}catch{l.value=!0}}D&&!u.value&&(l.value=!1)};fe([l,d,u],()=>{c("update:menuState",{isMenuCollapsed:l.value,isMenuExpanded:d.value,isDesktopView:u.value})},{immediate:!0});const k=q(()=>l.value),Q=q(()=>u.value&&l.value&&d.value);return he(()=>{S(),window.addEventListener("resize",S);try{const I=localStorage.getItem(Kr);l.value=I===null?!0:I==="1"}catch{l.value=!0}}),Re(()=>{window.removeEventListener("resize",S)}),(I,D)=>{const M=b("el-button"),$=b("el-tooltip");return A(),_("div",PR,[i("div",{ref_key:"overlayRef",ref:v,class:"fct-settings-menu-overlay",onClick:F},null,512),i("div",{ref_key:"sidebarRef",ref:h,class:oe(["fct-settings-nav-container",{"is-collapsed":k.value,"is-expanded":Q.value}])},[i("div",KR,[o($,{content:f(p)("Toggle reports"),placement:"right"},{default:r(()=>[o(M,{onClick:C},{default:r(()=>[o(z,{name:"Window"}),i("span",NR,m(f(p)("Reports")),1)]),_:1})]),_:1},8,["content"])]),i("ul",{class:"fct-settings-nav",onMouseenter:D[0]||(D[0]=V=>u.value&&l.value&&(d.value=!0)),onMouseleave:D[1]||(D[1]=V=>d.value=!1)},[(A(),_(H,null,X(n,(V,L)=>i("li",{key:L,class:oe(["fct-settings-nav-item",{"fct-settings-nav-item-active":g(V)}])},[i("div",{onClick:R=>w(V),class:"fct-settings-nav-link"},[V.icon?(A(),U(z,{key:0,name:V.icon,class:"w-5 h-5"},null,8,["name"])):x("",!0),i("span",zR,[O(m(V.label)+" ",1),o(z,{name:"ChevronRight",class:"fct-settings-nav-link-icon"})])],8,GR),o(na,{accordion:"",visible:y(V),class:"fct-settings-nav-child-wrap"},{default:r(()=>[i("ul",jR,[(A(!0),_(H,null,X(V.child,(R,K)=>(A(),_("li",{key:K,class:oe(["fct-settings-nav-item",{"fct-settings-nav-item-active":B(R,K,V)}])},[i("div",{onClick:J=>w(R),class:"fct-settings-nav-link"},m(R.label),9,YR)],2))),128))])]),_:2},1032,["visible"])],2)),64))],32)],2)])}}},WR={class:"fct-reports-view-inner"},XR={class:"fct-report-body",id:"fct-report-body"},JR={key:0,class:"fct-report-filter-wrap"},ZR={key:1,class:"fct-report-filter-button"},eP={class:"fct-report-body-inner"},tP={__name:"ReportsView",setup(e){var g;const t=T({isMenuCollapsed:!0,isMenuExpanded:!1,isDesktopView:!0}),a=sp(),s=oa(),n=T((g=s.meta)==null?void 0:g.title),l=q(()=>qt.data);a.onFilterChanged(B=>{h(B)});const d=q(()=>!["reports_overview","reports_customer","future_renewals","reports_sources"].includes(s.name)),u=q(()=>["reports_overview","reports","future_renewals"].includes(s.name));let c=null;const h=B=>{Object.entries(B).forEach(([w,C])=>{let F=C.value;switch(C.type==="multi-list"&&(F=C.value.map(S=>S.value)),w){case"orderStatus":case"paymentStatus":case"currency":case"compareType":case"compareDate":case"subscriptionType":case"orderTypes":qt.data[w]=F;break;case"dateRange":qt.data.dateRange=C.value,qt.data.rangeKey=C.rangeKey;break;case"variation_ids":qt.data[w]=Array.isArray(C.value)?C.value.map(S=>S.id):[];break}}),qt.onFilterChange()},v=()=>{var w,C;const B=a.retrieveSavedFilters();B?(a.data.selectedFilters={...B},((C=(w=B.dateRange)==null?void 0:w.value)==null?void 0:C.length)===2&&(a.data.dateRange=[B.dateRange.value[0],B.dateRange.value[1]])):a.data.selectedFilters={}},y=B=>{t.value=B};return fe(()=>s.name,(B,w)=>{var C;n.value=((C=s.meta)==null?void 0:C.title)||"Reports"}),he(()=>{qt.fetchReportMeta(),v(),c=document.getElementById("fluent_cart_plugin_app"),c&&c.classList.add("fct_report_page_plugin_app_wrap")}),Re(()=>{c&&c.classList.remove("fct_report_page_plugin_app_wrap")}),Ss(()=>{ze.remove("product_variations")}),(B,w)=>{const C=b("router-view");return A(),_("div",{class:oe(["fct-reports-view",{"is-collapsed":t.value.isMenuCollapsed,"is-expanded":t.value.isMenuExpanded&&t.value.isDesktopView}])},[i("div",WR,[o(qR,{"onUpdate:menuState":y}),i("div",XR,[o(ea,{heading:f(p)(n.value),"show-save-button":!1},null,8,["heading"]),!u.value||d.value?(A(),_("div",JR,[u.value?x("",!0):(A(),U(yR,{key:0,"filter-state":f(a)},null,8,["filter-state"])),!u.value&&d.value?(A(),_("div",ZR,[o(RR,{"filter-state":f(a)},null,8,["filter-state"])])):x("",!0)])):x("",!0),i("div",eP,[o(gA),l.value.storeMode!==l.value.filterMode&&l.value.filterMode&&l.value.filterMode!==""?(A(),U(ja,{key:0,class:"mb-5 alert-yellow",icon:"InformationFill",content:B.$t(`Your store is in ${l.value.storeMode} mode but you are watching data in ${l.value.filterMode} mode.`)},null,8,["content"])):x("",!0),o(C,null,{default:r(({Component:F})=>[(A(),U($a(F),{reportFilter:f(qt)},null,8,["reportFilter"]))]),_:1})])])])],2)}}},aP=be(tP,[["__scopeId","data-v-11636309"]]),sP={__name:"lineChart",props:{xAxis:{type:Array,default:()=>[],required:!0},yAxis:{type:Array,default:()=>[],required:!0},lineColor:{type:String,default:"#42b983"},backgroundGradient:{type:Array,required:!0},chartTitle:{type:String,default:""},hasCurrency:{type:Boolean,default:!1}},setup(e){const t=e,a=T(null),s=(v,y,g,B)=>({name:v,type:y,data:g,smooth:!0,color:B,showSymbol:!0,areaStyle:{color:new Yr(0,0,0,1,t.backgroundGradient.map(w=>({offset:w.offset,color:w.color})))}}),n=()=>{const v=[];return v.push(s("","line",t.yAxis,t.lineColor)),v},l=v=>{const y=v.split("-");if(y.length===3){const[g,B,w]=y;return`${Vt[parseInt(B)-1]} ${w}, ${g}`}else if(y.length===2){const[g,B]=y;return`${Vt[parseInt(B)-1]} ${g}`}else if(y.length===1){const[g]=y;return`${g}`}},d=q(()=>t.xAxis.map(v=>l(v)));let u=null;const c=()=>{if(a.value&&u==null){u=at(a.value);const v={title:{show:!1},tooltip:{trigger:"axis",valueFormatter:y=>t.hasCurrency?`${Be.scaled(y)}`:y},grid:{show:!1,left:"10%",right:"10%",bottom:"80%"},xAxis:{type:"category",data:d.value,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:n()};u.setOption(v),window.addEventListener("resize",()=>{u.resize()})}},h=()=>{u&&u.setOption({xAxis:{data:t.xAxis},series:n()})};return fe(()=>[t.xAxis,t.yAxis],()=>{de(()=>{h()})}),he(()=>{de(()=>{c()})}),(v,y)=>(A(),_("div",{style:{height:"70px"},ref_key:"chartRef",ref:a},null,512))}},nP=be(sP,[["__scopeId","data-v-a7c199f1"]]);function Mp(e){return Number(e)>0}function Cs(e){return Mp(e)?"text-red-500":""}function Fa(e,t=null){return(t!==null?t:Mp(e))?`(${Be.scaled(e)})`:Be.scaled(e)}const oP=["innerHTML"],Ys={__name:"ReportSummary",props:{amount:{type:[Number,String],required:!0},placement:{type:String,default:"top"},title:{type:String,default:""}},setup(e){const t=e,a=q(()=>t.title?t.title+" "+t.amount:t.amount);return(s,n)=>{const l=b("el-tooltip");return A(),U(l,{effect:"dark",placement:e.placement,"popper-class":"fct-tooltip"},{content:r(()=>[i("span",null,m(a.value),1)]),default:r(()=>[i("span",{class:"cursor-pointer",innerHTML:e.amount},null,8,oP)]),_:1},8,["placement"])}}},ha={__name:"Fluctuation",props:{fluctuation:{type:[String,Number],required:!0},isLiability:{type:Boolean,default:!1},placement:{type:String,default:"top"},amount:{type:[String,Number],required:!1},title:{type:String,default:""},hasCurrency:{type:Boolean,default:!0},isPercentage:{type:Boolean,default:!1},fluctuationSuffix:{type:String,default:""}},setup(e){const t=e,a=q(()=>it(t.fluctuation)),s=q(()=>(t.hasCurrency?Be.scaled:it)(t.amount)),n=q(()=>(t.title?t.title:p("Previously"))+" "+s.value+(t.isPercentage?"%":"")),l=q(()=>{if(t.fluctuation===0)return"text-system-light";const u=t.fluctuation>0;return(t.isLiability?!u:u)?"text-success-500":"text-red-500"}),d=q(()=>t.fluctuation<0?"CaretDown":"CaretUp");return(u,c)=>{const h=b("el-tooltip");return A(),_("div",{class:oe(["percentage",l.value])},[e.fluctuation!==0?(A(),U(z,{key:0,class:"w-2",name:d.value},null,8,["name"])):x("",!0),o(h,{effect:"dark",placement:e.placement,"popper-class":"fct-tooltip"},{content:r(()=>[i("span",null,m(n.value),1)]),default:r(()=>[i("span",{class:oe(["cursor-pointer",l.value])},[O(m(a.value)+"% ",1),e.fluctuationSuffix?(A(),_(H,{key:0},[O(m(e.fluctuationSuffix),1)],64)):x("",!0)],2)]),_:1},8,["placement"])],2)}}},lP={class:"fct-report-result"},rP={key:0,class:"fct-report-result-content"},iP={key:1,class:"fct-report-result-content"},AP={class:"title flex items-center gap-1"},dP={class:"value"},uP={class:"inline-flex"},cP={key:2,class:"fct-report-result-chart"},pP={key:3,class:"fct-report-result-chart"},fP={__name:"SummaryCards",props:{defaultReport:{type:Object,required:!0}},setup(e){const t=e;q(()=>reportFilter.currentCurrencySign),q(()=>defaultReport.data.isBusy.salesReport);const a=(c,h)=>{const v=parseInt(c.replace("#",""),16),y=v>>16&255,g=v>>8&255,B=v&255;return`rgba(${y}, ${g}, ${B}, ${h})`},s=pe.colors.report,n=T([{title:p("Gross Sales"),key:"gross_sale",graph:"grossSaleGraph",lineColor:s.sea_green,backgroundGradient:[{offset:0,color:a(s.sea_green,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total sales you had in this period.")},{title:p("Refunds"),key:"total_refunded_amount",graph:"refundsGraph",lineColor:s.medium_slate_blue,backgroundGradient:[{offset:0,color:a(s.medium_slate_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue."),liability:!0},{title:p("Revenue"),key:"net_revenue",graph:"netRevenueGraph",lineColor:s.royal_blue,backgroundGradient:[{offset:0,color:a(s.royal_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Gross sales less refunds, taxes, shipping, fees.")},{title:p("Orders"),key:"order_count",graph:"orderGraph",lineColor:s.medium_turquoise,backgroundGradient:[{offset:0,color:a(s.medium_turquoise,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of orders placed in this period.")},{title:p("Items"),key:"total_item_count",graph:"itemsSoldGraph",lineColor:s.deep_sky_blue,backgroundGradient:[{offset:0,color:a(s.deep_sky_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of items sold in this period.")},{title:p("Total Refunds"),key:"total_refunded",graph:"refundCountGraph",lineColor:s.golden_rod,backgroundGradient:[{offset:0,color:a(s.golden_rod,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Total refunds count including partially refunds.")}]),l=q(()=>n.value.map(c=>({...c,value:t.defaultReport.summaryData[c.key]||0,fluctuation:t.defaultReport.fluctuations[c.key]||0,graph:t.defaultReport.data.graphs[c.graph]||{},dataBusy:t.defaultReport.data.isBusy.salesReport||!1,graphBusy:t.defaultReport.data.isBusy.graphs[c.graph]||!1,liability:c.liability||!1}))),d=c=>["net_revenue","total_refunded_amount","gross_sale"].includes(c),u=c=>d(c.key)?Fa(c.value,c.liability):it(c.value);return(c,h)=>{const v=b("el-skeleton"),y=b("el-tooltip"),g=b("el-skeleton-item"),B=b("el-col"),w=b("el-row");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[o(w,{gutter:16,class:"gap-y-4"},{default:r(()=>[(A(!0),_(H,null,X(l.value,(C,F)=>(A(),U(B,{lg:8,md:12,key:F},{default:r(()=>[o(po,{class:"fct-report-summary-card h-[100px]"},{default:r(()=>[i("div",lP,[C.dataBusy?(A(),_("div",rP,[o(v,{animated:"",rows:1})])):(A(),_("div",iP,[i("div",AP,[O(m(C.title)+" ",1),o(y,{"popper-class":"fct-tooltip",content:C.info,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 cursor-pointer",name:"InformationFill"})]),_:2},1032,["content"])]),i("div",dP,[i("div",uP,[o(Ys,{amount:u(C),title:C.title},null,8,["amount","title"])]),o(ha,{fluctuation:C.fluctuation,amount:e.defaultReport.data.previousSummary[C.key],"is-liability":C.liability,"has-currency":d(C.key)},null,8,["fluctuation","amount","is-liability","has-currency"])])])),C.dataBusy?(A(),_("div",cP,[o(v,{animated:"",class:"flex items-center justify-end"},{template:r(()=>[o(g,{variant:"circle",class:"w-12.5 h-12.5 flex-none"})]),_:1})])):x("",!0),!C.dataBusy&&Object.keys(C.graph).length>0?(A(),_("div",pP,[o(nP,{ref_for:!0,ref:"lineChart",xAxis:Object.keys(C.graph),yAxis:Object.values(C.graph),lineColor:C.lineColor,backgroundGradient:C.backgroundGradient,"has-currency":d(C.key)},null,8,["xAxis","yAxis","lineColor","backgroundGradient","has-currency"])])):x("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}};const hP={key:0,class:"fct-report-sold-product-list has-scroll"},mP={class:"list-left-content"},_P={class:"list-image"},gP=["src","alt"],vP=["src"],yP={class:"list-title"},bP={class:"list-title-inner"},wP={class:"list-id"},CP={class:"list-right-content"},BP={class:"list-value"},kP={class:"list-price"},FP={class:"inline-flex"},xP={__name:"TopSoldVariants",props:{defaultReport:{type:[Array,Object],required:!0}},setup(e){const t=Da.data,a=q(()=>Da.data.isBusy.topSoldVariants);return(s,n)=>{const l=b("el-skeleton"),d=b("router-link");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[o(po,{class:"top-sold-variants","card-options":{heading:f(p)("Top Sold Variants")}},{default:r(()=>{var u,c;return[a.value?(A(),U(l,{key:0,animated:"",rows:7})):(A(),_(H,{key:1},[((c=(u=f(t))==null?void 0:u.topSoldVariants)==null?void 0:c.length)>0?(A(),_("ul",hP,[(A(!0),_(H,null,X(f(t).topSoldVariants,h=>(A(),_("li",{key:h.product_id},[o(d,{to:{name:"product_edit",params:{product_id:h.product_id}}},{default:r(()=>{var v;return[i("div",mP,[i("div",_P,[h.media_url!==null?(A(),_("img",{key:0,src:h.media_url,alt:(v=h.media)==null?void 0:v.title},null,8,gP)):(A(),_("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,vP))]),i("div",yP,[i("div",bP,m(h.variation_name),1),i("div",wP,[i("strong",null,m(h.product_name),1)])])]),i("div",CP,[i("div",BP,m(h.quantity)+" "+m(f(p)(" Sold")),1),i("div",kP,[i("div",FP,m(f(Be).scaled(h.total_amount)),1)])])]}),_:2},1032,["to"])]))),128))])):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no item!")},null,8,["text"]))],64))]}),_:1},8,["card-options"])]),_:1})}}},UP={key:0,class:"flex items-center gap-2 justify-between"},SP={class:"fct-btn-group sm"},EP={__name:"Sources",props:{data:{type:Object,required:!0}},setup(e){const t=e,a=pe.colors,s=T(null),n=T(pe.isDark()),l=T("revenue"),d=T({}),u=F=>{const S=["#F6B51E","#855EF8","#47C2FF"],E=["#E6A819","#693EE0","#35ADE9"];return(n.value?E:S)[F]},c=q(()=>{if(typeof t.data.onetime_count===void 0)return[];if((t.data.onetime_count||0)===0&&(t.data.renewal_count||0)===0&&(t.data.subscription_count||0)===0)return[];const F={onetime:p("Onetime Payments"),renewal:p("Renewals"),subscription:p("Subscriptions")},S=t.data.order_count,E=[];return Object.keys(F).forEach((k,Q)=>{E.push({name:F[k],value:t.data[k+"_count"]||0,count:t.data[k+"_count"]||0,gross:t.data[k+"_gross"]||0,net:t.data[k+"_net"]||0,percentage:S?(t.data[k+"_count"]/S*100).toFixed(2):0,color:u(Q),visible:d.value[F[k]]!==!1})}),E}),h=q(()=>!c.value.length),v=q(()=>Da.data.isBusy.salesReport),y=q(()=>c.value.filter(F=>d.value[F.name]!==!1).map((F,S)=>({value:l.value==="revenue"?F.net:F.count,count:F.count,name:F.name,gross:F.gross,net:F.net,itemStyle:{color:u(c.value.findIndex(E=>E.name===F.name))}})));let g=null;const B=()=>{g&&(g.dispose(),g=null),de(()=>{s.value&&(g=at(s.value),w())})},w=()=>{if(!g)return;const F={title:{text:t.chartTitle??"",left:"center"},legend:{show:!1},tooltip:{trigger:"item",formatterr:"{b}: {c} ({d}%)",formatter:function(S){const E=n.value?"#ffffff":"#565865";return`
          <div style="font-weight: bold; margin-bottom: 4px;">
            ${S.marker} ${S.name} (${S.percent}%)
          </div>
          <div>
            <span style="color: ${E};">${p("Orders")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${E};">
              ${it(S.data.count)}
            </span>
          </div>
          <div>
            <span style="color: ${E};">${p("Gross Sales")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${E};">
              ${Be.scaled(S.data.gross)}
            </span>
          </div>
          <div>
            <span style="color: ${E};">${p("Revenue")}</span>
            <span style="font-weight: bold; float: right; margin-left: 15px; color: ${E};">
              ${Be.scaled(S.data.net)}
            </span>
          </div>
        `},borderRadius:8,backgroundColor:n.value?"#38485a":"#ffffff",textStyle:{color:n.value?a.gray[25]:a.system.mid},borderColor:n.value?"#4a5a6b":"#c0c4ca",borderWidth:1},series:[{type:"pie",radius:"70%",data:y.value,label:{show:!0,color:n.value?a.gray[25]:a.system.dark},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};g.setOption(F,{notMerge:!0,replaceMerge:["series"]})};fe([()=>c.value],()=>{de(w)},{deep:!0}),fe(h,F=>{F||B()}),fe(v,F=>{F||B()}),fe(l,()=>{w()});const C=F=>{n.value=pe.isDark(),w()};return he(()=>{window.addEventListener("onFluentCartThemeChange",C),de(B)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",C)}),(F,S)=>{const E=b("el-button"),k=b("el-button-group"),Q=b("el-skeleton");return A(),U(po,{class:"sales-sources","card-options":{heading:f(p)("Sources")}},{action:r(()=>[h.value?x("",!0):(A(),_("div",UP,[o(k,{class:"left"},{default:r(()=>[o(E,{size:"small",onClick:S[0]||(S[0]=I=>l.value="revenue"),type:l.value==="revenue"?"primary":""},{default:r(()=>[O(m(f(p)("Revenue")),1)]),_:1},8,["type"]),o(E,{size:"small",onClick:S[1]||(S[1]=I=>l.value="orders"),type:l.value==="orders"?"primary":""},{default:r(()=>[O(m(f(p)("Orders")),1)]),_:1},8,["type"])]),_:1}),i("div",SP,[o(Ct,{targetRef:s.value},null,8,["targetRef"])])]))]),default:r(()=>[v.value?(A(),U(Q,{key:0,animated:"",rows:7})):(A(),_(H,{key:1},[h.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("No relevant data to plot the chart")},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-order-completion-time-chart",ref_key:"chartRef",ref:s},null,512))],64))]),_:1},8,["card-options"])}}},QP={class:"fct-default-report-page"},DP={__name:"DefaultReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=T(t.reportFilter),s=async n=>{n&&(await Da.getSalesReport(n),await Da.getTopSoldProducts(n),await Da.getTopSoldVariants(n))};return he(()=>{a.value&&a.value.addListener("default-report",s)}),Re(()=>{a.value&&a.value.removeListener("default-report")}),fe(()=>t.reportFilter,n=>{a.value&&a.value.removeListener("default-report"),a.value=n,a.value&&(a.value.addListener("default-report",s),s(a.value.applicableFilters))},{immediate:!0}),(n,l)=>{const d=b("el-col"),u=b("el-row");return A(),_("div",QP,[o(fP,{"default-report":f(Da)},null,8,["default-report"]),o(u,{gutter:30,class:"gap-y-4 my-5"},{default:r(()=>[o(d,{lg:12},{default:r(()=>[o(pA,{data:f(Da).data.topSoldProducts,loading:f(Da).data.isBusy.topSoldProducts},null,8,["data","loading"])]),_:1}),o(d,{lg:12},{default:r(()=>[o(xP,{"default-report":f(Da)},null,8,["default-report"])]),_:1}),x("",!0)]),_:1}),o(u,{gutter:30,class:"gap-y-4 my-5"},{default:r(()=>[o(d,{lg:12},{default:r(()=>[o(EP,{data:f(Da).data.summaryData},null,8,["data"])]),_:1})]),_:1})])}}};class IP extends Xt{constructor(){super(...arguments);me(this,"data",{order:["net_revenue","gross_sale","order_count","total_item_count","average_net","average_gross","average_order_items_count"],revenue:["Revenue","Gross Sales","Refund","Taxes","Shipping","Discount"],refund:["Total Refunds","Total Refunded Amount","Avg. Refunded Amount","Refund Rate","Total Paid"],product:["average_selling_price","units_sold","gross_sale","customer_count"]});me(this,"storageKey","report-checkbox-filter");me(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=ze.get(this.storageKey);this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund}addListener(a,s){this.listeners[a]=s}async onCheckBoxChange(a,s){const n=this.data[a];n.includes(s)?this.data[a]=n.filter(l=>l!==s):this.data[a].push(s),this.syncStorage();for(let l in this.listeners)this.listeners[l](this.applicableFilters)}syncStorage(){ze.set(this.storageKey,this.applicableFilters.checkbox)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{checkbox:{order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,product:this.data.product}}}}const qa=IP.init(),$P={class:"fct-revenue-line-chart-wrap"},TP={class:"flex items-center gap-2"},MP={class:"fct-card-header-title is-small"},VP={class:"fct-chart-select"},LP={class:"fct-btn-group sm"},OP={key:2,class:"chart-action-wrap"},HP={class:"chart-change-wrap"},RP={class:"chart-change"},PP={class:"text"},KP={class:"chart-change"},NP={class:"text"},GP={__name:"RevenueLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(ct.getChartType("revenue","revenue_chart")||"line"),l=T(!1),d=pe.colors.report,u=T(pe.isDark()),c=(M,$,V,L,R,K=!1)=>({name:M,type:$,barMaxWidth:30,yAxisIndex:V,data:L,smooth:!1,color:R,hidden:K,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=T(a.appliedGroupKey);fe(()=>a.appliedGroupKey,M=>{h.value=M});const v=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],y=t,g=()=>{y("filter-data",h.value)},B=q(()=>a.reportFilter.data.compareType!=="no_comparison"),w=q(()=>{let M=[{name:p("Current Revenue"),key:"net_revenue",type:n.value,color:u.value?d.dark_cyan_blue_36:d.light_gray_cyan_blue,data:a.chartData.map($=>$.net_revenue)}];return B.value&&M.unshift({name:p("Compare Revenue"),key:"net_revenue",type:n.value,color:u.value?d.dark_cyan_blue_16:d.light_gray,data:a.compareData.map($=>({value:$.net_revenue,date:$.group})),hidden:!1}),M.map($=>c($.name,$.type,0,$.data,$.color,$.hidden))});let C=null;const F=()=>{C&&(C.dispose(),C=null),de(()=>{s.value&&(C=at(s.value),k())})},S=q(()=>{const M=zs(a.reportFilter.data.dateRange);return p("This report looks at the revenue you received ")+M}),E=q(()=>ra(a.chartData.length)),k=()=>{if(!C)return;const M=Oa(a.chartData),$={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"},selected:Object.fromEntries(w.value.map(V=>[V.name,!V.hidden]))},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.dark_cyan_blue_16:d.light_gray_blue}},alwaysShowContent:!1,valueFormatter:V=>`${Be.scaled(V)}`,formatter:V=>{let L="";const R=u.value?"#ffffff":"#565865";return V.forEach(function(K,J){const ae=typeof K.data=="object"&&K.data!==null?js(K.data.date):K.name,Z=Be.scaled(K.value),te=V.length>1&&J===0;te&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${ae}</div>`,L+=`<div>
            ${K.marker}
            <span style="color: ${R}">${K.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${R}">
              ${it(Z)}
            </span>
          </div>`,te&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:M,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,formatter:V=>`${Be.scaled(V)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:w.value};C.setOption($,{notMerge:!0,replaceMerge:["series"]})},Q=()=>{l.value=!l.value,l.value?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):k()},I=M=>{ct.onChange("revenue","revenue_chart",M),n.value!==M&&(l.value=!1,n.value=M,k())};fe([()=>a.chartData,h],()=>{de(k)},{deep:!0}),fe(()=>qa.data.revenue,()=>{de(()=>{k()})},{deep:!0}),fe(()=>a.isEmpty,M=>{M||F()}),fe(()=>a.loading,M=>{M||F()});const D=()=>{u.value=pe.isDark(),de(()=>{k()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",D),de(()=>{F()})}),(M,$)=>{const V=b("el-tooltip"),L=b("el-option"),R=b("el-select"),K=b("el-skeleton");return A(),_("div",$P,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",TP,[i("h5",MP,m(f(p)("Revenue Chart")),1),o(V,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",VP,[o(R,{class:"el-select--x-small",modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=J=>h.value=J),onChange:g},{default:r(()=>[(A(),_(H,null,X(v,J=>o(L,{key:J.value,label:f(p)(J.label),value:J.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",LP,[o(Xa,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:I},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:f(p)("Zoom Chart"),onClick:Q,class:oe(l.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[e.loading?(A(),U(K,{key:0,animated:"",rows:7,class:"p-4"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512)),e.isEmpty?x("",!0):(A(),_("div",OP,[i("div",HP,[i("div",RP,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",PP,m(f(p)("Data")),1)]),i("div",KP,[i("span",NP,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},zP={props:{data:{type:Array,required:!0},filename:{type:String,default:"data.csv"}},components:{DynamicIcon:z},methods:{exportCSV(){const t=(n=>{const l=h=>h.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase()),d=Object.keys(n[0]),c=[d.map(l).join(",")];return n.forEach(h=>{const v=d.map(y=>{let g=h[y];return typeof g=="object"&&(g=JSON.stringify(g)),typeof g=="string"&&(g=`"${g.replace(/"/g,'""')}"`),g});c.push(v.join(","))}),c.join(`
`)})(this.data),a=new Blob([t],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download=this.filename,s.click(),URL.revokeObjectURL(s.href)}}};function jP(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-button");return A(),U(u,{onClick:l.exportCSV,size:"small"},{default:r(()=>[o(d,{name:"Download"}),O(" "+m(e.$t("Export")),1)]),_:1},8,["onClick"])}const mo=be(zP,[["render",jP]]),YP=["innerHTML"],qP=["innerHTML"],WP=["innerHTML"],XP=["innerHTML"],JP=["innerHTML"],ZP=["innerHTML"],eK=["innerHTML"],tK=["innerHTML"],aK={name:"Revenue",props:{revenueReport:{type:Array,required:!0},appliedGroupKey:{type:String},loading:{type:Boolean,default:!0}},computed:{dateFormat(){if(!this.revenueReport.length)return"";const e=this.revenueReport[0].group.split("-");return e.length===3?"MMMM DD, YYYY":e.length===2?"MMMM YYYY":""},tableData(){const e=this.revenueReport.reduce((t,a)=>{const s=a.year;return t[s]||(t[s]={year:s,order_count:0,net_revenue:0,gross_sale:0,total_refunded_amount:0,tax_total:0,shipping_total:0,items:[]}),t[s].order_count+=Number(a.order_count),t[s].net_revenue+=Number(a.net_revenue),t[s].gross_sale+=Number(a.total_sales),t[s].total_refunded_amount+=Number(a.total_refunds),t[s].tax_total+=Number(a.total_tax),t[s].shipping_total+=Number(a.shipping_total),t[s].items.push(a),t},{});return Object.values(e)}},data(){return{}},methods:{formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},formatCurrency(e){return Be.scaled(e)},liabilityClass:Cs,maybeLiability:Fa}},sK=Object.assign(aK,{setup(e){return(t,a)=>{const s=b("el-skeleton"),n=b("el-table-column"),l=b("el-table"),d=b("el-empty");return A(),U(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Revenue Breakdown"),title_size:"small"},ft({_:2},[e.loading?void 0:{name:"action",fn:r(()=>[o(mo,{data:e.revenueReport,filename:"revenue.csv"},null,8,["data"])]),key:"0"}]),1032,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[e.loading?(A(),U(s,{key:0,animated:"",rows:2,class:"p-4"})):(A(),U(l,{key:1,data:t.tableData,"row-key":"year","default-expand-all":!1,class:"w-full"},{empty:r(()=>[o(d,{description:f(p)("No data available")},null,8,["description"])]),default:r(()=>[t.dateFormat?(A(),U(n,{key:0,type:"expand"},{default:r(u=>[o(l,{data:u.row.items,"row-key":"month",size:"small",border:"",class:"w-full"},{default:r(()=>[o(n,{prop:"group",label:f(p)("Date"),"min-width":"160"},{default:r(c=>[O(m(f(ke)(c.row.group).format(t.dateFormat)),1)]),_:1},8,["label"]),o(n,{prop:"order_count",label:f(p)("Order Count"),"min-width":"140"},{default:r(c=>[O(m(f(p)(f(it)(c.row.order_count))),1)]),_:1},8,["label"]),o(n,{prop:"total_sales",label:f(p)("Gross Sales"),"min-width":"150"},{default:r(c=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(Number(c.row.total_sales))},null,8,YP)]),_:1},8,["label"]),o(n,{label:f(p)("Refunds"),"min-width":"150"},{default:r(c=>[i("div",{class:oe(["inline-flex",f(Cs)(c.row.total_refunds)]),innerHTML:f(Fa)(c.row.total_refunds)},null,10,qP)]),_:1},8,["label"]),t.tax_total>0?(A(),U(n,{key:0,prop:"total_tax",label:f(p)("Taxes"),"min-width":"150"},{default:r(c=>[i("div",{class:oe(["inline-flex",f(Cs)(c.row.total_tax)])},m(f(Fa)(c.row.total_tax)),3)]),_:1},8,["label"])):x("",!0),t.shipping_total>0?(A(),U(n,{key:1,prop:"shipping_total",label:f(p)("Shipping"),"min-width":"150"},{default:r(c=>[i("div",{class:oe(["inline-flex",f(Cs)(c.row.shipping_total)])},m(f(Fa)(c.row.shipping_total)),3)]),_:1},8,["label"])):x("",!0),o(n,{prop:"net_revenue",label:f(p)("Revenue"),"min-width":"180"},{default:r(c=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(Number(c.row.net_revenue))},null,8,WP)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1})):x("",!0),o(n,{prop:"year",label:f(p)("Year"),"min-width":"50",fixed:""},null,8,["label"]),o(n,{prop:"order_count",label:f(p)("Order Count"),"min-width":"120"},{default:r(u=>[O(m(f(p)(f(it)(u.row.order_count))),1)]),_:1},8,["label"]),o(n,{prop:"gross_sale",label:f(p)("Gross Sales"),"min-width":"150"},{default:r(u=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(u.row.gross_sale)},null,8,XP)]),_:1},8,["label"]),o(n,{label:f(p)("Refunds"),"min-width":"150"},{default:r(u=>[i("div",{class:oe(["inline-flex",f(Cs)(u.row.total_refunded_amount)]),innerHTML:f(Fa)(u.row.total_refunded_amount)},null,10,JP)]),_:1},8,["label"]),t.tax_total>0?(A(),U(n,{key:1,prop:"tax_total",label:f(p)("Taxes"),"min-width":"150"},{default:r(u=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(u.row.tax_total)},null,8,ZP)]),_:1},8,["label"])):x("",!0),t.shipping_total>0?(A(),U(n,{key:2,prop:"shipping_total",label:f(p)("Shipping"),"min-width":"150"},{default:r(u=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(u.row.shipping_total)},null,8,eK)]),_:1},8,["label"])):x("",!0),o(n,{prop:"net_revenue",label:f(p)("Revenue"),"min-width":"180"},{default:r(u=>[i("div",{class:"inline-flex",innerHTML:t.formatCurrency(u.row.net_revenue)},null,8,tK)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}});function io(e){var t;return((t=Nf.find(a=>a.code2===e))==null?void 0:t.name)||"Uncategorized"}const nK={class:"px-5 pb-4"},oK={__name:"ReportTableLoader",props:{loading:{type:Boolean,default:!1}},setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton");return A(),U(n,{loading:e.loading,animated:""},{template:r(()=>[i("div",nK,[o(s,{class:"w-full h-7"})]),(A(),_(H,null,X(8,l=>i("div",{key:l,class:"flex items-center gap-5 px-5"},[o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"}),o(s,{class:"w-1/2 h-4 mb-3"})])),64))]),_:1},8,["loading"])}}},lK={class:"fct-btn-group sm w-[240px] gap-2"},rK={class:"capitalize"},iK={class:"capitalize"},AK=["innerHTML"],dK=["innerHTML"],uK=["innerHTML"],cK=["innerHTML"],pK=["innerHTML"],fK={__name:"RevenueGroupedBy",props:{tableData:{type:Object},reportFilter:{type:Object},revenueReport:{type:Object}},emits:["fetch-data-by-group"],setup(e,{emit:t}){const a=e,s=t;q(()=>a.reportFilter.currentCurrencySign);const n=[{label:"Billing Country",value:"billing_country"},{label:"Shipping Country",value:"shipping_country"},{label:"Payment Method",value:"payment_method_title"}];T({offline_payment:"Cash On Delivery",paypal:"PayPal",stripe:"Stripe"});const l=T("billing_country"),d=()=>{s("fetch-data-by-group",l.value)};return(u,c)=>{const h=b("el-option"),v=b("el-select"),y=b("el-table-column"),g=b("el-empty"),B=b("el-table");return A(),U(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:u.$t("Grouped by"),title_size:"small"},{action:r(()=>[i("div",lK,[o(v,{class:"el-select--x-small",modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=w=>l.value=w),onChange:d,placeholder:u.$t("Select Group")},{default:r(()=>[(A(),_(H,null,X(n,w=>o(h,{key:w.value,label:u.$t(w.label),value:w.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),o(mo,{data:e.tableData,filename:"revenue grouped by.csv",class:"!ml-0"},null,8,["data"])])]),_:1},8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[o(oK,{loading:e.revenueReport.data.isBusy.netRevenueByGroup},null,8,["loading"]),e.revenueReport.data.isBusy.netRevenueByGroup?x("",!0):(A(),U(B,{key:0,data:e.tableData,"max-height":"390"},{empty:r(()=>[o(g,{text:u.$t("No data available")},null,8,["text"])]),default:r(()=>[l.value==="country"?(A(),U(y,{key:0,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(w=>[O(m(w.row.country),1)]),_:1},8,["label"])):x("",!0),l.value==="shipping_country"?(A(),U(y,{key:1,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(w=>[i("span",rK,m(f(io)(w.row.shipping_country)),1)]),_:1},8,["label"])):x("",!0),l.value==="billing_country"?(A(),U(y,{key:2,prop:"country",label:u.$t("Country"),"min-width":"150"},{default:r(w=>[i("span",iK,m(f(io)(w.row.billing_country)),1)]),_:1},8,["label"])):x("",!0),l.value==="payment_method_title"?(A(),U(y,{key:3,prop:"payment_method",label:u.$t("Payment Method"),"min-width":"150"},{default:r(w=>[O(m(w.row.payment_method),1)]),_:1},8,["label"])):x("",!0),o(y,{prop:"order_count",label:u.$t("Order Count"),"min-width":"150"},{default:r(w=>[O(m(f(p)(w.row.orders)),1)]),_:1},8,["label"]),o(y,{prop:"total_sales",label:u.$t("Gross Sales"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.gross_sale)},null,8,AK)]),_:1},8,["label"]),o(y,{prop:"total_refunds",label:u.$t("Refunds"),"min-width":"150"},{default:r(w=>[i("div",{class:oe(["inline-flex",f(Cs)(w.row.total_refunds)]),innerHTML:f(Fa)(w.row.total_refunds)},null,10,dK)]),_:1},8,["label"]),u.total_tax>0?(A(),U(y,{key:4,prop:"total_tax",label:u.$t("Taxes"),"min-width":"150"},{default:r(w=>[i("div",{class:oe(["inline-flex",f(Cs)(w.row.total_tax)]),innerHTML:f(Fa)(w.row.total_tax)},null,10,uK)]),_:1},8,["label"])):x("",!0),u.shipping_total>0?(A(),U(y,{key:5,prop:"shipping_total",label:u.$t("Shipping"),"min-width":"150"},{default:r(w=>[i("div",{class:oe(["inline-flex",f(Cs)(w.row.shipping_total)]),innerHTML:f(Fa)(w.row.shipping_total)},null,10,cK)]),_:1},8,["label"])):x("",!0),o(y,{prop:"net_revenue",label:u.$t("Revenue"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.net_sale)},null,8,pK)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}};class hK extends Xt{constructor(){super(...arguments);me(this,"data",{revenueReport:[],previousMetrics:[],netRevenueByGroup:[],summary:{},previousSummary:{},fluctuations:{},isBusy:{revenueReport:!0,netRevenueByGroup:!1,revenueSummary:!1,fluctuations:!1,chartData:!1,productBarRacer:!1},chartData:[],productBarRacer:[],appliedGroupKey:"default"})}get controllerKey(){return"RevenueReportController"}makeRequest(a,s,n,l){l&&(this.data.isBusy[l]=!0),typeof s!="object"&&(s={});const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{n&&(this.data.isBusy[n]=!1)})}getReportData(a={}){return this.makeRequest("revenue",a,null,"revenueReport")}getReportByGroup(a={}){return this.makeRequest("revenue-by-group",a,"data","netRevenueByGroup")}getChartData(a={}){return this.makeRequest("revenue-chart",a,"revenueReport","chartData")}getProductBarRacer(a={}){return this.makeRequest("fetch-product-bar-racer",a,"productBarRacer","productBarRacer")}}const St=hK.init(),Wa={__name:"SummaryLoader",props:{loading:{type:Boolean,default:!1},count:{type:Number,default:1},marginBottom:{type:Number,default:7.5},padding:{type:Number,default:4},rows:{type:Number,default:1}},setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton");return A(),U(n,{loading:"loading",animated:""},{template:r(()=>[i("div",{class:oe(["grid gap-5 bg-white rounded dark:bg-dark-700 fct-summary-loader",`mb-${e.marginBottom} p-${e.padding}`]),style:sa(`--loader-grid-cols: ${e.count};`)},[(A(!0),_(H,null,X(e.rows,l=>(A(),_(H,{key:l},[(A(!0),_(H,null,X(e.count,d=>(A(),_("div",{key:d},[o(s),o(s,{class:"w-[90%]"})]))),128))],64))),128))],6)]),_:1})}}},mK={class:"summary-item-inner"},_K={class:"value"},gK={class:"inner-value"},vK={class:"title"},yK={__name:"RevenueReportSummary",props:{reportFilter:{type:Object}},setup(e){const t=[{title:p("Gross Sales"),key:"gross_sale",info:p("The total sales you had in this period.")},{title:p("Refunds"),key:"total_refunded_amount",liability:!0,info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:p("Taxes"),key:"tax_total",liability:!0,info:p("Taxes paid in orders. This is deducted from gross sales to calculate revenue.")},{title:p("Shipping"),key:"shipping_total",liability:!0,info:p("Shipping paid in orders. This is deducted from gross sales to calculate revenue.")},{title:p("Revenue"),key:"net_revenue",info:p("Gross sales less refunds, taxes, shipping, fees.")}],a=q(()=>t.map(n=>({key:n.key,title:n.title,value:St.data.summary[n.key]||0,fluctuation:St.data.fluctuations[n.key]||0,liability:n.liability||!1,info:n.info})).filter(n=>["tax_total","shipping_total"].includes(n.key)?n.value!==0:!0)),s=q(()=>St.data.isBusy.revenueReport);return(n,l)=>{const d=b("el-tooltip");return s.value?(A(),U(Wa,{key:0,loading:s.value,count:a.value.length},null,8,["loading","count"])):(A(),_("div",{key:1,class:"fct-report-order-summary",style:sa(`--avg-grid-cols: ${a.value.length}`)},[(A(!0),_(H,null,X(a.value,(u,c)=>(A(),_("div",{class:"summary-item",key:c},[i("div",mK,[i("div",_K,[i("div",gK,[o(Ys,{amount:f(Fa)(u.value,u.liability),title:u.title},null,8,["amount","title"])]),o(ha,{fluctuation:u.fluctuation,amount:f(St).data.previousSummary[u.key],"is-liability":u.liability},null,8,["fluctuation","amount","is-liability"])]),i("div",vK,[O(m(u.title)+" ",1),o(d,{content:u.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))],4))}}},bK={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,default:!0}},components:{CardContainer:re,CardHeader:Ae,CardBody:le},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const e=[];return this.currentMetrics.forEach((t,a)=>{const s=parseFloat(t.net_revenue);let n={group:this.formatDate(t.group),net_revenue:s};if(this.hasComparison){const l=this.previousMetrics[a];if(l){const d=parseFloat(l.net_revenue),u=d?((s-d)/d*100).toFixed(2):"n/a";n.previous_revenue=d,n.percent_change=u,n.group=`${this.formatDate(t.group)} vs ${this.formatDate(l.group)}`}}e.push(n)}),e}},methods:{translate:p,getPercentageClass(e){return e>0?"text-success-500":e<0?"text-red-500":"text-system-light"},formatDate(e){const t=e.split("-");if(t.length===3){const[a,s,n]=t;return`${Vt[parseInt(s)-1]} ${n}, ${a}`}else if(t.length===2){const[a,s]=t;return`${Vt[parseInt(s)-1]} ${a}`}else if(t.length===1){const[a]=t;return`${a}`}},formatCurrency(e){return Be.scaled(e)}}},wK={class:"fct-revenue-comparison"},CK=["innerHTML"],BK=["innerHTML"];function kK(e,t,a,s,n,l){const d=b("CardHeader"),u=b("el-skeleton"),c=b("el-table-column"),h=b("el-table"),v=b("CardBody"),y=b("CardContainer");return A(),_("div",wK,[o(y,{class:"overflow-hidden"},{default:r(()=>[o(d,{title:l.translate("Revenue Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(A(),U(u,{key:0,animated:"",rows:7,class:"p-4"})):(A(),U(h,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:l.translate("Period")},{default:r(g=>[O(m(g.row.group),1)]),_:1},8,["label"]),o(c,{label:l.translate("Current Revenue")},{default:r(g=>[i("div",{class:"inline-flex",innerHTML:l.formatCurrency(g.row.net_revenue)},null,8,CK)]),_:1},8,["label"]),a.hasComparison?(A(),_(H,{key:0},[o(c,{label:l.translate("Compare Revenue")},{default:r(g=>[i("div",{class:"inline-flex",innerHTML:l.formatCurrency(g.row.previous_revenue)},null,8,BK)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:oe(l.getPercentageClass(g.row.percent_change))},m(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const FK=be(bK,[["render",kK]]),xK={class:"fct-revenue-report-page"},UK={__name:"RevenueReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=T("default"),s=t.reportFilter,n=s.applicableFilters,l=(v,y="default")=>{St.getReportData({params:{...v.params,groupKey:y}})},d=v=>{St.getReportData({params:{...n.params,groupKey:v}})},u=v=>{v!==St.data.appliedGroupKey&&(a.value=v,l(n,a.value))},c=v=>{St.getReportByGroup({params:{...n.params,groupKey:v}})},h=v=>{l(v,a.value),St.getReportByGroup({params:{...v.params,groupKey:"billing_country"}})};return he(()=>{s.addListener("revenue-report",h),h(n)}),Re(()=>{s.removeListener("revenue-report")}),(v,y)=>(A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",xK,[o(yK,{reportFilter:f(s)},null,8,["reportFilter"]),o(GP,{chartData:f(St).data.revenueReport,compareData:f(St).data.previousMetrics,reportFilter:f(s),appliedGroupKey:a.value,onFilterData:u,"is-empty":!f(St).data.summary.gross_sale,loading:f(St).data.isBusy.revenueReport},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(FK,{class:"my-7.5",currentMetrics:f(St).data.revenueReport,previousMetrics:f(St).data.previousMetrics,hasComparison:t.reportFilter.data.compareType!=="no_comparison",reportFilter:f(s),loading:f(St).data.isBusy.revenueReport},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"]),o(sK,{revenueReport:f(St).data.revenueReport,appliedGroupKey:a.value,onFetchData:d,loading:f(St).data.isBusy.revenueReport},null,8,["revenueReport","appliedGroupKey","loading"]),o(fK,{tableData:f(St).data.netRevenueByGroup,reportFilter:f(s),revenueReport:f(St),onFetchDataByGroup:c},null,8,["tableData","reportFilter","revenueReport"])])]),_:1}))}};class SK extends Xt{constructor(){super(...arguments);me(this,"data",{summary:{},previousSummary:{},fluctuations:{},orderChartData:[],newVsReturning:[],orderByGroup:[],itemCountDistribution:[],grossSaleByDay:[],averageOrderGross:[],grossSaleByHour:[],orderCompletionTime:[],averageOrderItems:[],orderValueDistribution:[],orderByDayAndHour:[],dashBoardStats:[],isBusy:{summary:!1,fluctuations:!1,orderChartData:!0,newVsReturning:!0,orderByGroup:!1,itemCountDistribution:!1,grossSaleByDay:!1,averageOrderGross:!1,grossSaleByHour:!1,orderCompletionTime:!1,averageOrderItems:!1,orderValueDistribution:!1,orderByDayAndHour:!1,dashBoardStats:!1}})}get controllerKey(){return"OrderReportController"}makeRequest(a,s,n,l){this.data.isBusy[l]=!0,typeof s!="object"&&(s={});const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{}).finally(()=>{this.data.isBusy[n]=!1})}getOrderChartData(a={}){return this.data.isBusy.orderChartData=!0,this.makeRequest("order-chart",a).then(()=>this.data.isBusy.orderChartData=!1)}getNewVsReturningCustomer(a={}){return this.data.isBusy.newVsReturning=!0,this.makeRequest("fetch-new-vs-returning-customer",a).then(()=>this.data.isBusy.newVsReturning=!1)}getOrderByGroup(a={}){return this.makeRequest("fetch-order-by-group",a,"data","orderByGroup")}getItemCountDistribution(a={}){return this.makeRequest("item-count-distribution",a,"data","itemCountDistribution")}getOrderCompletionTime(a={}){return this.makeRequest("order-completion-time",a,"data","orderCompletionTime")}getOrderValueDistribution(a={}){return this.makeRequest("order-value-distribution",a,"data","orderValueDistribution")}getReportByDayAndHour(a={}){return this.data.isBusy.orderByDayAndHour=!0,this.makeRequest("fetch-report-by-day-and-hour",a).then(()=>this.data.isBusy.orderByDayAndHour=!1)}getDashboardStats(a={}){return this.makeRequest("dashboard-stats",a,"dashBoardStats","dashBoardStats")}}const Pe=SK.init(),EK={key:1,class:"fct-report-order-summary summary-col-4"},QK={class:"summary-item-inner"},DK={class:"value"},IK={key:0,class:"summary-checkbox"},$K={class:"inner-value"},TK={class:"title"},MK={__name:"Summary",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(e){const t=e,a=[{title:p("Gross Sales"),key:"gross_sale",content:p("The total sales you had in this period."),checkable:!0,hasCurrency:!0},{title:p("Refunds"),key:"total_refund",liability:!0,hasCurrency:!0,content:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:p("Revenue"),key:"net_revenue",hasCurrency:!0,content:p("Gross sales less refunds, taxes, shipping, fees."),checkable:!0},{title:p("Orders"),key:"order_count",content:p("The total number of orders placed in this period."),checkable:!0,hideCurrency:!0},{title:p("Items"),key:"total_item_count",content:p("The total number of items sold in this period."),hideCurrency:!0},{title:p("Average Gross"),key:"average_gross",hasCurrency:!0,content:p("Average gross sales per order in this period.")},{title:p("Average Revenue"),key:"average_net",hasCurrency:!0,content:p("Average revenue per order in this period.")},{title:p("Average Order Items"),key:"average_order_items_count",content:p("Average number of items per order in this period."),hideCurrency:!0}],s=q(()=>a.map(c=>({...c,value:t.orderReport.data.summary[c.key]||0,fluctuation:t.orderReport.data.fluctuations[c.key]||0,liability:c.liability||!1,hasCurrency:c.hasCurrency||!1}))),n=q(()=>a.filter(c=>!c.hideCurrency).map(c=>c.key)),l=q(()=>t.orderReport.data.isBusy.orderChartData),d=c=>{qa.onCheckBoxChange("order",c)},u=c=>n.value.includes(c.key)?Fa(c.value,c.liability):it(c.value);return(c,h)=>{const v=b("el-checkbox"),y=b("el-tooltip");return l.value?(A(),U(Wa,{key:0,count:4,rows:2})):(A(),_("div",EK,[(A(!0),_(H,null,X(s.value,(g,B)=>(A(),_("div",{class:"summary-item",key:B},[i("div",QK,[i("div",DK,[g.checkable?(A(),_("div",IK,[o(v,{"true-value":!0,"false-value":!1,"model-value":f(qa).data.order.includes(g.key),onChange:()=>d(g.key)},null,8,["model-value","onChange"])])):x("",!0),i("div",$K,[o(Ys,{amount:u(g),title:g.title},null,8,["amount","title"])]),o(ha,{fluctuation:g.fluctuation,amount:e.orderReport.data.previousSummary[g.key],"is-liability":g.liability,"has-currency":g.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),i("div",TK,[O(m(g.title)+" ",1),o(y,{content:g.content,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},VK={__name:"OrderHeatMap",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(e){const t=e,a=T(null);let s=null;const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=pe.colors,d=T(pe.isDark()),u=q(()=>{const w=[];return t.chartData.forEach((C,F)=>{n.forEach((S,E)=>{w.push([F,E,C[S]])})}),w}),c=q(()=>t.chartData.length?Math.max(...t.chartData.flatMap(w=>n.map(C=>w[C]||0))):0),h=q(()=>d.value?["#000000",l.blue[500]]:["#ffffff",l.blue[600]]),v=q(()=>Object.values(t.chartData).every(w=>w.order_count===0)),y=q(()=>Pe.data.isBusy.orderByDayAndHour),g=()=>{s&&(s.dispose(),s=null),de(()=>{if(a.value){s=at(a.value,null,{renderer:"svg"});const w=t.chartData.map(S=>S.hour),C=n,F={tooltip:{position:"top",backgroundColor:d.value?"#253241":"#ffffff",borderColor:d.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:d.value?"#ffffff":"#565865"},formatter:S=>{const E=d.value?"#ffffff":"#000000";let k=`<div style="color: ${E};"><div>${n[S.data[1]]}, ${S.name||"-"}</div>`;return k+=`<div style="color: ${E};">
            ${S.marker}
            <span style="color: ${E};">${S.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${E};">
              ${S.data[2]}
            </span>
          </div>`,k+"</div>"}},grid:{height:"70%",top:"10%"},xAxis:{type:"category",data:w,axisLabel:{color:d.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},yAxis:{type:"category",data:C,axisLabel:{color:d.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},visualMap:{min:0,max:c.value,calculable:!0,orient:"horizontal",left:"center",bottom:"0%",inRange:{color:h.value}},series:[{name:p("Orders"),type:"heatmap",data:u.value,label:{show:!0},itemStyle:{borderColor:"#e0e0e0",borderWidth:1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(F)}})};fe([u,c],()=>{de(()=>{g()})}),fe(v,w=>{w||g()}),fe(y,w=>{w||g()});const B=()=>{d.value=pe.isDark(),de(()=>{g()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",B),de(()=>{g(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),Ss(()=>{s&&(window.removeEventListener("resize",()=>s==null?void 0:s.resize()),window.removeEventListener("onFluentCartThemeChange",B,!1),s.dispose(),s=null)}),(w,C)=>{const F=b("el-skeleton");return A(),U(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Orders by day and hour"),title_size:"small",border_bottom:""},null,8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[y.value?(A(),U(F,{key:0,animated:"",rows:4,class:"px-3 pb-5"})):(A(),_(H,{key:1},[v.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512))],64))]),_:1})]),_:1})}}},LK={class:"fct-gross-sale-vs-net-revenue-wrap"},OK={class:"flex items-center gap-2"},HK={class:"fct-card-header-title is-small"},RK={class:"fct-chart-select"},PK={class:"fct-btn-group sm"},KK={key:2,class:"chart-action-wrap"},NK={class:"chart-change-wrap"},GK={class:"chart-change"},zK={class:"text"},jK={class:"chart-change"},YK={class:"text"},qK={__name:"OrderLineChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1}},emits:["fetch-chart-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T("default"),l=T(ct.getChartType("order","order_chart")||"line"),d=T(!1),u=pe.colors.report,c=T(pe.isDark()),h=[{value:"default",label:p("Default")},{value:"monthly",label:p("Monthly")},{value:"yearly",label:p("Yearly")}],v=t,y=()=>{v("fetch-chart-data",n.value)},g=q(()=>Pe.data.isBusy.orderChartData),B=q(()=>[{title:p("Orders"),key:"order_count",color:c.value?u.dark_cyan_blue_16:u.light_gray,yAxisIndex:1,type:"bar"},{title:p("Gross Sales"),key:"gross_sale",color:c.value?u.blue_dark_mode:u.blue,yAxisIndex:0,type:"line"},{title:p("Revenue"),key:"net_revenue",color:c.value?u.purple_dark_mode:u.purple,yAxisIndex:0,type:"line"}].filter(({key:$})=>qa.data.order.includes($)).map(({title:$,key:V,color:L,yAxisIndex:R,type:K})=>I($,K,R,a.chartData.map(J=>J[V]),L))),w=q(()=>a.chartData.map($=>js($.group)));let C=null;const F=T(!0),S=()=>{C&&(C.dispose(),C=null),de(()=>{s.value&&(C=at(s.value),Q(),C.on("legendselectchanged",$=>{F.value=$.selected.Orders}))})},E=q(()=>{const $=zs(a.reportFilter.data.dateRange);return p("This report looks at orders created ")+$}),k=q(()=>ra(a.chartData.length)),Q=()=>{if(!C)return;const $={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:c.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:c.value?"#253241":"#ffffff",borderColor:c.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:c.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:c.value?u.dark_cyan_blue_16:u.light_gray_blue}},formatter:V=>{let L=V[0].axisValue;const R=c.value?"#ffffff":"#565865";return V.forEach(function(K,J){const W=J===0?K.value:Be.scaled(K.value);L+=`<div>
            ${K.marker} 
            <span style="color: ${R};">${K.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${R};">
              ${W}
            </span>
          </div>`}),L}},xAxis:{type:"category",data:w.value,axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12,interval:k.value.interval},axisLine:{lineStyle:{type:"dashed",color:c.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Sales"),type:"value",position:"left",axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12,formatter:V=>`${Be.scaled(V)}`},splitLine:{show:!0,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:500},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:c.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:20}],dataZoom:[],series:B.value};C.setOption($,{notMerge:!0,replaceMerge:["series"]})},I=($,V,L,R,K)=>({name:$,type:V,yAxisIndex:L,barMaxWidth:30,data:R,smooth:!1,color:K,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:K,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(K)},lineStyle:{color:K},areaStyle:{opacity:.3,color:K}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),D=()=>{d.value=!d.value,d.value?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):Q()};fe([()=>a.chartData,l],()=>{de(Q)},{deep:!0}),fe(()=>qa.data.order,()=>{de(()=>{Q()})},{deep:!0}),fe(()=>a.isEmpty,$=>{$||S()}),fe(g,$=>{$||S()}),fe(F,()=>{if(!C)return;const V=C.getOption().series.map(L=>L.type==="line"?{...L,areaStyle:F.value?void 0:{opacity:.3}}:L);de(()=>{C.setOption({series:V})})});const M=()=>{c.value=pe.isDark(),de(()=>{Q()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",M,!1)}),he(()=>{de(S),window.addEventListener("onFluentCartThemeChange",M)}),($,V)=>{const L=b("el-tooltip"),R=b("el-option"),K=b("el-select"),J=b("el-skeleton");return A(),_("div",LK,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",OK,[i("h5",HK,m(f(p)("Order Chart")),1),o(L,{"popper-class":"fct-tooltip",content:E.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[e.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",RK,[o(K,{class:"el-select--x-small",modelValue:n.value,"onUpdate:modelValue":V[0]||(V[0]=W=>n.value=W),onChange:y},{default:r(()=>[(A(),_(H,null,X(h,W=>o(R,{key:W.value,label:W.label,value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",PK,[o(we,{tag:"button",size:"small",title:f(p)("Zoom Chart"),onClick:D,class:oe(d.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,null,{default:r(()=>[g.value?(A(),U(J,{key:0,animated:"",rows:4})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-chart-wrap fct-order-line-chart",ref_key:"chartRef",ref:s},null,512)),e.isEmpty?x("",!0):(A(),_("div",KK,[i("div",NK,[i("div",GK,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",zK,m(f(p)("Data")),1)]),i("div",jK,[i("span",YK,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},WK={class:"fct-report-monthly-list"},XK={class:"list-left-content"},JK={class:"list-title"},ZK={class:"list-right-content"},eN={class:"list-value"},tN={__name:"MonthlySummary",props:{orderReport:{type:Object,required:!0}},setup(e){const t=e,a=q(()=>qt.currentCurrencySign),s=[{title:p("Average Monthly Gross"),key:"monthly_gross",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Revenue"),key:"monthly_net",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Orders"),key:"monthly_orders"},{title:p("Average Monthly Items"),key:"monthly_items"}],n=q(()=>s.map(d=>({...d,value:t.orderReport.data.summary[d.key]||0,fluctuation:t.orderReport.data.fluctuations[d.key]||0,hasCurrency:d.hasCurrency||!1}))),l=d=>["monthly_net","monthly_gross"].includes(d.key)?Be.scaled(d.value):it(d.value);return(d,u)=>(A(),_("ul",WK,[(A(!0),_(H,null,X(n.value,(c,h)=>(A(),_("li",{key:h},[i("div",XK,[i("div",JK,m(c.title),1)]),i("div",ZK,[i("div",eN,[o(Ys,{amount:l(c),title:c.title},null,8,["amount","title"]),o(ha,{fluctuation:c.fluctuation,amount:e.orderReport.data.previousSummary[c.key],"is-liability":!1,"has-currency":c.hasCurrency},null,8,["fluctuation","amount","has-currency"])])])]))),128))]))}},aN={class:"fct-report-result-content"},sN={class:"value"},nN={class:"inline-flex"},oN={class:"title"},lN={__name:"AverageResults",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(e){const t=e,a=q(()=>t.reportFilter.currentCurrencySign),s=[{title:p("Taxes"),content:p("Total amount of taxes"),key:"tax_total",currencySign:a.value},{title:p("Shipping"),content:p("Total amount of shipping costs"),key:"shipping_total",currencySign:a.value}],n=q(()=>s.map(l=>({...l,value:t.orderReport.data.summary[l.key]||0,fluctuation:t.orderReport.data.fluctuations[l.key]||0})).filter(l=>l.value>0));return(l,d)=>{const u=b("el-tooltip");return A(),_("div",{class:"fct-report-avg-wrap mb-7.5",style:sa(`--avg-grid-cols: ${n.value.length}`)},[(A(!0),_(H,null,X(n.value,c=>(A(),_("div",{class:"fct-report-result",key:c.title},[i("div",aN,[i("div",sN,[i("span",nN,m(f(Be).scaled(c.value)),1),c.fluctuation!==0?(A(),_("div",{key:0,class:"percentage",style:sa({color:c.fluctuation>0?"green":"red"})},[c.fluctuation>0?(A(),U(z,{key:0,class:"w-2",name:"CaretUp"})):x("",!0),c.fluctuation<0?(A(),U(z,{key:1,class:"w-2",name:"CaretDown"})):x("",!0),O(" "+m(f(it)(c.fluctuation))+"% ",1)],4)):x("",!0)]),i("div",oN,[O(m(c.title)+" ",1),c.content?(A(),U(u,{key:0,"popper-class":"fct-tooltip",content:c.content,placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4"})]),_:2},1032,["content"])):x("",!0)])])]))),128))],4)}}},rN={class:"flex items-center gap-2"},iN={class:"fct-card-header-title is-small"},AN={class:"fct-btn-group sm"},dN=["innerHTML"],uN=["innerHTML"],cN=["innerHTML"],pN=["innerHTML"],fN={__name:"NewVsReturningCustomer",props:{tableData:{type:Object,required:!0},reportFilter:{type:Object}},setup(e){const t=e;T("number");const a=T(!1),s=q(()=>Pe.data.isBusy.newVsReturning),n=q(()=>{if(a.value===!0){const d=["customer_count","order_count","net_sales","average_net","gross_sales","average_gross"],u={customer_type:"New"},c={customer_type:"Returning"};return d.forEach(h=>{const v=parseFloat(t.tableData[0][h]),y=parseFloat(t.tableData[1][h]),g=v+y;u[h]=v*100/g,c[h]=y*100/g}),[u,c]}return t.tableData});q(()=>t.reportFilter.currentCurrencySign),he(()=>{});const l=d=>`${parseFloat(d).toFixed(2)}%`;return(d,u)=>{const c=b("el-tooltip"),h=b("el-checkbox"),v=b("el-skeleton"),y=b("el-table-column"),g=b("el-empty"),B=b("el-table");return A(),U(re,{class:"overflow-hidden",id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small"},{title:r(()=>[i("div",rN,[i("h5",iN,m(f(p)("New vs. Returning Customers")),1),o(c,{"popper-class":"fct-tooltip",content:f(p)("Returning customers are those who first ordered before this period."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"text-gray-500 w-4 h-4 cursor-pointer"})]),_:1},8,["content"])])]),action:r(()=>[i("div",AN,[o(h,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=w=>a.value=w),onChange:d.selectGroupKey},{default:r(()=>[O(m(f(p)("Show Percentages")),1)]),_:1},8,["modelValue","onChange"]),o(mo,{data:n.value,filename:"order_report.csv"},null,8,["data"])])]),_:1}),o(le,{class:"px-0 pb-0"},{default:r(()=>[s.value?(A(),U(v,{key:0,animated:"",rows:3,class:"p-3"})):(A(),U(B,{key:1,data:n.value,border:""},{empty:r(()=>[o(g,{text:f(p)("No data available")},null,8,["text"])]),default:r(()=>[o(y,{prop:"customer_type",label:f(p)("Type"),"min-width":"90"},{default:r(w=>[O(m(w.row.customer_type),1)]),_:1},8,["label"]),o(y,{prop:"customer_count",label:f(p)("Customer Count"),"min-width":"120"},{default:r(w=>[O(m(a.value?l(w.row.customer_count):w.row.customer_count),1)]),_:1},8,["label"]),o(y,{prop:"order_count",label:f(p)("Order Count"),"min-width":"150"},{default:r(w=>[O(m(a.value?l(w.row.order_count):w.row.order_count),1)]),_:1},8,["label"]),o(y,{prop:"gross_sales",label:f(p)("Gross Sales"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:a.value?l(w.row.gross_sales):f(Be).scaled(w.row.gross_sales)},null,8,dN)]),_:1},8,["label"]),o(y,{prop:"average_gross",label:f(p)("Average Gross Sales"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:a.value?l(w.row.average_gross):f(Be).scaled(w.row.average_gross)},null,8,uN)]),_:1},8,["label"]),o(y,{prop:"net_sales",label:f(p)("Revenue"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:a.value?l(w.row.net_sales):f(Be).scaled(w.row.net_sales)},null,8,cN)]),_:1},8,["label"]),o(y,{prop:"average_net",label:f(p)("Average Revenue"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:a.value?l(w.row.average_net):f(Be).scaled(w.row.average_net)},null,8,pN)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}},hN=be(fN,[["__scopeId","data-v-3a2ec0e8"]]),mN={class:"w-[240px] fct-btn-group gap-1.5"},_N={class:"capitalize"},gN={class:"capitalize"},vN=["innerHTML"],yN=["innerHTML"],bN=["innerHTML"],wN=["innerHTML"],CN={__name:"OrderGroupedBy",props:{reportFilter:{type:Object}},setup(e){const a=e.reportFilter,s=T("billing_country"),n=a.applicableFilters;q(()=>a.currentCurrencySign);const l=()=>{Pe.getOrderByGroup({params:{...n.params,groupKey:s.value}})},d=[{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method"),value:"payment_method_title"}];return he(()=>{l()}),(u,c)=>{const h=b("el-option"),v=b("el-select"),y=b("el-table-column"),g=b("el-empty"),B=b("el-table");return A(),U(re,{class:"overflow-hidden",id:"chartContainer"},{default:r(()=>[o(Ae,{title:f(p)("Orders grouped by"),title_size:"small"},{action:r(()=>[i("div",mN,[o(v,{class:"el-select--x-small",modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=w=>s.value=w),onChange:l,placeholder:f(p)("Select Group")},{default:r(()=>[(A(),_(H,null,X(d,w=>o(h,{key:w.value,label:w.label,value:w.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),o(mo,{data:f(Pe).data.orderByGroup,filename:"order_grouped_by.csv",class:"m-0"},null,8,["data"])])]),_:1},8,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[o(B,{data:f(Pe).data.orderByGroup,border:"",class:"max-h-[350px] overflow-y-auto"},{empty:r(()=>[o(g,{text:f(p)("No data available")},null,8,["text"])]),default:r(()=>[s.value==="payment_method_title"?(A(),U(y,{key:0,prop:"payment_method_title",label:"Payment Method Title","min-width":"150"},{default:r(w=>[O(m(w.row.payment_method_title),1)]),_:1})):x("",!0),s.value==="shipping_country"?(A(),U(y,{key:1,prop:"shipping_country",label:f(p)("Country"),"min-width":"150"},{default:r(w=>[i("span",_N,m(f(io)(w.row.shipping_country)),1)]),_:1},8,["label"])):x("",!0),s.value==="billing_country"?(A(),U(y,{key:2,prop:"billing_country",label:f(p)("Billing Country"),"min-width":"150"},{default:r(w=>[i("span",gN,m(f(io)(w.row.billing_country)),1)]),_:1},8,["label"])):x("",!0),o(y,{prop:"orders",label:f(p)("Orders"),"min-width":"150"},{default:r(w=>[O(m(f(p)(w.row.orders)),1)]),_:1},8,["label"]),o(y,{prop:"gross_sale",label:f(p)("Gross Sales"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.gross_sale)},null,8,vN)]),_:1},8,["label"]),o(y,{prop:"average_order_gross",label:f(p)("Average Gross Sales"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.average_order_gross)},null,8,yN)]),_:1},8,["label"]),o(y,{prop:"net_sale",label:f(p)("Revenue"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.net_sale)},null,8,bN)]),_:1},8,["label"]),o(y,{prop:"average_order_net",label:f(p)("Average Revenue"),"min-width":"150"},{default:r(w=>[i("div",{class:"inline-flex",innerHTML:f(Be).scaled(w.row.average_order_net)},null,8,wN)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},BN={class:"fct-report-spend-by-day-wrap"},kN={class:"flex items-center gap-2"},FN={class:"fct-card-header-title is-small"},xN={class:"fct-btn-group sm"},UN={key:2,class:"chart-action-wrap"},SN={class:"chart-change-wrap"},EN={class:"chart-change"},QN={class:"text"},DN={class:"chart-change"},IN={class:"text"},$N={__name:"GrossSaleByDay",props:{reportFilter:{type:Object},chartRef:{},chartData:{type:Array,required:!0}},setup(e){const t=e,a=T(null);let s=null;T(ct.getChartType("order","gross_sale_by_day_chart")||"line");const n=T(!1),l=q(()=>{const F=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return[...t.chartData].sort((E,k)=>E.day-k.day).map(E=>F[E.day-1])}),d=q(()=>Object.values(t.chartData).every(F=>F.order_count===0)),u=q(()=>Pe.data.isBusy.orderByDayAndHour),c=pe.colors.report,h=T(pe.isDark()),v=q(()=>[y("Gross Sale","line",0,t.chartData.map(F=>F.gross_sale),h.value?c.blue_dark_mode:c.blue),y("Orders","bar",1,t.chartData.map(F=>F.order_count),h.value?c.dark_cyan_blue_16:c.light_gray)]),y=(F,S,E,k,Q)=>({name:F,type:S,barMaxWidth:30,data:k,smooth:!1,color:Q,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:Q,borderRadius:[4,4,0,0]},yAxisIndex:E,emphasis:{scale:2,itemStyle:{color:Gt(Q)},lineStyle:{color:Q},areaStyle:{opacity:.3,color:Q}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),g=()=>{if(!s)return;const F={title:{text:t.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:h.value?"#253241":"#ffffff",borderColor:h.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:h.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:h.value?c.dark_cyan_blue_16:c.light_gray_blue}},formatter:S=>{let E=S[0].name;return S.forEach(k=>{const Q=k.seriesName==="Gross Sale"?`${Be.scaled(k.value)}`:k.value,I=h.value?"#ffffff":"#565865";E+=`<div>
            ${k.marker}
            <span style="color: ${I};">${k.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${I};">
              ${Q}
            </span>
          </div>`}),E}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:h.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",name:"Gross Sale",axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12,formatter:S=>`${Be.scaled(S)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:h.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:"Orders",position:"right",axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!1,lineStyle:{color:h.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:v.value};s.setOption(F)},B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=at(a.value),g())})},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>[Pe.data.grossSaleByDay],()=>{de(()=>{g()})},{deep:!0}),fe(d,F=>{F||B()}),fe(u,F=>{F||B()});const C=()=>{h.value=pe.isDark(),de(()=>{g()})};return he(()=>{de(()=>{B(),t.reportFilter.addListener("spend-by-day",B),window.addEventListener("onFluentCartThemeChange",C)})}),Re(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),t.reportFilter.removeListener("spend-by-day",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(F,S)=>{const E=b("el-tooltip"),k=b("el-skeleton");return A(),_("div",BN,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",kN,[i("h5",FN,m(f(p)("Spend by day")),1),o(E,{"popper-class":"fct-tooltip",content:f(p)("Gross sales grouped by the days of the week."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[d.value?void 0:{name:"action",fn:r(()=>[i("div",xN,[o(we,{tag:"button",size:"x-small",title:F.$t("Zoom Chart"),onClick:w,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[u.value?(A(),U(k,{key:0,animated:"",rows:4,class:"p-3"})):(A(),_(H,{key:1},[d.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-spend-by-day-chart",ref_key:"chartRef",ref:a},null,512)),d.value?x("",!0):(A(),_("div",UN,[i("div",SN,[i("div",EN,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",QN,m(F.$t("Gross Sale")),1)]),i("div",DN,[i("span",IN,m(F.$t("Days of the week")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},TN={class:"fct-report-item-count-distribution-wrap"},MN={class:"flex items-center gap-2"},VN={class:"fct-card-header-title is-small"},LN={class:"fct-btn-group sm"},ON={key:2,class:"chart-action-wrap"},HN={class:"chart-change-wrap"},RN={class:"chart-change"},PN={class:"text"},KN={class:"chart-change"},NN={class:"text"},GN={__name:"ItemCountDistribution",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(e){const t=e,a=T(null);T(t.chartData.length<=1?"bar":ct.getChartType("order","item_count_distribtion_chart")||"bar");const s=T(!1);q(()=>{const S=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return[...t.chartData].sort((k,Q)=>k.day-Q.day).map(k=>S[k.day-1])});const n=pe.colors,l=T(pe.isDark());let d=null;const u=()=>{s.value=!s.value,s.value?d.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):d.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})},c=()=>{d&&d.resize()},h=q(()=>l.value?n.blue[500]+"52":n.blue[300]),v=q(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:t.chartData.map(S=>S.order_count),smooth:!1,color:h.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:h.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:l.value?n.blue[800]:n.blue[400]},lineStyle:{color:h.value},areaStyle:{opacity:.3,color:h.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),y=q(()=>({title:{text:t.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?n.report.dark_cyan_blue_16:n.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:t.chartData.map(S=>S.item_count),axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:l.value?"#FFFFFF":"#696778",fontSize:12},min:0,splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},dataZoom:[],series:v.value})),g=q(()=>Object.values(t.chartData).every(S=>S.order_count===0)),B=q(()=>Pe.data.isBusy.orderByDayAndHour),w=()=>{d&&(d.dispose(),d=null),de(()=>{a.value&&(d=at(a.value),d.setOption(y.value),window.addEventListener("resize",c))})},C=()=>{d&&d.setOption(y.value)};fe(()=>t.chartData,()=>{d?d.setOption(y.value):de(()=>{w()})}),fe(g,S=>{S||w()}),fe(B,S=>{S||w()});const F=()=>{l.value=pe.isDark(),de(()=>{C()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",F,!1),de(()=>{w()})}),Re(()=>{d&&(d.dispose(),window.removeEventListener("onFluentCartThemeChange",F,!1),window.removeEventListener("resize",c))}),(S,E)=>{const k=b("el-tooltip"),Q=b("el-skeleton");return A(),_("div",TN,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",MN,[i("h5",VN,m(f(p)("Item count distribution")),1),o(k,{"popper-class":"fct-tooltip",content:f(p)("Grouping the orders by the number of items in each order."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[e.chartData.length?{name:"action",fn:r(()=>[i("div",LN,[o(we,{tag:"button",size:"x-small",title:S.$t("Zoom Chart"),onClick:u,class:oe(s.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[B.value?(A(),U(Q,{key:0,animated:"",rows:4,class:"px-5 pb-5"})):(A(),_(H,{key:1},[g.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-item-count-distribution-chart",ref_key:"chartRef",ref:a},null,512)),g.value?x("",!0):(A(),_("div",ON,[i("div",HN,[i("div",RN,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",PN,m(S.$t("Order Count")),1)]),i("div",KN,[i("span",NN,m(S.$t("Item Count")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},zN={class:"fct-report-spend-by-hour-wrap"},jN={class:"flex items-center gap-2"},YN={class:"fct-card-header-title is-small"},qN={class:"fct-btn-group sm"},WN={key:2,class:"chart-action-wrap"},XN={class:"chart-change-wrap"},JN={class:"chart-change"},ZN={class:"text"},eG={class:"chart-change"},tG={class:"text"},aG={__name:"GrossSaleByHour",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(e){const t=e,a=T(null);let s=null;T(ct.getChartType("order","gross_sale_by_hour_chart")||"line");const n=T(!1),l=q(()=>t.chartData.map(F=>F.hour)),d=q(()=>Object.values(t.chartData).every(F=>F.order_count===0)),u=q(()=>Pe.data.isBusy.orderByDayAndHour),c=pe.colors.report,h=T(pe.isDark()),v=(F,S,E,k,Q)=>({name:F,type:S,barMaxWidth:30,data:E,smooth:!1,color:k,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:k,borderRadius:[4,4,0,0]},yAxisIndex:Q,emphasis:{scale:2,itemStyle:{color:Gt(k)},lineStyle:{color:k},areaStyle:{opacity:.3,color:k}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),y=q(()=>[{name:p("Gross Sale"),type:"line",yAxisIndex:0,data:t.chartData.map(F=>F.gross_sale),color:h.value?c.purple_dark_mode:c.purple},{name:p("Orders"),type:"bar",yAxisIndex:1,data:t.chartData.map(F=>F.order_count),color:h.value?c.dark_cyan_blue_16:c.light_gray}].map(F=>v(F.name,F.type,F.data,F.color,F.yAxisIndex))),g=()=>{if(!s)return;const F={title:{text:t.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:h.value?"#253241":"#ffffff",borderColor:h.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:h.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:h.value?c.dark_cyan_blue_16:c.light_gray_blue}},formatter:S=>{let E=S[0].name;return S.forEach(k=>{const Q=k.seriesName==="Gross Sale"?`${Be.scaled(k.value)}`:k.value,I=h.value?"#ffffff":"#565865";E+=`<div>
            ${k.marker}
            <span style="color: ${I};">${k.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${I};">
              ${Q}
            </span>
          </div>`}),E}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:h.value?"#253241":"#D6DAE1"}},axisTick:{alignWithLabel:!0}},yAxis:[{type:"value",name:p("Gross Sale"),axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12,formatter:S=>`${Be.scaled(S)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:h.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:p("Orders"),position:"right",axisLabel:{color:h.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!1,lineStyle:{color:h.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:y.value};s.setOption(F)},B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=at(a.value),g())})},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>t.chartData,()=>{de(()=>g())}),fe(d,F=>{F||B()}),fe(u,F=>{F||B()});const C=()=>{h.value=pe.isDark(),de(()=>{g()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",C,!1),de(()=>B())}),Re(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(F,S)=>{const E=b("el-tooltip"),k=b("el-skeleton");return A(),_("div",zN,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",jN,[i("h5",YN,m(f(p)("Spend by hour ")),1),o(E,{"popper-class":"fct-tooltip",content:f(p)("Gross Sales grouped by the hours of the day."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[d.value?void 0:{name:"action",fn:r(()=>[i("div",qN,[o(we,{tag:"button",size:"x-small",title:F.$t("Zoom Chart"),onClick:w,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[u.value?(A(),U(k,{key:0,animated:"",rows:10,class:"px-3"})):(A(),_(H,{key:1},[d.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-spend-by-hour-chart",ref_key:"chartRef",ref:a},null,512)),d.value?x("",!0):(A(),_("div",WN,[i("div",XN,[i("div",JN,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",ZN,m(F.$t("Gross Sale")),1)]),i("div",eG,[i("span",tG,m(F.$t("Hour")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},sG={class:"fct-report-order-completion-time-wrap"},nG={class:"flex items-center gap-2"},oG={class:"fct-card-header-title is-small"},lG={class:"fct-btn-group sm"},rG={key:2,class:"chart-action-wrap"},iG={class:"chart-change-wrap"},AG={class:"chart-change"},dG={class:"text"},uG={class:"chart-change"},cG={class:"text"},pG={__name:"OrderCompletionTime",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(e){const t=e,a=T(null);let s=null;T(ct.getChartType("order","order_completion_time_chart")||"bar");const n=T(!1),l=q(()=>t.chartData.map(S=>S.hour)),d=pe.colors,u=T(pe.isDark()),c=q(()=>u.value?d.blue[500]+"52":d.blue[300]),h=q(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:t.chartData.map(S=>S.orders),smooth:!1,color:c.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:u.value?d.blue[800]:d.blue[400]},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),v=q(()=>Object.values(t.chartData).every(S=>S.orders===0)),y=q(()=>Pe.data.isBusy.orderCompletionTime),g=()=>{s&&s.resize()},B=()=>{if(!s)return;const S={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.report.dark_cyan_blue_16:d.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:u.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:u.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}},min:0,splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:h.value};s.setOption(S)},w=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=at(a.value),B())})},C=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>t.chartData,()=>{s?B():de(()=>{w()})}),fe(v,S=>{S||w()}),fe(y,S=>{S||w()});const F=()=>{u.value=pe.isDark(),de(()=>{B()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",F,!1),de(()=>w())}),Re(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",F,!1),window.removeEventListener("resize",g))}),(S,E)=>{const k=b("el-tooltip"),Q=b("el-skeleton");return A(),_("div",sG,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",nG,[i("h5",oG,m(f(p)("Time between an order's created & completed date")),1),o(k,{"popper-class":"fct-tooltip",content:f(p)("Orders grouped by based on their completion time in Hours."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[e.chartData.length?{name:"action",fn:r(()=>[i("div",lG,[o(we,{tag:"button",size:"x-small",title:S.$t("Zoom Chart"),onClick:C,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[y.value?(A(),U(Q,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(A(),_(H,{key:1},[v.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-order-completion-time-chart",ref_key:"chartRef",ref:a},null,512)),v.value?x("",!0):(A(),_("div",rG,[i("div",iG,[i("div",AG,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",dG,m(f(p)("Order Count")),1)]),i("div",uG,[i("span",cG,m(f(p)("Hours")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},fG={class:"fct-report-order-value-distribution-wrap"},hG={class:"flex items-center gap-2"},mG={class:"fct-card-header-title is-small"},_G={class:"fct-btn-group sm"},gG={key:2,class:"chart-action-wrap"},vG={class:"chart-change-wrap"},yG={class:"chart-change"},bG={class:"text"},wG={class:"chart-change"},CG={class:"text"},BG={__name:"OrderValueDistribution",props:{chartData:{type:Object,required:!0},chartRef:{}},setup(e){const t=e,a=T(null);let s=null;T(ct.getChartType("order","order_value_distribution_chart")||"bar");const n=T(!1),l=q(()=>Object.keys(t.chartData)),d=pe.colors,u=T(pe.isDark()),c=q(()=>u.value?d.blue[500]+"52":d.blue[300]),h=q(()=>!Object.values(t.chartData).every(S=>S&&S!==0)),v=q(()=>Pe.data.isBusy.orderValueDistribution),y=q(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:Object.values(t.chartData),smooth:!1,color:c.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:u.value?d.blue[800]:d.blue[400]},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),g=q(()=>({title:{text:t.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.report.dark_cyan_blue_16:d.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:l.value,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}},min:0,splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:y.value})),B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value?(s=at(a.value),s.setOption(g.value),window.addEventListener("resize",()=>{s.resize()})):s&&s.setOption(g.value)})},w=()=>{s&&s.setOption(g.value)},C=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>t.chartData,()=>{s&&s.setOption(g.value)}),fe(h,S=>{S||B()}),fe(v,S=>{S||B()});const F=()=>{u.value=pe.isDark(),de(()=>{w()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",F,!1),de(()=>{B()})}),Re(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",F,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(S,E)=>{const k=b("el-tooltip"),Q=b("el-skeleton");return A(),_("div",fG,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",hG,[i("h5",mG,m(f(p)("Order value distribution")),1),o(k,{"popper-class":"fct-tooltip",content:f(p)("Orders grouped by based on their order value in different ranges."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[h.value?void 0:{name:"action",fn:r(()=>[i("div",_G,[o(we,{tag:"button",size:"x-small",title:S.$t("Zoom Chart"),onClick:C,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[v.value?(A(),U(Q,{key:0,animated:"",rows:4,class:"p-3"})):(A(),_(H,{key:1},[h.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-order-value-distribution-chart",ref_key:"chartRef",ref:a},null,512)),h.value?x("",!0):(A(),_("div",gG,[i("div",vG,[i("div",yG,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",bG,m(S.$t("Order Count")),1)]),i("div",wG,[i("span",CG,m(S.$t("Order Value Ranges")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},kG={class:"fct-report-average-order-gross-wrap"},FG={class:"flex items-center gap-2"},xG={class:"fct-card-header-title is-small"},UG={class:"fct-btn-group sm"},SG={key:2,class:"chart-action-wrap"},EG={class:"chart-change-wrap"},QG={class:"chart-change"},DG={class:"text"},IG={class:"chart-change"},$G={class:"text"},TG={__name:"AverageOrderGross",props:{chartData:{type:Array,required:!0},isEmpty:{type:Boolean,required:!1}},setup(e){const t=e,a=T(null);let s=null;T("line");const n=T(!1),l=pe.colors.report,d=T(pe.isDark()),u=q(()=>d.value?l.blue_dark_mode:l.blue),c=q(()=>Pe.data.isBusy.orderChartData),h=q(()=>[{name:p("Average Order Gross"),type:"line",barMaxWidth:30,data:t.chartData.map(F=>F.average_order_gross),smooth:!1,color:u.value,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:u.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:Gt(u.value)},lineStyle:{color:u.value},areaStyle:{opacity:.3,color:u.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),v=q(()=>ra(t.chartData.length)),y=()=>{s&&s.resize()},g=()=>{if(!s)return;const F=Oa(t.chartData),S={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:d.value?"#253241":"#ffffff",borderColor:d.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:d.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:d.value?l.dark_cyan_blue_16:l.light_gray_cyan_blue}},valueFormatter:E=>Be.scaled(E)},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:F,axisLabel:{color:d.value?"#ffffff":"#000000",fontSize:12,interval:v.value.interval},axisLine:{lineStyle:{type:"dashed",color:d.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:d.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:d.value?"#253241":"#D6DAE1",type:"dashed"}},min:0,splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:h.value};s.setOption(S)},B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value&&(s=at(a.value),g())})},w=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>t.chartData,()=>{de(()=>g())}),fe(t.isEmpty,F=>{F||B()}),fe(c,F=>{F||B()});const C=()=>{d.value=pe.isDark(),de(()=>{g()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",C,!1),de(()=>B())}),Re(()=>{s&&(s.dispose(),window.removeEventListener("onFluentCartThemeChange",C,!1),window.removeEventListener("resize",y))}),(F,S)=>{const E=b("el-tooltip"),k=b("el-skeleton");return A(),_("div",kG,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small"},ft({title:r(()=>[i("div",FG,[i("h5",xG,m(f(p)("Average Order Gross ")),1),o(E,{"popper-class":"fct-tooltip",content:f(p)("Average Order Gross grouped by date period."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[e.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",UG,[o(we,{tag:"button",size:"x-small",title:F.$t("Zoom Chart"),onClick:w,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[c.value?(A(),U(k,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-average-order-gross-chart",ref_key:"chartRef",ref:a},null,512)),e.isEmpty?x("",!0):(A(),_("div",SG,[i("div",EG,[i("div",QG,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",DG,m(F.$t("Average Order Gross")),1)]),i("div",IG,[i("span",$G,m(F.$t("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},MG={class:"fct-report-average-order-items-wrap"},VG={class:"flex items-center gap-2"},LG={class:"fct-card-header-title is-small"},OG={class:"fct-btn-group sm"},HG={key:2,class:"chart-action-wrap"},RG={class:"chart-change-wrap"},PG={class:"chart-change"},KG={class:"text"},NG={class:"chart-change"},GG={class:"text"},zG={__name:"AverageOrderItems",props:{chartData:{type:Array,required:!0},chartRef:{},isEmpty:{type:Boolean,required:!1}},setup(e){const t=e,a=T(null);let s=null;T(ct.getChartType("order","avg_order_items_chart")||"line");const n=T(!1),l=pe.colors.report,d=T(pe.isDark()),u=q(()=>d.value?l.purple_dark_mode:l.purple),c=q(()=>[{name:p("Average Order Items"),type:"line",barMaxWidth:30,data:Array.isArray(t.chartData)?t.chartData.map(S=>S.average_order_items_count):[],smooth:!1,color:u.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:u.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:Gt(u.value)},lineStyle:{color:u.value},areaStyle:{opacity:.3,color:u.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),h=q(()=>ra(t.chartData.length)),v=q(()=>{const S=Oa(t.chartData);return{title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:d.value?"#253241":"#ffffff",borderColor:d.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:d.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:d.value?l.dark_cyan_blue_16:l.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:S,axisLabel:{color:d.value?"#FFFFFF":"#696778",fontSize:12,interval:h.value.interval},axisLine:{lineStyle:{type:"dashed",color:d.value?"#253241":"#D6DAE1"}}},yAxis:{name:"Order Items",type:"value",axisLabel:{formatter:"{value}",color:d.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!0,lineStyle:{color:d.value?"#253241":"#D6DAE1",type:"dashed"}},min:0,splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:c.value}}),y=q(()=>Pe.data.isBusy.orderChartData),g=()=>{s&&s.resize()},B=()=>{s&&(s.dispose(),s=null),de(()=>{a.value?(s=at(a.value),s.setOption(v.value),window.addEventListener("resize",g)):s&&s.setOption(v.value)})},w=()=>{s&&s.setOption(v.value)},C=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};fe(()=>t.chartData,()=>{s&&s.setOption(v.value)}),fe(t.isEmpty,S=>{S||B()}),fe(y,S=>{S||B()});const F=()=>{d.value=pe.isDark(),de(()=>{w()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",F),de(()=>{B(),window.addEventListener("resize",g)})}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",F,!1),s&&(window.removeEventListener("resize",g),s.dispose(),s=null)}),(S,E)=>{const k=b("el-tooltip"),Q=b("el-skeleton");return A(),_("div",MG,[o(re,null,{default:r(()=>[o(Ae,{border_bottom:"",title_size:"small"},ft({title:r(()=>[i("div",VG,[i("h5",LG,m(f(p)("Average Order Items ")),1),o(k,{"popper-class":"fct-tooltip",content:f(p)("Average Order Items grouped by date period."),placement:"top"},{default:r(()=>[o(z,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),_:2},[e.isEmpty?void 0:{name:"action",fn:r(()=>[i("div",OG,[o(we,{tag:"button",size:"x-small",title:S.$t("Zoom Chart"),onClick:C,class:oe(n.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[y.value?(A(),U(Q,{key:0,animated:"",rows:4,class:"px-5 pt-5"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512)),e.isEmpty?x("",!0):(A(),_("div",HG,[i("div",RG,[i("div",PG,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",KG,m(S.$t("Average Order Items")),1)]),i("div",NG,[i("span",GG,m(S.$t("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])]))],64))]),_:1})]),_:1})])}}},jG={class:"fct-order-report-page"},YG={__name:"OrderReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const a=e.reportFilter,s=l=>{l&&(Pe.getOrderChartData({params:{...l.params,groupKey:""}}),Pe.getNewVsReturningCustomer(l),Pe.getReportByDayAndHour(l),Pe.getItemCountDistribution(l),Pe.getOrderCompletionTime(l),Pe.getOrderValueDistribution(l))},n=l=>{const d=a.applicableFilters;d&&Pe.getOrderChartData({params:{...d.params,groupKey:l}})};return he(()=>{a.addListener("order-report",s),s(a.applicableFilters),a.value}),Re(()=>{a.removeListener("order-report",s,!1),a.value}),(l,d)=>{const u=b("el-col"),c=b("el-row");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",jG,[o(MK,{orderReport:f(Pe),reportFilter:f(a)},null,8,["orderReport","reportFilter"]),o(qK,{chartData:f(Pe).data.orderChartData,reportFilter:f(a),onFetchChartData:n,"is-empty":!f(Pe).data.summary.gross_sale},null,8,["chartData","reportFilter","is-empty"]),o(tN,{orderReport:f(Pe)},null,8,["orderReport"]),f(Pe).data.summary.tax_total||f(Pe).data.summary.shipping_total?(A(),U(lN,{key:0,orderReport:f(Pe),reportFilter:f(a)},null,8,["orderReport","reportFilter"])):x("",!0),o(hN,{tableData:f(Pe).data.newVsReturning,reportFilter:f(a)},null,8,["tableData","reportFilter"]),o(CN,{tableData:f(Pe).data.orderByGroup,reportFilter:f(a)},null,8,["tableData","reportFilter"]),o(VK,{chartData:f(Pe).data.orderByDayAndHour},null,8,["chartData"]),o(c,{gutter:30},{default:r(()=>[o(u,{lg:12},{default:r(()=>[o($N,{reportFilter:f(a),ref:"chartRef",chartData:f(Pe).data.grossSaleByDay},null,8,["reportFilter","chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(aG,{chartData:f(Pe).data.grossSaleByHour},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(GN,{ref:"chartRef",chartData:f(Pe).data.itemCountDistribution},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(BG,{chartData:f(Pe).data.orderValueDistribution},null,8,["chartData"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(TG,{chartData:f(Pe).data.orderChartData,"is-empty":!f(Pe).data.summary.gross_sale},null,8,["chartData","is-empty"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(zG,{chartData:f(Pe).data.orderChartData,"is-empty":!f(Pe).data.summary.order_count},null,8,["chartData","is-empty"])]),_:1}),o(u,{lg:12},{default:r(()=>[o(pG,{chartData:f(Pe).data.orderCompletionTime},null,8,["chartData"])]),_:1})]),_:1})])]),_:1})}}},qG={class:"fct-gross-sale-vs-net-revenue-wrap"},WG={class:"flex items-center gap-2"},XG={class:"fct-card-header-title is-small"},JG={class:"fct-chart-select"},ZG={class:"fct-btn-group sm"},ez={class:"chart-action-wrap"},tz={class:"chart-change-wrap"},az={class:"chart-change"},sz={class:"text"},nz={class:"chart-change"},oz={class:"text"},lz={__name:"RefundLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!1},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["fetch-chart-data"],setup(e,{emit:t}){const a=e,s=pe.colors.report,n=T(pe.isDark()),l=T(null),d=T("default"),u=T(ct.getChartType("refund","refund_chart")||"line"),c=T(!1);q(()=>a.reportFilter.currentCurrencySign);const h=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],v=t,y=()=>{v("fetch-chart-data",d.value)},g=q(()=>a.reportFilter.data.compareType!=="no_comparison"),B=(M,$,V,L,R,K=!0)=>({name:M,type:$,barMaxWidth:30,data:V,smooth:!1,color:L,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:L,borderRadius:[4,4,0,0]},yAxisIndex:R,emphasis:{scale:2,itemStyle:{color:Gt(L)},lineStyle:{color:L},areaStyle:{opacity:.3,color:L}},animation:K,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),w=q(()=>{let M=[{name:p("Refunded Amount"),key:"refunded_amount",type:"line",color:n.value?s.blue_dark_mode:s.blue,yAxisIndex:0,data:a.chartData.map($=>$.refunded_amount),animation:!1},{name:p("Total Refunds"),key:"refund_count",type:"bar",color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,yAxisIndex:1,data:a.chartData.map($=>$.refund_count),animation:!1}];return g.value&&M.unshift({name:p("Previous Refunded Amount"),key:"refunded_amount_compare",type:"line",color:n.value?s.purple_dark_mode:s.purple,yAxisIndex:0,data:a.compareData.map($=>$.refunded_amount),animation:!1},{name:p("Previous Total Refunds"),key:"refund_count_compare",type:"bar",color:n.value?s.dark_cyan_blue_16:s.light_gray,yAxisIndex:1,data:a.compareData.map($=>$.refund_count),animation:!0}),M.map($=>B($.name,$.type,$.data,$.color,$.yAxisIndex,$.animation))});let C=null;const F=T(!0),S=()=>{C&&(C.dispose(),C=null),de(()=>{l.value&&(C=at(l.value),Q(),C.on("legendselectchanged",M=>{F.value=M.selected["Total Refunds"]||M.selected["Previous Total Refunds"]}))})},E=q(()=>{const M=zs(a.reportFilter.data.dateRange);return p("This report looks at refunds made for successful orders created ")+M}),k=q(()=>ra(a.chartData.length)),Q=()=>{if(!C)return;const M=Oa(a.chartData),$={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:V=>{let L=V[0].name;return V.forEach(R=>{const K=[0,2].includes(R.seriesIndex)?`${Be.scaled(R.value)}`:R.value,J=n.value?"#ffffff":"#565865";L+=`<div>
            ${R.marker}
            <span style="color: ${J};">${R.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${J};">
              ${K}
            </span>
          </div>`}),L}},xAxis:{type:"category",data:M,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:k.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:V=>`${Be.scaled(V)}`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",axisLabel:{color:n.value?"#253241":"#D6DAE1",fontSize:12},splitLine:{show:!1}}],series:w.value,animation:!0,animationThreshold:2e3,animationDurationUpdate:300,animationEasingUpdate:"cubicInOut"};C.setOption($,{notMerge:!0,replaceMerge:["series"]})},I=()=>{c.value=!c.value,c.value?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):Q()};fe([()=>a.chartData,u],()=>{de(Q)},{deep:!0}),fe(()=>qa.data.refund,()=>{de(()=>{Q()})},{deep:!0}),fe(()=>a.isEmpty,M=>{M||S()}),fe(()=>a.loading,M=>{M||S()}),fe(F,()=>{if(!C)return;const $=C.getOption().series.map(V=>V.type==="line"?{...V,areaStyle:F.value?void 0:{opacity:.3}}:V);de(()=>{C.setOption({series:$})})});const D=()=>{n.value=pe.isDark(),de(()=>{Q()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",D),de(S)}),(M,$)=>{const V=b("el-tooltip"),L=b("el-option"),R=b("el-select"),K=b("el-skeleton");return A(),_("div",qG,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",WG,[i("h5",XG,m(f(p)("Refunds Chart")),1),o(V,{"popper-class":"fct-tooltip",content:E.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",JG,[o(R,{class:"el-select--x-small",modelValue:d.value,"onUpdate:modelValue":$[0]||($[0]=J=>d.value=J),onChange:y},{default:r(()=>[(A(),_(H,null,X(h,J=>o(L,{key:J.value,label:M.$t(J.label),value:J.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",ZG,[o(we,{tag:"button",size:"small",title:M.$t("Zoom Chart"),onClick:I,class:oe(c.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:l.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0"},{default:r(()=>[e.loading?(A(),U(K,{key:0,animated:"",rows:7,class:"p-4"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[e.isEmpty?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-refund-line-chart",ref_key:"chartRef",ref:l},null,512)),i("div",ez,[i("div",tz,[i("div",az,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",sz,m(M.$t("Data")),1)]),i("div",nz,[i("span",oz,m(M.$t("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}};class rz extends Xt{constructor(){super(...arguments);me(this,"data",{refundData:[],previousMetrics:[],summary:{},previousSummary:{},fluctuations:{},chartData:[],weeksBetweenRefund:[],isBusy:{chartData:!0,weeksBetweenRefund:!0,refundData:!0}})}get controllerKey(){return"RefundReportController"}makeRequest(a,s,n,l){l&&(this.data.isBusy[l]=!0),typeof s!="object"&&(s={});const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{n&&(this.data.isBusy[n]=!1)})}getRefundChartData(a={}){return this.makeRequest("refund-chart",a,null,"chartData")}getWeeksBetweenRefund(a={}){return this.makeRequest("weeks-between-refund",a,"data","weeksBetweenRefund")}getRefundSummary(a={}){return this.makeRequest("refund-summary",a,"summaryData","summaryData")}getRefundDataByGroup(a={}){return this.makeRequest("refund-data-by-group",a,"data","refundData")}getRefundReportFluctuations(a={}){return this.makeRequest("refund-report-fluctuations",a,"data","fluctuations")}}const _t=rz.init(),iz={key:1,class:"fct-report-order-summary summary-col-4"},Az={class:"summary-item-inner"},dz={class:"value"},uz={class:"inner-value"},cz=["innerHTML"],pz={class:"title"},fz={__name:"Summary",setup(e){const t=q(()=>[{title:p("Refunds"),value:_t.data.summary.refund_count,key:"refund_count",percentage:_t.data.fluctuations.refund_count,info:p("Total refunds count including partially refunds."),no_currency:!0},{title:p("Refunded"),value:_t.data.summary.refunded_amount,key:"refunded_amount",percentage:_t.data.fluctuations.refunded_amount,info:p("Total Refunded Amount")},{title:p("Avgerage Amount"),value:_t.data.summary.average_refunded_amount,key:"average_refunded_amount",percentage:_t.data.fluctuations.average_refunded_amount,info:p("Total Refunded Amount / Total Refund count")},{title:p("Refund Rate"),value:_t.data.summary.refund_rate,key:"refund_rate",percentage:_t.data.fluctuations.refund_rate,info:p("Total Refunded Amount / Total Order Amount"),no_currency:!0,is_percentage:!0}]),a=q(()=>_t.data.isBusy.chartData),s=n=>{const l=n.no_currency?it(n.value):Be.scaled(n.value);return n.is_percentage?`${l}%`:l};return(n,l)=>{const d=b("el-tooltip");return a.value?(A(),U(Wa,{key:0,loading:a.value,count:4},null,8,["loading"])):(A(),_("div",iz,[(A(!0),_(H,null,X(t.value,(u,c)=>(A(),_("div",{class:"summary-item",key:c},[i("div",Az,[i("div",dz,[i("div",uz,[i("span",{innerHTML:s(u)},null,8,cz)]),o(ha,{fluctuation:u.percentage,amount:f(_t).data.previousSummary[u.key],"is-liability":!0,"has-currency":!u.no_currency,"is-percentage":u.is_percentage},null,8,["fluctuation","amount","has-currency","is-percentage"])]),i("div",pz,[O(m(u.title)+" ",1),o(d,{content:u.info,placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},hz={class:"fct-report-refund-weeks-between-an-order-wrap"},mz={class:"fct-btn-group sm"},_z={class:"chart-action-wrap"},gz={class:"chart-change-wrap"},vz={class:"chart-change"},yz={class:"text"},bz={class:"chart-change"},wz={class:"text"},Cz={__name:"WeeksBetweenRefundChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},setup(e){const t=e,a=T(null),s=T("bar");let n=null;const l=pe.colors.report,d=T(pe.isDark()),u=q(()=>d.value?l.dark_cyan_blue_16:l.light_gray),c=q(()=>[{name:p("Refund Count"),type:s.value,data:t.chartData.map(w=>w.occurrence),smooth:!0,color:u.value,showSymbol:!1,itemStyle:{borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:Gt(u.value)}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]),h=q(()=>ra(t.chartData.length)),v=()=>({title:{text:t.chartTitle,left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:d.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:d.value?"#253241":"#ffffff",borderColor:d.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:d.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:d.value?l.dark_cyan_blue_16:l.light_gray_blue}}},xAxis:{type:"category",data:t.chartData.map(w=>w.weekBetween),axisLabel:{color:d.value?"#ffffff":"#000000",fontSize:12,interval:h.value.interval,formatter:w=>w>1?`${w} weeks`:`${w} week`},axisLine:{lineStyle:{type:"dashed",color:d.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:d.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:d.value?"#253241":"#D6DAE1"}}},series:c.value}),y=()=>{n&&(n.dispose(),n=null),de(()=>{a.value&&(n=at(a.value),n.setOption(v()),window.addEventListener("resize",()=>{n.resize()}))})};fe(()=>t.chartData,()=>{n&&n.setOption(v())}),fe(()=>t.isEmpty,w=>{w||y()}),fe(()=>t.loading,w=>{w||y()});const g=()=>{d.value=pe.isDark(),de(()=>{B()})};Re(()=>{window.removeEventListener("onFluentCartThemeChange",g,!1)});const B=w=>{n&&n.setOption(v(),!0)};return he(()=>{window.addEventListener("onFluentCartThemeChange",g),de(()=>{y()})}),(w,C)=>{const F=b("el-skeleton");return A(),_("div",hz,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Weeks between an order's created date and refund date"),title_size:"small",border_bottom:""},ft({_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",mz,[o(Ct,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(le,{class:"px-0"},{default:r(()=>[e.loading?(A(),U(F,{key:0,animated:"",rows:7,class:"p-4"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[e.isEmpty?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-refund-weeks-between-an-order-chart",ref_key:"chartRef",ref:a},null,512)),i("div",_z,[i("div",gz,[i("div",vz,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",yz,m(f(p)("Refund Count")),1)]),i("div",bz,[i("span",wz,m(f(p)("Weeks")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},Bz={class:"fct-btn-group sm w-[240px] gap-2"},kz={key:0},Fz={key:1},xz={class:"inline-flex"},Uz={class:"inline-flex"},Sz={__name:"RefundTable",props:{tableData:{type:Array,required:!0},currencySign:{type:String},loading:{type:Boolean,default:!0}},emits:["group-data"],setup(e,{emit:t}){const a=t;T([]);const s=T([{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method Title"),value:"payment_method_title"}]),n=T("billing_country"),l=q(()=>{var u;return((u=s.value.find(c=>c.value===n.value))==null?void 0:u.label)||""}),d=()=>{a("group-data",n.value)};return(u,c)=>{const h=b("el-option"),v=b("el-select"),y=b("el-skeleton"),g=b("el-table-column"),B=b("el-empty"),w=b("el-table");return A(),U(re,{class:"overflow-hidden"},{default:r(()=>[o(Ae,{title:f(p)("Refunds Grouped By"),title_size:"small"},ft({_:2},[e.loading?void 0:{name:"action",fn:r(()=>[i("div",Bz,[o(v,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=C=>n.value=C),onChange:d,class:"el-select--x-small",placeholder:f(p)("Select Group")},{default:r(()=>[(A(!0),_(H,null,X(s.value,C=>(A(),U(h,{key:C.value,label:f(p)(C.label),value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(mo,{data:e.tableData,filename:"refund.csv",class:"!ml-0"},null,8,["data"])])]),key:"0"}]),1032,["title"]),o(le,{class:"px-0 pb-0"},{default:r(()=>[e.loading?(A(),U(y,{key:0,animated:"",rows:7,class:"p-4"})):(A(),U(w,{key:1,data:e.tableData,height:"330"},{empty:r(()=>[o(B,{text:"No data available"})]),default:r(()=>[o(g,{prop:n.value,label:f(p)(l.value),"min-width":"150"},{default:r(C=>[n.value!=="payment_method_type"&&n.value!=="payment_method_title"?(A(),_("span",kz,m(f(io)(C.row[n.value])),1)):(A(),_("span",Fz,m(C.row[n.value]),1))]),_:1},8,["prop","label"]),o(g,{prop:"refunds",label:f(p)("Refunds"),"min-width":"150"},{default:r(C=>c[1]||(c[1]=[])),_:1},8,["label"]),o(g,{prop:"refunded_amount",label:f(p)("Refunded Amount"),"min-width":"150"},{default:r(C=>[i("div",xz,m(f(Be).scaled(C.row.totalRefundedAmount.total)),1)]),_:1},8,["label"]),o(g,{prop:"average_refund",label:f(p)("Average Refund"),"min-width":"150"},{default:r(C=>[i("div",Uz,m(f(Be).scaled(C.row.totalRefundedAmount.average)),1)]),_:1},8,["label"])]),_:1},8,["data"]))]),_:1})]),_:1})}}},Ez={class:"fct-refund-report-page"},Qz={__name:"RefundReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const a=e.reportFilter,s=u=>{_t.getRefundChartData({params:{...u.params,groupKey:"default"}}),_t.getWeeksBetweenRefund(u),n(u)},n=u=>{_t.getRefundDataByGroup({params:{...u.params,groupKey:"billing_country"}})},l=u=>{const c=a.applicableFilters;_t.getRefundDataByGroup({params:{...c.params,groupKey:u}})},d=u=>{const c=a.applicableFilters;c&&_t.getRefundChartData({params:{...c.params,groupKey:u}})};return he(()=>{a.addListener("refund-report",s),s(a.applicableFilters)}),Re(()=>{a.removeListener("refund-report")}),(u,c)=>(A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",Ez,[o(fz),o(lz,{ref:"refundChart",chartData:f(_t).data.chartData,compareData:f(_t).data.previousMetrics,reportFilter:f(a),onFetchChartData:d,"is-empty":!f(_t).data.summary.refund_count,loading:f(_t).data.isBusy.chartData},null,8,["chartData","compareData","reportFilter","is-empty","loading"]),o(Cz,{chartData:f(_t).data.weeksBetweenRefund,"is-empty":!f(_t).data.weeksBetweenRefund.length,loading:f(_t).data.isBusy.weeksBetweenRefund},null,8,["chartData","is-empty","loading"]),o(Sz,{tableData:f(_t).data.refundData,currencySign:f(a).currentCurrencySign,onGroupData:l,loading:f(_t).data.isBusy.refundData},null,8,["tableData","currencySign","loading"])])]),_:1}))}},Dz={class:"fct-gross-sale-vs-net-revenue-wrap"},Iz={class:"fct-chart-select"},$z={class:"fct-btn-group sm"},Tz={class:"chart-action-wrap"},Mz={class:"chart-change-wrap"},Vz={class:"chart-change"},Lz={class:"text"},Oz={class:"chart-change"},Hz={class:"text"},Rz={__name:"RetentionChart",props:{chartData:{type:Object,required:!0},reportFilter:{type:Object},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["fetch-custom-chart-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(ct.getChartType("subscription","retention_chart")||"line"),l=T(!1),d=T(null);T([]);const u=pe.colors.report,c=T(pe.isDark()),h=(Q,I,D,M)=>({name:Q,type:I,barMaxWidth:30,data:D,smooth:!1,color:M,lineStyle:{width:3},areaStyle:{opacity:.3,color:M},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:M,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(M)},lineStyle:{color:M},areaStyle:{opacity:.3,color:M}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),v=q(()=>Object.keys(a.chartData).map(I=>I.startsWith("day_")?p("%s Days",I.replace("day_","")):I==="more_than_year"?p("More than Year"):I)),y=q(()=>Object.keys(a.chartData).map(I=>a.chartData[I]||0)),g=q(()=>[h(p("Customers"),n.value,y.value,c.value?u.dark_cyan_blue_16:u.light_gray)]);let B=null;const w=()=>{B&&(B.dispose(),B=null),de(()=>{s.value&&(B=at(s.value),C())})},C=()=>{if(!B)return;const Q={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:c.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:c.value?"#253241":"#ffffff",borderColor:c.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:c.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:c.value?u.dark_cyan_blue_16:u.light_gray_blue}}},xAxis:{type:"category",data:v.value,axisLabel:{color:c.value?"#ffffff":"#565865",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:c.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:c.value?"#ffffff":"#565865",fontSize:12},splitLine:{show:!0,lineStyle:{color:c.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value};B.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},F=Q=>{ct.onChange("subscription","retention_chart",Q),n.value!==Q&&(l.value=!1,n.value=Q,C())},S=t,E=()=>{S("fetch-custom-chart-data",d.value)};fe(()=>a.chartData,()=>{de(C)},{deep:!0}),fe(()=>qa.data.refund,()=>{de(C)},{deep:!0}),fe(()=>a.isEmpty,Q=>{Q||w()}),fe(()=>a.loading,Q=>{Q||w()});const k=()=>{c.value=pe.isDark(),de(()=>{C()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",k,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",k),de(w)}),(Q,I)=>{const D=b("el-input"),M=b("el-skeleton");return A(),_("div",Dz,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title:f(p)("Retention Chart"),title_size:"small",border_bottom:""},ft({_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",Iz,[o(D,{type:"text",modelValue:d.value,"onUpdate:modelValue":I[0]||(I[0]=$=>d.value=$),placeholder:f(p)("Enter custom days"),class:"el-input--x-small",onKeyup:Ma(E,["enter"])},null,8,["modelValue","placeholder"])]),i("div",$z,[o(Xa,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:F},null,8,["activeType"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1032,["title"]),o(le,{class:"px-0"},{default:r(()=>[e.loading?(A(),U(M,{key:0,animated:"",rows:7,class:"p-4"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[i("div",{class:"fct-chart-wrap fct-refund-line-chart",ref_key:"chartRef",ref:s},null,512),i("div",Tz,[i("div",Mz,[i("div",Vz,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",Lz,m(f(p)("Data")),1)]),i("div",Oz,[i("span",Hz,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},Pz={class:"fct-revenue-line-chart-wrap"},Kz={class:"flex items-center gap-2"},Nz={class:"fct-card-header-title is-small"},Gz={class:"w-[270px] fct-btn-group sm gap-1.5 lg:gap-0"},zz={class:"chart-action-wrap"},jz={class:"chart-change-wrap"},Yz={class:"chart-change"},qz={class:"text"},Wz={class:"chart-change"},Xz={class:"text"},Jz={__name:"SubscriptionChartNew",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(ct.getChartType("subscription","subscription_chart")||"line"),l=T(!1),d=pe.colors.report,u=T(pe.isDark()),c=(M,$,V,L,R)=>({name:M,type:$,barMaxWidth:30,yAxisIndex:V,data:L,smooth:!1,color:R,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=T(a.appliedGroupKey);fe(()=>a.appliedGroupKey,M=>{h.value=M});const v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],y=t,g=()=>{y("filter-data",h.value)},B=q(()=>a.reportFilter.data.compareType!=="no_comparison"),w=q(()=>{let M=[{name:p("Current Range"),key:"count",type:n.value,color:u.value?d.dark_cyan_blue_36:d.light_gray_cyan_blue,data:a.chartData.map($=>$.count)}];return B.value&&M.unshift({name:p("Compare Range"),key:"count",type:n.value,color:u.value?d.dark_cyan_blue_16:d.light_gray,data:a.compareData.map($=>({value:$.count,date:$.group}))}),M.map($=>c($.name,$.type,0,$.data,$.color))});let C=null;const F=()=>{C&&(C.dispose(),C=null),de(()=>{s.value&&(C=at(s.value),k())})},S=q(()=>{const M=zs(a.reportFilter.data.dateRange);return p("This report looks at the subscription you received ")+M}),E=q(()=>ra(a.chartData.length)),k=()=>{if(!C)return;const M=Oa(a.chartData),$={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.dark_cyan_blue_16:d.light_gray_blue}},alwaysShowContent:!1,formatter:V=>{let L="";return V.forEach(function(R,K){const J=typeof R.data=="object"&&R.data!==null,W=J?js(R.data.date):R.name,ae=J?R.data.value:R.value,Z=V.length>1&&K===0;Z&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${W}</div>`,L+=`<div>
            <span style="color:${R.color}"></span> 
            <span>${p("Subscription")}</span>
            <span style="float: right; margin-left: 20px;">
              ${it(ae)}
            </span>
          </div>`,Z&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:M,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:w.value};C.setOption($,{notMerge:!0,replaceMerge:["series"]})},Q=()=>{l.value=!l.value,l.value?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):k()},I=M=>{ct.onChange("subscription","subscription_chart",M),n.value!==M&&(l.value=!1,n.value=M,k())};fe([()=>a.chartData,h],()=>{de(k)},{deep:!0}),fe(()=>qa.data.revenue,()=>{de(()=>{k()})},{deep:!0}),fe(()=>a.isEmpty,M=>{M||F()}),fe(()=>a.loading,M=>{M||F()});const D=()=>{u.value=pe.isDark(),de(()=>{k()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",D),de(()=>{F()})}),(M,$)=>{const V=b("el-tooltip"),L=b("el-option"),R=b("el-select"),K=b("el-skeleton");return A(),_("div",Pz,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",Kz,[i("h4",Nz,m(f(p)("Subscription Chart")),1),o(V,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",Gz,[o(R,{class:"el-select--x-small",modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=J=>h.value=J),onChange:g},{default:r(()=>[(A(),_(H,null,X(v,J=>o(L,{key:J.value,label:f(p)(J.label),value:J.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),o(Xa,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:I},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:f(p)("Zoom Chart"),onClick:Q,class:oe(l.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[e.loading?(A(),U(K,{key:0,animated:"",rows:7,class:"p-4"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[e.isEmpty?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512)),i("div",zz,[i("div",jz,[i("div",Yz,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",qz,m(f(p)("Data")),1)]),i("div",Wz,[i("span",Xz,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}};class Zz extends Xt{constructor(){super(...arguments);me(this,"data",{overviews:[],fluctuations:[],chartData:[],productList:[],customerList:[],revenueChurnRateNet:{title:p("Revenue Churn Rate"),isCurrency:!1,value:0},netNewMrr:{title:p("Net New MRR"),isCurrency:!0,value:0},isBusy:{overviews:!1,fluctuations:!1,chartData:!0,productList:!1,customerList:!1,revenueChurnRateNet:!0,netNewMrr:!0},currentMetrics:[],previousMetrics:[]})}get controllerKey(){return"SubscriptionReportController"}get revenueChurnRateNet(){return this.data.revenueChurnRateNet}get netNewMrr(){return this.data.netNewMrr}makeRequest(a,s,n,l){typeof s!="object"&&(s={}),this.data.isBusy[l]=!0;const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null||(this.data[n]=l[s])}).catch(l=>{console.log(l,"error")}).finally(()=>{this.data.isBusy[n]=!1})}getSubscriptionReportFluctuations(a={}){return this.makeRequest("getSubscriptionReportFluctuations",a,"fluctuations","fluctuations")}getSubscriptionReportFluctuations(a={}){return this.makeRequest("get-subscription-fluctuations",a,"fluctuations","fluctuations")}getRetentionChart(a={}){return this.makeRequest("retention-chart",a,"chartData","chartData")}listSubscriptionsByProduct(a={}){return this.makeRequest("list-subscription-by-product",a,"productList","productList")}listSubscriptionsByCustomer(a={}){return this.makeRequest("list-subscription-by-customer",a,"customerList","customerList")}getSubscriptionOverview(a={}){return this.makeRequest("get-subscription-overview",a,"overviews","overviews").then(s=>{this.getRevenueChurnRateNet(a),this.getNetNewMrr(a)}).finally(()=>{})}getRevenueChurnRateNet(a={}){this.data.isBusy.revenueChurnRateNet=!0,se.get("reports/get-subscription-overview/revenue-churn-rate-net",a).then(s=>{this.data.revenueChurnRateNet=s.data}).finally(()=>{this.data.isBusy.revenueChurnRateNet=!1})}getNetNewMrr(a={}){this.data.isBusy.netNewMrr=!0,se.get("reports/get-subscription-overview/net-new-mrr",a).then(s=>{this.data.netNewMrr=s.data}).finally(()=>{this.data.isBusy.netNewMrr=!1})}}const on=Zz.init(),ej={key:1,class:"fct-report-order-summary summary-col-4"},tj={class:"summary-item-inner"},aj={class:"value"},sj={class:"inner-value"},nj={class:"title"},oj={__name:"Summary",props:{summaryData:{type:Object,required:!0},fluctuations:{type:Object,required:!0},reportFilter:{type:Object},subscriptionReport:{type:Object},loading:{type:Boolean,default:!0}},setup(e){const t=e;q(()=>{var n;return((n=t.reportFilter)==null?void 0:n.currentCurrencySign)||""});const a=[{title:p("Future Installments"),key:"future_installments",info:p("The total amount expected from future installments."),hasCurrency:!0}],s=q(()=>!t.summaryData||!t.fluctuations?[]:a.map(n=>({...n,title:n.title,value:t.summaryData[n.key]||0,fluctuation:t.fluctuations[n.key]||0,hasCurrency:n.hasCurrency})));return(n,l)=>{const d=b("el-tooltip");return e.loading?(A(),U(Wa,{key:0,loading:e.loading},null,8,["loading"])):(A(),_("div",ej,[(A(!0),_(H,null,X(s.value,(u,c)=>(A(),_("div",{class:"summary-item",key:c},[i("div",tj,[i("div",aj,[i("div",sj,[o(Ys,{amount:f(Be).scaled(u.value),title:u.title},null,8,["amount","title"])])]),i("div",nj,[O(m(u.title)+" ",1),o(d,{content:u.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},lj={class:"chart-action-wrap"},rj={class:"chart-change-wrap"},ij={class:"chart-change"},Aj={class:"text"},dj={class:"chart-change"},uj={class:"text"},cj={__name:"LineChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},formatValuePercentage:{type:Boolean,default:!1},amountFormat:{type:Boolean,default:!1},chartType:{type:String},zoomIsActive:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,s=T(null),n=T(a.chartData);t({chartRef:s}),fe(()=>a.chartData,S=>{n.value=S},{deep:!0});const l=pe.colors.report,d=T(pe.isDark()),u=q(()=>({textColor:d.value?"#ffffff":"#000000",borderColor:d.value?"#4a5a6b":"#c0c4ca",splitLineColor:d.value?"#253241":"#D6DAE1",bgColor:d.value?"#2d3748":"#ffffff"})),c=q(()=>d.value?l.dark_cyan_blue_16:l.light_gray),h=q(()=>n.value.map(S=>js(S.label))),v=q(()=>[{name:a.chartTitle,type:a.chartType,data:n.value.map(S=>S.value),smooth:!1,color:c.value,lineStyle:{width:3},barMaxWidth:30,areaStyle:{opacity:.3,color:c.value},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:c.value,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(c.value)},lineStyle:{color:c.value},areaStyle:{opacity:.3,color:c.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]);let y=null;const g=()=>{y&&(y.dispose(),y=null),de(()=>{s.value&&(y=at(s.value),w())})},B=q(()=>ra(a.chartData.length)),w=()=>{if(!y)return;const S={legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:d.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:d.value?"#253241":"#ffffff",borderColor:d.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:d.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:d.value?l.dark_cyan_blue_16:l.light_gray_blue}}},xAxis:{type:"category",data:h.value,axisLabel:{color:u.value.textColor,fontSize:12,interval:B.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:u.value.textColor,fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value.splitLineColor,type:"dashed"}}},series:v.value};y.setOption(S,{notMerge:!0,replaceMerge:["series"]})},C=S=>{S?y.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):w()};fe([()=>n.value,()=>a.chartType,()=>pe.isDark(),()=>a.loading],()=>{g()},{deep:!0}),fe(()=>a.zoomIsActive,S=>{C(S)});const F=()=>{d.value=pe.isDark(),de(()=>{w()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",F),de(g)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",F,!1)}),(S,E)=>{const k=b("el-skeleton");return e.loading?(A(),U(k,{key:0,animated:"",rows:8})):(A(),_(H,{key:1},[n.value.length?(A(),_(H,{key:0},[n.value.length?(A(),_("div",{key:0,class:"fct-chart-wrap",ref_key:"chartRef",ref:s},null,512)):x("",!0),i("div",lj,[i("div",rj,[i("div",ij,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",Aj,m(S.$t("Data")),1)]),i("div",dj,[i("span",uj,m(S.$t("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64)):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"]))],64))}}},pj={class:"fct-daily-signup-chart-wrap"},fj={class:"fct-btn-group sm gap-2 lg:gap-0"},hj={__name:"DailySignupChart",props:{reportFilter:{type:Object,required:!1}},setup(e){const t=e,a=T(ct.getChartType("subscription","daily_signups_chart")||"line"),s=T([]),n=T(""),l=T(!1),d=T(!0),u=h=>{d.value=!0,se.get("reports/daily-signups",{params:{...h}}).then(v=>{s.value=v.signups,s.value.forEach(y=>{y.label=y.trend_date})}).finally(()=>d.value=!1)},c=h=>{ct.onChange("subscription","daily_signups_chart",h),a.value!==h&&(a.value=h)};return he(()=>{u(t.reportFilter.applicableFilters.params),t.reportFilter.addListener("daily-signup-chart",h=>{u(h.params)})}),(h,v)=>(A(),_("div",pj,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Daily Signups"),title_size:"small",border_bottom:""},ft({_:2},[s.value.length&&!d.value?{name:"action",fn:r(()=>[i("div",fj,[o(Xa,{activeType:a.value,types:{line:"LineChart",bar:"BarChart"},onChange:c},null,8,["activeType"]),n.value?(A(),U(Ct,{key:0,targetRef:n.value.chartRef},null,8,["targetRef"])):x("",!0)])]),key:"0"}:void 0]),1032,["title"]),o(le,null,{default:r(()=>[o(cj,{chartData:s.value,"chart-title":f(p)("Signups"),chartType:a.value,zoomIsActive:l.value,ref_key:"lineChartRef",ref:n,loading:d.value},null,8,["chartData","chart-title","chartType","zoomIsActive","loading"])]),_:1})]),_:1})]))}};const mj={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,default:!0}},components:{CardContainer:re,CardHeader:Ae,CardBody:le},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const e=[];return this.hasComparison?(this.currentMetrics.forEach((t,a)=>{if(a<this.previousMetrics.length){const s=this.previousMetrics[a],n=t.count,l=s.count,d=l?((n-l)/l*100).toFixed(2):"n/a";e.push({group:`${this.formatDate(t.group)} vs ${this.formatDate(s.group)}`,count:it(n),previous_count:it(l),percent_change:d})}}),e):this.currentMetrics}},methods:{translate:p,getPercentageClass(e){return e>0?"text-success-500":e<0?"text-red-500":"text-system-light"},formatDate(e){const t=e.split("-");if(t.length===3){const[a,s,n]=t;return`${Vt[parseInt(s)-1]} ${n}, ${a}`}else if(t.length===2){const[a,s]=t;return`${Vt[parseInt(s)-1]} ${a}`}else if(t.length===1){const[a]=t;return`${a}`}}}},_j={class:"fct-revenue-comparison"},gj={class:"inline-flex"},vj={class:"inline-flex"};function yj(e,t,a,s,n,l){const d=b("CardHeader"),u=b("el-skeleton"),c=b("el-table-column"),h=b("el-table"),v=b("CardBody"),y=b("CardContainer");return A(),_("div",_j,[o(y,{class:"overflow-hidden"},{default:r(()=>[o(d,{title:l.translate("Subscription Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(A(),U(u,{key:0,animated:"",rows:7,class:"p-4"})):(A(),U(h,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:"Date"},{default:r(g=>[O(m(g.row.group),1)]),_:1}),o(c,{label:l.translate("Current Range")},{default:r(g=>[i("div",gj,m(g.row.count),1)]),_:1},8,["label"]),a.hasComparison?(A(),_(H,{key:0},[o(c,{label:l.translate("Compare Range")},{default:r(g=>[i("div",vj,m(g.row.previous_count),1)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:oe(l.getPercentageClass(g.row.percent_change))},m(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const bj=be(mj,[["render",yj]]),wj={class:"fct-refund-report-page"};const Cj={__name:"SubscriptionReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=T({summary:{},fluctuations:{},currentMetrics:[],compareMetrics:[],loading:!0}),s=t.reportFilter,n=T("default"),l=q(()=>s.currentCurrencySign);s.applicableFilters;const d=T(""),u=T(""),c=q(()=>{var S;const C=((S=on.data)==null?void 0:S.productList)||[],F=d.value.toLowerCase();return C.filter(E=>E.product_name.toLowerCase().includes(F))}),h=q(()=>{var S;const C=((S=on.data)==null?void 0:S.customerList)||[],F=u.value.toLowerCase();return C.filter(E=>E.customer_name.toLowerCase().includes(F)||E.email.toLowerCase().includes(F))}),v=C=>{y(C),B(C)},y=(C,F="default")=>{a.value.loading=!0,se.get("reports/subscription-chart",{params:{...C.params,groupKey:F}}).then(S=>{a.value=S}).finally(()=>a.value.loading=!1)},g=C=>{n.value!==C&&(n.value=C,y(s.applicableFilters.params,C))},B=(C,F=null)=>{on.getRetentionChart({params:{...C.params,customDays:F}})},w=C=>{B(s.applicableFilters,C)};return he(()=>{s.addListener("subscription-report",C=>{v(C)}),v(s.applicableFilters)}),Re(()=>{s.removeListener("subscription-report")}),(C,F)=>{const S=b("el-col"),E=b("el-row"),k=b("el-input"),Q=b("el-table-column"),I=b("el-empty"),D=b("el-table");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",wj,[o(oj,{summaryData:a.value.summary,fluctuations:a.value.fluctuations,subscriptionReport:f(on),reportFilter:f(s),loading:a.value.loading},null,8,["summaryData","fluctuations","subscriptionReport","reportFilter","loading"]),o(Jz,{ref:"subscriptionChart",chartData:a.value.currentMetrics,compareData:a.value.compareMetrics,reportFilter:f(s),appliedGroupKey:n.value,onFilterData:g,"is-empty":!a.value.summary.total_subscriptions,loading:a.value.loading},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(bj,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.compareMetrics,hasComparison:t.reportFilter.data.compareType!=="no_comparison",reportFilter:f(s),loading:a.value.loading},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"]),o(E,{gutter:30},{default:r(()=>[o(S,{lg:12},{default:r(()=>[o(Rz,{ref:"subscriptionChart",chartData:f(on).data.chartData,onFetchCustomChartData:w,"is-empty":!a.value.summary.total_subscriptions,loading:f(on).data.isBusy.chartData},null,8,["chartData","is-empty","loading"])]),_:1}),o(S,{lg:12},{default:r(()=>[o(hj,{reportFilter:f(s),"is-empty":!a.value.summary.total_subscriptions},null,8,["reportFilter","is-empty"])]),_:1})]),_:1}),x("",!0),x("",!0),x("",!0),x("",!0)])]),_:1})}}},Bj={class:"fct-refund-report-page"},kj={key:1},Fj={key:1,class:"fct-report-order-summary summary-col-2"},xj={class:"summary-item-inner"},Uj={class:"value"},Sj={class:"inner-value"},Ej=["innerHTML"],Qj={class:"title"},Dj={class:"fct-revenue-line-chart-wrap"},Ij={class:"flex items-center gap-2"},$j={class:"fct-card-header-title is-small"},Tj={class:"fct-btn-group sm"},Mj={class:"chart-action-wrap"},Vj={class:"chart-change-wrap"},Lj={class:"chart-change"},Oj={class:"text"},Hj={class:"chart-change"},Rj={class:"text"},Pj={__name:"FutureRenewalsReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const a=e.reportFilter,s=T(!1),n=pe.colors.report,l=T(pe.isDark()),d=T(null);let u=null;const c=T({totalProjected:0,totalRenewals:0,projections:[],period:{start:null,end:null},groupBy:"monthly"}),h=T(!0),v=(I,D="monthly")=>{h.value=!0,se.get("reports/future-renewals",{params:{...I.params,groupKey:D}}).then(M=>{c.value=M}).finally(()=>h.value=!1)},y=(I,D,M,$,V)=>({name:I,type:D,barMaxWidth:30,yAxisIndex:M,data:$,smooth:!1,color:V,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(V)},lineStyle:{color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),g=()=>{u&&(u.dispose(),u=null),de(()=>{d.value&&(u=at(d.value),B())})},B=()=>{if(!u)return;const I=Oa(c.value.projections),D={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?n.dark_cyan_blue_16:n.light_gray_blue}},formatter:M=>{let $=M[0].name;return M.forEach((V,L)=>{const R=L===0?`${Be.formatScaled(V.value)}`:it(V.value),K=l.value?"#ffffff":"#565865";$+=`<div>
                        ${V.marker}
                        <span style="color: ${K};">${V.seriesName}</span>
                        <span style="float: right; margin-left: 20px; color: ${K};">
                        ${R}
                        </span>
                    </div>`}),$}},grid:{show:!1},xAxis:{type:"category",data:I,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,formatter:M=>`${Be.formatScaledChart(M)}`},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1}}],series:S.value};u.setOption(D,{notMerge:!0,replaceMerge:["series"]})},w=()=>{s.value=!s.value,s.value?u.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):B()},C=()=>{l.value=pe.isDark(),de(()=>{B()})},F=q(()=>{const I=zs(c.value.period);return p("This report is calculated by looking at active subscriptions and extrapolating their renewals over time, to estimate future renewal revenue ")+I}),S=q(()=>[{name:p("Revenue"),key:"count",type:"line",color:l.value?n.blue_dark_mode:n.blue,data:c.value.projections.map(D=>D.projected_amount)},{name:p("Count"),key:"count",type:"bar",color:l.value?n.dark_cyan_blue_16:n.light_gray,data:c.value.projections.map(D=>D.renewals_count)}].map((D,M)=>y(D.name,D.type,M,D.data,D.color))),E=q(()=>ra(c.value.projections.length)),k=q(()=>[{title:p("Renewal Revenue"),value:Be.formatScaled(c.value.totalProjected),key:"renewal_revenue"},{title:p("Renewals"),value:it(c.value.totalRenewals),key:"renewals_count",no_currency:!0}]),Q=q(()=>!c.value.totalRenewals);return fe([()=>c.value],()=>{de(B)},{deep:!0}),fe(Q,I=>{I||g()}),fe(h,I=>{I||g()}),he(()=>{v(a.applicableFilters),de(()=>{g()}),window.addEventListener("onFluentCartThemeChange",C)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1)}),(I,D)=>{const M=b("el-skeleton");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",Bj,[o(Ua,{title:f(p)("Subscription Future Revenue")},null,8,["title"])]),o(re,null,{default:r(()=>[o(le,{class:"p-3"},{default:r(()=>[h.value?(A(),U(Wa,{key:0,loading:h.value,"margin-bottom":0,padding:0},null,8,["loading"])):(A(),_("div",kj,m(F.value),1))]),_:1})]),_:1}),h.value?(A(),U(Wa,{key:0,loading:h.value,count:2},null,8,["loading"])):(A(),_("div",Fj,[(A(!0),_(H,null,X(k.value,($,V)=>(A(),_("div",{class:"summary-item",key:V},[i("div",xj,[i("div",Uj,[i("div",Sj,[i("span",{innerHTML:$.value},null,8,Ej)])]),i("div",Qj,m($.title),1)])]))),128))])),i("div",Dj,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",Ij,[i("h4",$j,m(f(p)("Upcoming Renewal Revenue")),1)])]),_:2},[c.value.totalRenewals&&!h.value?{name:"action",fn:r(()=>[i("div",Tj,[o(we,{tag:"button",size:"small",title:I.$t("Zoom Chart"),onClick:w,class:oe(s.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:d.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[h.value?(A(),U(M,{key:0,animated:"",rows:7,class:"px-4 pt-4"})):(A(),_(H,{key:1},[Q.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[Q.value?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:d},null,512)),i("div",Mj,[i("div",Vj,[i("div",Lj,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",Oj,m(f(p)("Data")),1)]),i("div",Hj,[i("span",Rj,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])]),_:1})}}},Kj={class:"fct-retention-lifetime"},Nj={class:"flex items-center gap-2"},Gj={class:"fct-card-header-title is-small"},zj={key:0},jj={class:"mt-2"},Yj={__name:"Lifetime",props:{data:{type:Object,required:!0},loading:{type:Boolean,default:!0}},setup(e){const t=e,a=q(()=>{var n;return((n=t.data)==null?void 0:n.retention_data)??[]}),s=q(()=>{const n=a.value;if(!n.length)return null;const d=n.reduce((F,S)=>F+parseFloat(S.retention_rate),0)/n.length,u=d/100;let c=0;u<1?c=1/(1-u):c=n.length;const h=n[n.length-1],v=parseInt(h.active_subscriptions),y=parseFloat(h.mrr);let g=0;v>0&&(g=y/v);const B=g*c,w=new Date(h.day),C=Vt[w.getMonth()]+" "+w.getFullYear().toString();return{expected_lifetime_text:p(`Based on an average monthly subscription retention rate of ${d.toFixed(1)}%, your expected subscription lifetime is ${c.toFixed(1)} months.`),ltv_text:p(`In ${C}, your average monthly revenue per subscriber was ${Be.scaled(g)}, giving you an expected subscription lifetime value of ${Be.scaled(B)}.`)}});return(n,l)=>{const d=b("el-skeleton");return A(),_("div",Kj,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},{title:r(()=>[i("div",Nj,[i("h4",Gj,m(f(p)("Lifetime")),1)])]),_:1}),o(le,null,{default:r(()=>[e.loading?(A(),U(d,{key:0,animated:"",rows:1})):(A(),_(H,{key:1},[s.value?(A(),_("div",zj,[i("div",null,m(s.value.expected_lifetime_text),1),i("div",jj,m(s.value.ltv_text),1)])):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Not enough data to calculate lifetime metrics."),class:"fct-report-empty-state"},null,8,["text"]))],64))]),_:1})]),_:1})])}}},qj={class:"summary-item-inner"},Wj={class:"title text-[16px] mb-2.5"},Xj={class:"grid grid-cols-2 items-center"},Jj={class:"value"},Zj={class:"sub-value mt-1.5"},eY={class:"value"},tY={class:"sub-value mt-1.5"},aY={class:"description leading-[1.6] mt-3.5"},sY={__name:"Summary",props:{data:{type:Object,required:!0},loading:{type:Boolean,default:!0}},setup(e){const t=e,a=pe.colors.report,s=T(pe.isDark()),n=q(()=>{var u;return((u=t.data)==null?void 0:u.retention_data)??[]}),l=q(()=>{const u=n.value;if(!u.length)return[];const h=(u.reduce((D,M)=>D+parseFloat(M.retention_rate),0)/u.length).toFixed(1),y=(u.reduce((D,M)=>D+parseFloat(M.retention_rate_money),0)/u.length).toFixed(1),g=u[u.length-1];let B="",w=0,C=0;if(u.length>1){const D=u[u.length-2],M=new Date(D.day);B=Vt[M.getMonth()]+" "+M.getFullYear().toString(),w=parseInt(D.active_subscriptions),C=parseFloat(D.mrr)}else{const D=new Date(g.day);D.setMonth(D.getMonth()-1),B=Vt[D.getMonth()]+" "+D.getFullYear().toString();const M=parseInt(g.active_subscriptions)-parseInt(g.new_subscriptions);w=g.retention_rate>0?Math.round(M/(g.retention_rate/100)):0;const $=parseFloat(g.mrr)-parseFloat(g.new_subscriptions_mrr);C=g.retention_rate_money>0?$/(g.retention_rate_money/100):0}const F=parseInt(g.active_subscriptions)-parseInt(g.new_subscriptions),S=parseFloat(g.mrr)-parseFloat(g.new_subscriptions_mrr),E=parseFloat(g.retention_rate),k=parseFloat(g.retention_rate_money),Q=new Date(g.day),I=Vt[Q.getMonth()]+" "+Q.getFullYear().toString();return[{title:p("Subscription Retention"),value:`${E}%`,average_value:`${h}%`,month_name:I,sub_title:p("Average in period"),description:p(`You retained ${g.retention_rate}% (${it(F)}) of your ${B} subscriptions (${it(w)}).`),color:s.value?a.dark_cyan_blue_16:a.light_gray},{title:p("MRR Retention"),value:`${k}%`,average_value:`${y}%`,month_name:I,sub_title:p("Average in period"),description:p(`You retained ${g.retention_rate_money}% (${Be.scaled(S)}) of your ${B} subscription MRR (${Be.scaled(C)}).`),color:s.value?a.dark_cyan_blue_36:a.light_gray_cyan_blue}]}),d=()=>{s.value=pe.isDark()};return he(()=>{window.addEventListener("onFluentCartThemeChange",d)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",d,!1)}),(u,c)=>{var h,v;return e.loading?(A(),U(Wa,{key:0,loading:e.loading,count:2},null,8,["loading"])):(A(),_("div",{key:1,class:oe(`fct-report-order-summary ${(h=l.value)!=null&&h.length?"summary-col-2":""}`)},[(v=l.value)!=null&&v.length?(A(!0),_(H,{key:0},X(l.value,(y,g)=>(A(),_("div",{class:"summary-item",key:g},[i("div",qj,[i("div",Wj,m(y.title),1),i("div",Xj,[i("div",null,[i("div",Jj,m(y.value),1),i("div",Zj,m(y.month_name),1)]),i("div",null,[i("div",eY,m(y.average_value),1),i("div",tY,m(y.sub_title),1)])]),i("div",aY,m(y.description),1)])]))),128)):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"]))],2))}}},nY={class:"fct-revenue-line-chart-wrap"},oY={class:"flex items-center gap-2"},lY={class:"fct-card-header-title is-small"},rY={class:"fct-btn-group sm"},iY={class:"chart-action-wrap"},AY={class:"chart-change-wrap"},dY={class:"chart-change"},uY={class:"text"},cY={class:"chart-change"},pY={class:"text"},fY={__name:"RetentionChart",props:{loading:{type:Boolean,default:!0},data:{type:Object,required:!0}},setup(e){const t=e,a=T(!1),s=pe.colors.report,n=T(pe.isDark()),l=T(null);let d=null;const u=T(ct.getChartType("subscription","retention_chart")||"line"),c=(E,k,Q,I,D)=>({name:E,type:k,barMaxWidth:30,yAxisIndex:Q,data:I,smooth:!1,color:D,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:D,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(D)},lineStyle:{color:D}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),h=()=>{d&&(d.dispose(),d=null),de(()=>{l.value&&(d=at(l.value),v())})},v=()=>{if(!d)return;const E=Oa(w.value),k={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:Q=>{let I=Q[0].name;return Q.forEach((D,M)=>{const $=it(D.value)+"%",V=n.value?"#ffffff":"#565865";I+=`<div>
                        ${D.marker}
                        <span style="color: ${V};">${D.seriesName}</span>
                        <span style="float: right; margin-left: 20px; color: ${V};">
                        ${$}
                        </span>
                    </div>`}),I}},grid:{show:!1},xAxis:{type:"category",data:E,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:Q=>`${Q}%`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}},splitNumber:2}],series:C.value};d.setOption(k,{notMerge:!0,replaceMerge:["series"]})},y=()=>{a.value=!a.value,a.value?d.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):v()},g=()=>{n.value=pe.isDark(),de(()=>{v()})},B=E=>{ct.onChange("subscription","retention_chart",E),u.value!==E&&(a.value=!1,u.value=E,v())},w=q(()=>{var E;return((E=t.data)==null?void 0:E.retention_data)??[]}),C=q(()=>[{name:p("Subscription Retention"),key:"count",type:u.value,color:n.value?s.dark_cyan_blue_16:s.light_gray,data:w.value.map(k=>k.retention_rate)},{name:p("MRR Retention"),key:"count",type:u.value,color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,data:w.value.map(k=>k.retention_rate_money)}].map((k,Q)=>c(k.name,k.type,0,k.data,k.color))),F=q(()=>ra(w.value.length)),S=q(()=>!w.value||!w.value.length);return fe([()=>t.data],()=>{de(h)},{deep:!0}),fe(S,E=>{E||h()}),fe(t.loading,E=>{E||h()}),he(()=>{de(()=>{h()}),window.addEventListener("onFluentCartThemeChange",g)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",g,!1)}),(E,k)=>{const Q=b("el-skeleton");return A(),_("div",nY,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",oY,[i("h4",lY,m(f(p)("Retention Rate")),1)])]),_:2},[!S.value&&!e.loading?{name:"action",fn:r(()=>[i("div",rY,[o(Xa,{activeType:u.value,types:{line:"LineChart",bar:"BarChart"},onChange:B},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:E.$t("Zoom Chart"),onClick:y,class:oe(a.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:l.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[e.loading?(A(),U(Q,{key:0,animated:"",rows:7,class:"px-4 pt-4"})):(A(),_(H,{key:1},[S.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[S.value?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:l},null,512)),i("div",iY,[i("div",AY,[i("div",dY,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",uY,m(f(p)("Data")),1)]),i("div",cY,[i("span",pY,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},hY={class:"summary-item-inner"},mY={class:"title text-[16px] mb-2.5"},_Y={class:"grid grid-cols-2 items-center"},gY={class:"value"},vY={class:"sub-value mt-1.5"},yY={class:"value"},bY={class:"sub-value mt-1.5"},wY={class:"description leading-[1.6] mt-3.5"},CY={__name:"ChurnSummary",props:{data:{type:Object,required:!0},loading:{type:Boolean,default:!0}},setup(e){const t=e,a=pe.colors.report,s=T(pe.isDark()),n=q(()=>{var u;return((u=t.data)==null?void 0:u.retention_data)??[]}),l=q(()=>{const u=n.value;if(!u.length)return[];const c=u.map((M,$)=>{const V=$>0?parseInt(u[$-1].active_subscriptions)||0:parseInt(M.active_subscriptions)-parseInt(M.new_subscriptions)||0,L=parseInt(M.churned_subscriptions)||0;return V>0?L/V*100:0}),h=u.map((M,$)=>{const V=$>0?parseFloat(u[$-1].mrr)||0:parseFloat(M.mrr)-parseFloat(M.new_subscriptions_mrr)||0,L=parseFloat(M.churned_subscriptions_mrr)||0;return V>0?L/V*100:0}),v=(c.reduce((M,$)=>M+$,0)/c.length).toFixed(1),y=(h.reduce((M,$)=>M+$,0)/h.length).toFixed(1),g=u[u.length-1],B=u.length-1,w=B>0?parseInt(u[B-1].active_subscriptions)||0:parseInt(g.active_subscriptions)-parseInt(g.new_subscriptions)||0,C=B>0?parseFloat(u[B-1].mrr)||0:parseFloat(g.mrr)-parseFloat(g.new_subscriptions_mrr)||0,F=parseInt(g.churned_subscriptions)||0,S=parseFloat(g.churned_subscriptions_mrr)||0,E=w>0?(F/w*100).toFixed(1):0,k=C>0?(S/C*100).toFixed(1):0,Q=new Date(g.day),I=Vt[Q.getMonth()]+" "+Q.getFullYear().toString();let D="";if(u.length>1){const M=u[u.length-2],$=new Date(M.day);D=Vt[$.getMonth()]+" "+$.getFullYear().toString()}else{const M=new Date(g.day);M.setMonth(M.getMonth()-1),D=Vt[M.getMonth()]+" "+M.getFullYear().toString()}return[{title:p("Subscription Churn"),value:`${E}%`,average_value:`${v}%`,month_name:I,sub_title:p("Average in period"),description:p(`You lost ${E}% (${it(F)}) of your ${D} subscriptions (${it(w)}).`),color:s.value?a.dark_cyan_blue_16:a.light_gray},{title:p("MRR Churn"),value:`${k}%`,average_value:`${y}%`,month_name:I,sub_title:p("Average in period"),description:p(`You lost ${k}% (${Be.scaled(S)}) of your ${D} subscription MRR (${Be.scaled(C)}).`),color:s.value?a.dark_cyan_blue_36:a.light_gray_cyan_blue}]}),d=()=>{s.value=pe.isDark()};return he(()=>{window.addEventListener("onFluentCartThemeChange",d)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",d,!1)}),(u,c)=>{var h,v;return e.loading?(A(),U(Wa,{key:0,loading:e.loading,count:2},null,8,["loading"])):(A(),_("div",{key:1,class:oe(`fct-report-order-summary ${(h=l.value)!=null&&h.length?"summary-col-2":""}`)},[(v=l.value)!=null&&v.length?(A(!0),_(H,{key:0},X(l.value,(y,g)=>(A(),_("div",{class:"summary-item",key:g},[i("div",hY,[i("div",mY,m(y.title),1),i("div",_Y,[i("div",null,[i("div",gY,m(y.value),1),i("div",vY,m(y.month_name),1)]),i("div",null,[i("div",yY,m(y.average_value),1),i("div",bY,m(y.sub_title),1)])]),i("div",wY,m(y.description),1)])]))),128)):(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"]))],2))}}},BY={class:"fct-revenue-line-chart-wrap"},kY={class:"flex items-center gap-2"},FY={class:"fct-card-header-title is-small"},xY={class:"fct-btn-group sm"},UY={class:"chart-action-wrap"},SY={class:"chart-change-wrap"},EY={class:"chart-change"},QY={class:"text"},DY={class:"chart-change"},IY={class:"text"},$Y={__name:"ChurnChart",props:{loading:{type:Boolean,default:!0},data:{type:Object,required:!0}},setup(e){const t=e,a=T(!1),s=pe.colors.report,n=T(pe.isDark()),l=T(null);let d=null;const u=T(ct.getChartType("subscription","churn_chart")||"line"),c=(E,k,Q,I,D)=>({name:E,type:k,barMaxWidth:30,yAxisIndex:Q,data:I,smooth:!1,color:D,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:D,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(D)},lineStyle:{color:D}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),h=()=>{d&&(d.dispose(),d=null),de(()=>{l.value&&(d=at(l.value),v())})},v=()=>{if(!d)return;const E=Oa(w.value),k={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:Q=>{let I=Q[0].name;return Q.forEach((D,M)=>{const $=it(D.value)+"%",V=n.value?"#ffffff":"#565865";I+=`<div>
                        ${D.marker}
                        <span style="color: ${V};">${D.seriesName}</span>
                        <span style="float: right; margin-left: 20px; color: ${V};">
                        ${$}
                        </span>
                    </div>`}),I}},grid:{show:!1},xAxis:{type:"category",data:E,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:Q=>`${Q}%`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}},splitNumber:2}],series:C.value};d.setOption(k,{notMerge:!0,replaceMerge:["series"]})},y=()=>{a.value=!a.value,a.value?d.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):v()},g=()=>{n.value=pe.isDark(),de(()=>{v()})},B=E=>{ct.onChange("subscription","churn_chart",E),u.value!==E&&(a.value=!1,u.value=E,v())},w=q(()=>{var E;return((E=t.data)==null?void 0:E.retention_data)??[]}),C=q(()=>{const E=w.value.map((I,D)=>{const M=D>0?parseInt(w.value[D-1].active_subscriptions)||0:parseInt(I.active_subscriptions)-parseInt(I.new_subscriptions)||0,$=parseInt(I.churned_subscriptions)||0;return M>0?($/M*100).toFixed(2):0}),k=w.value.map((I,D)=>{const M=D>0?parseFloat(w.value[D-1].mrr)||0:parseFloat(I.mrr)-parseFloat(I.new_subscriptions_mrr)||0,$=parseFloat(I.churned_subscriptions_mrr)||0;return M>0?($/M*100).toFixed(2):0});return[{name:p("Subscription Churn"),type:u.value,color:n.value?s.dark_cyan_blue_16:s.light_gray,data:E},{name:p("MRR Churn"),type:u.value,color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,data:k}].map((I,D)=>c(I.name,I.type,0,I.data,I.color))}),F=q(()=>ra(w.value.length)),S=q(()=>!w.value||!w.value.length);return fe([()=>t.data],()=>{de(h)},{deep:!0}),fe(S,E=>{E||h()}),fe(t.loading,E=>{E||h()}),he(()=>{de(()=>{h()}),window.addEventListener("onFluentCartThemeChange",g)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",g,!1)}),(E,k)=>{const Q=b("el-skeleton");return A(),_("div",BY,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",kY,[i("h4",FY,m(f(p)("Churn Rate")),1)])]),_:2},[!S.value&&!e.loading?{name:"action",fn:r(()=>[i("div",xY,[o(Xa,{activeType:u.value,types:{line:"LineChart",bar:"BarChart"},onChange:B},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:E.$t("Zoom Chart"),onClick:y,class:oe(a.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:l.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[e.loading?(A(),U(Q,{key:0,animated:"",rows:7,class:"px-4 pt-4"})):(A(),_(H,{key:1},[S.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[S.value?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:l},null,512)),i("div",UY,[i("div",SY,[i("div",EY,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",QY,m(f(p)("Data")),1)]),i("div",DY,[i("span",IY,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},TY={class:"fct-retention-report-page"},MY={class:"page-title"},VY={__name:"RetentionReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const a=e.reportFilter,s=T({retention_data:[]}),n=T(!0),l=(d,u="monthly")=>{n.value=!0,se.get("reports/subscription-retention",{params:{...d.params,groupKey:u}}).then(c=>{s.value=c}).finally(()=>n.value=!1)};return he(()=>{l(a.applicableFilters),a.addListener("retention-report",l)}),(d,u)=>{const c=b("el-tooltip");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",TY,[o(Ua,null,{title:r(()=>[i("h1",MY,[O(m(f(p)("Subscription Retention"))+" ",1),o(c,{"popper-class":"fct-tooltip",content:f(p)("Retention is calculated by looking at the active subscriptions at the end of each month, compared to the active subscriptions at the end of the start of each month."),placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:1}),o(sY,{data:s.value,loading:n.value},null,8,["data","loading"]),o(fY,{data:s.value,loading:n.value},null,8,["data","loading"]),o(Yj,{data:s.value,loading:n.value},null,8,["data","loading"]),o(CY,{data:s.value,loading:n.value},null,8,["data","loading"]),o($Y,{data:s.value,loading:n.value},null,8,["data","loading"])])]),_:1})}}},LY={key:1,class:"fct-report-order-summary"},OY={class:"summary-item-inner"},HY={class:"value"},RY={class:"inner-value"},PY={class:"title"},KY={__name:"Summary",props:{reportFilter:{type:Object},customerReport:{type:Object}},setup(e){const t=e,a=[{title:p("Customer Growth"),key:"customer_count"}],s=q(()=>t.customerReport.loading),n=q(()=>a.map(l=>({key:l.key,title:l.title,value:t.customerReport.summary[l.key],fluctuation:t.customerReport.fluctuations[l.key]})));return(l,d)=>s.value?(A(),U(Wa,{key:0,count:n.value.length},null,8,["count"])):(A(),_("div",LY,[(A(!0),_(H,null,X(n.value,(u,c)=>(A(),_("div",{class:"summary-item",key:c},[i("div",OY,[i("div",HY,[i("div",RY,m(f(it)(u.value)),1),o(ha,{fluctuation:u.fluctuation,"has-currency":!1,amount:t.customerReport.previousSummary[u.key]},null,8,["fluctuation","amount"])]),i("div",PY,m(u.title),1)])]))),128))]))}},NY={class:"fct-revenue-line-chart-wrap"},GY={class:"flex items-center gap-2"},zY={class:"fct-card-header-title is-small"},jY={class:"w-[270px] fct-btn-group sm gap-1.5 lg:gap-0"},YY={class:"chart-action-wrap"},qY={class:"chart-change-wrap"},WY={class:"chart-change"},XY={class:"text"},JY={class:"chart-change"},ZY={class:"text"},eq={__name:"CustomerReportChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,required:!1},loading:{type:Boolean,required:!1}},emits:["filter-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(ct.getChartType("revenue","revenue_chart")||"line"),l=T(!1),d=pe.colors.report,u=T(pe.isDark()),c=(M,$,V,L,R)=>({name:M,type:$,barMaxWidth:30,yAxisIndex:V,data:L,smooth:!1,color:R,lineStyle:{width:3},areaStyle:{opacity:.3,color:R},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:R,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(R)},lineStyle:{color:R},areaStyle:{opacity:.3,color:R}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=T(a.appliedGroupKey);fe(()=>a.appliedGroupKey,M=>{h.value=M});const v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],y=t,g=()=>{y("filter-data",h.value)},B=q(()=>a.reportFilter.data.compareType!=="no_comparison"),w=q(()=>{var $;let M=[{name:p("Current Range"),key:"customer_count",type:n.value,color:u.value?d.dark_cyan_blue_36:d.light_gray_cyan_blue,data:a.chartData.map(V=>V.customer_count)}];return B.value&&M.unshift({name:p("Compare Range"),key:"customer_count",type:n.value,color:u.value?d.dark_cyan_blue_16:d.light_gray,data:($=a.compareData)==null?void 0:$.map(V=>({value:V.customer_count,date:V.group}))}),M.map(V=>c(V.name,V.type,0,V.data,V.color))});let C=null;const F=()=>{C&&(C.dispose(),C=null),de(()=>{s.value&&(C=at(s.value),k())})},S=q(()=>{const M=zs(a.reportFilter.data.dateRange);return p("Customers that first ordered ")+M}),E=q(()=>ra(a.chartData.length)),k=()=>{if(!C)return;const M=Oa(a.chartData),$={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.dark_cyan_blue_16:d.light_gray_blue}},alwaysShowContent:!1,formatter:V=>{let L="";const R=u.value?"#ffffff":"#565865";return V.forEach(function(K,J){const W=typeof K.data=="object"&&K.data!==null,ae=W?js(K.data.date):K.name,Z=W?K.data.value:K.value,te=V.length>1&&J===0;te&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${ae}</div>`,L+=`<div>
            ${K.marker}
            <span style="color: ${R}">${p("Customer")}</span>
            <span style="float: right; margin-left: 20px; color: ${R}">
              ${it(Z)}
            </span>
          </div>`,te&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:M,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:w.value};C.setOption($,{notMerge:!0,replaceMerge:["series"]})},Q=()=>{l.value=!l.value,l.value?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):k()},I=M=>{ct.onChange("revenue","revenue_chart",M),n.value!==M&&(l.value=!1,n.value=M,k())};fe([()=>a.chartData,h],()=>{de(k)},{deep:!0}),fe(()=>qa.data.revenue,()=>{de(()=>{k()})},{deep:!0}),fe(()=>a.isEmpty,M=>{M||F()}),fe(()=>a.loading,M=>{M||F()});const D=()=>{u.value=pe.isDark(),de(()=>{k()})};return Re(()=>{window.removeEventListener("onFluentCartThemeChange",D,!1)}),he(()=>{window.addEventListener("onFluentCartThemeChange",D),de(()=>{F()})}),(M,$)=>{const V=b("el-tooltip"),L=b("el-option"),R=b("el-select"),K=b("el-skeleton");return A(),_("div",NY,[o(re,null,{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",GY,[i("h5",zY,m(f(p)("New Customers")),1),o(V,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",jY,[o(R,{class:"el-select--x-small",modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=J=>h.value=J),onChange:g},{default:r(()=>[(A(),_(H,null,X(v,J=>o(L,{key:J.value,label:f(p)(J.label),value:J.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),o(Xa,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:I},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:f(p)("Zoom Chart"),onClick:Q,class:oe(l.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0 pt-0"},{default:r(()=>[e.loading?(A(),U(K,{key:0,animated:"",rows:6,class:"p-5"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[i("div",{class:"fct-chart-wrap fct-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),i("div",YY,[i("div",qY,[i("div",WY,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",XY,m(f(p)("Data")),1)]),i("div",JY,[i("span",ZY,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},tq={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean},loading:{type:Boolean,required:!0}},components:{CardContainer:re,CardHeader:Ae,CardBody:le},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const e=[];return this.hasComparison?(this.currentMetrics.forEach((t,a)=>{var s;if(a<((s=this.previousMetrics)==null?void 0:s.length)){const n=this.previousMetrics[a],l=t.customer_count,d=n.customer_count,u=d?((l-d)/d*100).toFixed(2):"n/a";e.push({group:`${this.formatDate(t.group)} vs ${this.formatDate(n.group)}`,count:l,previous_count:d,percent_change:u})}}),e):this.currentMetrics}},methods:{translate:p,getPercentageClass(e){return e>0?"text-success-500":e<0?"text-red-500":"text-system-light"},formatDate(e){const t=e.split("-");if(t.length===3){const[a,s,n]=t;return`${Vt[parseInt(s)-1]} ${n}, ${a}`}else if(t.length===2){const[a,s]=t;return`${Vt[parseInt(s)-1]} ${a}`}else if(t.length===1){const[a]=t;return`${a}`}}}},aq={class:"fct-revenue-comparison"},sq={class:"inline-flex"},nq={class:"inline-flex"};function oq(e,t,a,s,n,l){const d=b("CardHeader"),u=b("el-skeleton"),c=b("el-table-column"),h=b("el-table"),v=b("CardBody"),y=b("CardContainer");return A(),_("div",aq,[o(y,{class:"overflow-hidden"},{default:r(()=>[o(d,{title:l.translate("Comparison"),title_size:"small"},null,8,["title"]),o(v,{class:"px-0 pb-0"},{default:r(()=>[a.loading?(A(),U(u,{key:0,animated:"",rows:6,class:"p-5"})):(A(),U(h,{key:1,data:l.comparisonData,class:"w-full",maxHeight:"390"},{default:r(()=>[o(c,{label:"Date"},{default:r(g=>[O(m(g.row.group),1)]),_:1}),o(c,{label:l.translate("Current Range")},{default:r(g=>[i("div",sq,m(g.row.count),1)]),_:1},8,["label"]),a.hasComparison?(A(),_(H,{key:0},[o(c,{label:l.translate("Compare Range")},{default:r(g=>[i("div",nq,m(g.row.previous_count),1)]),_:1},8,["label"]),o(c,{label:l.translate("Change")+" (%)"},{default:r(g=>[i("span",{class:oe(l.getPercentageClass(g.row.percent_change))},m(g.row.percent_change),3)]),_:1},8,["label"])],64)):x("",!0)]),_:1},8,["data"]))]),_:1})]),_:1})])}const lq=be(tq,[["render",oq]]),rq={class:"fct-customer-report-page"},iq={__name:"CustomerReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=T({summary:{},previousSummary:{},fluctuations:{},currentMetrics:[],previousMetrics:[],loading:!0}),s=T("default"),n=t.reportFilter,l=n.applicableFilters.params,d=(c,h="default")=>{a.value.loading=!0,se.get("reports/customer-report",{params:{...c,groupKey:h}}).then(v=>{a.value=v}).finally(()=>{a.value.loading=!1})},u=c=>{s.value!==c&&(s.value=c,d(l,c))};return he(()=>{d(l),t.reportFilter.addListener("customer-report",c=>{d(c.params,s.value)})}),(c,h)=>(A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",rq,[o(Ua,{title:f(p)("Customers")},null,8,["title"]),o(KY,{reportFilter:f(n),customerReport:a.value},null,8,["reportFilter","customerReport"]),o(eq,{chartData:a.value.currentMetrics,compareData:a.value.previousMetrics,reportFilter:f(n),appliedGroupKey:s.value,onFilterData:u,"is-empty":!a.value.summary.customer_count,loading:a.value.loading},null,8,["chartData","compareData","reportFilter","appliedGroupKey","is-empty","loading"]),o(lq,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.previousMetrics,hasComparison:t.reportFilter.data.compareType!=="no_comparison",reportFilter:f(n),loading:a.value.loading},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter","loading"])])]),_:1}))}},Aq={class:"fct-revenue-report-page"},dq={class:"fct-revenue-comparison fct-table-wrapper"},uq={class:"fct-card"},cq={class:"fct-card-header"},pq={class:"fct-card-header-top"},fq={class:"fct-card-header-left flex-1"},hq={class:"search-bar is-transparent"},mq={class:"text-xs text-system-light pt-1 dark:text-gray-300"},_q={class:"fct-card-header-actions"},gq={class:"w-[130px]"},vq={class:"fct-btn-group sm"},yq={class:"filter-popover-item"},bq={class:"filter-popover-title"},wq={class:"fct-card-body"},Cq={key:1,class:"unknown"},Bq={key:1,class:"unknown"},kq={key:1,class:"unknown"},Fq={key:1,class:"unknown"},xq={key:1,class:"unknown"},Uq={key:1,class:"unknown"},Sq={class:"inline-flex items-center gap-2"},Eq={class:"inline-flex items-center gap-2"},Qq={class:"inline-flex items-center gap-2"},Dq={class:"inline-flex items-center gap-2"},Iq={class:"inline-flex items-center gap-2"},$q=4,Tq={__name:"SourcesReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=T([]),s=T({}),n=T(!1),l=T({utm_campaign:p("UTM Campaign"),utm_source:p("UTM Source"),utm_medium:p("UTM Medium"),utm_term:p("UTM Term"),utm_content:p("UTM Content"),utm_id:p("UTM ID")}),d=T(["utm_campaign","utm_source","utm_medium"]),u=T(!0),c=T(""),h=q(()=>a.value.filter(g=>{if(!c.value)return!0;const B=c.value.toLowerCase();return g.utm_campaign&&g.utm_campaign.toLowerCase().includes(B)||g.utm_source&&g.utm_source.toLowerCase().includes(B)||g.utm_medium&&g.utm_medium.toLowerCase().includes(B)||g.utm_term&&g.utm_term.toLowerCase().includes(B)||g.utm_content&&g.utm_content.toLowerCase().includes(B)||g.utm_id&&g.utm_id.toLowerCase().includes(B)})),v=()=>{u.value=!0,se.get("/reports/sources",t.reportFilter.applicableFilters).then(g=>{a.value=g.sourceReportData,s.value=g.fluctuations||{}}).finally(()=>{u.value=!1})},y=g=>d.value.includes(g)?!1:d.value.length>=$q;return he(()=>{v(),t.reportFilter.addListener("product-top-chart",()=>{v()})}),(g,B)=>{const w=b("el-input"),C=b("el-switch"),F=b("el-checkbox"),S=b("el-checkbox-group"),E=b("el-tooltip"),k=b("el-popover"),Q=b("el-skeleton"),I=b("el-table-column"),D=b("el-table");return A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",Aq,[o(Ua,{title:f(p)("Order Sources")},null,8,["title"]),i("div",dq,[i("div",uq,[i("div",cq,[i("div",pq,[i("div",fq,[i("div",hq,[o(w,{placeholder:f(p)("Search"),ref:"search-input",type:"text",clearable:"",modelValue:c.value,"onUpdate:modelValue":B[0]||(B[0]=M=>c.value=M)},{prefix:r(()=>[o(z,{name:"Search"})]),_:1},8,["placeholder","modelValue"])]),i("div",mq,m(f(p)("Filter results by UTM values")),1)]),i("div",_q,[i("div",gq,[o(C,{modelValue:n.value,"onUpdate:modelValue":B[1]||(B[1]=M=>n.value=M),"active-text":f(p)("Net"),"inactive-text":f(p)("Gross")},null,8,["modelValue","active-text","inactive-text"])]),i("div",vq,[o(k,{trigger:"click",placement:"bottom-start",width:"240","popper-class":"filter-popover"},{reference:r(()=>[i("span",null,[o(E,{effect:"light",content:f(p)("Toggle columns"),placement:"top","popper-class":"fct-tooltip"},{default:r(()=>[o(we,{tag:"button"},{default:r(()=>[o(z,{name:"ColumnIcon"})]),_:1})]),_:1},8,["content"])])]),default:r(()=>[i("div",yq,[i("h3",bq,m(g.$t("Columns")),1),o(S,{class:"fct-checkbox-blocks",modelValue:d.value,"onUpdate:modelValue":B[2]||(B[2]=M=>d.value=M)},{default:r(()=>[(A(!0),_(H,null,X(l.value,(M,$)=>(A(),U(F,{label:M,value:$,disabled:y($)},null,8,["label","value","disabled"]))),256))]),_:1},8,["modelValue"])])]),_:1})])])])]),i("div",wq,[u.value?(A(),U(Q,{key:0,class:"px-5 pb-5",rows:5,animated:""})):(A(),U(D,{key:1,data:h.value,class:"w-full fct-source-report"},{empty:r(()=>[o(Te,{icon:"Empty/Order","has-dark":"",text:f(p)("No data available")},null,8,["text"])]),default:r(()=>[d.value.includes("utm_campaign")?(A(),U(I,{key:0,label:f(p)("UTM Campaign"),width:"180"},{default:r(M=>[M.row.utm_campaign?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_campaign},{default:r(()=>[O(m(M.row.utm_campaign),1)]),_:2},1032,["onClick"])):(A(),_("span",Cq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),d.value.includes("utm_source")?(A(),U(I,{key:1,label:f(p)("UTM Source"),width:"150"},{default:r(M=>[M.row.utm_source?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_source},{default:r(()=>[O(m(M.row.utm_source),1)]),_:2},1032,["onClick"])):(A(),_("span",Bq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),d.value.includes("utm_medium")?(A(),U(I,{key:2,label:f(p)("UTM Medium"),width:"150"},{default:r(M=>[M.row.utm_medium?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_medium},{default:r(()=>[O(m(M.row.utm_medium),1)]),_:2},1032,["onClick"])):(A(),_("span",kq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),d.value.includes("utm_term")?(A(),U(I,{key:3,label:f(p)("UTM Term"),width:"150"},{default:r(M=>[M.row.utm_term?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_term},{default:r(()=>[O(m(M.row.utm_term),1)]),_:2},1032,["onClick"])):(A(),_("span",Fq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),d.value.includes("utm_content")?(A(),U(I,{key:4,label:f(p)("UTM Content"),width:"150"},{default:r(M=>[M.row.utm_content?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_content},{default:r(()=>[O(m(M.row.utm_content),1)]),_:2},1032,["onClick"])):(A(),_("span",xq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),d.value.includes("utm_id")?(A(),U(I,{key:5,label:f(p)("UTM ID"),width:"100"},{default:r(M=>[M.row.utm_id?(A(),U(f(Ws),{key:0,class:"font-normal",underline:"always",onClick:$=>c.value=M.row.utm_id},{default:r(()=>[O(m(M.row.utm_id),1)]),_:2},1032,["onClick"])):(A(),_("span",Uq,m(f(p)("Unknown")),1))]),_:1},8,["label"])):x("",!0),o(I,{label:f(p)("Orders"),width:"200"},{default:r(M=>{var $,V;return[i("div",Sq,[O(m(f(it)(M.row.orders))+" ",1),o(ha,{class:"flex",fluctuation:(($=s.value[M.row.utm_key])==null?void 0:$.orders_fluctuation)||0,amount:((V=s.value[M.row.utm_key])==null?void 0:V.previous_orders)||0,"has-currency":!1},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),n.value?(A(),_(H,{key:6},[o(I,{label:f(p)("Net Sales"),width:"200"},{default:r(M=>{var $,V;return[i("div",Eq,[O(m(f(Be).scaled(M.row.net_sales))+" ",1),o(ha,{class:"flex",fluctuation:(($=s.value[M.row.utm_key])==null?void 0:$.net_sales_fluctuation)||0,amount:((V=s.value[M.row.utm_key])==null?void 0:V.previous_net_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),o(I,{label:f(p)("Average Order Net"),width:"200"},{default:r(M=>{var $,V;return[i("div",Qq,[O(m(f(Be).scaled(M.row.average_net_order))+" ",1),o(ha,{class:"flex",fluctuation:(($=s.value[M.row.utm_key])==null?void 0:$.average_net_order_fluctuation)||0,amount:((V=s.value[M.row.utm_key])==null?void 0:V.previous_average_net_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64)):(A(),_(H,{key:7},[o(I,{label:f(p)("Gross Sales"),width:"200"},{default:r(M=>{var $,V;return[i("div",Dq,[O(m(f(Be).scaled(M.row.gross_sales))+" ",1),o(ha,{class:"flex",fluctuation:(($=s.value[M.row.utm_key])==null?void 0:$.gross_sales_fluctuation)||0,amount:((V=s.value[M.row.utm_key])==null?void 0:V.previous_gross_sales)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"]),o(I,{label:f(p)("Average Order"),width:"200"},{default:r(M=>{var $,V;return[i("div",Iq,[O(m(f(Be).scaled(M.row.average_order))+" ",1),o(ha,{class:"flex",fluctuation:(($=s.value[M.row.utm_key])==null?void 0:$.average_order_fluctuation)||0,amount:((V=s.value[M.row.utm_key])==null?void 0:V.previous_average_order)||0},null,8,["fluctuation","amount"])])]}),_:1},8,["label"])],64))]),_:1},8,["data"]))])])])])]),_:1})}}},Mq={class:"fct-revenue-line-chart-wrap"},Vq={class:"flex items-center gap-2"},Lq={class:"fct-card-header-title is-small"},Oq={class:"fct-chart-select"},Hq={class:"fct-btn-group sm"},Rq={class:"chart-action-wrap"},Pq={class:"chart-change-wrap"},Kq={class:"chart-change"},Nq={class:"text"},Gq={class:"chart-change"},zq={class:"text"},jq={__name:"ProductReportChart",props:{chartData:{type:Array,required:!0,default:()=>[]},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!0}},emits:["filter-data"],setup(e,{emit:t}){const a=e,s=T(null),n=T(ct.getChartType("product","product_chart")||"bar"),l=T(!1),d=pe.colors.report,u=T(pe.isDark()),c=($,V,L,R,K)=>({name:$,type:V,barMaxWidth:30,yAxisIndex:L,data:R,smooth:!1,color:K,lineStyle:{width:3},areaStyle:{opacity:.3,color:K},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:K,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Gt(K)},lineStyle:{color:K},areaStyle:{opacity:.3,color:K}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=T("default"),v=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],y=t,g=()=>{y("filter-data",h.value)},B=q(()=>a.reportFilter.data.compareType!=="no_comparison"),w=q(()=>{let $=[{name:p("Current Range"),key:"units_sold",type:n.value,color:u.value?d.dark_cyan_blue_36:d.light_gray_cyan_blue,data:a.chartData.map(V=>V.units_sold)}];return B.value&&$.unshift({name:p("Compare Range"),key:"units_sold",type:n.value,color:u.value?d.dark_cyan_blue_16:d.light_gray,data:a.compareData.map(V=>({value:V.units_sold,date:V.group}))}),$.map(V=>c(V.name,V.type,0,V.data,V.color))});let C=null;const F=()=>{C&&(C.dispose(),C=null),de(()=>{s.value&&(C=at(s.value),k())})},S=q(()=>{const $=zs(a.reportFilter.data.dateRange);return p("This report looks at the units sold ")+$}),E=q(()=>ra(a.chartData.length)),k=()=>{if(!C)return;const $=Oa(a.chartData),V={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:u.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.dark_cyan_blue_16:d.light_gray_blue}},formatter:L=>{let R="";const K=u.value?"#ffffff":"#565865";return L.forEach(function(J,W){const ae=typeof J.data=="object"&&J.data!==null,Z=ae?js(J.data.date):J.name,te=ae?J.data.value:J.value,ie=L.length>1&&W===0;ie&&(R+='<div style="margin-bottom: 10px">'),R+=`<div>${Z}</div>`,R+=`<div>
            ${J.marker} 
            <span style="color: ${K}">${p("Units Sold")}</span>
            <span style="float: right; margin-left: 20px; color: ${K}">
              ${it(te)}
            </span>
          </div>`,ie&&(R+="</div>")}),R}},grid:{show:!1},xAxis:{type:"category",data:$,splitNumber:E.value.splitNumber,axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:u.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},series:w.value};C.setOption(V,{notMerge:!0,replaceMerge:["series"]})},Q=()=>{l.value=!l.value,l.value&&C?C.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):C&&k()},I=$=>{ct.onChange("revenue","revenue_chart",$),n.value!==$&&(l.value=!1,n.value=$,k())};fe([()=>a.chartData,h],()=>{de(()=>{k()})},{deep:!0}),fe(()=>qa.data.product,()=>{de(()=>{k()})},{deep:!0}),fe(()=>a.isEmpty,$=>{$||F()}),fe(()=>a.loading,$=>{$||F()});const D=()=>{C&&C.resize()},M=()=>{u.value=pe.isDark(),de(()=>{k()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",M),window.addEventListener("resize",D),setTimeout(()=>{F()},100)}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",M,!1),window.removeEventListener("resize",D),C&&(C.dispose(),C=null)}),($,V)=>{const L=b("el-tooltip"),R=b("el-option"),K=b("el-select"),J=b("el-skeleton");return A(),_("div",Mq,[o(re,{id:"chartContainer"},{default:r(()=>[o(Ae,{title_size:"small",border_bottom:""},ft({title:r(()=>[i("div",Vq,[i("h5",Lq,m(f(p)("Product Report Chart")),1),o(L,{"popper-class":"fct-tooltip",content:S.value,placement:"top"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),_:2},[!e.isEmpty&&!e.loading?{name:"action",fn:r(()=>[i("div",Oq,[o(K,{class:"el-select--x-small",modelValue:h.value,"onUpdate:modelValue":V[0]||(V[0]=W=>h.value=W),onChange:g},{default:r(()=>[(A(),_(H,null,X(v,W=>o(R,{key:W.value,label:f(p)(W.label),value:W.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),i("div",Hq,[o(Xa,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:I},null,8,["activeType"]),o(we,{tag:"button",size:"small",title:f(p)("Zoom Chart"),onClick:Q,class:oe(l.value?"primary":"")},{default:r(()=>[o(z,{name:"SearchAdd"})]),_:1},8,["title","class"]),o(Ct,{targetRef:s.value},null,8,["targetRef"])])]),key:"0"}:void 0]),1024),o(le,{class:"px-0"},{default:r(()=>[e.loading?(A(),U(J,{key:0,animated:"",rows:8,class:"p-5"})):(A(),_(H,{key:1},[e.isEmpty?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[e.isEmpty?x("",!0):(A(),_("div",{key:0,class:"fct-chart-wrap fct-revenue-line-chart",ref_key:"chartRef",ref:s},null,512)),i("div",Rq,[i("div",Pq,[i("div",Kq,[o(z,{name:"ArrowUp",class:"arrow-up"}),i("span",Nq,m(f(p)("Data")),1)]),i("div",Gq,[i("span",zq,m(f(p)("Timeline")),1),o(z,{name:"ArrowRight",class:"arrow-right"})])])])],64))],64))]),_:1})]),_:1})])}}},Yq=be(jq,[["__scopeId","data-v-259e83ce"]]);class qq extends Xt{constructor(){super(...arguments);me(this,"data",{summary:{},previousSummary:{},fluctuations:{},isBusy:!0,currentMetrics:[],previousMetrics:[],chartData:[],topSoldProducts:[]})}get controllerKey(){return"ProductReportController"}makeRequest(a,s,n,l){this.data.isBusy=!0,typeof s!="object"&&(s={});const d=se.get(`reports/${a}`,s);return this.resolvePromiseResponse(d,n,l),d}resolvePromiseResponse(a,s=null,n=null){a.then(l=>{n==null||s==null?Object.assign(this.data,l):this.data[n]=l[s]}).catch(l=>{console.log(l,"error")}).finally(()=>{this.data.isBusy=!1})}getReportData(a={}){return this.makeRequest("net-revenue",a,"data","revenueReport")}getReportByGroup(a={}){return this.makeRequest("net-revenue-by-group",a,"data","netRevenueByGroup")}getProductReportData(a={}){return this.makeRequest("product-report",a)}getSummary(a={}){return this.makeRequest("product-report-summary",a)}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}}const ba=qq.init(),Wq={class:"summary-item-inner"},Xq={class:"value"},Jq={class:"inner-value"},Zq={class:"title"},eW={__name:"Summary",props:{reportFilter:{type:Object}},setup(e){e.reportFilter;const a=[{title:"Units Sold",key:"units_sold",info:p("The total number of units sold in this period.")},{title:"Gross Sale",key:"gross_sale",hasCurrency:!0,info:p("The total sales you had in this period.")},{title:"Refunds",key:"total_refunds",hasCurrency:!0,liability:!0,info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:"Revenue",key:"net_sale",hasCurrency:!0,info:p("Gross sales less refunds, taxes, shipping, fees.")}],s=q(()=>ba.data.isBusy),n=q(()=>a.map(u=>({key:u.key,title:u.title,value:ba.data.summary[u.key]||0,fluctuation:ba.data.fluctuations[u.key]||0,info:u.info,liability:u.liability||!1,hasCurrency:u.hasCurrency||!1}))),l=q(()=>a.filter(u=>u.hasCurrency).map(u=>u.key)),d=u=>l.value.includes(u.key)?Fa(u.value,u.liability):it(u.value);return(u,c)=>{const h=b("el-tooltip");return s.value?(A(),U(Wa,{key:0,loading:s.value,count:n.value.length},null,8,["loading","count"])):(A(),_("div",{key:1,class:oe(["fct-report-order-summary",s.value?"":"summary-col-4"])},[(A(!0),_(H,null,X(n.value,(v,y)=>(A(),_("div",{class:"summary-item",key:y},[i("div",Wq,[i("div",Xq,[i("div",Jq,[o(Ys,{amount:d(v),title:v.title},null,8,["amount","title"])]),o(ha,{fluctuation:v.fluctuation,amount:f(ba).data.previousSummary[v.key],"is-liability":v.liability,"has-currency":v.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),i("div",Zq,[O(m(f(p)(v.title))+" ",1),o(h,{content:v.info,placement:"top","popper-class":"fct-tooltip",effect:"dark"},{default:r(()=>[o(z,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))],2))}}},tW={class:"fct-product-performance-chart"},aW={class:"mb-6 flex flex-col sm:flex-row gap-6 items-start sm:items-center"},sW={class:"flex items-center gap-3 flex-wrap"},nW={class:"selector-group"},oW={class:"vs-pill inline-flex items-center justify-center px-2 h-6 bg-gray-100 rounded-[12px] font-xs font-medium text-uppercase dark:bg-primary-500"},lW={class:"selector-group"},rW={key:0,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},iW={class:"text-xs font-medium text-gray-500"},AW={key:1,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},dW={class:"text-xs font-medium text-gray-500"},uW={key:0,class:"comparison-results"},cW={class:"legend flex items-center gap-4 mb-4"},pW={class:"flex items-center"},fW={class:"text-xs text-gray-600"},hW={class:"flex items-center"},mW={class:"text-xs text-gray-600"},_W={class:"comparison-table"},gW={class:"w-full"},vW={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},yW={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},bW={class:"w-[40%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},wW={class:"w-[10%] text-right font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},CW={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},BW={class:"py-3"},kW={class:"dual-bar-container"},FW={class:"bar-label"},xW={class:"dual-bar-wrapper"},UW=["onMouseenter"],SW=["onMouseenter"],EW={class:"py-3 text-right"},QW={key:0},DW={colspan:"3",class:"py-4 text-center text-gray-500"},IW={class:"text-sm"},$W={key:1,class:"current-period-data"},TW={class:"legend flex items-center gap-4 mb-4"},MW={class:"flex items-center"},VW={class:"text-xs text-gray-600"},LW={class:"current-period-table"},OW={class:"w-full"},HW={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},RW={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},PW={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},KW={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},NW={class:"py-3"},GW={class:"single-bar-container"},zW=["onMouseenter"],jW={class:"single-bar-wrapper"},YW=["onMouseenter"],qW={key:0},WW={colspan:"2",class:"py-4 text-center text-gray-500"},XW={class:"text-sm"},JW={key:2,class:"no-comparison-message"},ZW={class:"flex flex-col items-center justify-center text-center py-8"},eX={class:"text-gray-500 text-sm"},tX={__name:"ProductTopChart",props:{reportFilter:{type:Object,required:!0}},setup(e){pf(G=>({"80e5ddb6":a.value?"#1C2732":"#F9FAFB","56b7177f":K.value,"6b30a1e8":J.value,"3061a922":W.value}));const t=e,a=T(pe.isDark()),s=T(!0);he(()=>{l(),t.reportFilter.addListener("product-top-chart",()=>{l()}),window.addEventListener("onFluentCartThemeChange",function(){a.value=pe.isDark()})}),T({});const n=T({}),l=()=>{s.value=!0;const G=t.reportFilter.applicableFilters;se.get("reports/product-performance",G).then(N=>{n.value=N.productPerformance,B(),E(!0)}).finally(()=>s.value=!1)},d=q(()=>!(Array.isArray(n.value)?n.value:Object.values(n.value)).length),u=T(""),c=T(""),h=T(""),v=T(""),y=G=>G.sort((N,ee)=>ke(N.value).diff(ke(ee.value))),g=T([]),B=()=>{const G=new Set;Object.keys(n.value).forEach(N=>{const ee=N.split("-")[0];G.add(ee)}),g.value=Array.from(G).sort()},w=G=>{if(!G)return[];const N=[];return Object.keys(n.value).forEach(ee=>{ee.startsWith(G)&&N.push({value:ee,label:ke(ee).format("MMMM")})}),y(N)},C=q(()=>{if(!u.value||!h.value)return!1;const G=!!c.value,N=!!v.value;return!G&&!N?u.value!==h.value:G&&N?c.value!==v.value:!0}),F=q(()=>c.value?ke(c.value).format("MMM YYYY"):u.value),S=q(()=>v.value?ke(v.value).format("MMM YYYY"):h.value),E=(G=!1)=>{const N=g.value;if(N.length){if(!u.value||G){u.value=N[0];const ee=w(u.value);ee.length&&(c.value=ee[0].value)}if(!h.value||G){h.value=N[N.length-1];const ee=w(h.value);ee.length&&(v.value=ee[ee.length-1].value)}}},k=G=>n.value[G]||[],Q=G=>{const N={};Object.entries(n.value).forEach(([ne,Ce])=>{ne.startsWith(G)&&Ce.forEach(Qe=>{N[Qe.name]||(N[Qe.variation_id]={...Qe,value:0}),N[Qe.variation_id].value+=Qe.value})});const ee=[];return Object.values(N).forEach(ne=>{ee.push(ne)}),ee},I=(G,N)=>N?k(N):(Q(G),Q(G)),D=q(()=>u.value?[...I(u.value,c.value)].sort((N,ee)=>ee.value-N.value):[]),M=q(()=>D.value.length?Math.max(...D.value.map(G=>G.value))*1.1:100),$=G=>G===0||M.value===0?0:G/M.value*100,V=q(()=>{if(!C.value)return[];const G=I(u.value,c.value),N=I(h.value,v.value),ee=new Set;return G.forEach(Qe=>ee.add(Qe.variation_id)),N.forEach(Qe=>ee.add(Qe.variation_id)),Array.from(ee).map(Qe=>{const _e=G.find(qe=>qe.variation_id===Qe),Ie=(_e==null?void 0:_e.value)||0,xe=N.find(qe=>qe.variation_id===Qe),$e=(xe==null?void 0:xe.value)||0;let Se=0;return Ie>0?Se=($e-Ie)/Ie*100:$e>0&&(Se=100),{name:(_e==null?void 0:_e.name)||(xe==null?void 0:xe.name)||"",post_title:(_e==null?void 0:_e.post_title)||(xe==null?void 0:xe.post_title)||"",primaryValue:Ie,comparisonValue:$e,growthRate:parseFloat(Se.toFixed(1))}}).sort((Qe,_e)=>Math.abs(_e.growthRate)-Math.abs(Qe.growthRate))}),L=(G,N)=>{if(G===0&&N===0)return{primaryWidth:0,comparisonWidth:0};const ee=G+N,ne=G/ee*100,Ce=N/ee*100;return{primaryWidth:ne,comparisonWidth:Ce}},R=G=>G>0?"positive":G<0?"negative":"neutral",K=q(()=>a.value?pe.colors.report.dark_cyan_blue_16:pe.colors.report.light_gray),J=q(()=>a.value?pe.colors.report.dark_cyan_blue_36:pe.colors.report.light_gray_cyan_blue),W=q(()=>a.value?"#ffffff":pe.colors.system.mid),ae=(G,N)=>`${G} ${ao("unit","units",G)} sold in ${N}`,Z=T(!1),te=T(""),ie=T(null);function P(G,N){ie.value=G.currentTarget,te.value=N,setTimeout(()=>{Z.value=!0},150)}function j(){Z.value=!1}return(G,N)=>{const ee=b("el-skeleton"),ne=b("el-option"),Ce=b("el-select"),Qe=b("el-tooltip");return A(),_("div",tW,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Product Performance Comparison"),title_size:"small",border_bottom:""},null,8,["title"]),o(le,{class:"pt-6"},{default:r(()=>[s.value?(A(),U(ee,{key:0,animated:"",rows:8})):(A(),_(H,{key:1},[d.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_(H,{key:0},[i("div",aW,[i("div",sW,[i("div",nW,[o(Ce,{modelValue:u.value,"onUpdate:modelValue":N[0]||(N[0]=_e=>u.value=_e),placeholder:f(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:r(()=>[(A(!0),_(H,null,X(g.value,_e=>(A(),U(ne,{key:_e,label:_e,value:_e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(Ce,{modelValue:c.value,"onUpdate:modelValue":N[1]||(N[1]=_e=>c.value=_e),placeholder:f(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!u.value,"popper-class":"minimal-select"},{default:r(()=>[(A(!0),_(H,null,X(w(u.value),_e=>(A(),U(ne,{key:_e.value,label:_e.label,value:_e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),i("div",oW,m(f(p)("vs")),1),i("div",lW,[o(Ce,{modelValue:h.value,"onUpdate:modelValue":N[2]||(N[2]=_e=>h.value=_e),placeholder:f(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:r(()=>[(A(!0),_(H,null,X(g.value,_e=>(A(),U(ne,{key:_e,label:_e,value:_e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o(Ce,{modelValue:v.value,"onUpdate:modelValue":N[3]||(N[3]=_e=>v.value=_e),placeholder:f(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!h.value,"popper-class":"minimal-select"},{default:r(()=>[(A(!0),_(H,null,X(w(h.value),_e=>(A(),U(ne,{key:_e.value,label:_e.label,value:_e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])]),C.value?(A(),_("div",rW,[i("span",iW,m(f(p)("Comparing %s with %s",F.value,S.value)),1)])):u.value?(A(),_("div",AW,[i("span",dW,m(f(p)("Viewing %s",F.value)),1)])):x("",!0)]),C.value?(A(),_("div",uW,[i("div",cW,[i("div",pW,[N[5]||(N[5]=i("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),i("span",fW,m(F.value),1)]),i("div",hW,[N[6]||(N[6]=i("div",{class:"w-3 h-3 comparison-legend rounded-sm mr-1.5"},null,-1)),i("span",mW,m(S.value),1)])]),i("div",_W,[i("table",gW,[i("thead",vW,[i("tr",null,[i("th",yW,m(f(p)("Product")),1),i("th",bW,m(f(p)("Sales")),1),i("th",wW,m(f(p)("Change")),1)])]),i("tbody",null,[(A(!0),_(H,null,X(V.value,(_e,Ie)=>(A(),_("tr",{key:Ie,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[i("td",CW,[O(m(_e.post_title)+" ",1),N[7]||(N[7]=i("br",null,null,-1)),O(" "+m(_e.name),1)]),i("td",BW,[i("div",kW,[i("span",FW,m(_e.primaryValue)+m(" vs "+_e.comparisonValue)+" "+m(f(p)("Units")),1),i("div",xW,[i("div",{class:"dual-bar-segment primary-segment",style:sa({width:`${L(_e.primaryValue,_e.comparisonValue).primaryWidth}%`}),onMouseenter:xe=>P(xe,ae(_e.primaryValue,F.value)),onMouseleave:j},null,44,UW),i("div",{class:"dual-bar-segment comparison-segment",style:sa({width:`${L(_e.primaryValue,_e.comparisonValue).comparisonWidth}%`}),onMouseenter:xe=>P(xe,ae(_e.comparisonValue,S.value)),onMouseleave:j},null,44,SW)])])]),i("td",EW,[i("div",{class:oe(["growth-pill",R(_e.growthRate)])},m(_e.growthRate>0?"+":"")+m(_e.growthRate)+"% ",3)])]))),128)),V.value.length===0?(A(),_("tr",QW,[i("td",DW,[i("span",IW,m(f(p)("No comparison data available")),1)])])):x("",!0)])])])])):u.value&&D.value.length>0?(A(),_("div",$W,[i("div",TW,[i("div",MW,[N[8]||(N[8]=i("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),i("span",VW,m(F.value),1)])]),i("div",LW,[i("table",OW,[i("thead",HW,[i("tr",null,[i("th",RW,m(f(p)("Product")),1),i("th",PW,m(f(p)("Sales")),1)])]),i("tbody",null,[(A(!0),_(H,null,X(D.value,(_e,Ie)=>(A(),_("tr",{key:Ie,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[i("td",KW,[O(m(_e.post_title)+" ",1),N[9]||(N[9]=i("br",null,null,-1)),O(" "+m(_e.name),1)]),i("td",NW,[i("div",GW,[i("span",{class:"bar-label",onMouseenter:xe=>P(xe,ae(_e.value,S.value)),onMouseleave:j},m(_e.value)+" "+m(f(ao)("Unit","Units",_e.value)),41,zW),i("div",jW,[i("div",{class:"single-bar-segment",style:sa({width:`${$(_e.value)}%`}),onMouseenter:xe=>P(xe,ae(_e.value,S.value)),onMouseleave:j},null,44,YW)])])])]))),128)),D.value.length===0?(A(),_("tr",qW,[i("td",WW,[i("span",XW,m(f(p)("No data available for this period")),1)])])):x("",!0)])])])])):(A(),_("div",JW,[i("div",ZW,[N[10]||(N[10]=i("svg",{class:"w-10 h-10 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),i("p",eX,m(f(p)("Please select a time period to view sales data")),1)])])),o(Qe,{ref:"sharedTooltip","popper-class":"fct-tooltip",visible:Z.value,"onUpdate:visible":N[4]||(N[4]=_e=>Z.value=_e),content:te.value,"virtual-ref":ie.value,"virtual-triggering":"",placement:"top"},null,8,["visible","content","virtual-ref"])],64))],64))]),_:1})]),_:1})])}}},aX=be(tX,[["__scopeId","data-v-8b244b58"]]),sX={class:"fct-revenue-report-page"},nX={__name:"ProductReport",props:{reportFilter:{type:Object,required:!0}},setup(e){const t=e,a=u=>{ba.getProductReportData({params:{...u.params,groupKey:d.value}}),ba.getTopSoldProducts(u)},s=u=>{d.value!==u&&(d.value=u,a(l))},n=t.reportFilter,l=n.applicableFilters,d=T("default");return he(()=>{n.addListener("product-report",a),a(l)}),Re(()=>{n.removeListener("product-report",!1)}),(u,c)=>(A(),U(tt,{permission:"reports/view"},{default:r(()=>[i("div",sX,[o(Ua,{title:f(p)("Products")},null,8,["title"]),o(eW,{reportFilter:f(n)},null,8,["reportFilter"]),o(Yq,{chartData:f(ba).data.currentMetrics,compareData:f(ba).data.previousMetrics,appliedGroupKey:d.value,reportFilter:t.reportFilter,onFilterData:s,"is-empty":!f(ba).data.summary.gross_sale,loading:f(ba).data.isBusy},null,8,["chartData","compareData","appliedGroupKey","reportFilter","is-empty","loading"]),o(pA,{data:f(ba).data.topSoldProducts,loading:f(ba).data.isBusy},null,8,["data","loading"]),o(aX,{reportFilter:f(n)},null,8,["reportFilter"])])]),_:1}))}},oX={class:"fct-overview-chart-wrap"},lX={key:0,class:"error-message",style:{color:"red",padding:"10px"}},rX={__name:"OverviewChart",props:{data:{type:Object,required:!0},dataKey:{type:String,required:!0},labelSet:{type:String,default:"monthly"},dateRange:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(e){const t=e,a=T(null),s=T(null),n=T("bar"),l=T(null),d=pe.colors,u=T(pe.isDark()),c=q(()=>u.value?d.blue[500]+"52":d.blue[300]),h={current:p("Current"),prev:p("Previous"),yoy_growth:p("YoY Growth")},v=q(()=>{try{return Object.keys(t.data).map(E=>({label:E,value:t.data[E][t.dataKey]||0}))}catch(S){return l.value=`Error processing data: ${S.message}`,[]}}),y=q(()=>v.value.length?t.dateRange?v.value.map(S=>{try{const[E,k]=S.label.split("-");return new Date(E,k-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return S.label}}):v.value.map(S=>S.label):[]),g=q(()=>v.value.length?[{title:h[t.dataKey]||t.dataKey,data:v.value.map(E=>E.value),color:c.value,yAxisIndex:0}].map(({title:E,data:k,color:Q,yAxisIndex:I})=>F(E,n.value,k,Q,I)):[]);let B=null;const w=()=>{if(a.value&&B===null)try{B=at(a.value),C()}catch(S){l.value=`Error initializing chart: ${S.message}`}},C=()=>{if(!B)return;if(l.value){console.error(l.value);return}u.value=pe.isDark();const S={title:{text:"",left:"center"},legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.report.dark_cyan_blue_16:d.report.light_gray_cyan_blue}},formatter:E=>{let k=E[0].name;const Q=u.value?"#ffffff":"#565865";return E.forEach(I=>{const D=Be.formatScaled(I.value);k+=`<div>
            ${I.marker} 
            <span style="color: ${Q};">${I.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${Q};">
              ${D}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:y.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:E=>`${Be.formatScaledChart(E)}`},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:g.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};try{B.setOption(S,{notMerge:!0,replaceMerge:["series"]})}catch(E){l.value=`Error updating chart: ${E.message}`,console.error(l.value)}},F=(S,E,k,Q,I)=>({name:S,type:E,barMaxWidth:t.barMaxWidth,areaStyle:E==="line"?{}:void 0,data:k,smooth:!0,color:Q,lineStyle:{width:2},yAxisIndex:I,emphasis:{itemStyle:{color:u.value?d.blue[800]:d.blue[400]}}});return fe([()=>t.data,()=>t.dataKey,()=>t.labelSet,n],()=>{de(C)},{deep:!0}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1),B&&(B.dispose(),B=null)}),he(()=>{window.addEventListener("onFluentCartThemeChange",C),de(w)}),(S,E)=>(A(),_("div",oX,[o(re,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(le,{class:"p-0"},{default:r(()=>[l.value?(A(),_("div",lX,m(l.value),1)):x("",!0),e.isEmpty?(A(),U(Te,{key:2,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:1,class:"fct-chart-wrap fct-overview-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},zo=be(rX,[["__scopeId","data-v-b0efa3d5"]]),iX={class:"fct-gross-volume-chart-wrap"},AX={key:0,class:"error-message",style:{color:"red",padding:"10px"}},dX={__name:"GrossVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""},currentKey:{type:String,default:"current"},prevKey:{type:String,default:"prev"},labelKey:{type:String,default:"yoy_growth"},isDate:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(e){const t=e,a=T(null),s=T(null),n=T("bar"),l=T(null),d=pe.colors,u=T(pe.isDark()),c={current:p("Current"),prev:p("Previous"),prev_year:p("Previous"),yoy_growth:p("YoY Growth")},h=q(()=>{if(!t.data||typeof t.data!="object")return l.value="Invalid or missing data prop",[];try{return Object.keys(t.data).map(E=>{const k=t.data[E];return{label:E,current:k[t.currentKey]?parseInt(k[t.currentKey]):0,prev:k[t.prevKey]?parseInt(k[t.prevKey]):0,growth:k[t.labelKey]?parseFloat(k[t.labelKey]):0}})}catch(S){return l.value=`Error processing data: ${S.message}`,[]}}),v=q(()=>h.value.length?h.value.map(S=>{if(t.isDate)try{const[E,k]=S.label.split("-");return new Date(E,k-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return S.label}else return S.label}):[]),y=q(()=>h.value.length?[{title:c[t.currentKey]||t.currentKey,dataKey:"current",type:"line",color:u.value?d.report.blue_dark_mode:d.report.blue},{title:c[t.prevKey]||t.prevKey,dataKey:"prev",type:"bar",color:u.value?d.blue[500]+"52":d.blue[300]}].map(({title:S,dataKey:E,type:k,color:Q})=>F(S,k,h.value.map(I=>I[E]),Q)):[]),g=q(()=>h.value.length?h.value.map(E=>E.growth):[]);let B=null;const w=()=>{if(a.value&&B===null)try{B=at(a.value),C()}catch(S){l.value=`Error initializing chart: ${S.message}`}},C=()=>{if(!B)return;if(l.value){console.error(l.value);return}u.value=pe.isDark();const S={legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:u.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:u.value?"#253241":"#ffffff",borderColor:u.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:u.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:u.value?d.report.dark_cyan_blue_16:d.report.light_gray_cyan_blue}},formatter:E=>{let k=E[0].name;const Q=u.value?"#ffffff":"#565865",I=g.value[E[0].dataIndex];E.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("YoY Growth"),value:isNaN(I)?"N/A":I.toFixed(2)+"%"});const D=u.value?d.report.dark_cyan_blue_16:d.report.light_gray_blue;return E.forEach(function(M,$){const V=$===E.length-1,L=V?M.value:Be.formatScaled(M.value);V?k+=`<div style="border-top: 1px solid ${D}; margin-top: 5px; padding-top: 5px;">`:k+="<div>",k+=`
            ${M.marker} 
            <span style="color: ${Q};">${M.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${Q};">
              ${L}
            </span>
          </div>`}),k}},xAxis:{type:"category",data:v.value,axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",name:p("Volume (%s)",Be.currencySign),axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:E=>Be.formatScaledChart(E)},splitLine:{show:!0,lineStyle:{color:u.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",name:"YoY Growth (%)",axisLabel:{color:u.value?"#ffffff":"#696778",fontSize:12,formatter:"{value}%"},splitLine:{show:!1},min:Math.min(...g.value.filter(E=>!isNaN(E)),0)-5,max:Math.max(...g.value.filter(E=>!isNaN(E)),0)+5}],series:y.value};try{B.setOption(S,{notMerge:!0,replaceMerge:["series"]})}catch(E){l.value=`Error updating chart: ${E.message}`,console.error(l.value)}},F=(S,E,k,Q,I=0)=>({name:S,type:E,barMaxWidth:t.barMaxWidth,areaStyle:E==="line"?null:void 0,data:k,smooth:E==="line",color:Q,lineStyle:E==="line"?{width:2}:void 0,yAxisIndex:I,emphasis:{scale:2,itemStyle:{color:u.value?d.blue[800]:d.blue[400]}}});return fe([()=>t.data,n],()=>{de(C)},{deep:!0}),Re(()=>{window.removeEventListener("onFluentCartThemeChange",C,!1),B&&(B.dispose(),B=null)}),he(()=>{window.addEventListener("onFluentCartThemeChange",C),de(w)}),(S,E)=>(A(),_("div",iX,[o(re,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(Ae,{title:f(p)(e.title),title_size:"small",border_bottom:""},{action:r(()=>E[0]||(E[0]=[])),_:1},8,["title"]),o(le,{class:"p-0"},{default:r(()=>[l.value?(A(),_("div",AX,m(l.value),1)):x("",!0),e.isEmpty?(A(),U(Te,{key:2,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:1,class:"fct-chart-wrap fct-gross-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},su=be(dX,[["__scopeId","data-v-3d59aa4c"]]),uX={class:"fct-country-volume-chart-wrap"},cX={class:"fct-btn-group sm"},pX={__name:"CountryVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(e){const t=e,a=T(null),s=T(null);let n=null;const l=T("bar");T("");const d=T(pe.isDark()),u=q(()=>[d.value?"#032647":"#3e9df6",d.value?"#04315b":"#1589f4",d.value?"#053c70":"#0a73d5",d.value?"#064784":"#0968c1",d.value?"#075298":"#085dad"]),c=q(()=>{const C=Array.isArray(t.data.by_countries)?t.data.by_countries:Object.values(t.data.by_countries);return!C.length||!C.every(F=>!!F)}),h=pe.colors,v=q(()=>{const C=t.data.by_month||{};return Object.keys(C).sort().map(S=>{const E=C[S],k=Object.values(E).reduce((I,D)=>I+D,0),Q=Object.entries(E).sort((I,D)=>I[1]-D[1]).reduce((I,[D,M])=>({...I,[D]:M}),{});return{label:S,countries:Q,total:k}})}),y=q(()=>v.value.length?v.value.map(C=>{try{const[F,S]=C.label.split("-");return ke(new Date(F,S-1)).format("MMM YYYY")}catch{return C.label}}):[]),g=q(()=>{const C=t.data.by_month||{},F=Object.keys(C).sort(),S=new Set;return Object.values(C).forEach(E=>{Object.keys(E).forEach(k=>S.add(k))}),Array.from(S).reverse().map(E=>{let k;const Q=v.value.map((I,D)=>{const M=C[F[D]],V=Object.entries(M).sort((K,J)=>J[1]-K[1]).map(([K])=>K).indexOf(E),L=I.countries[E]||0,R=V<5?V:4;return!k&&R>=0&&(k=u.value[R]||u.value[4]),{value:L/100,label:{show:L>0,position:"inside",formatter:E,color:(d.value,"#fff"),fontSize:10,fontWeight:"bold"}}});return{name:E,type:l.value,stack:"total",data:Q,itemStyle:{color:k},lineStyle:{color:k}}})}),B=()=>{if(!a.value)return;n=at(a.value);const C={backgroundColor:"transparent",tooltip:{trigger:"axis",backgroundColor:d.value?"#253241":"#ffffff",textStyle:{color:d.value?h.gray[25]:h.system.mid},borderColor:d.value?"#2C3C4E":"#c0c4ca",axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:d.value?h.report.dark_cyan_blue_16:h.report.light_gray_cyan_blue}},borderWidth:1,formatter:F=>{let S=F[0].axisValue;const E=d.value?"#ffffff":"#565865",k=v.value[F[0].dataIndex].total;F=F.sort((I,D)=>D.value-I.value).filter(I=>I.value>0),F.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("Total"),value:k/100});const Q=d.value?h.report.dark_cyan_blue_16:h.report.light_gray_blue;return F.forEach(function(I,D){const M=D===F.length-1;if(!M&&I.value===0)return;const $=Be.scaled(I.value);M?S+=`<div style="border-top: 1px solid ${Q}; margin-top: 5px; padding-top: 5px;">`:S+="<div>",S+=`
            ${I.marker} 
            <span style="color: ${E};">${I.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${E};">
              ${$}
            </span>
          </div>`}),S}},xAxis:{type:"category",data:y.value,axisLabel:{color:d.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{color:d.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",position:"left",name:p("Volume (%s)",Be.currencySign),axisLabel:{color:d.value?"#ffffff":"#696778",fontSize:12,formatter:F=>Be.formatScaled(F*100)},splitLine:{show:!0,lineStyle:{color:d.value?"#253241":"#D6DAE1",type:"dashed"}}},series:g.value};n.setOption(C)},w=()=>{d.value=pe.isDark(),de(()=>{B()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",w),de(B)}),fe(()=>d.value,()=>{n&&(n.dispose(),B())}),fe(()=>t.data,()=>{n&&B()}),(C,F)=>(A(),_("div",uX,[o(re,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:r(()=>[o(Ae,{title:e.title,title_size:"small",border_bottom:""},{action:r(()=>[i("div",cX,[o(qf,{targetRef:a.value},null,8,["targetRef"])])]),_:1},8,["title"]),o(le,{class:"p-0"},{default:r(()=>[c.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-chart-wrap fct-country-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},nu=be(pX,[["__scopeId","data-v-9e9f9baa"]]),fX={class:"fct-card-header-title is-small"},ou={__name:"CountryNetChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(e){const t=e,a=pe.colors.report,s=T(pe.isDark()),n=T(null),l=T("line"),d=T(t.data),u=q(()=>({textColor:s.value?"#ffffff":"#696778",borderColor:s.value?"#2C3C4E":"#c0c4ca",splitLineColor:s.value?"#253241":"#D6DAE1",bgColor:s.value?"#2d3748":"#ffffff"})),c=q(()=>Object.values(d.value).every(C=>C===0)),h=q(()=>Object.keys(d.value)),v=q(()=>[{name:p("Current"),type:l.value,data:Object.values(d.value),smooth:!0,color:s.value?a.purple_dark_mode:a.purple,lineStyle:{width:2},barMaxWidth:30}]);let y=null;const g=()=>{n.value&&!y&&(y=at(n.value),B())},B=()=>{const C={legend:{show:!1},tooltip:{trigger:"axis",backgroundColor:u.value.bgColor,borderColor:u.value.borderColor,borderWidth:1,textStyle:{color:u.value.textColor},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:s.value?a.dark_cyan_blue_16:a.light_gray_blue}},formatter:F=>{let S=F[0].name;const E=s.value?"#ffffff":"#565865";return F.forEach(k=>{const Q=Be.formatScaled(k.value);S+=`<div>
            ${k.marker} 
            <span style="color: ${E};">${k.seriesName}</span>
            <span style="float: right; margin-left: 20px; color: ${E};">
              ${Q}
            </span>
          </div>`}),S}},xAxis:{type:"category",data:h.value,axisLabel:{color:u.value.textColor,fontSize:12},axisLine:{lineStyle:{type:"dashed",color:u.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:u.value.textColor,fontSize:12,formatter:F=>Be.formatScaled(F)},splitLine:{show:!0,lineStyle:{color:u.value.splitLineColor,type:"dashed"}}},series:v.value,grid:{left:"10px",right:"10px",top:"20px",bottom:"60px",containLabel:!0}};y.setOption(C,{notMerge:!0,replaceMerge:["series"]})};fe([()=>d.value,l,()=>s.value],()=>{de(B)},{deep:!0});const w=()=>{s.value=pe.isDark(),de(()=>{B()})};return he(()=>{window.addEventListener("onFluentCartThemeChange",w,!1),de(g)}),(C,F)=>(A(),U(re,null,{default:r(()=>[e.title!==""?(A(),U(Ae,{key:0,border_bottom:!0},{title:r(()=>[i("h3",fX,m(e.title),1)]),_:1})):x("",!0),o(le,null,{default:r(()=>[c.value?(A(),U(Te,{key:1,icon:"Empty/ListView","has-dark":!0,text:f(p)("Currently there is no data!"),class:"fct-report-empty-state"},null,8,["text"])):(A(),_("div",{key:0,class:"fct-chart-wrap h-[350px]",ref_key:"SubscriptionCountTrendChartRef",ref:n},null,512))]),_:1})]),_:1}))}},hX={class:"fct-overview-report-loader-wrap"},mX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-1 xl:grid-cols-2"},_X={class:"fct-card-header-title is-small"},gX={class:"flex gap-2 mt-1"},vX={class:"py-6"},yX={class:"grid grid-cols-1"},bX={class:"fct-card-header-title is-small"},wX={class:"py-6"},CX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},BX={class:"fct-card-header-title is-small"},kX={class:"flex gap-2 mt-1"},FX={class:"py-6"},xX={class:"grid grid-cols-1"},UX={class:"fct-card-header-title is-small"},SX={class:"py-6"},EX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},QX={class:"fct-card-header-title is-small"},DX={class:"py-6"},IX={__name:"OverviewLoading",setup(e){const t=[{title:p("Gross Summary"),key:"gross_summary"},{title:p("Gross Revenue Quarterly"),key:"net_summary"}],a=[{title:p("Net Revenue"),key:"net_revenue"},{title:p("Net Revenue Quarterly"),key:"net_revenue_quarterly"}],s=[{title:p("Top Country Gross Volume"),key:"top_country_gross"},{title:p("Top Country Net Volume"),key:"top_country_net"}],n=[{title:p("Top Countries Gross Revenue"),key:"top_country_revenue"},{title:p("Top Countries Net Revenue"),key:"top_country_net_revenue"}];return(l,d)=>{const u=b("el-skeleton-item"),c=b("el-skeleton");return A(),_("div",hX,[i("div",mX,[(A(),_(H,null,X(t,(h,v)=>i("div",{key:v},[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h3",_X,m(h.title),1),i("div",gX,[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),i("div",vX,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",yX,[(A(),_(H,null,X(2,h=>i("div",{key:h},[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-2/3"})]),_:1}),o(Ae,{border_bottom:!0},{title:r(()=>[i("h2",bX,m(f(p)("Gross Volume Breakdown")),1)]),_:1}),i("div",wX,[o(c,{animated:"",rows:7})])]),_:1})]),_:1})])),64))]),i("div",CX,[(A(),_(H,null,X(a,(h,v)=>i("div",{key:v},[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h3",BX,m(h.title),1),i("div",kX,[o(c,{animated:""},{template:r(()=>[o(u,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),i("div",FX,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",xX,[(A(),_(H,null,X(s,(h,v)=>i("div",{key:v},[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h2",UX,m(h.title),1)]),_:2},1024),i("div",SX,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),i("div",EX,[(A(),_(H,null,X(n,(h,v)=>i("div",{key:v},[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h3",QX,m(h.title),1)]),_:2},1024),i("div",DX,[o(c,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))])])}}},$X={class:"overview-summary-report-inline"},TX={class:"inner-value"},MX={__name:"Summary",props:{title:{type:String},current:{type:[String,Number],required:!0},previous:{type:[String,Number],required:!0},fluctuation:{type:[String,Number],required:!0}},setup(e){return(t,a)=>(A(),_("div",$X,[i("div",TX,[o(Ys,{amount:f(Be).formatScaled(e.current),title:f(p)(e.title)},null,8,["amount","title"])]),o(ha,{fluctuation:e.fluctuation,amount:e.previous/100,fluctuationSuffix:f(p)("YoY")},null,8,["fluctuation","amount","fluctuationSuffix"])]))}},jo=be(MX,[["__scopeId","data-v-b394c9f1"]]),VX={class:"report-overview-page"},LX={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},OX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-1 xl:grid-cols-2"},HX={class:"fct-card-header-title is-small"},RX={class:"fct-card-header-title is-small"},PX={class:"grid grid-cols-1"},KX=["innerHTML"],NX=["innerHTML"],GX={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-1 xl:grid-cols-2"},zX={class:"fct-card-header-title is-small"},jX={class:"fct-card-header-title is-small"},YX={class:"grid gap-4 grid-cols-1"},qX={class:"grid gap-4 grid-cols-1"},WX={class:"report-overview-col-2 grid gap-7.5 grid-cols-1 xl:grid-cols-2"},XX={__name:"Overview",setup(e){const t=T({}),a=T(!0),s=T({gross_revenue_quarterly:{},net_revenue_quarterly:{}}),n=()=>{se.get("reports/overview").then(u=>{t.value=u.data,l()}).catch(u=>{console.error(u,"error")}).finally(()=>{a.value=!1})},l=()=>{s.value.gross_revenue_quarterly=d(t.value.gross_revenue_quarterly,"current","prev_year"),s.value.net_revenue_quarterly=d(t.value.net_revenue_quarterly,"current","prev_year")},d=(u,c="current",h="prev")=>{const v=ve.sum(u,"*."+c),y=ve.sum(u,"*."+h),g=y===0?100:(v-y)/y*100;return{value:parseFloat(g.toFixed(2)),prev:y,current:v}};return q(()=>{var u,c;return((u=t.value.gross_summary)==null?void 0:u.yoy_growth)<0?"danger":((c=t.value.gross_summary)==null?void 0:c.yoy_growth)===null?"warning":"success"}),he(()=>{n()}),(u,c)=>(A(),_("div",VX,[i("div",LX,[o(z,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+m(f(p)("Last %s Months",f(p)(12))),1)]),a.value?(A(),U(IX,{key:0})):(A(),_(H,{key:1},[i("div",OX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:""},{title:r(()=>[i("h3",HX,m(f(p)("Gross Summary")),1),o(jo,{current:t.value.gross_summary.total,previous:t.value.gross_summary.total_prev,fluctuation:t.value.gross_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),o(zo,{data:t.value.gross_revenue,dataKey:"current","date-range":"","is-empty":!t.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:""},{title:r(()=>[i("h3",RX,m(f(p)("Gross Revenue Quarterly")),1),o(jo,{current:s.value.gross_revenue_quarterly.current,previous:s.value.gross_revenue_quarterly.prev,fluctuation:s.value.gross_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),o(zo,{data:t.value.gross_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!s.value.gross_revenue_quarterly.current},null,8,["data","is-empty"])]),_:1})]),_:1})]),i("div",PX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[i("div",{class:"mb-3",innerHTML:f(Be).generateVolumeSummary(t.value.gross_revenue,!0)},null,8,KX),o(su,{title:"Gross Volume Breakdown",data:t.value.gross_revenue,dataKey:"current","is-date":"","is-empty":!t.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[i("div",{class:"mb-3",innerHTML:f(Be).generateVolumeSummary(t.value.gross_revenue_quarterly)},null,8,NX),o(su,{title:f(p)("Gross Revenue Breakdown"),data:t.value.gross_revenue_quarterly,dataKey:"current",prevKey:"prev_year",labelKey:"yy_growth","bar-max-width":80,"is-empty":!t.value.gross_summary.total},null,8,["title","data","is-empty"])]),_:1})]),_:1})]),i("div",GX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h3",zX,m(f(p)("Net Revenue")),1),o(jo,{title:"Net Revenue",current:t.value.net_summary.total,previous:t.value.net_summary.total_prev,fluctuation:t.value.net_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),o(zo,{data:t.value.net_revenue,dataKey:"current","date-range":"","is-empty":!t.value.net_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(Ae,{border_bottom:!0},{title:r(()=>[i("h3",jX,m(f(p)("Net Revenue Quarterly")),1),o(jo,{title:"Net Revenue Quarterly",current:s.value.net_revenue_quarterly.current,previous:s.value.net_revenue_quarterly.prev,fluctuation:s.value.net_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),o(zo,{data:t.value.net_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!t.value.net_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),i("div",YX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(nu,{data:t.value.top_country_gross,title:f(p)("Top Country Gross Volume")},null,8,["data","title"])]),_:1})]),_:1})]),i("div",qX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>[o(nu,{data:t.value.top_country_net,title:f(p)("Top Country Net Volume")},null,8,["data","title"])]),_:1})]),_:1})]),i("div",WX,[o(re,null,{default:r(()=>[o(le,null,{default:r(()=>{var h;return[o(ou,{data:(h=t.value.top_country_gross)==null?void 0:h.by_countries,title:f(p)("Top Countries Gross Revenue")},null,8,["data","title"])]}),_:1})]),_:1}),o(re,null,{default:r(()=>[o(le,null,{default:r(()=>{var h;return[o(ou,{data:(h=t.value.top_country_net)==null?void 0:h.by_countries,title:f(p)("Top Countries Net Revenue")},null,8,["data","title"])]}),_:1})]),_:1})])],64))]))}},JX={class:"setting-wrap"},ZX={class:"setting-wrap-inner"},eJ={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},tJ={class:"grid gap-3 mb-6"},aJ={class:"grid gap-3 mb-6"},sJ={class:"grid gap-3 mb-6"},nJ={class:"grid gap-3"},oJ={class:"payment-method-list fct-content-card-list"},lJ={class:"flex items-start gap-3"},rJ={class:"grid gap-2 flex-1"},iJ={key:0,class:"fct-content-card-list-head stripe"},AJ=["src","alt"],dJ=["src","alt"],uJ={class:"block font-semibold text-system-dark dark:text-system-light"},cJ={class:"fct-content-card-list-content"},pJ={class:"fct-content-card-list-action flex items-center gap-2"},fJ={key:0},hJ={key:0},mJ={key:1},_J={key:2},gJ={key:3},vJ=Object.assign({name:"AddonSettings"},{__name:"AddonSettings",setup(e){const t=Up(),{form:a}=t.data,s=Gs(),n=T([]),l=T([]),d=T(!0),u=T(!1),c=T(!0),h=T({}),v=T(!1),y=T({}),g=T(!1),B=T(""),w=T(""),C=T({}),F=T({}),S=T({}),E=T({}),k=q(()=>Object.keys(y.value).length>0),Q=()=>{u.value=!0;let R=a.values;se.post("settings/modules",{...R}).then(K=>{Y.success(p("Settings saved successfully")),setTimeout(()=>{window.location.reload()},300)}).catch(K=>{if(K&&K.message)return Y.error(K);h.value=K}).finally(()=>{u.value=!1,c.value=!1,d.value=!1})},I=()=>{d.value=!0,se.get("settings/modules",{}).then(R=>{var W,ae;a.setSchema(R.fields).setDefaults(R.settings).initForm(),n.value=R.settings,l.value=R.fields,c.value=!1,u.value=!1;const K=((ae=(W=R.fields)==null?void 0:W.modules_settings)==null?void 0:ae.schema)||[];let J=!1;Array.isArray(K)?J=K.length>0:J=Object.keys(K).length>0,v.value=J}).finally(()=>{d.value=!1})},D=()=>{g.value=!0,se.get("settings/modules/plugin-addons",{}).then(R=>{y.value=R.addons||{}}).catch(R=>{Y.error(R)}).finally(()=>{g.value=!1})},M=(R,K)=>{B.value=K,se.post("settings/modules/plugin-addons/install",{plugin_slug:R.plugin_slug,source_type:R.source_type||"wordpress",source_link:R.source_link||"",asset_path:R.asset_path||""}).then(J=>{Y.success(J.message||p("Addon installed successfully")),setTimeout(()=>{window.location.reload()},500)}).catch(J=>{Y.error(J)}).finally(()=>{B.value=""})},$=(R,K)=>{w.value=K,se.post("settings/modules/plugin-addons/activate",{plugin_file:R.plugin_file}).then(J=>{Y.success(J.message||p("Addon activated successfully")),setTimeout(()=>{window.location.reload()},500)}).catch(J=>{Y.error(J)}).finally(()=>{w.value=""})},V=(R,K)=>{C.value[K]=!0,se.post("settings/modules/plugin-addons/check-update",{plugin_slug:R.plugin_slug,plugin_file:R.plugin_file,source_type:R.source_type||"wordpress",source_link:R.source_link||""}).then(J=>{var W,ae,Z,te;C.value[K]=!1,F.value[K]=J.update_info,(W=J.update_info)!=null&&W.has_update?os.confirm(p(`A new version (${(ae=J.update_info)==null?void 0:ae.latest_version}) is available. Current version: (${(Z=J.update_info)==null?void 0:Z.current_version}). Do you want to update now?`),p("Update Available"),{confirmButtonText:p("Update Now"),cancelButtonText:p("Later"),type:"info"}).then(()=>{L(R,K)}).catch(()=>{}):Y.success(p(`You are using the latest version (${(te=J.update_info)==null?void 0:te.current_version})`,{version:J.update_info.current_version}),p(p("Congratulations")))}).catch(J=>{C.value[K]=!1,Y.error((J==null?void 0:J.message)||p("Failed to check for updates"))})},L=(R,K)=>{S.value[K]=!0,se.post("settings/modules/plugin-addons/update",{plugin_slug:R.plugin_slug,plugin_file:R.plugin_file,source_type:R.source_type||"wordpress",source_link:R.source_link||""}).then(J=>{S.value[K]=!1,Y.success(J.message||p("Addon updated successfully!")),E.value[K]=p("Updated")}).catch(J=>{S.value[K]=!1,Y.error((J==null?void 0:J.message)||p("Failed to update addon"))})};return he(()=>{I(),D()}),s.onSave(Q),(R,K)=>{const J=b("el-skeleton-item"),W=b("el-skeleton"),ae=b("el-form"),Z=b("el-button");return A(),_("div",JX,[o(ea,{heading:f(p)("Addon Settings"),"show-save-button":!1},null,8,["heading"]),i("div",ZX,[c.value?(A(),_("div",eJ,[o(W,{loading:c.value,animated:""},{template:r(()=>[i("div",tJ,[o(J,{variant:"p",class:"w-[20%]"}),o(J,{variant:"p"})]),i("div",aJ,[o(J,{variant:"p",class:"w-[20%]"}),o(J,{variant:"p"})]),i("div",sJ,[o(J,{variant:"p",class:"w-[20%]"}),o(J,{variant:"p"})]),i("div",nJ,[o(J,{variant:"p",class:"w-[20%]"}),o(J,{variant:"p"})])]),_:1},8,["loading"])])):x("",!0),c.value?x("",!0):(A(),_(H,{key:1},[f(a).isReady?(A(),U(ae,{key:0},{default:r(()=>[v.value?(A(),U(Jl,{key:0,form:f(a),showSubmitButton:!0,onOnSubmitButtonClick:Q,submitButtonText:f(p)("Save Settings"),loading:u.value,onOnChange:K[0]||(K[0]=te=>{}),"validation-errors":h.value},null,8,["form","submitButtonText","loading","validation-errors"])):k.value?x("",!0):(A(),U(re,{key:1},{default:r(()=>[o(Ae,{title:f(p)("Features & addon"),border_bottom:""},null,8,["title"]),o(le,null,{default:r(()=>[o(Te,{class:"fct-addon-empty-state",icon:"Empty/Integrations",text:f(p)("No module settings found.")},null,8,["text"])]),_:1})]),_:1}))]),_:1})):x("",!0),k.value?(A(),U(re,{key:1,class:"mt-6"},{default:r(()=>[o(Ae,{title:f(p)("Plugin Addons"),border_bottom:""},null,8,["title"]),o(le,null,{default:r(()=>[i("div",oJ,[(A(!0),_(H,null,X(y.value,(te,ie)=>{var P;return A(),_("div",{key:ie,class:"fct-content-card-list-item"},[i("div",lJ,[i("div",rJ,[te.logo?(A(),_("div",iJ,[i("img",{class:oe({"dark:hidden":te.dark_logo}),src:te.logo,alt:te.title},null,10,AJ),te.dark_logo?(A(),_("img",{key:0,src:te.dark_logo,alt:te.title,class:"hidden dark:block"},null,8,dJ)):x("",!0),i("span",uJ,m(te.title),1),te.is_active?(A(),U(ut,{key:1,status:"active",text:f(p)("Active")},null,8,["text"])):x("",!0)])):x("",!0),i("div",cJ,[i("p",null,m(te.description),1)])]),i("div",pJ,[te.upcoming?(A(),_("div",fJ,m(f(p)("Coming Soon")),1)):(A(),_(H,{key:1},[te.is_installed?te.is_installed&&!te.is_active?(A(),U(Z,{key:1,type:"success",size:"small",loading:w.value===ie,disabled:w.value===ie,onClick:j=>$(te,ie)},{default:r(()=>[O(m(f(p)("Activate")),1)]),_:2},1032,["loading","disabled","onClick"])):x("",!0):(A(),U(Z,{key:0,type:"primary",size:"small",loading:B.value===ie,disabled:B.value===ie,onClick:j=>M(te,ie)},{default:r(()=>[O(m(f(p)("Install & Activate")),1)]),_:2},1032,["loading","disabled","onClick"])),te.is_installed?(A(),U(Z,{key:2,size:"small",loading:C.value[ie]||S.value[ie],disabled:S.value[ie]||E.value[ie]==="Updated",type:(P=F.value[ie])!=null&&P.has_update?"primary":"default",onClick:j=>V(te,ie)},{default:r(()=>[S.value[ie]?(A(),_("span",hJ,m(f(p)("Updating...")),1)):E.value[ie]==="Updated"?(A(),_("span",mJ,m(f(p)("Updated")),1)):C.value[ie]?(A(),_("span",_J,m(f(p)("Checking...")),1)):(A(),_("span",gJ,m(f(p)("Check Update")),1))]),_:2},1032,["loading","disabled","type","onClick"])):x("",!0)],64))])])])}),128))])]),_:1})]),_:1})):x("",!0)],64))])])}}}),yJ=be(vJ,[["__scopeId","data-v-a96a0de6"]]),bJ={class:"form-note"},wJ={class:"form-note"},CJ={class:"form-note"},BJ={class:"form-note"},kJ={class:"el-form-item__label"},FJ={class:"h-[297px] w-full relative"},xJ={class:"mt-2 mb-2"},UJ={class:"form-note"},SJ={class:"fct-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},EJ={class:"setting-html-wrapper"},QJ={class:"setting-label"},DJ={class:"form-note"},IJ={class:"setting-fields-inner w-full"},$J={__name:"MailingSettingsLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton"),l=b("el-form-item"),d=b("el-col"),u=b("el-row");return A(),U(le,null,{default:r(()=>[o(u,{gutter:15},{default:r(()=>[o(d,{lg:12},{default:r(()=>[o(l,{label:f(p)("From Name"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9 gap-2"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),a[0]||(a[0]=i("br",null,null,-1)),i("div",null,[i("div",bJ,[i("p",null,m(f(p)("Name that will be used to send emails")),1)])])]),_:1,__:[0]},8,["label"])]),_:1}),o(d,{lg:12},{default:r(()=>[o(l,{label:f(p)("From Email"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",null,[i("div",wJ,[i("p",null,m(f(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(d,{lg:12},{default:r(()=>[o(l,{label:f(p)("Reply to name (Optional)"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",CJ,[i("p",null,m(f(p)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),o(d,{lg:12},{default:r(()=>[o(l,{label:f(p)("Reply to email (Optional)"),"label-position":"top"},{default:r(()=>[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",null,[i("div",BJ,[i("p",null,m(f(p)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(d,null,{default:r(()=>[i("div",kJ,m(f(p)("Email Footer")),1),i("div",FJ,[o(n,{animated:"",rows:7})]),i("div",xJ,[i("div",UJ,[i("p",null,m(f(p)(`This email footer will be used for all emails sent from FluentCart, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),i("div",SJ,[o(n,{animated:"",class:"h-5"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1}),o(u,{gutter:15},{default:r(()=>[o(d,null,{default:r(()=>[o(l,null,{default:r(()=>[o(u,{gutter:15,class:"w-full"},{default:r(()=>[o(d,{lg:12},{default:r(()=>[i("div",EJ,[i("span",QJ,m(f(p)("Admin Email Address")),1),i("div",DJ,[i("p",null,m(f(p)("FluentCart will send admin notification to this email address.")),1)])])]),_:1}),o(d,{lg:12},{default:r(()=>[i("div",IJ,[o(n,{animated:"",class:"h-9"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},TJ={class:"setting-wrap"},MJ={class:"setting-wrap-inner"},VJ={class:"form-note"},LJ={class:"form-note"},OJ={class:"form-note"},HJ={class:"form-note"},RJ={class:"el-form-item__label"},PJ={class:"mt-2 mb-2"},KJ={class:"form-note"},NJ={class:"fct-powered-by-email-footer-checkbox"},GJ={class:"setting-html-wrapper"},zJ={class:"setting-label"},jJ={class:"form-note"},YJ={class:"setting-fields-inner w-full"},qJ={class:"setting-save-action"},WJ={__name:"MailingSettings",setup(e){const t=T({from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",email_footer:"",show_email_footer:"yes",admin_email:"{{wp.admin_email}}"}),a=De.get("app_config.isProActive"),s=T(!1),n=T({}),l=T({}),d=()=>{s.value=!0,se.get("email-notification/get-settings").then(c=>{var h,v,y,g,B,w,C;t.value={from_name:(h=c.data)==null?void 0:h.from_name,from_email:(v=c.data)==null?void 0:v.from_email,reply_to_name:(y=c.data)==null?void 0:y.reply_to_name,reply_to_email:(g=c.data)==null?void 0:g.reply_to_email,email_footer:(B=c.data)==null?void 0:B.email_footer,admin_email:(w=c.data)==null?void 0:w.admin_email,show_email_footer:((C=c.data)==null?void 0:C.show_email_footer)||"yes"},l.value=c.shortcodes}).catch(c=>{}).finally(()=>{s.value=!1})},u=()=>{s.value=!0,n.value={},se.post("email-notification/save-settings",t.value).then(c=>{Y.success(c.message)}).catch(c=>{c.status_code===422&&c.data?n.value=c.data:c.message?Y.error(c.message):(Y.error(p("Something went wrong")),n.value=c)}).finally(()=>{s.value=!1})};return he(()=>{d()}),(c,h)=>{const v=b("el-input"),y=b("el-form-item"),g=b("el-col"),B=b("el-row"),w=b("el-tooltip"),C=b("el-checkbox"),F=b("el-button");return A(),_("div",TJ,[o(ea,{heading:f(p)("Mailing Settings"),loading:s.value,onOnSave:u},null,8,["heading","loading"]),i("div",MJ,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Email Configuration"),text:f(p)("Set your from name, email, and email footer. These configurations will be used to send emails from %s.","FluentCart"),border_bottom:""},null,8,["title","text"]),s.value?(A(),U($J,{key:0})):(A(),U(le,{key:1},{default:r(()=>[o(B,{gutter:15},{default:r(()=>[o(g,{lg:12},{default:r(()=>[o(y,{label:f(p)("From Name"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:t.value.from_name,"onUpdate:modelValue":h[0]||(h[0]=S=>t.value.from_name=S)},null,8,["modelValue"]),h[9]||(h[9]=i("br",null,null,-1)),i("div",null,[o(ns,{"validation-errors":n.value.from_name||{},"field-key":"from_name"},null,8,["validation-errors"]),i("div",VJ,[i("p",null,m(f(p)("Name that will be used to send emails")),1)])])]),_:1,__:[9]},8,["label"])]),_:1}),o(g,{lg:12},{default:r(()=>[o(y,{label:f(p)("From Email"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:t.value.from_email,"onUpdate:modelValue":h[1]||(h[1]=S=>t.value.from_email=S)},null,8,["modelValue"]),i("div",null,[o(ns,{"validation-errors":n.value.from_email||{},"field-key":"from_email"},null,8,["validation-errors"]),i("div",LJ,[i("p",null,m(f(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
email will be used to send emails like notifications`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(B,{gutter:15},{default:r(()=>[o(g,{lg:12},{default:r(()=>[o(y,{label:f(p)("Reply to name (Optional)"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:t.value.reply_to_name,"onUpdate:modelValue":h[2]||(h[2]=S=>t.value.reply_to_name=S)},null,8,["modelValue"]),i("div",OJ,[i("p",null,m(f(p)("Name that will be used for reply to attribute")),1)])]),_:1},8,["label"])]),_:1}),o(g,{lg:12},{default:r(()=>[o(y,{label:f(p)("Reply to email (Optional)"),"label-position":"top"},{default:r(()=>[o(v,{modelValue:t.value.reply_to_email,"onUpdate:modelValue":h[3]||(h[3]=S=>t.value.reply_to_email=S)},null,8,["modelValue"]),i("div",null,[o(ns,{"validation-errors":n.value.reply_to_email||{},"field-key":"reply_to_email"},null,8,["validation-errors"]),i("div",HJ,[i("p",null,m(f(p)(`If someone replies to your notification email, this is where you would like to
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),o(B,{gutter:15},{default:r(()=>[o(g,null,{default:r(()=>[i("div",RJ,m(f(p)("Email Footer")),1),o(xs,{"short-codes":l.value,modelValue:t.value.email_footer,"onUpdate:modelValue":h[4]||(h[4]=S=>t.value.email_footer=S),onUpdate:h[5]||(h[5]=S=>{t.value.email_footer=S})},null,8,["short-codes","modelValue"]),i("div",PJ,[o(ns,{"validation-errors":n.value.email_footer||{},"field-key":"email_footer"},null,8,["validation-errors"]),i("div",KJ,[i("p",null,m(f(p)(`This email footer will be used for all emails sent from FluentCart, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),i("div",NJ,[o(C,{modelValue:t.value.show_email_footer,"onUpdate:modelValue":h[6]||(h[6]=S=>t.value.show_email_footer=S),"true-value":"yes","false-value":"no",disabled:!f(a)},{default:r(()=>[O(m(f(p)("Enable powered by FluentCart in the email footer"))+" ",1),f(a)?x("",!0):(A(),U(w,{key:0,"popper-class":"fct-tooltip",placement:"top"},{content:r(()=>[O(m(f(p)("This feature is available in pro version only.")),1)]),default:r(()=>[o(z,{name:"Crown",class:"fct-pro-icon"})]),_:1}))]),_:1},8,["modelValue","disabled"])])]),_:1})]),_:1}),o(B,{gutter:15},{default:r(()=>[o(g,null,{default:r(()=>[o(y,null,{default:r(()=>[o(B,{gutter:15,class:"w-full"},{default:r(()=>[o(g,{lg:12},{default:r(()=>[i("div",GJ,[i("span",zJ,m(f(p)("Admin Email Address")),1),i("div",jJ,[i("p",null,m(f(p)("FluentCart will send admin notification to this email address.")),1)])])]),_:1}),o(g,{lg:12},{default:r(()=>[i("div",YJ,[o(v,{modelValue:t.value.admin_email,"onUpdate:modelValue":h[7]||(h[7]=S=>t.value.admin_email=S)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),i("div",qJ,[o(F,{type:"primary",onClick:h[8]||(h[8]=S=>u()),loading:s.value},{default:r(()=>[O(m(s.value?f(p)("Saving Settings"):f(p)("Save Settings")),1)]),_:1},8,["loading"])])])])}}},XJ={};function JJ(e,t){const a=b("router-view");return A(),_("div",null,[o(a)])}const ZJ=be(XJ,[["render",JJ]]),eZ={},tZ={class:"fct-setting-form-row"},aZ={class:"w-[300px]"},sZ={class:"flex-grow flex-shrink flex-basis-0 self-center"},nZ={class:"fct-setting-form-row"},oZ={class:"w-[300px]"},lZ={class:"flex-grow flex-shrink flex-basis-0 self-center"},rZ={class:"fct-setting-form-row"},iZ={class:"w-[300px]"},AZ={class:"flex-grow flex-shrink flex-basis-0 self-center"};function dZ(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),_("div",null,[i("div",tZ,[i("div",aZ,[o(s,{animated:"",class:"max-w-[70%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-[80%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"}),o(a,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),i("div",sZ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),i("div",nZ,[i("div",oZ,[o(s,{animated:"",class:"max-w-[60%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-full"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})]),i("div",lZ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),i("div",rZ,[i("div",iZ,[o(s,{animated:"",class:"max-w-[50%]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-full"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})]),i("div",AZ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1})])])])}const uZ=be(eZ,[["render",dZ]]),cZ={},pZ={class:"fct-tax-classes-content flex-1"},fZ={class:"fct-tax-classes-actions"};function hZ(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),_(H,null,X(5,n=>i("div",{key:n,class:"fct-tax-classes h-[73px]"},[i("div",pZ,[o(s,{animated:"",class:"max-w-[400px]"},{template:r(()=>[o(a,{variant:"p",class:"w-full h-4"})]),_:1}),o(s,{animated:"",class:"max-w-[300px]"},{template:r(()=>[o(a,{variant:"p",class:"w-3/4 h-4"})]),_:1})]),i("div",fZ,[o(s,{animated:""},{template:r(()=>[o(a,{variant:"p",class:"w-[80px] h-4"})]),_:1})])])),64)}const mZ=be(cZ,[["render",hZ]]),_Z={key:0,class:"setting-wrap"},gZ={class:"fct-all-tax-classes-page"},vZ={key:0,class:"fct-tax-classes-wrap"},yZ={key:1,class:"fct-tax-classes-wrap"},bZ={class:"fct-tax-classes-content"},wZ={class:"fct-tax-classes-title"},CZ={class:"heading"},BZ={key:0,class:"fct-tax-classes-categories"},kZ={key:0,class:"fct-tax-classes-category fct-tax-classes-more"},FZ={class:"fct-tax-classes-desc"},xZ={class:"fct-tax-classes-actions"},UZ={class:"form-hint"},SZ={key:0},EZ={__name:"TaxClasses",props:{tax_settings_changed:{type:Boolean,default:!1},enable_tax:{type:String,default:"no"},categories_external:{type:Array,default:()=>[]}},setup(e){const t=T([]),a=T(!1),s=T(!1),n=T(!1),l=T({id:0,title:"",description:"",categories:[],priority:10}),d=e;fe(()=>d.tax_settings_changed,Q=>{Q&&v()});const u=T({}),c=T([]),h=T(!1),v=()=>{a.value=!0,se.get("tax/classes").then(Q=>{t.value=Q.tax_classes}).catch(Q=>{Q&&(Q!=null&&Q.message)&&Y.error(Q),console.error("Error fetching tax classes:",Q)}).finally(()=>{a.value=!1})},y=()=>{g(),s.value=!0},g=()=>{l.value={id:0,title:"",description:"",categories:[],priority:10}},B=()=>{if(n.value=!0,!l.value.title)return n.value=!1,Y.error(p("Title is required"));se.post("tax/classes",l.value).then(Q=>{Y.success(Q.message),v(),s.value=!1,g(),u.value={}}).catch(Q=>{Q&&(Q!=null&&Q.message)?Y.error(Q==null?void 0:Q.message):u.value=Q}).finally(()=>{n.value=!1})},w=()=>{if(n.value=!0,!l.value.title)return n.value=!1,Y.error(p("Title is required"));se.put("tax/classes/"+l.value.id,{title:l.value.title,description:l.value.description,categories:l.value.categories,priority:l.value.priority}).then(Q=>{Y.success(Q.message),v(),s.value=!1,u.value={}}).catch(Q=>{Q&&(Q!=null&&Q.message)?Y.error(Q==null?void 0:Q.message):u.value=Q}).finally(()=>{n.value=!1})},C=Q=>{Q.action==="delete"&&Kt(p("Are you sure you want to delete this tax class?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{F(Q.taxClass.id)}).catch(()=>{})},F=Q=>{se.delete("tax/classes/"+Q).then(I=>{Y.success(I.message),v()}).catch(I=>{I&&(I!=null&&I.message)?Y.error(I==null?void 0:I.message):u.value=I}).finally(()=>{})},S=Q=>{var I,D;l.value={id:Q.id,title:Q.title,description:Q.description,categories:((I=Q.meta)==null?void 0:I.categories)??[],priority:((D=Q.meta)==null?void 0:D.priority)??0},s.value=!0},E=()=>{if(d.categories_external&&d.categories_external.length){c.value=d.categories_external.map(Q=>({...Q,value:parseInt(Q.value??Q.term_id)}));return}c.value.length>0||(h.value=!0,se.get("products/fetch-term").then(Q=>{let I=Q.taxonomies["product-categories"].terms;c.value=I.map(D=>({...D,value:parseInt(D.value)}))}).catch(Q=>{console.error("Error fetching product categories:",Q)}).finally(()=>{h.value=!1}))},k=Q=>{var I;return((I=c.value.find(D=>D.value==Q))==null?void 0:I.label)||Q};return he(()=>{v(),E()}),(Q,I)=>{const D=b("el-button"),M=b("el-dropdown-item"),$=b("el-dropdown-menu"),V=b("el-dropdown"),L=b("el-input"),R=b("el-form-item"),K=b("el-col"),J=b("el-input-number"),W=b("el-row"),ae=b("el-option"),Z=b("el-select"),te=b("el-form"),ie=b("el-dialog"),P=Qt("loading");return d.enable_tax==="yes"&&t.value.length>0?(A(),_("div",_Z,[i("div",gZ,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Existing Tax Classes"),text:f(p)("Define categories to group products with similar tax treatment.")},{action:r(()=>[o(D,{type:"default",onClick:y},{default:r(()=>[O(m(f(p)("Add Tax Class")),1)]),_:1})]),_:1},8,["title","text"]),o(le,null,{default:r(()=>[a.value?(A(),_("div",vZ,[o(mZ)])):(A(),_("div",yZ,[(A(!0),_(H,null,X(t.value,(j,G)=>(A(),_("div",{key:G,class:"fct-tax-classes"},[i("div",bZ,[i("h4",wZ,[i("span",CZ,m(j.title),1),j.categories&&j.categories.length>0?(A(),_("span",BZ,[(A(!0),_(H,null,X(j.categories.slice(0,2),(N,ee)=>(A(),_("span",{key:ee,class:"fct-tax-classes-category"},m(k(N)),1))),128)),j.categories.length>2?(A(),_("span",kZ," +"+m(j.categories.length-2),1)):x("",!0)])):x("",!0)]),i("p",FZ,m(j.description),1)]),i("div",xZ,[o(we,{size:"small",tag:"span",onClick:N=>S(j)},{default:r(()=>[o(z,{name:"Edit",class:"w-4 h-4"})]),_:2},1032,["onClick"]),["standard","reduced","zero"].includes(j.slug)?x("",!0):(A(),U(V,{key:0,trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:C},{dropdown:r(()=>[o($,null,{default:r(()=>[o(M,{command:{action:"delete",taxClass:j},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(we,{size:"small",tag:"span"},{default:r(()=>[o(z,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024))])]))),128))]))]),_:1})]),_:1})]),o(ie,{modelValue:s.value,"onUpdate:modelValue":I[5]||(I[5]=j=>s.value=j),title:f(p)("Add Tax Class"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages"},{footer:r(()=>[o(D,{onClick:I[4]||(I[4]=j=>s.value=!1)},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),l.value.id>0?(A(),U(D,{key:0,type:"primary",onClick:w,loading:n.value},{default:r(()=>[O(m(n.value?f(p)("Updating"):f(p)("Update")),1)]),_:1},8,["loading"])):(A(),U(D,{key:1,type:"primary",onClick:B,loading:n.value},{default:r(()=>[O(m(n.value?f(p)("Creating"):f(p)("Create")),1)]),_:1},8,["loading"]))]),default:r(()=>[o(te,{"label-position":"top",model:l.value},{default:r(()=>[o(W,{gutter:20},{default:r(()=>[o(K,{span:16},{default:r(()=>[o(R,{label:f(p)("Tax Class Name")},{default:r(()=>[o(L,{modelValue:l.value.title,"onUpdate:modelValue":I[0]||(I[0]=j=>l.value.title=j),placeholder:f(p)("Enter Tax Class Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(K,{span:8},{default:r(()=>[o(R,{label:f(p)("Priority")},{label:r(()=>[o(Ge,{title:f(p)("Priority"),content:f(p)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first.")},null,8,["title","content"])]),default:r(()=>[o(J,{modelValue:l.value.priority,"onUpdate:modelValue":I[1]||(I[1]=j=>l.value.priority=j),min:0,max:10,placeholder:f(p)("Enter priority (0-10)"),"controls-position":"right",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),o(R,{label:f(p)("Product Category")},{default:r(()=>[pt((A(),U(Z,{modelValue:l.value.categories,"onUpdate:modelValue":I[2]||(I[2]=j=>l.value.categories=j),filterable:"",multiple:"",placeholder:f(p)("Select Product Category")},{default:r(()=>[(A(!0),_(H,null,X(c.value,(j,G)=>(A(),U(ae,{key:G,label:j.label,value:j.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[P,h.value]]),i("div",UZ,[i("p",null,m(f(p)("Select the product categories that this tax class will be applied to.")),1)])]),_:1},8,["label"]),o(R,{label:f(p)("Description")},{default:r(()=>[o(L,{type:"textarea",rows:"3",modelValue:l.value.description,"onUpdate:modelValue":I[3]||(I[3]=j=>l.value.description=j),placeholder:f(p)("Enter Tax Class Description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),u.value?(A(),_("div",SZ,[(A(!0),_(H,null,X(u.value,(j,G)=>(A(),_("p",{class:"text-red-500 m-0",key:G},m(j.required||j.max||j.unique),1))),128))])):x("",!0)]),_:1},8,["modelValue","title"])])):x("",!0)}}},QZ={name:"TaxConfigurations",components:{TaxConfigurationsLoader:uZ,Animation:na,CardContainer:re,CardBody:le,CardHeader:Ae,LabelHint:Ge,TaxClasses:EZ,SettingsHeader:ea},data(){return{settings:{enable_tax:"no",tax_inclusion:"included",tax_calculation_basis:"shipping",tax_rounding:"item",eu_vat_settings:{require_vat_number:"no",local_reverse_charge:"no",vat_reverse_excluded_categories:[]}},tax_settings_changed:!1,saving:!1,loading:!1,categories:[],fetchingCategories:!1}},methods:{translate:p,saveSettings(){this.saving=!0,this.$post("tax/configuration/settings",{settings:this.settings}).then(e=>{this.handleSuccess(e.message),this.tax_settings_changed=!0}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message),this.saving=!1}).finally(()=>{this.saving=!1})},getSettings(){this.loading=!0,this.$get("tax/configuration/settings").then(e=>{if(this.settings=e.settings,this.settings.eu_vat_settings||(this.settings.eu_vat_settings={}),!Array.isArray(this.settings.eu_vat_settings.vat_reverse_excluded_categories))this.settings.eu_vat_settings.vat_reverse_excluded_categories=[];else{let t=this.settings.eu_vat_settings.vat_reverse_excluded_categories.map(a=>a.toString());this.settings.eu_vat_settings.vat_reverse_excluded_categories=t}}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)}).finally(()=>{this.loading=!1})},fetchCategories(){this.categories.length>0||(this.fetchingCategories=!0,this.$get("products/fetch-term").then(e=>{this.categories=e.taxonomies["product-categories"].terms||[]}).catch(()=>{}).finally(()=>{this.fetchingCategories=!1}))}},mounted(){this.getSettings(),this.fetchCategories()}},DZ={class:"setting-wrap"},IZ={class:"setting-wrap-inner"},$Z={class:"fct-setting-form-row"},TZ={class:"fct-setting-form-content flex gap-3.5 flex-1"},MZ={class:"fct-inline-tip"},VZ={class:"fct-setting-form-row"},LZ={class:"fct-setting-form-content"},OZ={class:"fct-inline-tip"},HZ={class:"fct-setting-form-fields self-center"},RZ={class:"fct-setting-form-row"},PZ={class:"fct-setting-form-content"},KZ={class:"fct-inline-tip"},NZ={class:"fct-setting-form-fields self-center"},GZ={class:"fct-setting-form-row"},zZ={class:"fct-setting-form-content"},jZ={class:"fct-inline-tip"},YZ={class:"fct-setting-form-fields self-center"},qZ={class:"fct-setting-form-row"},WZ={class:"fct-setting-form-content"},XZ={class:"fct-inline-tip"},JZ={class:"fct-setting-form-content flex gap-3.5 flex-1"},ZZ={class:"fct-inline-tip"},eee={key:0,class:"fct-setting-form-content flex gap-3.5 flex-1"},tee={class:"fct-inline-tip"},aee={key:1,class:"fct-setting-form-row mt-6"},see={class:"fct-setting-form-content"},nee={class:"fct-inline-tip"},oee={class:"fct-setting-form-fields"};function lee(e,t,a,s,n,l){const d=b("SettingsHeader"),u=b("el-switch"),c=b("LabelHint"),h=b("TaxConfigurationsLoader"),v=b("el-radio"),y=b("el-radio-group"),g=b("el-option"),B=b("el-select"),w=b("el-input"),C=b("Animation"),F=b("CardBody"),S=b("CardContainer"),E=b("TaxClasses"),k=Qt("loading");return A(),_("div",DZ,[o(d,{heading:l.translate("Tax Configuration"),loading:n.saving,onOnSave:l.saveSettings},null,8,["heading","loading","onOnSave"]),i("div",IZ,[o(S,null,{default:r(()=>[o(F,null,{default:r(()=>[i("div",$Z,[i("div",TZ,[o(u,{modelValue:n.settings.enable_tax,"onUpdate:modelValue":t[0]||(t[0]=Q=>n.settings.enable_tax=Q),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(c,{title:l.translate("Enable Tax")},null,8,["title"]),i("p",MZ,m(l.translate("Enable tax calculations for your store.")),1)])])]),n.loading?(A(),U(h,{key:0})):x("",!0),o(C,{visible:!n.loading&&n.settings.enable_tax==="yes",accordion:""},{default:r(()=>{var Q,I;return[i("div",VZ,[i("div",LZ,[o(c,{title:l.translate("Prices entered with tax")},null,8,["title"]),i("p",OZ,m(l.translate("Choose whether product prices are entered including or excluding tax.")),1)]),i("div",HZ,[o(y,{modelValue:n.settings.tax_inclusion,"onUpdate:modelValue":t[1]||(t[1]=D=>n.settings.tax_inclusion=D)},{default:r(()=>[o(v,{value:"included"},{default:r(()=>[O(m(l.translate("Included")),1)]),_:1}),o(v,{value:"excluded"},{default:r(()=>[O(m(l.translate("Excluded")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",RZ,[i("div",PZ,[o(c,{title:l.translate("Calculate Tax Based On")},null,8,["title"]),i("p",KZ,m(l.translate("Determine the location used for tax calculations.")),1)]),i("div",NZ,[o(B,{modelValue:n.settings.tax_calculation_basis,"onUpdate:modelValue":t[2]||(t[2]=D=>n.settings.tax_calculation_basis=D),clearable:""},{default:r(()=>[o(g,{value:"shipping",label:l.translate("Customer Shipping Address")},null,8,["label"]),o(g,{value:"billing",label:l.translate("Customer Billing Address")},null,8,["label"]),o(g,{value:"store",label:l.translate("Store Location")},null,8,["label"])]),_:1},8,["modelValue"])])]),i("div",GZ,[i("div",zZ,[o(c,{title:l.translate("Price Suffix")},null,8,["title"]),i("p",jZ,m(l.translate("Will be shown on the product price.")),1)]),i("div",YZ,[o(w,{modelValue:n.settings.price_suffix,"onUpdate:modelValue":t[3]||(t[3]=D=>n.settings.price_suffix=D),placeholder:l.translate("e.g. (incl. tax)")},null,8,["modelValue","placeholder"])])]),i("div",qZ,[i("div",WZ,[o(c,{title:l.translate("EU VAT Settings")},null,8,["title"]),i("p",XZ,m(l.translate("Configure VAT handling for customers in the European Union.")),1)])]),i("div",JZ,[o(u,{modelValue:n.settings.eu_vat_settings.require_vat_number,"onUpdate:modelValue":t[4]||(t[4]=D=>n.settings.eu_vat_settings.require_vat_number=D),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(c,{title:l.translate("Enable EU VAT Number")},null,8,["title"]),i("p",ZZ,m(l.translate("If enabled, all customers in the EU will be able to enter a EU VAT number when checking out.")),1)])]),((Q=n.settings.eu_vat_settings)==null?void 0:Q.require_vat_number)==="yes"?(A(),_("div",eee,[o(u,{modelValue:n.settings.eu_vat_settings.local_reverse_charge,"onUpdate:modelValue":t[5]||(t[5]=D=>n.settings.eu_vat_settings.local_reverse_charge=D),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),i("div",null,[o(c,{title:l.translate("Local Reverse Charge")},null,8,["title"]),i("p",tee,m(l.translate("If enabled, apply reverse charge when applicable even when customers are in your home country.")),1)])])):x("",!0),((I=n.settings.eu_vat_settings)==null?void 0:I.require_vat_number)==="yes"?(A(),_("div",aee,[i("div",see,[o(c,{title:l.translate("Exclude Categories from VAT reverse")},null,8,["title"]),i("p",nee,m(l.translate("Select product categories that should NOT get VAT reverse charge !")),1)]),t[7]||(t[7]=i("br",null,null,-1)),i("div",oee,[pt((A(),U(B,{modelValue:n.settings.eu_vat_settings.vat_reverse_excluded_categories,"onUpdate:modelValue":t[6]||(t[6]=D=>n.settings.eu_vat_settings.vat_reverse_excluded_categories=D),filterable:"",multiple:"",clearable:"",placeholder:l.translate("Select Product Categories"),class:"w-full"},{default:r(()=>[(A(!0),_(H,null,X(n.categories,D=>(A(),U(g,{key:D.value||D.term_id,label:D.label||D.name,value:D.value||D.term_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[k,n.fetchingCategories]])])])):x("",!0)]}),_:1},8,["visible"])]),_:1})]),_:1}),o(E,{tax_settings_changed:n.tax_settings_changed,enable_tax:n.settings.enable_tax,categories_external:n.categories},null,8,["tax_settings_changed","enable_tax","categories_external"])])])}const ree=be(QZ,[["render",lee]]),iee={class:"fct-tax-rates-wrap-loader"},Si={__name:"TaxRatesLoader",setup(e){const t=T(Array.from({length:6},()=>`${Math.floor(Math.random()*21)+120}px`));return(a,s)=>{const n=b("el-skeleton-item"),l=b("el-skeleton");return A(),_("div",iee,[(A(!0),_(H,null,X(t.value,(d,u)=>(A(),_("div",{key:u,class:"flex items-center justify-between border-[1px] border-solid border-gray-divider dark:border-dark-400 rounded h-12 pr-4 pl-6 mb-4"},[o(l,{animated:"",style:sa({width:d}),class:"h-4"},{template:r(()=>[o(n,{variant:"p",class:"h-4"})]),_:2},1032,["style"]),o(l,{animated:"",class:"w-[100px] h-4"},{template:r(()=>[o(n,{variant:"p",class:"h-4"})]),_:1})]))),128))])}}},Aee={class:"fct-tax-configuration-country-wrap"},dee={class:"dialog-header"},uee={class:"dialog-title m-0 mb-1"},cee={class:"m-0"},pee={class:"fct-tax-rates-configuration-country-view"},fee={key:1,class:"fct-tax-rates-wrap"},hee={key:0,class:"m-0 mb-2"},mee={class:"font-medium"},_ee={key:0},gee={class:"fct-tax-rates-title"},vee={class:"total-countries"},yee={key:0,class:"fct-tax-rates-countries"},bee={class:"fct-tax-rates-country-name"},wee=["src"],Cee={class:"fct-tax-rates-country-actions"},Bee={class:"fct-tax-rates-country-rate"},kee={key:1},Fee={class:"p-2 float-right"},xee={key:0,class:"p-2 float-right"},Uee={class:"dialog-footer"},sr={__name:"TaxConfigurationCountryModal",props:{onlyEU:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{emit:t}){const a=e,s=T(!1),n=T([]),l=T(!1),d=T([]),u=T([]),c=T(!1),h=T(""),v=()=>{s.value=!0},y=t,g=()=>{l.value=!0,se.get("tax/configuration/rates").then(k=>{d.value=k.tax_rates}).catch(k=>{console.error("Error fetching tax rates:",k)}).finally(()=>{l.value=!1})},B=()=>{g()},w=()=>{u.value=[]},C=k=>{u.value.includes(k)?u.value=u.value.filter(Q=>Q!==k):u.value.push(k)},F=()=>{u.value.length===0?Kt(p("If you don't select any country, all countries will be available for tax calculation. Are you sure you want to proceed?"),p("Yes, Proceed!"),{confirmButtonText:p("Yes, Proceed!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{S()}).catch(()=>{}):S()},S=()=>{c.value=!0,se.post("tax/configuration/countries",{countries:u.value}).then(k=>{Y.success(k.message),s.value=!1,y("refresh")}).catch(k=>{console.error("Failed to save config",k)}).finally(()=>{c.value=!1})},E=q(()=>{const k=h.value.toLowerCase();let Q=Object.values(d.value||{});return a.onlyEU&&(Q=Q.filter(I=>I.group_code==="EU")),k?Q.map(I=>{const D=I.countries.filter(M=>M.country_name.toLowerCase().includes(k)||M.country_code.toLowerCase().includes(k));return{...I,countries:D,total_countries:D.length}}).filter(I=>I.countries.length>0):Q});return(k,Q)=>{const I=b("el-button"),D=b("el-input"),M=b("el-checkbox"),$=b("router-link"),V=b("el-collapse-item"),L=b("el-collapse"),R=b("el-dialog");return A(),_("div",Aee,[o(I,{type:"primary",size:"small",onClick:v},{default:r(()=>[O(m(f(p)("Configure Countries")),1)]),_:1}),o(R,{modelValue:s.value,"onUpdate:modelValue":Q[3]||(Q[3]=K=>s.value=K),width:"800px","append-to-body":"",class:"fluent-cart-admin-pages",onOpen:B,onClose:w,"modal-class":"fct-tax-rates-configuration-country-modal"},{header:r(()=>[i("div",dee,[i("h3",uee,m(f(p)("Tax Configuration Countries")),1),i("p",cee,m(f(p)("Select the countries you want to configure tax rates for.")),1)])]),footer:r(()=>[i("div",Uee,[o(I,{onClick:Q[2]||(Q[2]=K=>s.value=!1),type:"info",soft:""},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(I,{type:"primary",onClick:F,loading:c.value,disabled:c.value},{default:r(()=>[O(m(c.value?f(p)("Saving"):f(p)("Save")),1)]),_:1},8,["loading","disabled"])])]),default:r(()=>[i("div",pee,[l.value?(A(),U(Si,{key:0})):(A(),_("div",fee,[o(D,{modelValue:h.value,"onUpdate:modelValue":Q[0]||(Q[0]=K=>h.value=K),placeholder:f(p)("Search country..."),clearable:"",class:"mb-3"},null,8,["modelValue","placeholder"]),u.value.length>0?(A(),_("div",hee,[i("span",mee,m(f(p)("Selected Countries: ")),1),(A(!0),_(H,null,X(u.value,(K,J)=>(A(),_("span",{key:K},[O(m(K),1),J<u.value.length-1?(A(),_("span",_ee,", ")):x("",!0)]))),128))])):x("",!0),o(L,{modelValue:n.value,"onUpdate:modelValue":Q[1]||(Q[1]=K=>n.value=K),accordion:"","expand-icon-position":"left"},{default:r(()=>[(A(!0),_(H,null,X(E.value,(K,J)=>(A(),U(V,{key:J,name:J},{title:r(()=>[i("span",gee,[O(m(K.group_name)+" ",1),i("span",vee,m(K.total_countries)+" "+m(f(p)(" Countries")),1)])]),default:r(()=>[e.onlyEU||K.group_code!=="EU"?(A(),_("div",yee,[(A(!0),_(H,null,X(K.countries,(W,ae)=>(A(),_("div",{key:ae,class:"fct-tax-rates-country"},[i("div",bee,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+W.country_code.toLowerCase()+".png",alt:"US flag"},null,8,wee),O(" "+m(W.country_name),1)]),i("div",Cee,[i("div",Bee,m(f(p)("%s rates",W.total_rates)),1),o(M,{"model-value":u.value.includes(W.country_code),onChange:Z=>C(W.country_code)},{default:r(()=>[O(m(f(p)("Select")),1)]),_:2},1032,["model-value","onChange"])])]))),128))])):(A(),_("div",kee,[i("div",Fee,[Q[4]||(Q[4]=O(" Configure all European Union countries VAT Settings. ",-1)),K.group_code==="EU"?(A(),_("div",xee,[o($,{to:"/settings/tax_settings/eu"},{default:r(()=>[O(m(f(p)("Configure EU VAT Settings")),1)]),_:1})])):x("",!0)])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]))])]),_:1},8,["modelValue"])])}}},See={class:"setting-wrap"},Eee={class:"setting-wrap-inner"},Qee={class:"fct-all-tax-classes-page"},Dee={key:1,class:"fct-tax-rates-wrap"},Iee={class:"fct-tax-rates-title"},$ee={class:"total-countries"},Tee={class:"fct-tax-rates-countries"},Mee={class:"fct-tax-rates-country-name"},Vee=["src","alt"],Lee={class:"fct-tax-rates-country-actions"},Oee={class:"fct-tax-rates-country-rate"},Hee={key:1,class:"fct-tax-rates-add-country-form-wrap"},Ree={class:"dialog-footer"},Pee={__name:"TaxRates",setup(e){const t=T([]),a=T([]),s=T(!1),n=T(!1),l=T({country:"",class_id:""}),d=T([]),u=T(!1),c=T(!1),h=T([]),v=()=>{s.value=!0,se.get("tax/rates").then(E=>{a.value=E.tax_rates,a.value=a.value.filter(k=>k.group_code!=="EU")}).catch(E=>{console.error("Error fetching tax rates:",E)}).finally(()=>{s.value=!1})},y=()=>{B(),C()},g=()=>{n.value=!1},B=()=>{u.value=!0,se.get("address-info/countries").then(E=>{d.value=E.data}).catch(E=>{console.error("Error fetching countries:",E)}).finally(()=>{u.value=!1})},w=()=>{if(!l.value.country){Y.error(p("Please select a country"));return}let E=l.value.country;typeof E=="string"&&(l.value.country=[E]),se.post("tax/configuration/countries",{countries:E}).then(k=>{Y.success(k.message),v(),n.value=!1}).catch(k=>{console.error("Failed to add country",k)})},C=()=>{c.value=!0,se.get("tax/classes").then(E=>{h.value=E.tax_classes}).catch(E=>{console.error("Error fetching tax classes:",E)}).finally(()=>{c.value=!1})},F=E=>{se.delete("tax/country/"+E).then(k=>{Y.success(k.message),v()}).catch(k=>{console.error("Failed to delete country",k)})},S=E=>{E.action==="delete"&&Kt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{F(E.country_code)}).catch(()=>{})};return he(()=>{v()}),(E,k)=>{const Q=b("el-button"),I=b("el-dropdown-item"),D=b("el-dropdown-menu"),M=b("el-dropdown"),$=b("el-collapse-item"),V=b("el-collapse"),L=b("el-option"),R=b("el-select"),K=b("el-form-item"),J=b("el-form"),W=b("el-dialog");return A(),_("div",See,[o(ea,{heading:f(p)("Tax Rates"),"show-save-button":!1},{action:r(()=>[o(sr,{onRefresh:v})]),_:1},8,["heading"]),i("div",Eee,[i("div",Qee,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Existing Tax Rates"),text:f(p)("Manage tax rates for different locations and tax classes")},null,8,["title","text"]),o(le,null,{default:r(()=>[s.value?(A(),U(Si,{key:0})):(A(),_("div",Dee,[o(V,{modelValue:t.value,"onUpdate:modelValue":k[0]||(k[0]=ae=>t.value=ae),accordion:"","expand-icon-position":"left"},{default:r(()=>[(A(!0),_(H,null,X(a.value,(ae,Z)=>(A(),U($,{name:Z,key:ae.group_code},{title:r(()=>[i("span",Iee,[O(m(ae.group_name)+" ",1),i("span",$ee,m(ae.total_countries)+" "+m(f(p)("Countries")),1)])]),default:r(()=>[i("div",Tee,[(A(!0),_(H,null,X(ae.countries,(te,ie)=>(A(),_("div",{key:ie,class:"fct-tax-rates-country"},[i("div",Mee,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+te.country_code.toLowerCase()+".png",alt:te.country_code},null,8,Vee),O(" "+m(te.country_name),1)]),i("div",Lee,[i("div",Oee,m(f(ao)("Rate","Rates",te.total_rates)),1),o(Q,{type:"info",soft:"",plain:"",size:"small",onClick:P=>E.$router.push({name:"tax-rates-country-single",params:{country:te.country_code,group:ae.group_code}})},{default:r(()=>[O(m(f(p)("View")),1)]),_:2},1032,["onClick"]),o(M,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:S},{dropdown:r(()=>[o(D,null,{default:r(()=>[o(I,{command:{action:"delete",country_code:te.country_code},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(we,{size:"small",tag:"span",class:"cursor-pointer"},{default:r(()=>[o(z,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)])]))),128))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),o(Q,{type:"info",soft:"",plain:"",size:"small",onClick:k[1]||(k[1]=ae=>n.value=!0),class:"fct-tax-rates-country-add"},{default:r(()=>[o(z,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+m(f(p)("Add Country")),1)]),_:1})]))]),_:1})]),_:1})])]),o(W,{modelValue:n.value,"onUpdate:modelValue":k[5]||(k[5]=ae=>n.value=ae),title:f(p)("Add Country"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages","modal-class":"fct-tax-rates-add-country-modal",onOpen:y,onClose:g},{default:r(()=>[s.value?(A(),U(Si,{key:0})):(A(),_("div",Hee,[o(J,{"label-position":"top",model:l.value},{default:r(()=>[o(K,{label:f(p)("Country")},{default:r(()=>[o(R,{modelValue:l.value.country,"onUpdate:modelValue":k[2]||(k[2]=ae=>l.value.country=ae),filterable:"",loading:u.value,placeholder:f(p)("Select Country")},{default:r(()=>[(A(!0),_(H,null,X(d.value,ae=>(A(),U(L,{key:ae.value,label:ae.name,value:ae.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])]),_:1},8,["label"]),x("",!0)]),_:1},8,["model"]),i("div",Ree,[o(Q,{onClick:k[4]||(k[4]=ae=>n.value=!1)},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(Q,{type:"primary",onClick:w},{default:r(()=>[O(m(f(p)("Add")),1)]),_:1})])]))]),_:1},8,["modelValue","title"])])}}},Kee={class:"fct-tax-rates-country-modal-actions"},Nee={__name:"CountryTaxRatesLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton"),l=b("el-table-column"),d=b("el-table");return A(),U(d,{data:[1,2,3,4,5]},{default:r(()=>[o(l,{label:f(p)("Tax Label"),width:"150"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("City"),width:"100"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("State")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Postcode")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Rate (%)")},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Tax Class"),width:"130"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Compound"),width:"100"},{default:r(()=>[o(n,{animated:"",class:"flex items-center justify-center"},{template:r(()=>[o(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Priority"),width:"100"},{default:r(()=>[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),o(l,{label:f(p)("Shipping")},{default:r(()=>[o(n,{animated:"",class:"flex items-center justify-center"},{template:r(()=>[o(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),o(l,null,{default:r(()=>[i("div",Kee,[o(n,{animated:""},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})}}},Gee={class:"setting-wrap"},zee={class:"fct-single-tax-rates-country-single-page"},jee={class:"fct-single-tax-rates-country-single"},Yee={class:"single-page-header flex items-center justify-between"},qee={class:"form-help-text text-xs font-normal mt-1"},Wee={class:"form-help-text text-xs font-normal mt-1"},Xee={class:"fct-tax-rates-country-view"},Jee={key:1},Zee={key:1},ete={key:2},tte={key:1},ate={key:1},ste={key:1},nte={key:1},ote={class:"fct-tax-rates-country-modal-actions"},lte={class:"fct-tax-rates-country-add"},rte={class:"fct-tax-rates-country-view"},ite={class:"fct-tax-rates-country-modal-actions"},lu={__name:"TaxRatesCountrySingle",props:{country:{type:String},group:{type:String}},setup(e){var ie;const t=e,a=T([]),s=T([]),n=T(!1),l=T(!1),d=T([]),u=T([]),c=T(!1),h=T({tax_id:"",tax_id_disabled:!1}),v=T([]),y=T(""),g=T(((ie=De.get("country_tax_titles"))==null?void 0:ie[t.country])||"Tax"),B=T(!1),w=T([]),C=T({id:"",tax_rate:""}),F=()=>{B.value=!0},S=P=>{B.value=!0,C.value={id:P.id,tax_rate:P.for_shipping}},E=()=>{se.get("tax/configuration/settings").then(P=>{var G;const j=((G=P.settings)==null?void 0:G.eu_vat_settings)||{};(j==null?void 0:j.method)=="home"?t.country==(j==null?void 0:j.home_country)&&(h.value.tax_id=j==null?void 0:j.home_vat,h.value.tax_id_disabled=!0):(j==null?void 0:j.method)=="oss"&&t.country==(j==null?void 0:j.oss_country)&&(h.value.tax_id=j==null?void 0:j.oss_vat,h.value.tax_id_disabled=!0)}).catch(P=>{console.error("Failed to fetch tax settings",P)})},k=P=>{se.delete("tax/rates/country/override/"+P.id).then(j=>{Y.success(j.message),D()})},Q=()=>{se.post("tax/rates/country/override",{id:C.value.id,override_tax_rate:C.value.tax_rate}).then(P=>{Y.success(P.message),B.value=!1,C.value={id:"",tax_rate:""},D()}).catch(P=>{console.error("Failed to save tax override",P)})},I=()=>{a.value.push({id:"",state:"",postcode:"",rate:"",tax_class:{id:"",title:""},is_compound:"0",priority:"1",for_shipping:null,isEditing:!0,isNew:!0})},D=()=>{n.value=!0,se.get("tax/rates/country/rates/"+t.country).then(P=>{var j;a.value=P.tax_rates,s.value=P.tax_rates.filter(G=>G.for_shipping!==null),u.value=P.settings?(j=P.settings)==null?void 0:j.hidden:[],w.value=P.tax_rates.map(G=>({name:G.name,value:G.id}))}).catch(P=>{console.error("Error fetching tax rates:",P)}).finally(()=>{n.value=!1})},M=P=>{P&&se.delete("tax/country/rate/"+P).then(j=>{Y.success(j.message),D()}).catch(j=>{j&&(j!=null&&j.message)&&Y.error(j.message),console.error("Failed to delete row",j)}).finally(()=>{})},$=P=>{P.action==="delete"&&Kt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{M(P.taxClass.id)}).catch(()=>{})},V=(P,j)=>{var G;se.put("tax/country/rate/"+P.id,{state:P.state,postcode:P.postcode,rate:P.rate,is_compound:P.is_compound,priority:P.priority,for_shipping:P.for_shipping,class_id:(G=P.tax_class)==null?void 0:G.id,group:t.group,city:P.city,name:P.name,country:t.country}).then(N=>{Y.success(N.message),a.value[j]={...N.tax_rate,isEditing:!1,isNew:!1}}).catch(N=>{var ee;N.status_code=="422"?Y.validationErrors(N):Y.error((ee=N.data)==null?void 0:ee.message)})},L=(P,j)=>{se.post("tax/country/rate",{country:t.country,state:P.state,postcode:P.postcode,rate:P.rate,is_compound:P.is_compound,priority:P.priority,for_shipping:P.for_shipping,class_id:P.tax_class.id,group:t.group,name:P.name,city:P.city}).then(G=>{Y.success(G.message),D(),a.value[j]={...G.tax_rate,isEditing:!1,isNew:!1}}).catch(G=>{var N;G.status_code=="422"?Y.validationErrors(G):Y.error((N=G.data)==null?void 0:N.message),console.error("Failed to save row",error)})},R=(P,j)=>{P.isNew?L(P,j):V(P,j)},K=()=>{l.value=!0,se.get("tax/classes").then(P=>{d.value=P.tax_classes}).catch(P=>{var G,N;let j=(G=P.data)!=null&&G.message?(N=P.data)==null?void 0:N.message:"Failed to fetch tax classes";Y.error(j)}).finally(()=>{l.value=!1})},J=(P,j)=>{P.isNew?a.value.splice(j,1):P.isEditing=!1},W=P=>!u.value.includes(P),ae=()=>{c.value=!0,se.post("tax/country-tax-id/"+t.country,{tax_id:h.value.tax_id}).then(P=>{Y.success(P.message)}).catch(P=>{var G,N;let j=(G=P.data)!=null&&G.message?(N=P.data)==null?void 0:N.message:"Failed to save tax id";Y.error(j)}).finally(()=>{c.value=!1})},Z=()=>{c.value=!0,se.get("tax/country-tax-id/"+t.country).then(P=>{h.value={...h.value,...P.tax_data}}).catch(P=>{var j,G;P&&((j=P==null?void 0:P.data)!=null&&j.message)&&Y.error((G=P.data)==null?void 0:G.message)}).finally(()=>{c.value=!1})},te=()=>{se.get("address-info/get-country-info",{country_code:t.country}).then(P=>{v.value=P.states,y.value=P.country_name}).catch(P=>{console.error("Error fetching country info:",P)}).finally(()=>{})};return he(()=>{E(),K(),D(),Z(),te()}),(P,j)=>{const G=b("el-breadcrumb-item"),N=b("el-breadcrumb"),ee=b("el-skeleton-item"),ne=b("el-skeleton"),Ce=b("el-form-item"),Qe=b("el-form"),_e=b("el-input"),Ie=b("el-button"),xe=b("el-table-column"),$e=b("el-option"),Se=b("el-select"),qe=b("el-switch"),vt=b("el-dropdown-item"),We=b("el-dropdown-menu"),ce=b("el-dropdown"),ge=b("el-table"),Oe=b("el-dialog");return A(),_("div",Gee,[i("div",zee,[i("div",jee,[i("div",Yee,[o(N,{class:"mb-0","separator-icon":f(la)},{default:r(()=>[e.group==="EU"?(A(),U(G,{key:0,to:{name:"eu"}},{default:r(()=>[O(m(f(p)("EU VAT Settings")),1)]),_:1})):(A(),U(G,{key:1,to:{name:"tax_rates"}},{default:r(()=>[O(m(f(p)("Existing Tax Rates")),1)]),_:1})),o(G,null,{default:r(()=>[O(m(g.value)+" Rates ",1)]),_:1}),o(G,null,{default:r(()=>[O(m(y.value||e.country),1)]),_:1})]),_:1},8,["separator-icon"])]),o(re,null,{default:r(()=>[c.value?(A(),U(le,{key:0},{default:r(()=>[o(Qe,{"label-position":"top",model:h.value.tax_id},{default:r(()=>[o(Ce,{label:g.value+" ID"},{default:r(()=>[o(ne,{animated:""},{template:r(()=>[o(ee,{variant:"p",class:"w-full h-4"})]),_:1}),i("div",qee,m(g.value)+" "+m(f(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})):(A(),U(le,{key:1},{default:r(()=>[o(Qe,{"label-position":"top",model:h.value.tax_id},{default:r(()=>[o(Ce,{label:g.value+" ID"},{default:r(()=>[o(_e,{modelValue:h.value.tax_id,"onUpdate:modelValue":j[0]||(j[0]=ue=>h.value.tax_id=ue),size:"small",disabled:h.value.tax_id_disabled},null,8,["modelValue","disabled"]),i("div",Wee,m(g.value)+" "+m(f(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"]),o(Ie,{type:"primary",onClick:ae},{default:r(()=>[O(m(f(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1}))]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Regional settings"),text:f(p)("Regions you're collecting in")},null,8,["title","text"]),o(le,null,{default:r(()=>[i("div",Xee,[n.value?(A(),U(Nee,{key:0})):(A(),U(ge,{key:1,data:a.value},{default:r(()=>[o(xe,{label:f(p)("Tax Label"),width:"150"},{default:r(({row:ue})=>[ue.isEditing?(A(),U(_e,{key:0,modelValue:ue.name,"onUpdate:modelValue":Ee=>ue.name=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(A(),_("span",Jee,m(ue.name||"-"),1))]),_:1},8,["label"]),W("city")?(A(),U(xe,{key:0,label:f(p)("City"),width:"100"},{default:r(({row:ue})=>[ue.isEditing?(A(),U(_e,{key:0,modelValue:ue.city,"onUpdate:modelValue":Ee=>ue.city=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(A(),_("span",Zee,m(ue.city||"-"),1))]),_:1},8,["label"])):x("",!0),W("state")?(A(),U(xe,{key:1,label:f(p)("State"),width:"120"},{default:r(({row:ue})=>[ue.isEditing&&v.value.length>0?(A(),U(Se,{key:0,modelValue:ue.state,"onUpdate:modelValue":Ee=>ue.state=Ee,size:"small",filterable:""},{default:r(()=>[(A(!0),_(H,null,X(v.value,Ee=>(A(),U($e,{key:Ee.value,label:Ee.name,value:Ee.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):x("",!0),ue.isEditing&&v.value.length===0?(A(),U(_e,{key:1,modelValue:ue.state,"onUpdate:modelValue":Ee=>ue.state=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):ue.isEditing?x("",!0):(A(),_("span",ete,m(ue.formatted_state||"-"),1))]),_:1},8,["label"])):x("",!0),W("zip")?(A(),U(xe,{key:2,label:f(p)("Postcode")},{default:r(({row:ue})=>[ue.isEditing?(A(),U(_e,{key:0,modelValue:ue.postcode,"onUpdate:modelValue":Ee=>ue.postcode=Ee,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(A(),_("span",tte,m(ue.postcode||"-"),1))]),_:1},8,["label"])):x("",!0),o(xe,{label:f(p)("Rate (%)")},{default:r(({row:ue})=>[ue.isEditing?(A(),U(_e,{key:0,modelValue:ue.rate,"onUpdate:modelValue":Ee=>ue.rate=Ee,size:"small",type:"number"},null,8,["modelValue","onUpdate:modelValue"])):(A(),_("span",ate,m(ue.rate||"-"),1))]),_:1},8,["label"]),o(xe,{label:f(p)("Tax Class"),width:"130"},{default:r(({row:ue})=>{var Ee;return[ue.isEditing?(A(),U(Se,{key:0,modelValue:ue.tax_class.id,"onUpdate:modelValue":Ke=>ue.tax_class.id=Ke,size:"small",filterable:"",placement:"bottom"},{default:r(()=>[(A(!0),_(H,null,X(d.value,Ke=>(A(),U($e,{key:Ke.id,label:Ke.title,value:Ke.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(A(),_("span",ste,m(((Ee=ue.tax_class)==null?void 0:Ee.title)||"-"),1))]}),_:1},8,["label"]),o(xe,{label:f(p)("Compound"),width:"100"},{default:r(({row:ue})=>[ue.isEditing?(A(),U(qe,{key:0,modelValue:ue.is_compound,"onUpdate:modelValue":Ee=>ue.is_compound=Ee,"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])):(A(),_("span",nte,m(ue.is_compound>0?f(p)("Yes"):f(p)("No")),1))]),_:1},8,["label"]),o(xe,{fixed:"right",width:"100",label:"Actions"},{default:r(({row:ue,$index:Ee})=>[i("div",ote,[ue.isEditing?(A(),_(H,{key:0},[o(we,{size:"small",tag:"span",onClick:Ke=>R(ue,Ee),class:"text-green-500"},{default:r(()=>[o(z,{name:"Check"})]),_:2},1032,["onClick"]),o(we,{size:"small",tag:"span",onClick:Ke=>J(ue,Ee),class:"text-red-500"},{default:r(()=>[o(z,{name:"Close"})]),_:2},1032,["onClick"])],64)):(A(),_(H,{key:1},[o(we,{size:"small",tag:"span",onClick:()=>{ue.isEditing=!0}},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"]),o(ce,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:$},{dropdown:r(()=>[o(We,null,{default:r(()=>[o(vt,{command:{action:"delete",taxClass:ue},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[o(we,{size:"small",tag:"span"},{default:r(()=>[o(z,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)],64))])]),_:1})]),_:1},8,["data"])),i("div",lte,[o(Ie,{type:"info",soft:"",plain:"",size:"small",onClick:I},{default:r(()=>[o(z,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+m(f(p)("Add New Rate")),1)]),_:1})])])]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Shipping Tax Overrides")+" ("+e.country+")",text:f(p)("You can specify shipping tax rates.")},{action:r(()=>[o(Ie,{type:"primary",onClick:F},{default:r(()=>[O(m(f(p)("Add Tax Override")),1)]),_:1})]),_:1},8,["title","text"]),o(le,null,{default:r(()=>[i("div",rte,[o(ge,{data:s.value},{default:r(()=>[o(xe,{label:f(p)("Tax Label")},{default:r(({row:ue})=>[O(m(ue.name),1)]),_:1},8,["label"]),o(xe,{label:f(p)("Shipping Tax Rate (%)")},{default:r(({row:ue})=>[O(m(ue.for_shipping),1)]),_:1},8,["label"]),o(xe,{label:f(p)("Actions"),width:"100"},{default:r(({row:ue})=>[i("div",ite,[o(we,{size:"small",tag:"span",onClick:Ee=>S(ue)},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"]),o(we,{size:"small",tag:"span",onClick:Ee=>k(ue)},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})]),_:1}),o(Oe,{modelValue:B.value,"onUpdate:modelValue":j[3]||(j[3]=ue=>B.value=ue),title:f(p)("Add Tax Override")},{default:r(()=>[o(Qe,{"label-position":"top",model:C.value},{default:r(()=>[o(Ce,{label:f(p)("Regions")},{default:r(()=>[o(Se,{modelValue:C.value.id,"onUpdate:modelValue":j[1]||(j[1]=ue=>C.value.id=ue),size:"small"},{default:r(()=>[(A(!0),_(H,null,X(w.value,ue=>(A(),U($e,{key:ue.value,label:ue.name,value:ue.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(Ce,{label:f(p)("Tax Rate (%)")},{default:r(()=>[o(_e,{modelValue:C.value.tax_rate,"onUpdate:modelValue":j[2]||(j[2]=ue=>C.value.tax_rate=ue),size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),o(Ie,{type:"primary",onClick:Q},{default:r(()=>[O(m(f(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])])])}}};class Ate extends yn{getTabs(){return{all:p("All"),filed:p("Filed"),not_filed:p("Not Filed")}}getToggleableColumns(){return[{label:"ID",value:"id"},{label:"Order ID",value:"order_id"},{label:"Zip Code",value:"postcode"},{label:"Tax Rate",value:"rate"},{label:"Filed",value:"filed_at"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Tax Country"),value:"country"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"taxes"}parseResponse(t){return t.taxes}getTableName(){return"taxes_table"}getAdvanceFilterOptions(){return ve.get(window,"fluentCartAdminApp.filter_options.tax_filter_options.advance")}getSearchGuideOptions(){return[]}with(){return["tax_rate"]}scopes(){return["validOrder"]}}function dte(e){return Ate.init(e)}const ute=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),cte=e=>{const t=Object.keys(e[0]),s=[t.map(ute).join(",")];return e.forEach(n=>{const l=t.map(d=>{let u=n[d];return typeof u=="object"&&(u=JSON.stringify(u)),typeof u=="string"&&(u=`"${u.replace(/"/g,'""')}"`),u});s.push(l.join(","))}),s.join(`
`)},pte=(e,t="export.csv")=>new Promise((a,s)=>{try{if(!e||!e.length)throw new Error("No data to export");const n=cte(e),l=new Blob([n],{type:"text/csv"}),d=document.createElement("a"),u=()=>{window.removeEventListener("focus",u),a()};window.addEventListener("focus",u),d.href=URL.createObjectURL(l),d.download=t,d.click(),URL.revokeObjectURL(d.href),setTimeout(()=>{a()},200)}catch(n){s(n)}}),fte={class:"table-cell"},hte={class:"table-cell"},mte={class:"table-cell"},_te={class:"table-cell"},gte={class:"table-cell"},vte={class:"table-cell"},yte={class:"table-cell"},bte={class:"table-cell"},wte={class:"table-cell"},Cte={__name:"TaxesLoader",props:{nextPageCount:{type:Number,default:0},taxTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=Array.from({length:t.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=b("el-table-column"),d=b("el-skeleton-item"),u=b("el-skeleton"),c=b("el-table");return A(),U(c,{data:f(a),class:"w-full compact-table full-compact"},{default:r(()=>[o(l,{type:"selection",width:45}),e.taxTable.isColumnVisible("id")?(A(),U(l,{key:0,width:100,label:f(p)("ID")},{default:r(()=>[i("div",fte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),e.taxTable.isColumnVisible("order_id")?(A(),U(l,{key:1,label:f(p)("Order ID"),width:100},{default:r(()=>[i("div",hte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:f(p)("Tax Country"),width:120},{default:r(()=>[i("div",mte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"]),o(l,{label:f(p)("Tax Region"),width:120},{default:r(()=>[i("div",_te,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"]),e.taxTable.isColumnVisible("postcode")?(A(),U(l,{key:2,label:f(p)("Zip Code"),width:120},{default:r(()=>[i("div",gte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:f(p)("Tax Name"),width:120},{default:r(()=>[i("div",vte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"]),e.taxTable.isColumnVisible("rate")?(A(),U(l,{key:3,label:f(p)("Tax Rate"),width:120},{default:r(()=>[i("div",yte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(l,{label:f(p)("Sale Taxes"),width:120},{default:r(()=>[i("div",bte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"]),e.taxTable.isColumnVisible("filed_at")?(A(),U(l,{key:4,label:f(p)("Filed"),width:120},{default:r(()=>[i("div",wte,[o(u,{animated:""},{template:r(()=>[o(d,{varient:"p"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},Bte={class:"table-cell"},kte={class:"table-cell"},Fte={class:"table-cell"},xte={class:"table-cell"},Ute={class:"table-cell"},Ste={class:"table-cell"},Ete={class:"table-cell"},Qte={class:"table-cell"},Dte={class:"table-cell"},Ite={__name:"AllCouponsLoader",props:{nextPageCount:{type:Number,default:0},couponTable:{type:Object,default:()=>({})}},setup(e){const t=e,a=Array.from({length:t.nextPageCount},(s,n)=>n+1);return(s,n)=>{const l=b("el-skeleton-item"),d=b("el-skeleton"),u=b("el-table-column"),c=b("el-table");return A(),U(c,{data:f(a),class:"w-full compact-table responsive full-compact"},{default:r(()=>[o(u,{width:100,label:f(p)("ID")},{default:r(()=>[i("div",Bte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"]),e.couponTable.isColumnVisible("title")?(A(),U(u,{key:0,label:f(p)("Title"),width:250},{default:r(()=>[i("div",kte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[180px]"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:f(p)("Code"),width:200},{default:r(()=>[i("div",Fte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[130px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:f(p)("Amount"),width:120},{default:r(()=>[i("div",xte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:f(p)("Usage"),width:150},{default:r(()=>[i("div",Ute,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),e.couponTable.isColumnVisible("stackable")?(A(),U(u,{key:1,label:f(p)("Stackable"),width:120},{default:r(()=>[i("div",Ste,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[80px]"})]),_:1})])]),_:1},8,["label"])):x("",!0),o(u,{label:f(p)("Status"),width:120},{default:r(()=>[i("div",Ete,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),o(u,{label:f(p)("Expiry Date"),width:120},{default:r(()=>[i("div",Qte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),e.couponTable.isColumnVisible("actions")?(A(),U(u,{key:2,label:f(p)("Actions"),width:100,align:"right"},{default:r(()=>[i("div",Dte,[o(d,{animated:""},{template:r(()=>[o(l,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])}}},$te={class:"fct-taxes-page fct-layout-width"},Tte={key:1},Mte={class:"fct-tax-filing-wrap"},Vte={class:"fct-tax-filing-summary"},Lte={class:"summary-item"},Ote={class:"summary-label"},Hte={class:"summary-value"},Rte={class:"summary-item"},Pte={class:"summary-label"},Kte={class:"summary-value"},Nte={class:"fct-tax-filing max-h-[400px] overflow-y-auto"},Gte={class:"dialog-footer"},zte={class:"fct-tax-filing-success-wrap"},jte={class:"fct-tax-filling-success-icon"},Yte={class:"dialog-footer"},qte={__name:"Taxes",setup(e){Je().ctx;const t=dte(),a=T(!1),s=T(!1),n=T(!1),l=T([]),d=q(()=>t.getTableData().map(E=>{var k,Q,I,D,M;return{id:E.id,order_id:E.order_id,country:(k=E.tax_rate)==null?void 0:k.country,state:(Q=E.tax_rate)==null?void 0:Q.state,postcode:(I=E.tax_rate)==null?void 0:I.postcode,name:(D=E.tax_rate)==null?void 0:D.name,rate:(M=E.tax_rate)==null?void 0:M.rate,total_tax:parseFloat(E.total_tax/100).toFixed(2),filed_at:E.filed_at?"Yes":"No"}})),u=()=>{a.value=!0,s.value=!1},c=()=>{a.value=!1,s.value=!0},h=async()=>{try{await pte(C.value),c()}catch(E){console.error("Export failed:",E)}},v=()=>{s.value=!1},y=()=>{const E=C.value.map(k=>k.id);se.post(t.getFetchUrl(),{ids:E}).then(k=>{Y.success(k.message),t.fetch()}).catch(k=>{Y.error(k)}).finally(()=>{v()})},g=E=>{l.value=E,n.value=E.length>0},B=E=>{C.value=E},w=T(null),C=T([]),F=q(()=>{const E=C.value.reduce((Q,I)=>Q+I.total_tax,0),k=[...new Set(C.value.map(Q=>Q.order_id))];return{totalTax:E,totalOrders:k.length,items:C.value}}),S=()=>{de(()=>{C.value=[...l.value],l.value.forEach(E=>{w.value.toggleRowSelection(E,!0)})})};return(E,k)=>{const Q=b("el-button"),I=b("el-tooltip"),D=b("el-table-column"),M=b("router-link"),$=b("el-table"),V=b("el-dialog");return A(),_("div",$te,[o(Ua,{title:f(p)("Taxes")},{action:r(()=>[n.value?(A(),U(Q,{key:1,type:"primary",onClick:u,disabled:!n.value},{default:r(()=>[O(m(f(p)("Tax Filing")),1)]),_:1},8,["disabled"])):(A(),U(I,{key:0,"popper-class":"fct-tooltip",effect:"dark",content:f(p)("Please select the taxes you want to file"),placement:"top-start"},{default:r(()=>[o(Q,{type:"primary",disabled:!n.value},{default:r(()=>[O(m(f(p)("Tax Filing")),1)]),_:1},8,["disabled"])]),_:1},8,["content"]))]),_:1},8,["title"]),o(bn,{table:f(t),"has-mobile-slot":!1},{default:r(()=>[f(t).isLoading()?(A(),U(Cte,{key:0,taxTable:f(t),"next-page-count":f(t).nextPageCount},null,8,["taxTable","next-page-count"])):(A(),_("div",Tte,[o($,{class:"w-full",data:d.value,onSelectionChange:g},{empty:r(()=>[o(Te,{icon:"Empty/ListView",text:f(p)("We could't find any taxes matching your filter.")},null,8,["text"])]),default:r(()=>[o(D,{type:"selection",width:45}),f(t).isColumnVisible("id")?(A(),U(D,{key:0,label:f(p)("ID"),width:100},{default:r(L=>[i("span",null,"#"+m(f(p)(L.row.id)),1)]),_:1},8,["label"])):x("",!0),f(t).isColumnVisible("order_id")?(A(),U(D,{key:1,label:f(p)("Order ID"),width:100},{default:r(L=>[o(M,{class:"link",to:{name:"view_order",params:{order_id:L.row.order_id}}},{default:r(()=>[O(" #"+m(L.row.order_id),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(D,{label:f(p)("Tax Country"),width:120},{default:r(L=>[i("span",null,m(L.row.country),1)]),_:1},8,["label"]),o(D,{label:f(p)("Tax Region"),width:120},{default:r(L=>[i("span",null,m(L.row.state),1)]),_:1},8,["label"]),f(t).isColumnVisible("postcode")?(A(),U(D,{key:2,label:f(p)("Zip Code"),width:120},{default:r(L=>[i("span",null,m(L.row.postcode),1)]),_:1},8,["label"])):x("",!0),o(D,{label:f(p)("Tax Name"),width:120},{default:r(L=>[i("span",null,m(L.row.name),1)]),_:1},8,["label"]),f(t).isColumnVisible("rate")?(A(),U(D,{key:3,label:f(p)("Tax Rate"),width:120},{default:r(L=>[i("span",null,m(L.row.rate),1)]),_:1},8,["label"])):x("",!0),o(D,{label:f(p)("Sale Taxes"),width:120},{default:r(L=>[i("span",null,m(L.row.total_tax),1)]),_:1},8,["label"]),f(t).isColumnVisible("filed_at")?(A(),U(D,{key:4,label:f(p)("Filed"),width:120},{default:r(L=>[i("span",null,m(L.row.filed_at),1)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"]),o(V,{modelValue:a.value,"onUpdate:modelValue":k[1]||(k[1]=L=>a.value=L),title:f(p)("Tax Filing"),onOpen:S,class:"fct-tax-filling-modal"},{footer:r(()=>[i("div",Gte,[o(Q,{onClick:k[0]||(k[0]=()=>{a.value=!1})},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(Q,{type:"primary",onClick:h},{default:r(()=>[o(z,{name:"Download",style:{width:"16px",height:"16px"}}),O(" "+m(f(p)("Download & Continue")),1)]),_:1})])]),default:r(()=>[i("div",Mte,[i("div",Vte,[i("div",Lte,[i("span",Ote,m(f(p)("Taxable Amount")),1),i("span",Hte,m(F.value.totalTax),1)]),i("div",Rte,[i("span",Pte,m(f(p)("Total Orders")),1),i("span",Kte,m(f(p)(F.value.totalOrders)),1)])]),i("div",Nte,[o($,{ref_key:"selectedTaxesTableRef",ref:w,data:l.value,onSelectionChange:B},{empty:r(()=>[o(Te,{icon:"Empty/ListView",text:f(p)("We could't find any taxes matching your filter.")},null,8,["text"])]),default:r(()=>[o(D,{type:"selection",width:45}),o(D,{label:f(p)("ID"),width:100},{default:r(L=>[i("span",null,m(L.row.id),1)]),_:1},8,["label"]),o(D,{label:f(p)("Order ID"),width:100},{default:r(L=>[i("span",null,m(L.row.order_id),1)]),_:1},8,["label"]),o(D,{width:120,label:f(p)("Tax Country")},{default:r(L=>[i("span",null,m(L.row.country),1)]),_:1},8,["label"]),o(D,{width:120,label:f(p)("Tax Region")},{default:r(L=>[i("span",null,m(L.row.state),1)]),_:1},8,["label"]),o(D,{label:f(p)("Zip Code"),width:120},{default:r(L=>[i("span",null,m(L.row.postcode),1)]),_:1},8,["label"]),o(D,{width:120,label:f(p)("Tax Name")},{default:r(L=>[i("span",null,m(L.row.name),1)]),_:1},8,["label"]),o(D,{label:f(p)("Tax Rate"),width:120},{default:r(L=>[i("span",null,m(L.row.rate),1)]),_:1},8,["label"]),o(D,{width:150,label:f(p)("Sale Taxes")},{default:r(L=>[i("span",null,m(L.row.total_tax),1)]),_:1},8,["label"])]),_:1},8,["data"])])])]),_:1},8,["modelValue","title"]),o(V,{modelValue:s.value,"onUpdate:modelValue":k[2]||(k[2]=L=>s.value=L),class:"fct-tax-filling-success-modal","close-on-click-modal":!1},{footer:r(()=>[i("div",Yte,[o(Q,{onClick:v},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(Q,{type:"primary",onClick:y},{default:r(()=>[O(m(f(p)("Mark as Filed")),1)]),_:1})])]),default:r(()=>[i("div",zte,[i("div",jte,[o(z,{name:"CheckCircleFill"})]),i("div",null,[i("h4",null,m(f(p)("Don't Forget to Save Your Tax File")),1),i("p",null,m(f(p)("You're about to mark this tax report as filed.")),1),i("p",null,[O(m(f(p)("Make sure you've downloaded and saved the CSV file for your records before proceeding."))+" ",1),i("a",{onClick:je(h,["prevent"]),class:"cursor-pointer"},m(f(p)("Download Again")),1)])])])]),_:1},8,["modelValue"])])}}},Wte={class:"country-info"},Xte=["src","alt"],Jte={key:0,class:"fct-selected-country-tax-classes"},Zte={class:"selected-country-tax-heading"},eae={class:"space-y-3"},tae={class:"selected-tax-class"},aae={class:"tax-type"},sae={class:"tax-rate"},nae={key:0,class:"tax-state"},oae={key:0,class:"selected-tax-input-wrap"},lae={key:1,class:"selected-tax-input-wrap"},rae={key:1,class:"mt-4 text-sm text-system-mid text-center py-4 dark:text-gray-300"},iae={class:"dialog-footer"},Vp={__name:"OssOverrideModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},countries:{type:Array,required:!0},selectedCountryTaxClasses:{type:Array,required:!0},countryCode:{type:String,default:""},hasValidOverrides:{type:Boolean,default:!1},mode:{type:String,default:"tax"}},emits:["update:modelValue","change-country","save"],setup(e,{emit:t}){const a=e,s=t,n=q({get:()=>a.modelValue,set:d=>s("update:modelValue",d)}),l=q({get:()=>a.countryCode,set:d=>s("change-country",d)});return(d,u)=>{const c=b("el-option"),h=b("el-select"),v=b("el-form-item"),y=b("el-input"),g=b("el-form"),B=b("el-button"),w=b("el-dialog");return A(),U(w,{modelValue:n.value,"onUpdate:modelValue":u[3]||(u[3]=C=>n.value=C),title:e.title,class:"fct-oss-override-modal"},{footer:r(()=>[i("div",iae,[o(B,{onClick:u[1]||(u[1]=C=>n.value=!1)},{default:r(()=>[O(m(f(p)("Cancel")),1)]),_:1}),o(B,{type:"primary",onClick:u[2]||(u[2]=C=>d.$emit("save")),disabled:!e.hasValidOverrides},{default:r(()=>[O(m(f(p)("Save Overrides")),1)]),_:1},8,["disabled"])])]),default:r(()=>[o(g,{"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(v,{label:f(p)("Select Country"),required:""},{default:r(()=>[o(h,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=C=>l.value=C),placeholder:"Choose a country",filterable:"",style:{width:"100%"},"popper-class":"fct-oss-override-country-select"},{default:r(()=>[(A(!0),_(H,null,X(e.countries,C=>(A(),U(c,{key:C.country_code,label:C.country_name,value:C.country_code},{default:r(()=>[i("div",Wte,[i("img",{src:`https://flagcdn.com/w40/${C.country_code.toLowerCase()}.png`,alt:C.country_code},null,8,Xte),i("span",null,m(C.country_name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.selectedCountryTaxClasses&&e.selectedCountryTaxClasses.length>0?(A(),_("div",Jte,[i("h4",Zte,m(f(p)("Tax Classes")),1),i("div",eae,[(A(!0),_(H,null,X(e.selectedCountryTaxClasses,(C,F)=>(A(),_("div",{key:F,class:"fct-selected-country-tax-class"},[i("div",tae,[i("div",aae,m(C.type),1),i("div",sae,m(f(p)("Default"))+": "+m(C.rate)+"% ",1),C.state?(A(),_("div",nae,m(f(p)("State"))+": "+m(C.state),1)):x("",!0)]),e.mode==="tax"?(A(),_("div",oae,[o(y,{modelValue:C.override_rate,"onUpdate:modelValue":S=>C.override_rate=S,placeholder:f(p)("Override rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:r(()=>u[4]||(u[4]=[O("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):e.mode==="shipping"?(A(),_("div",lae,[o(y,{modelValue:C.for_shipping,"onUpdate:modelValue":S=>C.for_shipping=S,placeholder:f(p)("Shipping rate"),class:"el-input--x-small",type:"number",min:0,max:100,step:.1},{append:r(()=>u[5]||(u[5]=[O("%",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])):x("",!0)]))),128))])])):e.countryCode?(A(),_("div",rae,m(f(p)("No tax classes available for this country")),1)):x("",!0)]),_:1})]),_:1},8,["modelValue","title"])}}},Aae={name:"CrossBorderForm",props:["crossBorderForm","countries"]},dae={class:"form-note"};function uae(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=b("el-form-item"),h=b("el-col"),v=b("el-input"),y=b("el-row"),g=b("el-form");return A(),U(g,{"label-position":"top"},{default:r(()=>[o(y,{gutter:"20"},{default:r(()=>[o(h,{span:12},{default:r(()=>[o(c,{label:e.$t("Country of OSS registration *")},{default:r(()=>[o(u,{modelValue:a.crossBorderForm.oss_country,"onUpdate:modelValue":t[0]||(t[0]=B=>a.crossBorderForm.oss_country=B),placeholder:e.$t("Select country"),filterable:"",clearable:""},{default:r(()=>[(A(!0),_(H,null,X(a.countries,B=>(A(),U(d,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(h,{span:12},{default:r(()=>[o(c,{label:e.$t("VAT number")},{default:r(()=>[o(v,{modelValue:a.crossBorderForm.oss_vat,"onUpdate:modelValue":t[1]||(t[1]=B=>a.crossBorderForm.oss_vat=B),placeholder:"e.g 123456"},null,8,["modelValue"]),i("div",dae,[i("p",null,m(e.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const Lp=be(Aae,[["render",uae]]),cae={name:"CrossBorderForm",props:["crossBorderForm","countries"]},pae={class:"form-note"};function fae(e,t,a,s,n,l){const d=b("el-option"),u=b("el-select"),c=b("el-form-item"),h=b("el-col"),v=b("el-input"),y=b("el-row"),g=b("el-form");return A(),U(g,{"label-position":"top"},{default:r(()=>[o(y,{gutter:"20"},{default:r(()=>[o(h,{span:12},{default:r(()=>[o(c,{label:e.$t("Country of registration *")},{default:r(()=>[o(u,{modelValue:a.crossBorderForm.home_country,"onUpdate:modelValue":t[0]||(t[0]=B=>a.crossBorderForm.home_country=B),placeholder:"Select country",filterable:"",clearable:""},{default:r(()=>[(A(!0),_(H,null,X(a.countries,B=>(A(),U(d,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(h,{span:12},{default:r(()=>[o(c,{label:e.$t("VAT number")},{default:r(()=>[o(v,{modelValue:a.crossBorderForm.home_vat,"onUpdate:modelValue":t[1]||(t[1]=B=>a.crossBorderForm.home_vat=B),placeholder:"e.g 123456"},null,8,["modelValue"]),i("div",pae,[i("p",null,m(e.$t("Shown on VAT invoice")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})}const Op=be(cae,[["render",fae]]),hae={name:"CollectionSection",props:{crossBorderForm:{type:Object,default:{}},countries:{type:Array,default:[]},modelValue:{type:String,default:""}},components:{OssRegistrationForm:Lp,HomeCountryForm:Op},emits:["update:modelValue","change"],data(){return{selectedMethod:this.modelValue||""}},watch:{modelValue(e){this.selectedMethod=e}},methods:{handleCollectionMethod(e){this.selectedMethod=e,this.$emit("update:modelValue",e),this.$emit("change",e)}}},mae={class:"fct-tax-collection-section"},_ae={class:"fct-tax-collection-sec-head"},gae={class:"fct-tax-collection-sec-title"},vae={class:"fct-tax-collection-method"},yae={class:"method-content"},bae={class:"method-text"},wae={key:0,class:"fct-tax-method-oss mt-4"},Cae={class:"fct-tax-collection-method"},Bae={class:"method-content"},kae={class:"method-text"},Fae={key:0,class:"fct-tax-method-home mt-4"},xae={class:"fct-tax-collection-method"},Uae={class:"method-content"},Sae={class:"method-text"};function Eae(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("el-tooltip"),c=b("el-radio"),h=b("OssRegistrationForm"),v=b("HomeCountryForm"),y=b("el-radio-group");return A(),_("div",mae,[i("div",_ae,[i("h4",gae,m(e.$t("Choose how you collect VAT in the EU")),1),o(u,{content:e.$t("Select a collection method, then continue to configure it"),placement:"top"},{default:r(()=>[o(d,{name:"InformationFill",class:"w-4.5 opacity-50"})]),_:1},8,["content"])]),o(y,{modelValue:n.selectedMethod,"onUpdate:modelValue":t[0]||(t[0]=g=>n.selectedMethod=g),class:"fct-tax-collection-methods",onChange:l.handleCollectionMethod},{default:r(()=>[i("div",vae,[o(c,{value:"oss"},{default:r(()=>[O(m(e.$t("Collect using a One Stop Shop (OSS) registration")),1)]),_:1}),i("div",yae,[i("p",bae,m(e.$t("Select this option if you have a single EU VAT number for all EU countries.")),1),n.selectedMethod==="oss"?(A(),_("div",wae,[o(h,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):x("",!0)])]),i("div",Cae,[o(c,{value:"home"},{default:r(()=>[O(m(e.$t("Collect using your home country registration")),1)]),_:1}),i("div",Bae,[i("p",kae,m(e.$t("Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.")),1),n.selectedMethod==="home"?(A(),_("div",Fae,[o(v,{crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])])):x("",!0)])]),i("div",xae,[o(c,{value:"specific"},{default:r(()=>[O(m(e.$t("Collect specific country rate")),1)]),_:1}),i("div",Uae,[i("p",Sae,m(e.$t("Select this option if you want to collect VAT for specific EU countries.")),1)])])]),_:1},8,["modelValue","onChange"])])}const Qae=be(hae,[["render",Eae]]),Dae={name:"crossBorderSummary",props:["summary","label","crossBorderForm","countries","selectedMethod"],components:{DynamicIcon:z,IconButton:we,OssRegistrationForm:Lp,HomeCountryForm:Op},data(){return{showForm:!1}},methods:{onClick(){this.showForm=!this.showForm,this.$emit("toggle-form",this.showForm)},save(){this.showForm=!1,this.$emit("toggle-form",this.showForm),this.$emit("save")}}},Iae={class:"fct-tax-selection-sum-box"},$ae={class:"summary-box-content"},Tae={class:"summary-box-label"},Mae={class:"summary-box-meta"},Vae={key:0,class:"summary-box-vat"},Lae={key:1,class:"mt-5"},Oae={key:0,class:"flex items-center justify-end"};function Hae(e,t,a,s,n,l){var y,g,B,w;const d=b("DynamicIcon"),u=b("IconButton"),c=b("OssRegistrationForm"),h=b("HomeCountryForm"),v=b("el-button");return A(),_(H,null,[i("div",Iae,[t[0]||(t[0]=i("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag"},null,-1)),i("div",$ae,[i("div",Tae,m(a.label),1),i("div",Mae,[i("span",null,m((y=a.summary)==null?void 0:y.methodLabel)+": "+m((g=a.summary)==null?void 0:g.country),1),(B=a.summary)!=null&&B.vat?(A(),_("span",Vae," - "+m(e.$t("VAT"))+" "+m((w=a.summary)==null?void 0:w.vat),1)):x("",!0)]),n.showForm?x("",!0):(A(),U(u,{key:0,class:"edit-method-btn",onClick:l.onClick,size:"small",border:"none",tag:"button"},{default:r(()=>[o(d,{name:"Edit"})]),_:1},8,["onClick"])),n.showForm?(A(),_("div",Lae,[a.selectedMethod==="oss"?(A(),U(c,{key:0,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):x("",!0),a.selectedMethod==="home"?(A(),U(h,{key:1,crossBorderForm:a.crossBorderForm,countries:a.countries},null,8,["crossBorderForm","countries"])):x("",!0)])):x("",!0)])]),n.showForm?(A(),_("div",Oae,[o(v,{onClick:l.onClick},{default:r(()=>[O(m(e.$t("Cancel")),1)]),_:1},8,["onClick"]),o(v,{type:"primary",onClick:l.save},{default:r(()=>[O(m(e.$t("Save")),1)]),_:1},8,["onClick"])])):x("",!0)],64)}const Rae=be(Dae,[["render",Hae]]),Pae={name:"TaxOverride",props:["taxOverrides"],components:{IconButton:we,DynamicIcon:z},emits:["add","onEdit","onDelete"],methods:{onAdd(){this.$emit("onAdd")},onEdit(e){this.$emit("onEdit",e)},onDelete(e){this.$emit("onDelete",e)}}},Kae={class:"fct-tax-override-wrap"},Nae={class:"fct-tax-rate-box-head"},Gae={class:"flex-shrink-0"},zae={key:0,class:"fct-tax-overrides"},jae={class:"country-info"},Yae=["src","alt"],qae={class:"override-actions"},Wae={class:"total-rates"},Xae={class:"fct-btn-group sm"},Jae={key:1,class:"text-sm text-gray-500 text-center py-4"};function Zae(e,t,a,s,n,l){const d=b("el-button"),u=b("DynamicIcon"),c=b("IconButton");return A(),_("div",Kae,[i("div",Nae,[i("h4",null,m(e.$t("Tax Overrides")),1),i("div",Gae,[o(d,{type:"primary",size:"small",onClick:l.onAdd},{default:r(()=>[O(m(e.$t("Add Custom Rate")),1)]),_:1},8,["onClick"])])]),a.taxOverrides.length>0?(A(),_("div",zae,[(A(!0),_(H,null,X(a.taxOverrides,(h,v)=>(A(),_("div",{class:"fct-tax-override-item",key:v},[i("div",jae,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${h.country_code.toLowerCase()}.png`,alt:h.country_code},null,8,Yae),i("span",null,m(h.country_name),1)]),i("div",qae,[i("span",Wae,m(h.total_rates)+" "+m(e.$t("Rates")),1),i("div",Xae,[o(c,{size:"small",border:"none",tag:"button",onClick:y=>l.onEdit(h)},{default:r(()=>[o(u,{name:"Edit"})]),_:2},1032,["onClick"]),o(c,{size:"small",border:"none",tag:"button",onClick:y=>l.onDelete(h)},{default:r(()=>[o(u,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128))])):(A(),_("div",Jae,m(e.$t("No Custom VAT rates configured")),1))])}const ese=be(Pae,[["render",Zae]]),tse={name:"OssCountryRates",components:{DynamicIcon:z,Loading:il},props:{ossCountryRates:{type:Array,default:()=>[]},ossCountryRatesLoading:{type:Boolean,default:!1}},data(){return{activeCollapse:["1"],activeCountryCollapse:[]}},methods:{handleCollapseChange(e){e.includes("1")&&this.ossCountryRates.length===0&&this.$emit("fetch")}}},ase={class:"fct-tax-rate-box"},sse={class:"fct-tax-rate-box-head"},nse={class:"inline-flex items-center gap-2"},ose={class:"fct-tax-collapse-inner"},lse={key:0,class:"text-center py-4"},rse={class:"collapse-header"},ise={class:"country-info"},Ase=["src","alt"],dse={class:"font-medium"},use={class:"total-rates"},cse={class:"fct-country-rates"},pse={class:"flex items-center gap-2"},fse={class:"rate-type"},hse={key:0,class:"tax-class"},mse={class:"tax-rate"},_se={key:1,class:"text-sm text-gray-500 text-center py-2"},gse={key:2,class:"text-gray-500 text-center py-4"};function vse(e,t,a,s,n,l){const d=b("DynamicIcon"),u=b("Loading"),c=b("el-icon"),h=b("el-collapse-item"),v=b("el-collapse");return A(),_("div",ase,[i("div",sse,[i("h4",null,m(e.$t("Country Rates")),1)]),o(v,{class:"fct-tax-collapse",modelValue:n.activeCollapse,"onUpdate:modelValue":t[1]||(t[1]=y=>n.activeCollapse=y),onChange:l.handleCollapseChange},{default:r(()=>[o(h,{name:"1"},{title:r(({isActive:y})=>[i("div",nse,[o(d,{name:"CaretRight",class:oe(["w-3",[{"rotate-90":y}]])},null,8,["class"]),O(" "+m(e.$t("Collecting in 27 regions")),1)])]),default:r(()=>[i("div",ose,[a.ossCountryRatesLoading?(A(),_("div",lse,[o(c,{class:"is-loading"},{default:r(()=>[o(u)]),_:1}),t[2]||(t[2]=i("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):a.ossCountryRates.length>0?(A(),U(v,{key:1,class:"fct-tax-active-country-collapse",modelValue:n.activeCountryCollapse,"onUpdate:modelValue":t[0]||(t[0]=y=>n.activeCountryCollapse=y),accordion:""},{default:r(()=>[(A(!0),_(H,null,X(a.ossCountryRates,(y,g)=>(A(),U(h,{key:g,name:`country-${g}`},{title:r(({isActive:B})=>[i("div",rse,[i("div",ise,[o(d,{name:"CaretRight",class:oe(["w-3",[{"rotate-90":B}]])},null,8,["class"]),i("img",{class:"w-5",src:`https://flagcdn.com/w40/${y.country_code.toLowerCase()}.png`,alt:y.country_code},null,8,Ase),i("span",dse,m(y.country_name),1)]),i("div",use,m(e.$t("Total Rates"))+": "+m(y.total_rates),1)])]),default:r(()=>[i("div",cse,[y.rates&&y.rates.length>0?(A(!0),_(H,{key:0},X(y.rates,(B,w)=>(A(),_("div",{key:w,class:"fct-country-rate-item"},[i("div",pse,[i("span",fse,m(B.type),1),B.tax_class?(A(),_("span",hse," ("+m(B.tax_class)+") ",1)):x("",!0)]),i("div",mse,m(B.rate)+"% ",1)]))),128)):(A(),_("div",_se," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):(A(),_("div",gse," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])}const yse=be(tse,[["render",vse]]),bse={name:"SpecificCountrySection",props:["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"],components:{IconButton:we,DynamicIcon:z,LabelHint:Ge,TaxConfigurationCountryModal:sr},data(){return{showConfigure:!1}},emits:["refresh","fetch"],methods:{handleHideConfigure(){this.showConfigure=!1},handleShowConfigure(){this.showConfigure=!0},refreshSettings(){this.$emit("refresh")},manageCountryTaxRates(e){this.$router.push({name:"eu_country_tax_rates",params:{country:e,group:"EU"}})},deleteCountryTaxRate(e){Kt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+e).then(t=>{this.handleSuccess(t.message),this.$emit("fetch")}).catch(t=>{var a;this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})}},computed:{configuredSpecificCountriesCount(){const e=Object.keys(this.countryWiseVatSettings||{});return e.length?e.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(t=>(t.total_rates||0)>0).length:0}}},wse={class:"fct-specific-country-wrapper"},Cse={key:0,class:"fct-tax-selection-sum-box"},Bse={class:"summary-box-content"},kse={class:"summary-box-label text-system-dark text-base dark:text-gray-50"},Fse={class:"summary-box-text mt-2.5 text-[13px] text-system-mid dark:text-gray-300"},xse={key:1,class:"fct-specific-country-list-wrap"},Use={class:"flex items-center mb-3"},Sse={key:0,class:"fct-specific-country-box"},Ese={key:0,class:"summary-box-content"},Qse={class:"summary-box-label"},Dse={class:"summary-box-meta mt-5"},Ise={class:"fct-specific-country-list"},$se={class:"value"},Tse={class:"label"},Mse={class:"value"},Vse={class:"label"},Lse={key:1,class:"mt-3 text-xs text-system-mid dark:text-gray-300"},Ose={key:1,class:"fct-eu-union-countries-wrap mt-7.5"},Hse={class:"fct-tax-rate-box-head"},Rse={class:"fct-eu-union-countries"},Pse=["onClick"],Kse={class:"country-info"},Nse=["src"],Gse={class:"flex items-center gap-2"};function zse(e,t,a,s,n,l){var g,B,w;const d=b("DynamicIcon"),u=b("IconButton"),c=b("el-button"),h=b("LabelHint"),v=b("TaxConfigurationCountryModal"),y=b("el-tag");return A(),_("div",wse,[n.showConfigure?(A(),_("div",Cse,[i("div",Bse,[i("div",kse,m(l.configuredSpecificCountriesCount)+" country(ies) configured ",1),i("div",Fse,m(e.$t("Specific EU country rates selected.")),1),o(u,{class:"edit-method-btn",onClick:l.handleHideConfigure,size:"small",border:"none",tag:"button",title:"Edit"},{default:r(()=>[o(d,{name:"Edit"})]),_:1},8,["onClick"])])])):x("",!0),n.showConfigure?x("",!0):(A(),_("div",xse,[i("div",Use,[o(c,{size:"small",soft:"",type:"info",onClick:l.handleShowConfigure},{default:r(()=>[o(d,{name:"ChevronLeft",class:"w-3"}),O(" "+m(e.$t("Back")),1)]),_:1},8,["onClick"])]),a.euRatesLoading?x("",!0):(A(),_("div",Sse,[a.euRatesLoading?(A(),_("div",Lse,m(e.$t("Loading EU rates")),1)):(A(),_("div",Ese,[i("div",Qse,[o(h,{title:e.$t("EU rates available")},null,8,["title"])]),i("div",Dse,[i("ul",Ise,[i("li",null,[i("span",$se,m((g=a.euRatesSummary)==null?void 0:g.totalCountries),1),i("span",Tse,m(e.$t("Countries")),1)]),i("li",null,[i("span",Mse,m((B=a.euRatesSummary)==null?void 0:B.totalRates),1),i("span",Vse,m(e.$t("total rates")),1)])]),o(v,{onlyEU:!0,onRefresh:l.refreshSettings},null,8,["onRefresh"])])]))])),(w=a.euCountries)!=null&&w.length?(A(),_("div",Ose,[i("div",Hse,[i("h4",null,m(e.$t("European Union Countries")),1)]),i("div",Rse,[(A(!0),_(H,null,X(a.euCountries,(C,F)=>(A(),_("div",{key:C.country_code+"-"+F,class:"fct-eu-union-country",onClick:S=>l.manageCountryTaxRates(C.country_code)},[i("div",Kse,[i("img",{src:"https://flagcdn.com/w40/"+C.country_code.toLowerCase()+".png",alt:"flag"},null,8,Nse),i("span",null,m(C.country_name),1)]),i("div",Gse,[o(y,null,{default:r(()=>[O(m(C.total_rates)+" "+m(e.$t("Rates")),1)]),_:2},1024),o(u,{border:"none",size:"small",onClick:je(S=>l.deleteCountryTaxRate(C.country_code),["stop"]),tag:"button"},{default:r(()=>[o(d,{name:"Delete"})]),_:2},1032,["onClick"]),o(d,{name:"ChevronRight",class:"w-1.5"})])],8,Pse))),128))])])):x("",!0)]))])}const jse=be(bse,[["render",zse]]),Yse={name:"EUVatSettings",components:{Card:re,CardBody:le,CardHeader:Ae,TaxConfigurationCountryModal:sr,DynamicIcon:z,OssOverrideModal:Vp,IconButton:we,CollectionMethodSection:Qae,CrossBorderSummary:Rae,TaxOverride:ese,OssCountryRates:yse,LabelHint:Ge,SpecificCountrySection:jse,SettingsHeader:ea},data(){return{showForm:!1,showSelectionEditor:!1,upcomingFeature:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax",collectCrossBorderLoading:!1}},methods:{translate:p,handleToggleForm(e){this.showForm=e},fetchEuTaxRates(){this.euRatesLoading=!0,this.$get("tax/configuration/settings/eu-vat/rates").then(e=>{const a=Object.values((e==null?void 0:e.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((l,d)=>l+(d.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(e=>e.rates&&e.rates.some(t=>t.for_shipping>0)),this.taxOverrides=this.euCountries},changeRegistration(){Kt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(e=>{this.handleSuccess(e.message),this.getTaxSettings(),this.showSelectionEditor=!1}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(e=>{var t,a;this.ossCountryRates=((a=(t=e==null?void 0:e.tax_rates)==null?void 0:t.EU)==null?void 0:a.countries)??[]}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(e){e.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},getTaxSettings(){this.$get("tax/configuration/settings").then(e=>{var a;this.settings=e.settings;const t=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(t==null?void 0:t.method)||"",this.crossBorderForm.oss_country=(t==null?void 0:t.oss_country)||"",this.crossBorderForm.oss_vat=(t==null?void 0:t.oss_vat)||"",this.crossBorderForm.home_country=(t==null?void 0:t.home_country)||"",this.crossBorderForm.home_vat=(t==null?void 0:t.home_vat)||"",this.countryWiseVatSettings=(t==null?void 0:t.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},handleCollectionMethod(){this.crossBorderForm.method=this.selectedMethod},handleCollectionMethodOld(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(e=>{this.getTaxSettings(),this.fetchEuTaxRates(),this.handleSuccess(e.message),this.showSelectionEditor=!0}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showSelectionEditor=!1;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showSelectionEditor=!1)},handleCollectCrossBorder(){if(!this.crossBorderForm.method){this.handleError(p("Select a cross-border registration type"));return}if(this.crossBorderForm.method==="oss"){if(!this.crossBorderForm.oss_vat||!this.crossBorderForm.oss_country){this.handleError(p("Enter your OSS VAT number"));return}}else if(this.crossBorderForm.method==="home"&&(!this.crossBorderForm.home_vat||!this.crossBorderForm.home_country)){this.handleError(p("Enter your home country VAT number"));return}this.collectCrossBorderLoading=!0,this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(e=>{this.getTaxSettings(),this.showSelectionEditor=!0,this.handleSuccess(e.message)}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)}).finally(()=>{this.collectCrossBorderLoading=!1})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(e=>{this.getTaxSettings(),this.handleSuccess(e.message),this.showSelectionEditor=!0}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(e){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:e.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],e.country_code&&this.onCountryChange(e.country_code)},editOssShippingTaxOverride(e){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:e.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],e.country_code&&this.onShippingCountryChange(e.country_code)},onCountryChange(e){if(!e){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(e);else{this.ossTaxOverrideForm.country_code=e;const t=this.ossCountryRates.find(s=>s.country_code===e);if(!t||!t.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===e);this.selectedCountryTaxClasses=t.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(d=>d.name===s.type);l&&(n=l.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(e){this.ossTaxOverrideForm.country_code=e;const t=this.ossCountryRates.find(s=>s.country_code===e);if(!t||!t.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===e);this.selectedCountryTaxClasses=t.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(d=>d.name===s.type);l&&(n=l.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(e){Kt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/override",{country:e.country_code,state:e.state}).then(t=>{this.handleSuccess(t.message),this.fetchEuTaxRates()}).catch(t=>{var a;this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(e){Kt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/configuration/settings/eu-vat/oss/shipping-override",{country:e.country_code,state:e.state}).then(t=>{this.handleSuccess(t.message),this.fetchEuTaxRates()}).catch(t=>{var a;console.error("Delete error:",t),this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const e=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(e.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:e}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const e=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(e.length===0){this.handleError("Please enable at least one tax class override");return}this.$post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:e}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},async manageCountryTaxRates(e){var t,a;try{const s=await this.$get("tax/rates/country/rates/"+e);if(((t=s==null?void 0:s.tax_rates)==null?void 0:t.length)>0)this.$router.push({name:"eu_country_tax_rates",params:{country:e,group:"EU"}});else{const n=await this.$post("tax/configuration/countries",{countries:[e]});n!=null&&n.message&&this.$router.push({name:"eu_country_tax_rates",params:{country:e,group:"EU"}})}}catch(s){console.error("Error fetching tax rates:",s),this.handleError((a=s==null?void 0:s.data)==null?void 0:a.message)}}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(e,t,a)=>{this.crossBorderForm.method==="oss"&&!t?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(e,t,a)=>{this.crossBorderForm.method==="home"&&!t?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},computed:{hasExistingSelection(){var a,s,n,l,d,u;const e=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((l=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:l.method)==="home"||((u=(d=this.settings)==null?void 0:d.eu_vat_settings)==null?void 0:u.method)==="specific",t=Object.keys(this.countryWiseVatSettings||{}).length>0;return e||t},crossBorderSummary(){var d;const e=((d=this.settings)==null?void 0:d.eu_vat_settings)||{},t=e.method;if(!t)return null;const a=t==="oss"?e.oss_country:e.home_country,s=t==="oss"?e.oss_vat:e.home_vat,n=t==="oss"?"OSS":"Home Registration";let l=a;if(a&&Array.isArray(this.countries)){const u=this.countries.find(c=>c.value===a);u&&(l=u.label)}return{methodLabel:n,country:l||"",vat:s||""}},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const e=this.euCountries.find(t=>t.country_code===this.ossTaxOverrideForm.country_code);return e?e.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(e=>e.override_rate!=="")}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},qse={class:"setting-wrap"},Wse={key:1,class:"form-section-save-action"},Xse={class:"setting-wrap-inner"},Jse={class:"fct-tax-collection-page"},Zse={class:"fct-tax-collection-wrap"},ene={key:1,class:"fct-tax-selection-summary"},tne={key:0,class:"form-section-save-action"};function ane(e,t,a,s,n,l){const d=b("el-button"),u=b("SettingsHeader"),c=b("CollectionMethodSection"),h=b("CrossBorderSummary"),v=b("TaxOverride"),y=b("OssCountryRates"),g=b("SpecificCountrySection"),B=b("CardBody"),w=b("Card"),C=b("OssOverrideModal");return A(),_("div",qse,[o(u,{heading:l.translate("VAT collection"),"show-save-button":!1},{action:r(()=>[l.hasExistingSelection||n.showSelectionEditor?(A(),U(d,{key:0,type:"primary",onClick:l.changeRegistration,size:"small"},{default:r(()=>[O(m(l.translate("Change Registration")),1)]),_:1},8,["onClick"])):x("",!0),!n.showSelectionEditor&&n.selectedMethod&&!l.hasExistingSelection?(A(),_("div",Wse,[o(d,{type:"primary",onClick:l.handleCollectCrossBorder,size:"small",loading:n.collectCrossBorderLoading},{default:r(()=>[O(m(n.collectCrossBorderLoading?l.translate("Saving"):l.translate("Save Settings")),1)]),_:1},8,["onClick","loading"])])):x("",!0)]),_:1},8,["heading"]),i("div",Xse,[i("div",Jse,[o(w,null,{default:r(()=>[o(B,null,{default:r(()=>[i("div",Zse,[!n.showSelectionEditor&&!l.hasExistingSelection?(A(),U(c,{key:0,modelValue:n.selectedMethod,"onUpdate:modelValue":t[0]||(t[0]=F=>n.selectedMethod=F),crossBorderForm:n.crossBorderForm,countries:n.countries,onChange:l.handleCollectionMethod},null,8,["modelValue","crossBorderForm","countries","onChange"])):x("",!0),l.hasExistingSelection||n.showSelectionEditor?(A(),_("div",ene,[n.selectedMethod==="oss"?(A(),_(H,{key:0},[o(h,{label:l.translate("Using One-Stop Shop (OSS) registration"),summary:l.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:l.handleToggleForm,onSave:t[1]||(t[1]=F=>l.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?x("",!0):(A(),_(H,{key:0},[o(v,{taxOverrides:n.taxOverrides,onOnAdd:l.addNewOssTaxOverride,onOnEdit:l.editOssTaxOverride,onOnDelete:l.deleteOssTaxOverride},null,8,["taxOverrides","onOnAdd","onOnEdit","onOnDelete"]),o(y,{ossCountryRates:n.ossCountryRates,ossCountryRatesLoading:n.ossCountryRatesLoading,onFetch:t[2]||(t[2]=F=>l.fetchOssCountryRates())},null,8,["ossCountryRates","ossCountryRatesLoading"])],64))],64)):x("",!0),n.selectedMethod==="home"?(A(),_(H,{key:1},[o(h,{label:l.translate("Using home country registration a single EU VAT number for all EU countries."),summary:l.crossBorderSummary,crossBorderForm:n.crossBorderForm,countries:n.countries,selectedMethod:n.selectedMethod,onToggleForm:l.handleToggleForm,onSave:t[3]||(t[3]=F=>l.handleCollectCrossBorder())},null,8,["label","summary","crossBorderForm","countries","selectedMethod","onToggleForm"]),n.showForm?x("",!0):(A(),_("div",tne,[o(d,{type:"primary",onClick:t[4]||(t[4]=F=>l.manageCountryTaxRates(n.crossBorderForm.home_country))},{default:r(()=>[O(m(l.translate("Override Home Country Tax")),1)]),_:1})]))],64)):n.selectedMethod==="specific"?(A(),U(g,{key:2,countryWiseVatSettings:n.countryWiseVatSettings,euCountries:n.euCountries,euRatesSummary:n.euRatesSummary,euRatesLoading:n.euRatesLoading,onRefresh:t[5]||(t[5]=F=>l.refreshSettings()),onFetch:t[6]||(t[6]=F=>l.fetchEuTaxRates())},null,8,["countryWiseVatSettings","euCountries","euRatesSummary","euRatesLoading"])):x("",!0)])):x("",!0)])]),_:1})]),_:1})]),o(C,{modelValue:n.showAddOssTaxOverrideModal,"onUpdate:modelValue":t[7]||(t[7]=F=>n.showAddOssTaxOverrideModal=F),title:n.overrideModalTitle,countries:n.ossCountryRates,"selected-country-tax-classes":n.selectedCountryTaxClasses,"country-code":n.ossTaxOverrideForm.country_code,"has-valid-overrides":l.hasValidOverrides,onChangeCountry:l.onCountryChange,onSave:l.saveOssTaxOverride,mode:n.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])])}const sne=be(Yse,[["render",ane]]);var ol={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var nne=ol.exports,ru;function one(){return ru||(ru=1,function(e,t){((a,s)=>{e.exports=s()})(nne,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n,l=!s.document&&!!s.postMessage,d=s.IS_PAPA_WORKER||!1,u={},c=0,h={};function v($){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(V){var L=I(V);L.chunkSize=parseInt(L.chunkSize),V.step||V.chunk||(L.chunkSize=null),this._handle=new C(L),(this._handle.streamer=this)._config=L}).call(this,$),this.parseChunk=function(V,L){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let J=this._config.newline;J||(K=this._config.quoteChar||'"',J=this._handle.guessLineEndings(V,K)),V=[...V.split(J).slice(R)].join(J)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(K=this._config.beforeFirstChunk(V))!==void 0&&(V=K),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+V,K=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(V=K.meta.cursor,R=(this._finished||(this._partialLine=R.substring(V-this._baseIndex),this._baseIndex=V),K&&K.data&&(this._rowCount+=K.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),d)s.postMessage({results:K,workerId:h.WORKER_ID,finished:R});else if(M(this._config.chunk)&&!L){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!R||!M(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(V){M(this._config.error)?this._config.error(V):d&&this._config.error&&s.postMessage({workerId:h.WORKER_ID,error:V,finished:!1})}}function y($){var V;($=$||{}).chunkSize||($.chunkSize=h.RemoteChunkSize),v.call(this,$),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(V=new XMLHttpRequest,this._config.withCredentials&&(V.withCredentials=this._config.withCredentials),l||(V.onload=D(this._chunkLoaded,this),V.onerror=D(this._chunkError,this)),V.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var L,R=this._config.downloadRequestHeaders;for(L in R)V.setRequestHeader(L,R[L])}var K;this._config.chunkSize&&(K=this._start+this._config.chunkSize-1,V.setRequestHeader("Range","bytes="+this._start+"-"+K));try{V.send(this._config.downloadRequestBody)}catch(J){this._chunkError(J.message)}l&&V.status===0&&this._chunkError()}},this._chunkLoaded=function(){V.readyState===4&&(V.status<200||400<=V.status?this._chunkError():(this._start+=this._config.chunkSize||V.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(V),this.parseChunk(V.responseText)))},this._chunkError=function(L){L=V.statusText||L,this._sendError(new Error(L))}}function g($){($=$||{}).chunkSize||($.chunkSize=h.LocalChunkSize),v.call(this,$);var V,L,R=typeof FileReader<"u";this.stream=function(K){this._input=K,L=K.slice||K.webkitSlice||K.mozSlice,R?((V=new FileReader).onload=D(this._chunkLoaded,this),V.onerror=D(this._chunkError,this)):V=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,J=(this._config.chunkSize&&(J=Math.min(this._start+this._config.chunkSize,this._input.size),K=L.call(K,this._start,J)),V.readAsText(K,this._config.encoding));R||this._chunkLoaded({target:{result:J}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(V.error)}}function B($){var V;v.call(this,$=$||{}),this.stream=function(L){return V=L,this._nextChunk()},this._nextChunk=function(){var L,R;if(!this._finished)return L=this._config.chunkSize,V=L?(R=V.substring(0,L),V.substring(L)):(R=V,""),this._finished=!V,this.parseChunk(R)}}function w($){v.call(this,$=$||{});var V=[],L=!0,R=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&V.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),V.length?this.parseChunk(V.shift()):L=!0},this._streamData=D(function(K){try{V.push(typeof K=="string"?K:K.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(V.shift()))}catch(J){this._streamError(J)}},this),this._streamError=D(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=D(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C($){var V,L,R,K,J=Math.pow(2,53),W=-J,ae=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Z=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,te=this,ie=0,P=0,j=!1,G=!1,N=[],ee={data:[],errors:[],meta:{}};function ne(Ie){return $.skipEmptyLines==="greedy"?Ie.join("").trim()==="":Ie.length===1&&Ie[0].length===0}function Ce(){if(ee&&R&&(_e("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),R=!1),$.skipEmptyLines&&(ee.data=ee.data.filter(function(Se){return!ne(Se)})),Qe()){let Se=function(qe,vt){M($.transformHeader)&&(qe=$.transformHeader(qe,vt)),N.push(qe)};if(ee)if(Array.isArray(ee.data[0])){for(var Ie=0;Qe()&&Ie<ee.data.length;Ie++)ee.data[Ie].forEach(Se);ee.data.splice(0,1)}else ee.data.forEach(Se)}function xe(Se,qe){for(var vt=$.header?{}:[],We=0;We<Se.length;We++){var ce=We,ge=Se[We],ge=((Oe,ue)=>(Ee=>($.dynamicTypingFunction&&$.dynamicTyping[Ee]===void 0&&($.dynamicTyping[Ee]=$.dynamicTypingFunction(Ee)),($.dynamicTyping[Ee]||$.dynamicTyping)===!0))(Oe)?ue==="true"||ue==="TRUE"||ue!=="false"&&ue!=="FALSE"&&((Ee=>{if(ae.test(Ee)&&(Ee=parseFloat(Ee),W<Ee&&Ee<J))return 1})(ue)?parseFloat(ue):Z.test(ue)?new Date(ue):ue===""?null:ue):ue)(ce=$.header?We>=N.length?"__parsed_extra":N[We]:ce,ge=$.transform?$.transform(ge,ce):ge);ce==="__parsed_extra"?(vt[ce]=vt[ce]||[],vt[ce].push(ge)):vt[ce]=ge}return $.header&&(We>N.length?_e("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+We,P+qe):We<N.length&&_e("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+We,P+qe)),vt}var $e;ee&&($.header||$.dynamicTyping||$.transform)&&($e=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(xe),$e=ee.data.length):ee.data=xe(ee.data,0),$.header&&ee.meta&&(ee.meta.fields=N),P+=$e)}function Qe(){return $.header&&N.length===0}function _e(Ie,xe,$e,Se){Ie={type:Ie,code:xe,message:$e},Se!==void 0&&(Ie.row=Se),ee.errors.push(Ie)}M($.step)&&(K=$.step,$.step=function(Ie){ee=Ie,Qe()?Ce():(Ce(),ee.data.length!==0&&(ie+=Ie.data.length,$.preview&&ie>$.preview?L.abort():(ee.data=ee.data[0],K(ee,te))))}),this.parse=function(Ie,xe,$e){var Se=$.quoteChar||'"',Se=($.newline||($.newline=this.guessLineEndings(Ie,Se)),R=!1,$.delimiter?M($.delimiter)&&($.delimiter=$.delimiter(Ie),ee.meta.delimiter=$.delimiter):((Se=((qe,vt,We,ce,ge)=>{var Oe,ue,Ee,Ke;ge=ge||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ia=0;ia<ge.length;ia++){for(var Ot,Dt=ge[ia],Ft=0,ga=0,xt=0,zt=(Ee=void 0,new S({comments:ce,delimiter:Dt,newline:vt,preview:10}).parse(qe)),Sa=0;Sa<zt.data.length;Sa++)We&&ne(zt.data[Sa])?xt++:(Ot=zt.data[Sa].length,ga+=Ot,Ee===void 0?Ee=Ot:0<Ot&&(Ft+=Math.abs(Ot-Ee),Ee=Ot));0<zt.data.length&&(ga/=zt.data.length-xt),(ue===void 0||Ft<=ue)&&(Ke===void 0||Ke<ga)&&1.99<ga&&(ue=Ft,Oe=Dt,Ke=ga)}return{successful:!!($.delimiter=Oe),bestDelimiter:Oe}})(Ie,$.newline,$.skipEmptyLines,$.comments,$.delimitersToGuess)).successful?$.delimiter=Se.bestDelimiter:(R=!0,$.delimiter=h.DefaultDelimiter),ee.meta.delimiter=$.delimiter),I($));return $.preview&&$.header&&Se.preview++,V=Ie,L=new S(Se),ee=L.parse(V,xe,$e),Ce(),j?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,L.abort(),V=M($.chunk)?"":V.substring(L.getCharIndex())},this.resume=function(){te.streamer._halted?(j=!1,te.streamer.parseChunk(V,!0)):setTimeout(te.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,L.abort(),ee.meta.aborted=!0,M($.complete)&&$.complete(ee),V=""},this.guessLineEndings=function(qe,Se){qe=qe.substring(0,1048576);var Se=new RegExp(F(Se)+"([^]*?)"+F(Se),"gm"),$e=(qe=qe.replace(Se,"")).split("\r"),Se=qe.split(`
`),qe=1<Se.length&&Se[0].length<$e[0].length;if($e.length===1||qe)return`
`;for(var vt=0,We=0;We<$e.length;We++)$e[We][0]===`
`&&vt++;return vt>=$e.length/2?`\r
`:"\r"}}function F($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S($){var V=($=$||{}).delimiter,L=$.newline,R=$.comments,K=$.step,J=$.preview,W=$.fastMode,ae=null,Z=!1,te=$.quoteChar==null?'"':$.quoteChar,ie=te;if($.escapeChar!==void 0&&(ie=$.escapeChar),(typeof V!="string"||-1<h.BAD_DELIMITERS.indexOf(V))&&(V=","),R===V)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<h.BAD_DELIMITERS.indexOf(R))&&(R=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var P=0,j=!1;this.parse=function(G,N,ee){if(typeof G!="string")throw new Error("Input must be a string");var ne=G.length,Ce=V.length,Qe=L.length,_e=R.length,Ie=M(K),xe=[],$e=[],Se=[],qe=P=0;if(!G)return Ft();if(W||W!==!1&&G.indexOf(te)===-1){for(var vt=G.split(L),We=0;We<vt.length;We++){if(Se=vt[We],P+=Se.length,We!==vt.length-1)P+=L.length;else if(ee)return Ft();if(!R||Se.substring(0,_e)!==R){if(Ie){if(xe=[],Ke(Se.split(V)),ga(),j)return Ft()}else Ke(Se.split(V));if(J&&J<=We)return xe=xe.slice(0,J),Ft(!0)}}return Ft()}for(var ce=G.indexOf(V,P),ge=G.indexOf(L,P),Oe=new RegExp(F(ie)+F(te),"g"),ue=G.indexOf(te,P);;)if(G[P]===te)for(ue=P,P++;;){if((ue=G.indexOf(te,ue+1))===-1)return ee||$e.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:P}),Ot();if(ue===ne-1)return Ot(G.substring(P,ue).replace(Oe,te));if(te===ie&&G[ue+1]===ie)ue++;else if(te===ie||ue===0||G[ue-1]!==ie){ce!==-1&&ce<ue+1&&(ce=G.indexOf(V,ue+1));var Ee=ia((ge=ge!==-1&&ge<ue+1?G.indexOf(L,ue+1):ge)===-1?ce:Math.min(ce,ge));if(G.substr(ue+1+Ee,Ce)===V){Se.push(G.substring(P,ue).replace(Oe,te)),G[P=ue+1+Ee+Ce]!==te&&(ue=G.indexOf(te,P)),ce=G.indexOf(V,P),ge=G.indexOf(L,P);break}if(Ee=ia(ge),G.substring(ue+1+Ee,ue+1+Ee+Qe)===L){if(Se.push(G.substring(P,ue).replace(Oe,te)),Dt(ue+1+Ee+Qe),ce=G.indexOf(V,P),ue=G.indexOf(te,P),Ie&&(ga(),j))return Ft();if(J&&xe.length>=J)return Ft(!0);break}$e.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:P}),ue++}}else if(R&&Se.length===0&&G.substring(P,P+_e)===R){if(ge===-1)return Ft();P=ge+Qe,ge=G.indexOf(L,P),ce=G.indexOf(V,P)}else if(ce!==-1&&(ce<ge||ge===-1))Se.push(G.substring(P,ce)),P=ce+Ce,ce=G.indexOf(V,P);else{if(ge===-1)break;if(Se.push(G.substring(P,ge)),Dt(ge+Qe),Ie&&(ga(),j))return Ft();if(J&&xe.length>=J)return Ft(!0)}return Ot();function Ke(xt){xe.push(xt),qe=P}function ia(xt){var zt=0;return zt=xt!==-1&&(xt=G.substring(ue+1,xt))&&xt.trim()===""?xt.length:zt}function Ot(xt){return ee||(xt===void 0&&(xt=G.substring(P)),Se.push(xt),P=ne,Ke(Se),Ie&&ga()),Ft()}function Dt(xt){P=xt,Ke(Se),Se=[],ge=G.indexOf(L,P)}function Ft(xt){if($.header&&!N&&xe.length&&!Z){var zt=xe[0],Sa=Object.create(null),ts=new Set(zt);let Ha=!1;for(let qs=0;qs<zt.length;qs++){let Ra=zt[qs];if(Sa[Ra=M($.transformHeader)?$.transformHeader(Ra,qs):Ra]){let xn,xA=Sa[Ra];for(;xn=Ra+"_"+xA,xA++,ts.has(xn););ts.add(xn),zt[qs]=xn,Sa[Ra]++,Ha=!0,(ae=ae===null?{}:ae)[xn]=Ra}else Sa[Ra]=1,zt[qs]=Ra;ts.add(Ra)}Ha&&console.warn("Duplicate headers found and renamed."),Z=!0}return{data:xe,errors:$e,meta:{delimiter:V,linebreak:L,aborted:j,truncated:!!xt,cursor:qe+(N||0),renamedHeaders:ae}}}function ga(){K(Ft()),xe=[],$e=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return P}}function E($){var V=$.data,L=u[V.workerId],R=!1;if(V.error)L.userError(V.error,V.file);else if(V.results&&V.results.data){var K={abort:function(){R=!0,k(V.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Q,resume:Q};if(M(L.userStep)){for(var J=0;J<V.results.data.length&&(L.userStep({data:V.results.data[J],errors:V.results.errors,meta:V.results.meta},K),!R);J++);delete V.results}else M(L.userChunk)&&(L.userChunk(V.results,K,V.file),delete V.results)}V.finished&&!R&&k(V.workerId,V.results)}function k($,V){var L=u[$];M(L.userComplete)&&L.userComplete(V),L.terminate(),delete u[$]}function Q(){throw new Error("Not implemented.")}function I($){if(typeof $!="object"||$===null)return $;var V,L=Array.isArray($)?[]:{};for(V in $)L[V]=I($[V]);return L}function D($,V){return function(){$.apply(V,arguments)}}function M($){return typeof $=="function"}return h.parse=function($,V){var L=(V=V||{}).dynamicTyping||!1;if(M(L)&&(V.dynamicTypingFunction=L,L={}),V.dynamicTyping=L,V.transform=!!M(V.transform)&&V.transform,!V.worker||!h.WORKERS_SUPPORTED)return L=null,h.NODE_STREAM_INPUT,typeof $=="string"?($=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))($),L=new(V.download?y:B)(V)):$.readable===!0&&M($.read)&&M($.on)?L=new w(V):(s.File&&$ instanceof File||$ instanceof Object)&&(L=new g(V)),L.stream($);(L=(()=>{var R;return!!h.WORKERS_SUPPORTED&&(R=(()=>{var K=s.URL||s.webkitURL||null,J=a.toString();return h.BLOB_URL||(h.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",J,")();"],{type:"text/javascript"})))})(),(R=new s.Worker(R)).onmessage=E,R.id=c++,u[R.id]=R)})()).userStep=V.step,L.userChunk=V.chunk,L.userComplete=V.complete,L.userError=V.error,V.step=M(V.step),V.chunk=M(V.chunk),V.complete=M(V.complete),V.error=M(V.error),delete V.worker,L.postMessage({input:$,config:V,workerId:L.id})},h.unparse=function($,V){var L=!1,R=!0,K=",",J=`\r
`,W='"',ae=W+W,Z=!1,te=null,ie=!1,P=((()=>{if(typeof V=="object"){if(typeof V.delimiter!="string"||h.BAD_DELIMITERS.filter(function(N){return V.delimiter.indexOf(N)!==-1}).length||(K=V.delimiter),typeof V.quotes!="boolean"&&typeof V.quotes!="function"&&!Array.isArray(V.quotes)||(L=V.quotes),typeof V.skipEmptyLines!="boolean"&&typeof V.skipEmptyLines!="string"||(Z=V.skipEmptyLines),typeof V.newline=="string"&&(J=V.newline),typeof V.quoteChar=="string"&&(W=V.quoteChar),typeof V.header=="boolean"&&(R=V.header),Array.isArray(V.columns)){if(V.columns.length===0)throw new Error("Option columns is empty");te=V.columns}V.escapeChar!==void 0&&(ae=V.escapeChar+W),V.escapeFormulae instanceof RegExp?ie=V.escapeFormulae:typeof V.escapeFormulae=="boolean"&&V.escapeFormulae&&(ie=/^[=+\-@\t\r].*$/)}})(),new RegExp(F(W),"g"));if(typeof $=="string"&&($=JSON.parse($)),Array.isArray($)){if(!$.length||Array.isArray($[0]))return j(null,$,Z);if(typeof $[0]=="object")return j(te||Object.keys($[0]),$,Z)}else if(typeof $=="object")return typeof $.data=="string"&&($.data=JSON.parse($.data)),Array.isArray($.data)&&($.fields||($.fields=$.meta&&$.meta.fields||te),$.fields||($.fields=Array.isArray($.data[0])?$.fields:typeof $.data[0]=="object"?Object.keys($.data[0]):[]),Array.isArray($.data[0])||typeof $.data[0]=="object"||($.data=[$.data])),j($.fields||[],$.data||[],Z);throw new Error("Unable to serialize unrecognized input");function j(N,ee,ne){var Ce="",Qe=(typeof N=="string"&&(N=JSON.parse(N)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(N)&&0<N.length),_e=!Array.isArray(ee[0]);if(Qe&&R){for(var Ie=0;Ie<N.length;Ie++)0<Ie&&(Ce+=K),Ce+=G(N[Ie],Ie);0<ee.length&&(Ce+=J)}for(var xe=0;xe<ee.length;xe++){var $e=(Qe?N:ee[xe]).length,Se=!1,qe=Qe?Object.keys(ee[xe]).length===0:ee[xe].length===0;if(ne&&!Qe&&(Se=ne==="greedy"?ee[xe].join("").trim()==="":ee[xe].length===1&&ee[xe][0].length===0),ne==="greedy"&&Qe){for(var vt=[],We=0;We<$e;We++){var ce=_e?N[We]:We;vt.push(ee[xe][ce])}Se=vt.join("").trim()===""}if(!Se){for(var ge=0;ge<$e;ge++){0<ge&&!qe&&(Ce+=K);var Oe=Qe&&_e?N[ge]:ge;Ce+=G(ee[xe][Oe],ge)}xe<ee.length-1&&(!ne||0<$e&&!qe)&&(Ce+=J)}}return Ce}function G(N,ee){var ne,Ce;return N==null?"":N.constructor===Date?JSON.stringify(N).slice(1,25):(Ce=!1,ie&&typeof N=="string"&&ie.test(N)&&(N="'"+N,Ce=!0),ne=N.toString().replace(P,ae),(Ce=Ce||L===!0||typeof L=="function"&&L(N,ee)||Array.isArray(L)&&L[ee]||((Qe,_e)=>{for(var Ie=0;Ie<_e.length;Ie++)if(-1<Qe.indexOf(_e[Ie]))return!0;return!1})(ne,h.BAD_DELIMITERS)||-1<ne.indexOf(K)||ne.charAt(0)===" "||ne.charAt(ne.length-1)===" ")?W+ne+W:ne)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!l&&!!s.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=S,h.ParserHandle=C,h.NetworkStreamer=y,h.FileStreamer=g,h.StringStreamer=B,h.ReadableStreamStreamer=w,s.jQuery&&((n=s.jQuery).fn.parse=function($){var V=$.config||{},L=[];return this.each(function(J){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var W=0;W<this.files.length;W++)L.push({file:this.files[W],inputElem:this,instanceConfig:n.extend({},V)})}),R(),this;function R(){if(L.length===0)M($.complete)&&$.complete();else{var J,W,ae,Z,te=L[0];if(M($.before)){var ie=$.before(te.file,te.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return J="AbortError",W=te.file,ae=te.inputElem,Z=ie.reason,void(M($.error)&&$.error({name:J},W,ae,Z));if(ie.action==="skip")return void K();typeof ie.config=="object"&&(te.instanceConfig=n.extend(te.instanceConfig,ie.config))}else if(ie==="skip")return void K()}var P=te.instanceConfig.complete;te.instanceConfig.complete=function(j){M(P)&&P(j,te.file,te.inputElem),K()},h.parse(te.file,te.instanceConfig)}}function K(){L.splice(0,1),R()}}),d&&(s.onmessage=function($){$=$.data,h.WORKER_ID===void 0&&$&&(h.WORKER_ID=$.workerId),typeof $.input=="string"?s.postMessage({workerId:h.WORKER_ID,results:h.parse($.input,$.config),finished:!0}):(s.File&&$.input instanceof File||$.input instanceof Object)&&($=h.parse($.input,$.config))&&s.postMessage({workerId:h.WORKER_ID,results:$,finished:!0})}),(y.prototype=Object.create(v.prototype)).constructor=y,(g.prototype=Object.create(v.prototype)).constructor=g,(B.prototype=Object.create(B.prototype)).constructor=B,(w.prototype=Object.create(v.prototype)).constructor=w,h})}(ol)),ol.exports}one();const lne={class:"setting-wrap"},rne={class:"fct-all-tax-classes-page"},ine={class:"fct-tax-rates-wrap"},Ane={class:"p-4 bg-gray-50 rounded-lg"},dne={key:0,class:"p-4 bg-gray-50 rounded-lg"},une={class:"text-sm font-medium text-gray-700 flex items-center gap-1 mb-3"},cne={key:0},pne={key:0},fne={key:0},hne={class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},mne={key:0,src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"},_ne={class:"mt-3 pl-10"},gne={class:"font-medium"},vne={key:0},yne={class:"mt-3 flex justify-end gap-2"},bne={class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},wne={class:"p-4"},Cne={key:0,class:"text-center py-4"},Bne={key:1},kne={class:"flex items-center justify-between w-full pr-4"},Fne={class:"flex items-center gap-2"},xne=["src","alt"],Une={class:"font-medium"},Sne={class:"text-sm text-gray-600"},Ene={class:"p-3 bg-gray-50 rounded"},Qne={key:0,class:"space-y-2"},Dne={class:"flex items-center gap-2"},Ine={class:"text-sm font-medium"},$ne={key:0,class:"text-xs text-gray-500"},Tne={class:"text-sm font-medium text-blue-600"},Mne={key:1,class:"text-sm text-gray-500 text-center py-2"},Vne={key:2,class:"text-gray-500 text-center py-4"},Lne={class:"rounded-md p-6 border border-solid border-gray-divider bg-white mt-4"},One={class:"flex items-start justify-between mb-6"},Hne={class:"flex-shrink-0"},Rne={key:0},Pne={class:"flex items-center gap-2"},Kne=["src","alt"],Nne={class:"fct-tax-rates-country-modal-actions flex items-center gap-2"},Gne={key:1,class:"text-sm text-gray-500 text-center py-4"},zne={key:0,class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},jne={class:"flex items-center justify-between mb-3"},Yne={key:0},qne={class:"flex items-center gap-2"},Wne=["src","alt"],Xne={key:0},Jne={key:0},Zne={key:1},eoe={class:"fct-tax-rates-country-modal-actions flex items-center gap-2"},toe={key:1,class:"text-sm text-gray-500 text-center py-4"},aoe={key:1,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},soe={class:"ml-3 text-gray-600"},noe={class:"mt-3 pl-10"},ooe={class:"font-medium"},loe={key:0},roe={class:"mt-3 flex justify-end gap-2"},ioe={key:2,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},Aoe={class:"ml-3 text-xs text-gray-600"},doe={class:"mt-3 flex justify-end gap-2"},uoe={key:1},coe={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},poe={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},foe={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},hoe={class:"mt-3 flex justify-end"},moe={key:1,class:"mt-4"},_oe={class:"flex items-center mb-3"},goe={class:"ml-3 text-sm text-gray-700"},voe={class:"flex justify-end gap-2 mt-3"},yoe={key:2,class:"mt-4"},boe={class:"flex items-center mb-3"},woe={key:0,class:"mt-3 p-2 text-xs text-gray-600"},Coe={key:1,class:"mt-3 text-xs text-gray-600"},Boe={key:2,class:"mt-4 border border-gray-200 rounded"},koe={class:"divide-y"},Foe=["onClick"],xoe={class:"flex items-center gap-2"},Uoe=["src"],Soe={class:"text-gray-800"},Eoe={class:"flex items-center gap-2"},Qoe={class:"text-xs text-gray-600"},Doe={label:"EUVatSettings",data(){return{showInlineConfig:!1,upcomingFeature:!1,showSelectionEditor:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{fetchEuTaxRates(){this.euRatesLoading=!0,se.get("tax/configuration/settings/eu-vat/rates").then(e=>{const a=Object.values((e==null?void 0:e.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((l,d)=>l+(d.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(e=>e.rates&&e.rates.some(t=>t.for_shipping>0)),this.taxOverrides=this.euCountries.filter(e=>!e.rates||!e.rates.some(t=>t.for_shipping>0))},changeRegistration(){Kt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(e=>{this.handleSuccess(e.message),this.getTaxSettings(),this.showSelectionEditor=!0}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},fetchOssOverrides(){},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(e=>{var t,a;this.ossCountryRates=((a=(t=e==null?void 0:e.tax_rates)==null?void 0:t.EU)==null?void 0:a.countries)??[]}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(e){e.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},manageCountryTaxRates(e){this.$router.push({name:"eu_country_tax_rates",params:{country:e,group:"EU"}})},getTaxSettings(){this.$get("tax/configuration/settings").then(e=>{var a;this.settings=e.settings;const t=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(t==null?void 0:t.method)||"",this.crossBorderForm.oss_country=(t==null?void 0:t.oss_country)||"",this.crossBorderForm.oss_vat=(t==null?void 0:t.oss_vat)||"",this.crossBorderForm.home_country=(t==null?void 0:t.home_country)||"",this.crossBorderForm.home_vat=(t==null?void 0:t.home_vat)||"",this.countryWiseVatSettings=(t==null?void 0:t.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},handleContinueSelection(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(e=>{this.getTaxSettings(),this.showInlineConfig=!0,this.fetchEuTaxRates(),this.handleSuccess(e.message)}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showInlineConfig=!0;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0)},cancelInlineConfig(){this.showInlineConfig=!1},handleCollectCrossBorder(){this.$refs.crossBorderFormRef.validate(e=>{e&&this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(t=>{this.getTaxSettings(),this.showInlineConfig=!1,this.showSelectionEditor=!1,this.handleSuccess(t.message)}).catch(t=>{var a;this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(e=>{this.getTaxSettings(),this.handleSuccess(e.message),this.showInlineConfig=!1,this.showSelectionEditor=!1}).catch(e=>{var t;this.handleError((t=e==null?void 0:e.data)==null?void 0:t.message)})},deleteCountryTaxRate(e){Kt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+e).then(t=>{this.handleSuccess(t.message),this.fetchEuTaxRates()}).catch(t=>{var a;this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(e){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:e.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],e.country_code&&this.onCountryChange(e.country_code)},editOssShippingTaxOverride(e){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:e.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],e.country_code&&this.onShippingCountryChange(e.country_code)},onCountryChange(e){if(!e){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(e);else{this.ossTaxOverrideForm.country_code=e;const t=this.ossCountryRates.find(s=>s.country_code===e);if(!t||!t.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===e);this.selectedCountryTaxClasses=t.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(d=>d.name===s.type);l&&(n=l.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(e){this.ossTaxOverrideForm.country_code=e;const t=this.ossCountryRates.find(s=>s.country_code===e);if(!t||!t.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===e);this.selectedCountryTaxClasses=t.rates.map(s=>{let n="";if(a&&a.rates){const l=a.rates.find(d=>d.name===s.type);l&&(n=l.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(e){Kt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{se.delete("tax/configuration/settings/eu-vat/oss/override",{country:e.country_code,state:e.state}).then(t=>{this.handleSuccess(t.message),this.fetchEuTaxRates()}).catch(t=>{var a;this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(e){Kt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{se.delete("tax/configuration/settings/eu-vat/oss/shipping-override",{country:e.country_code,state:e.state}).then(t=>{this.handleSuccess(t.message),this.fetchEuTaxRates()}).catch(t=>{var a;console.error("Delete error:",t),this.handleError((a=t==null?void 0:t.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const e=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(e.length===0){this.handleError("Please enable at least one tax class override");return}se.post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:e}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const e=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(e.length===0){this.handleError("Please enable at least one tax class override");return}se.post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:e}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},computed:{hasExistingSelection(){var a,s,n,l,d,u;const e=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((l=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:l.method)==="home"||((u=(d=this.settings)==null?void 0:d.eu_vat_settings)==null?void 0:u.method)==="specific",t=Object.keys(this.countryWiseVatSettings||{}).length>0;return e||t},crossBorderSummary(){var d;const e=((d=this.settings)==null?void 0:d.eu_vat_settings)||{},t=e.method;if(!t)return null;const a=t==="oss"?e.oss_country:e.home_country,s=t==="oss"?e.oss_vat:e.home_vat,n=t==="oss"?"OSS":"Home Registration";let l=a;if(a&&Array.isArray(this.countries)){const u=this.countries.find(c=>c.value===a);u&&(l=u.label)}return{methodLabel:n,country:l||"",vat:s||""}},configuredSpecificCountriesCount(){const e=Object.keys(this.countryWiseVatSettings||{});return e.length?e.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(t=>(t.total_rates||0)>0).length:0},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const e=this.euCountries.find(t=>t.country_code===this.ossTaxOverrideForm.country_code);return e?e.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(e=>e.override_rate!=="")}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(e,t,a)=>{this.crossBorderForm.method==="oss"&&!t?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(e,t,a)=>{this.crossBorderForm.method==="home"&&!t?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},Ioe=Object.assign(Doe,{__name:"EUVatSettingsOld",setup(e){return(t,a)=>{const s=b("InfoFilled"),n=b("el-icon"),l=b("el-tooltip"),d=b("el-button"),u=b("el-collapse-item"),c=b("el-collapse"),h=b("el-table-column"),v=b("el-table"),y=b("el-radio"),g=b("el-radio-group"),B=b("el-option"),w=b("el-select"),C=b("el-form-item"),F=b("el-col"),S=b("el-input"),E=b("el-row"),k=b("el-form"),Q=b("el-card");return A(),_("div",lne,[i("div",rne,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Tax Settings / EU"),text:f(p)("")},null,8,["title","text"]),o(le,null,{default:r(()=>[i("div",ine,[a[42]||(a[42]=i("div",null,[i("p",{class:"text-gray-500 text-sm"}," VAT collection ")],-1)),i("div",Ane,[t.showInlineConfig?x("",!0):(A(),_("div",dne,[i("div",une,[t.hasExistingSelection?x("",!0):(A(),_("p",cne,"Choose how you collect VAT in the EU")),o(l,{content:"Select a collection method, then continue to configure it",placement:"top"},{default:r(()=>[o(n,null,{default:r(()=>[o(s)]),_:1})]),_:1}),t.hasExistingSelection&&!t.showSelectionEditor?(A(),U(d,{key:1,type:"primary",link:"",class:"ml-auto",onClick:t.changeRegistration,plain:""},{default:r(()=>a[9]||(a[9]=[O("Change Registration",-1)])),_:1,__:[9]},8,["onClick"])):x("",!0)]),t.hasExistingSelection&&!t.showSelectionEditor?(A(),_("div",pne,[t.selectedMethod==="oss"?(A(),_("div",fne,[i("div",hne,[t.selectedMethod==="oss"||t.selectedMethod==="home"?(A(),_("img",mne)):x("",!0),a[11]||(a[11]=i("span",{class:"text-gray-800 font-medium"}," Using One-Stop Shop (OSS) registration ",-1)),i("div",_ne,[i("span",gne,m(t.crossBorderSummary.methodLabel)+":",1),O(" "+m(t.crossBorderSummary.country)+" ",1),t.crossBorderSummary.vat?(A(),_("span",vne," - VAT "+m(t.crossBorderSummary.vat),1)):x("",!0)]),i("div",yne,[o(d,{type:"primary",link:"",onClick:t.proceedWithCurrentSelection},{default:r(()=>a[10]||(a[10]=[O("Edit",-1)])),_:1,__:[10]},8,["onClick"])])]),i("div",bne,[i("div",null,[a[13]||(a[13]=i("h3",{class:"mt-3"},"country rates",-1)),o(c,{modelValue:t.activeCollapse,"onUpdate:modelValue":a[1]||(a[1]=I=>t.activeCollapse=I),onChange:t.handleCollapseChange},{default:r(()=>[o(u,{title:"Collecting in 27 regions",name:"1"},{default:r(()=>[i("div",wne,[t.ossCountryRatesLoading?(A(),_("div",Cne,[o(n,{class:"is-loading"},{default:r(()=>[o(f(il))]),_:1}),a[12]||(a[12]=i("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):t.ossCountryRates.length>0?(A(),_("div",Bne,[o(c,{modelValue:t.activeCountryCollapse,"onUpdate:modelValue":a[0]||(a[0]=I=>t.activeCountryCollapse=I),accordion:""},{default:r(()=>[(A(!0),_(H,null,X(t.ossCountryRates,(I,D)=>(A(),U(u,{key:D,name:`country-${D}`},{title:r(()=>[i("div",kne,[i("div",Fne,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${I.country_code.toLowerCase()}.png`,alt:I.country_code},null,8,xne),i("span",Une,m(I.country_name),1)]),i("div",Sne," Total Rates: "+m(I.total_rates),1)])]),default:r(()=>[i("div",Ene,[I.rates&&I.rates.length>0?(A(),_("div",Qne,[(A(!0),_(H,null,X(I.rates,(M,$)=>(A(),_("div",{key:$,class:"flex items-center justify-between px-4 py-1 border border-gray-200 rounded"},[i("div",Dne,[i("span",Ine,m(M.type),1),M.tax_class?(A(),_("span",$ne,"("+m(M.tax_class)+")",1)):x("",!0)]),i("div",Tne,m(M.rate)+"% ",1)]))),128))])):(A(),_("div",Mne," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):(A(),_("div",Vne," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])]),i("div",Lne,[i("div",One,[a[15]||(a[15]=i("div",{class:"flex-1 pr-6"},[i("h3",{class:"text-sm font-semibold text-gray-800 mb-2"},"Custom VAT Rates"),i("p",{class:"text-sm text-gray-600 leading-relaxed"},"Custom rates will override the default VAT rates for specific countries, giving you precise control over tax collection.")],-1)),i("div",Hne,[o(d,{type:"primary",size:"small",class:"px-6 py-2 font-medium shadow-sm hover:shadow-md transition-shadow",onClick:t.addNewOssTaxOverride},{default:r(()=>a[14]||(a[14]=[O(" Add Custom Rate ",-1)])),_:1,__:[14]},8,["onClick"])])]),t.taxOverrides.length>0?(A(),_("div",Rne,[o(v,{data:t.taxOverrides,size:"small"},{default:r(()=>[o(h,{label:"Country"},{default:r(({row:I})=>[i("div",Pne,[i("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${I.country_code.toLowerCase()}.png`,alt:I.country_code},null,8,Kne),i("span",null,m(I.country_name),1)])]),_:1}),o(h,{label:"Total Rates"},{default:r(({row:I})=>[O(m(I.total_rates)+" rates ",1)]),_:1}),o(h,{label:"Actions",width:"100"},{default:r(({row:I})=>[i("div",Nne,[o(we,{size:"small",tag:"span",onClick:D=>t.editOssTaxOverride(I)},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"]),o(we,{size:"small",tag:"span",onClick:D=>t.deleteOssTaxOverride(I)},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(A(),_("div",Gne," No Custom VAT rates configured "))]),t.upcomingFeature?(A(),_("div",zne,[i("div",jne,[a[17]||(a[17]=i("h3",{class:"text-sm font-medium text-gray-700"},"Shipping Overrides",-1)),o(d,{type:"primary",size:"small",onClick:t.addShippingOverride},{default:r(()=>a[16]||(a[16]=[O("Add Shipping Override",-1)])),_:1,__:[16]},8,["onClick"])]),t.shippingOverrides.length>0?(A(),_("div",Yne,[o(v,{data:t.shippingOverrides,size:"small"},{default:r(()=>[o(h,{label:"Country"},{default:r(({row:I})=>[i("div",qne,[i("img",{class:"w-5",src:`https://flagcdn.com/w40/${I.country_code.toLowerCase()}.png`,alt:I.country_code},null,8,Wne),i("span",null,m(I.country_name),1)])]),_:1}),o(h,{label:"Shipping Rate"},{default:r(({row:I})=>[I.rates&&I.rates.length>0?(A(),_("span",Xne,[(A(!0),_(H,null,X(I.rates.filter(D=>D.for_shipping>0),(D,M)=>(A(),_("span",{key:M},[O(m(D.for_shipping)+"%",1),M<I.rates.filter($=>$.for_shipping>0).length-1?(A(),_("span",Jne,", ")):x("",!0)]))),128))])):(A(),_("span",Zne,"No shipping rates"))]),_:1}),o(h,{label:"Actions",width:"100"},{default:r(({row:I})=>[i("div",eoe,[o(we,{size:"small",tag:"span",onClick:D=>t.editOssShippingTaxOverride(I)},{default:r(()=>[o(z,{name:"Edit"})]),_:2},1032,["onClick"]),o(we,{size:"small",tag:"span",onClick:D=>t.deleteOssShippingOverride(I)},{default:r(()=>[o(z,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(A(),_("div",toe," No OSS shipping overrides configured "))])):x("",!0)])):t.selectedMethod==="home"?(A(),_("div",aoe,[i("div",soe,[a[19]||(a[19]=i("div",{class:"flex items-center gap-2"},[i("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"}),i("span",{class:"text-gray-800 font-bold"}," Using home country registration a single EU VAT number for all EU countries. ")],-1)),i("div",noe,[i("span",ooe,m(t.crossBorderSummary.methodLabel)+":",1),O(" "+m(t.crossBorderSummary.country)+" ",1),t.crossBorderSummary.vat?(A(),_("span",loe," - VAT "+m(t.crossBorderSummary.vat),1)):x("",!0)]),i("div",roe,[o(d,{type:"primary",link:"",onClick:t.proceedWithCurrentSelection},{default:r(()=>a[18]||(a[18]=[O("Edit",-1)])),_:1,__:[18]},8,["onClick"])])])])):t.selectedMethod==="specific"?(A(),_("div",ioe,[i("div",Aoe,[i("div",null,[O(m(t.configuredSpecificCountriesCount)+" country(ies) configured ",1),a[20]||(a[20]=i("br",null,null,-1)),a[21]||(a[21]=i("p",null,"Specific EU country rates selected.",-1))]),i("div",doe,[o(d,{type:"primary",link:"",onClick:t.proceedWithCurrentSelection},{default:r(()=>a[22]||(a[22]=[O("Edit",-1)])),_:1,__:[22]},8,["onClick"])])])])):x("",!0)])):(A(),_("div",uoe,[o(g,{modelValue:t.selectedMethod,"onUpdate:modelValue":a[2]||(a[2]=I=>t.selectedMethod=I),class:"block"},{default:r(()=>[i("div",coe,[o(y,{label:"oss"},{default:r(()=>a[23]||(a[23]=[O("Collect using a One Stop Shop (OSS) registration",-1)])),_:1,__:[23]}),a[24]||(a[24]=i("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you have a single EU VAT number for all EU countries.",-1))]),i("div",poe,[o(y,{label:"home"},{default:r(()=>a[25]||(a[25]=[O("Collect using your home country registration",-1)])),_:1,__:[25]}),a[26]||(a[26]=i("p",{class:"text-gray-500 text-xs mt-1"},"Applies to micro-businesses located in one EU country making less than 10,000 in cross-border EU sales yearly.",-1))]),i("div",foe,[o(y,{label:"specific"},{default:r(()=>a[27]||(a[27]=[O("Collect specific country rate",-1)])),_:1,__:[27]}),a[28]||(a[28]=i("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you want to collect VAT for specific EU countries.",-1))])]),_:1},8,["modelValue"]),i("div",hoe,[t.hasExistingSelection?(A(),U(d,{key:0,onClick:a[3]||(a[3]=I=>t.showSelectionEditor=!1),plain:""},{default:r(()=>a[29]||(a[29]=[O("Cancel",-1)])),_:1,__:[29]})):x("",!0),t.selectedMethod!==""?(A(),U(d,{key:1,type:"primary",onClick:t.handleContinueSelection},{default:r(()=>a[30]||(a[30]=[O("Next",-1)])),_:1,__:[30]},8,["onClick"])):x("",!0)])]))])),t.showInlineConfig&&(t.selectedMethod==="oss"||t.selectedMethod==="home")?(A(),_("div",moe,[o(Q,{shadow:"never",class:"p-4 rounded-md"},{default:r(()=>[i("div",_oe,[o(d,{size:"small",onClick:t.cancelInlineConfig,plain:""},{default:r(()=>a[31]||(a[31]=[O("Back",-1)])),_:1,__:[31]},8,["onClick"]),i("span",goe,"Configure "+m(t.selectedMethod==="oss"?"OSS":"Home country")+" collection",1)]),i("pre",null,m(t.crossBorderForm),1),o(k,{ref:"crossBorderFormRef",model:t.crossBorderForm,rules:t.crossBorderRules,"label-position":"top",class:"space-y-4"},{default:r(()=>[i("div",null,[t.selectedMethod==="oss"?(A(),_("div",{key:0,shadow:"never",class:oe([{"border-primary":t.crossBorderForm.method==="oss"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[32]||(a[32]=i("div",{class:"font-medium mb-2"},"One Stop Shop (OSS)",-1)),o(E,{gutter:"20"},{default:r(()=>[o(F,{span:12},{default:r(()=>[o(C,{label:"Country of OSS registration",prop:"oss_country"},{default:r(()=>[o(w,{modelValue:t.crossBorderForm.oss_country,"onUpdate:modelValue":a[4]||(a[4]=I=>t.crossBorderForm.oss_country=I),placeholder:"Select country",filterable:""},{default:r(()=>[(A(!0),_(H,null,X(t.countries,I=>(A(),U(B,{key:I.value,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(F,{span:12},{default:r(()=>[o(C,{label:"VAT number"},{default:r(()=>[o(S,{modelValue:t.crossBorderForm.oss_vat,"onUpdate:modelValue":a[5]||(a[5]=I=>t.crossBorderForm.oss_vat=I),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):x("",!0),t.selectedMethod==="home"?(A(),_("div",{key:1,shadow:"never",class:oe([{"border-primary":t.crossBorderForm.method==="home"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[33]||(a[33]=i("div",{class:"font-medium mb-2"},"Home country registration",-1)),a[34]||(a[34]=i("p",{class:"text-gray-500 text-sm mt-1"},"Applies to micro-businesses located in one EU country and making less than 10,000 in sales to other EU countries each year",-1)),o(E,{gutter:"20",class:"mt-3"},{default:r(()=>[o(F,{span:12},{default:r(()=>[o(C,{label:"Country of registration",prop:"home_country"},{default:r(()=>[o(w,{modelValue:t.crossBorderForm.home_country,"onUpdate:modelValue":a[6]||(a[6]=I=>t.crossBorderForm.home_country=I),placeholder:"Select country",filterable:""},{default:r(()=>[(A(!0),_(H,null,X(t.countries,I=>(A(),U(B,{key:I.value,label:I.label,value:I.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(F,{span:12},{default:r(()=>[o(C,{label:"VAT number"},{default:r(()=>[o(S,{modelValue:t.crossBorderForm.home_vat,"onUpdate:modelValue":a[7]||(a[7]=I=>t.crossBorderForm.home_vat=I),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):x("",!0)]),i("div",voe,[o(d,{onClick:t.cancelInlineConfig},{default:r(()=>a[35]||(a[35]=[O("Cancel",-1)])),_:1,__:[35]},8,["onClick"]),o(d,{type:"primary",onClick:t.handleCollectCrossBorder},{default:r(()=>a[36]||(a[36]=[O("Save",-1)])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["model","rules"])]),_:1})])):x("",!0),t.showInlineConfig&&t.selectedMethod==="specific"?(A(),_("div",yoe,[o(Q,{shadow:"never",class:"p-4 rounded-md"},{default:r(()=>[i("div",boe,[o(d,{size:"small",onClick:t.cancelInlineConfig,plain:""},{default:r(()=>a[37]||(a[37]=[O("Back",-1)])),_:1,__:[37]},8,["onClick"]),a[38]||(a[38]=i("span",{class:"ml-3 text-sm text-gray-700"},"Collect specific country VAT",-1))]),o(sr,{onlyEU:!0,onRefresh:t.refreshSettings},null,8,["onRefresh"]),t.euRatesLoading?(A(),_("div",Coe," Loading EU rates ")):(A(),_("div",woe,[a[39]||(a[39]=i("span",{class:"font-medium"},"EU rates available:",-1)),O(" "+m(t.euRatesSummary.totalCountries)+" countries, "+m(t.euRatesSummary.totalRates)+" total rates ",1)])),t.euCountries.length?(A(),_("div",Boe,[a[41]||(a[41]=i("div",{class:"p-3 text-sm font-medium text-gray-700"},"European Union Countries",-1)),i("div",koe,[(A(!0),_(H,null,X(t.euCountries,(I,D)=>(A(),_("div",{key:I.country_code+"-"+D,class:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:M=>t.manageCountryTaxRates(I.country_code)},[i("div",xoe,[i("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+I.country_code.toLowerCase()+".png",alt:"flag"},null,8,Uoe),i("span",Soe,m(I.country_name),1)]),i("div",Eoe,[i("div",Qoe,m(I.total_rates)+" rates",1),o(d,{type:"danger",size:"small",plain:"",onClick:je(M=>t.deleteCountryTaxRate(I.country_code),["stop"])},{default:r(()=>a[40]||(a[40]=[O(" Delete ",-1)])),_:2,__:[40]},1032,["onClick"]),o(n,{class:"text-gray-400"},{default:r(()=>[o(f(la))]),_:1})])],8,Foe))),128))])])):x("",!0)]),_:1})])):x("",!0)])])]),_:1})]),_:1})]),o(Vp,{modelValue:t.showAddOssTaxOverrideModal,"onUpdate:modelValue":a[8]||(a[8]=I=>t.showAddOssTaxOverrideModal=I),title:t.overrideModalTitle,countries:t.ossCountryRates,"selected-country-tax-classes":t.selectedCountryTaxClasses,"country-code":t.ossTaxOverrideForm.country_code,"has-valid-overrides":t.hasValidOverrides,onChangeCountry:t.onCountryChange,onSave:t.saveOssTaxOverride,mode:t.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}}});class $oe extends yn{getTabs(){return{all:p("All"),active:p("Active"),expired:p("Inactive")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Stackable",value:"stackable"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Code"),value:"code"},{label:p("Amount"),value:"amount"},{label:p("Max Uses"),value:"max_uses"},{label:p("Stackable"),value:"stackable"},{label:p("Status"),value:"status"},{label:p("Expiry Date"),value:"expiry_date"}]}getSearchHint(){return p("Search by id, title, amount, code.")}getFetchUrl(){return"coupons"}parseResponse(t){return t.coupons}getTableName(){return"coupon_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}with(){return["appliedCouponsCount"]}}function Hp(e){return $oe.init(e)}const Toe={class:"fct-table-mobile-wrap fct-coupons-table-mobile-wrap"},Moe={class:"fct-table-mobile-header"},Voe={class:"fct-table-mobile-header-left"},Loe={class:"fct-table-id-col"},Ooe={class:"fct-table-status-col"},Hoe=["onClick"],Roe={class:"title"},Poe={class:"value"},Koe={key:0,class:"fct-table-action-col"},Noe={class:"more-btn pr-0"},Goe={class:"fct-table-mobile-body"},zoe=["onClick"],joe={key:0,class:"fct-table-coupon-title-col"},Yoe={class:"fct-table-coupon-code-col"},qoe=["onClick"],Woe={class:"fct-table-mobile-footer"},Xoe=["onClick"],Joe={class:"fct-table-date-col grid"},Zoe={class:"title"},ele={class:"value"},tle={key:0,class:"fct-table-stackable-col"},ale={class:"title"},sle={class:"value"},nle={class:"fct-table-amount-col"},ole={class:"title"},lle={class:"value"},rle={__name:"CouponsTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:p("No customers found.")}},setup(e){const t=e,a=n=>{const l=ke().format("YYYY-MM-DD"),d=ke(n).format("YYYY-MM-DD");return d==="Invalid date"?!1:d<l},s=n=>{let l=p("Are you sure you want to delete this %s coupon. This action is not recoverable",n.coupon.title);n.action==="delete"&&Kt(l,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{se.delete("coupons/"+n.coupon.id).then(d=>{Y.success(d.message),t.table.fetch()}).catch(d=>{console.log(d,"err"),Y.error(d)}).finally(()=>{})}).catch(()=>{})};return(n,l)=>{const d=b("router-link"),u=b("el-tooltip"),c=b("el-dropdown-item"),h=b("el-dropdown-menu"),v=b("el-dropdown");return A(),_("div",Toe,[(A(!0),_(H,null,X(e.table.getTableData(),(y,g)=>(A(),_("div",{key:y.id,class:"fct-table-mobile-row"},[i("div",Moe,[i("div",Voe,[i("div",Loe,[o(d,{to:{name:"add_or_edit_coupon",params:{coupon_id:y.id}},class:"id"},{default:r(()=>[O(" #"+m(y.id),1)]),_:2},1032,["to"])]),i("div",Ooe,[o(ut,{status:y.status},{default:r(()=>[O(m(a(y.end_date)?f(p)("Expired"):y.status),1)]),_:2},1032,["status"]),y.status==="scheduled"?(A(),U(u,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[O(m(f(p)("Available On: %s",f(Ps)(y.start_date,!0))),1)]),default:r(()=>[o(z,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)]),i("div",{class:"fct-table-usage-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:y.id}})},[i("div",Roe,m(f(p)("Usage:")),1),i("div",Poe,[O(m(y.use_count??0)+" ",1),l[0]||(l[0]=i("span",null,"/",-1)),O(" "+m(y.conditions.max_uses>0?y.conditions.max_uses:f(p)("Unlimited")),1)])],8,Hoe)]),e.table.isColumnVisible("actions")?(A(),_("div",Koe,[o(v,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(h,null,{default:r(()=>[y.id?(A(),U(c,{key:0,class:"item-link"},{default:r(()=>[o(d,{to:{name:"add_or_edit_coupon",params:{coupon_id:y.id,action:"edit"}}},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(c,{command:{action:"delete",coupon:y},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",Noe,[o(z,{name:"More"})])]),_:2},1024)])):x("",!0)]),i("div",Goe,[i("div",{class:"fct-table-coupon-code-wrapper-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:y.id}})},[e.table.isColumnVisible("title")?(A(),_("div",joe,m(y.title),1)):x("",!0),i("div",Yoe,[i("code",{class:"copyable-content",onClick:B=>{f(Vl).copy(y.code)}},m(y.code),9,qoe)])],8,zoe)]),i("div",Woe,[i("div",{class:"fct-table-mobile-footer-row items-start",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:y.id}})},[i("div",Joe,[i("div",Zoe,m(f(p)("Expiry Date")),1),i("div",ele,[isNaN(Date.parse(y.end_date))?(A(),_(H,{key:1},[O("n/a")],64)):(A(),U(Lt,{key:0,"date-time":y.end_date,"with-time":!0},null,8,["date-time"]))])]),e.table.isColumnVisible("stackable")?(A(),_("div",tle,[i("div",ale,m(f(p)("Stackable")),1),i("div",sle,m(y.stackable),1)])):x("",!0),i("div",nle,[i("div",ole,m(f(p)("Amount")),1),i("div",lle,m(y.type!=="percentage"?f(lt)(y.amount,!0):y.amount+"%"),1)])],8,Xoe)])]))),128))])}}},ile={},Ale={class:"px-4 py-3"},dle={class:"grid grid-cols-3 gap-5 mt-5"};function ule(e,t){const a=b("el-skeleton-item"),s=b("el-skeleton");return A(),U(s,{animated:""},{template:r(()=>[i("div",Ale,[(A(),_(H,null,X(2,n=>i("div",{key:n,class:"flex items-center justify-between mb-3"},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64)),i("div",dle,[(A(),_(H,null,X(3,n=>i("div",{key:n},[o(a,{varient:"p",class:"w-1/2"}),o(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const cle=be(ile,[["render",ule]]),ple={class:"fct-all-coupons-page fct-layout-width"},fle={class:"fct-all-coupons-wrap"},hle={key:1},mle=["onClick"],_le={class:"capitalize"},gle={class:"more-btn mr-2"},iu={__name:"AllCoupons",setup(e){const t=Hp(),a=T(!1),s=d=>{let u=p("Are you sure you want to delete this %s coupon. This action is not recoverable",d.coupon.title);d.action==="delete"&&Kt(u,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{se.delete("coupons/"+d.coupon.id).then(c=>{Y.success(c.message),t.fetch()}).catch(c=>{var h;c.status_code=="422"?Y.validationErrors(c):Y.error((h=c.data)==null?void 0:h.message)}).finally(()=>{})}).catch(()=>{})},n=()=>{se.get("coupons/getSettings").then(d=>{a.value=!!parseInt(d.show_on_checkout)}).catch(d=>{var u;d.status_code=="422"?Y.validationErrors(d):Y.error((u=d.data)==null?void 0:u.message)}).finally(()=>{})},l=d=>{const u=ke().format("YYYY-MM-DD"),c=ke(d).format("YYYY-MM-DD");return c==="Invalid date"?!1:c<u};return he(()=>{n()}),(d,u)=>{const c=b("el-button"),h=b("el-table-column"),v=b("el-tooltip"),y=b("router-link"),g=b("el-dropdown-item"),B=b("el-dropdown-menu"),w=b("el-dropdown"),C=b("el-table");return A(),U(tt,{permission:"coupons/view"},{default:r(()=>[i("div",ple,[o(Ua,{title:f(p)("Coupons")},{action:r(()=>[o(c,{tag:"router-link",type:"primary",to:{name:"add_or_edit_coupon"}},{default:r(()=>[O(m(f(p)("Add Coupon")),1)]),_:1})]),_:1},8,["title"]),i("div",fle,[o(bn,{table:f(t),"has-mobile-slot":!0},{mobile:r(()=>[f(t).isLoading()?(A(),U(cle,{key:0})):x("",!0),f(t).isLoading()?x("",!0):(A(),U(rle,{key:1,table:f(t)},null,8,["table"]))]),default:r(()=>[f(t).isLoading()?(A(),U(Ite,{key:0,couponTable:f(t),"next-page-count":f(t).nextPageCount},null,8,["couponTable","next-page-count"])):(A(),_("div",hle,[o(C,{data:f(t).getTableData(),class:"w-full compact-table full-compact"},{empty:r(()=>[o(Te,{icon:"Empty/Order","has-dark":"",text:f(p)("No coupons available at the moment.")},null,8,["text"])]),default:r(()=>[o(h,{width:100,label:f(p)("ID")},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id}}},{default:r(()=>[O(" #"+m(f(nt)(F.row.id)),1)]),_:2},1032,["to"])]),_:1},8,["label"]),f(t).isColumnVisible("title")?(A(),U(h,{key:0,label:f(p)("Title"),width:220},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[O(m(F.row.title),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(h,{label:f(p)("Code"),width:200},{default:r(F=>[i("code",{class:"copyable-content",onClick:S=>{f(Vl).copy(F.row.code)}},m(F.row.code),9,mle)]),_:1},8,["label"]),o(h,{label:f(p)("Amount"),width:120},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[O(m(F.row.type!=="percentage"?f(lt)(F.row.amount,!0):F.row.amount+"%"),1)]),_:2},1032,["to"])]),_:1},8,["label"]),o(h,{label:f(p)("Usage"),width:150},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[i("span",null,m(f(nt)(F.row.use_count??0)),1),u[0]||(u[0]=i("span",{class:"px-1"},"/",-1)),i("span",null,m(F.row.conditions.max_uses>0?F.row.conditions.max_uses:f(p)("Unlimited")),1)]),_:2,__:[0]},1032,["to"])]),_:1},8,["label"]),f(t).isColumnVisible("stackable")?(A(),U(h,{key:1,label:f(p)("Stackable"),width:120},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[i("span",_le,m(F.row.stackable),1)]),_:2},1032,["to"])]),_:1},8,["label"])):x("",!0),o(h,{label:f(p)("Status"),width:120},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[o(ut,{status:F.row.status},{default:r(()=>[O(m(l(F.row.end_date)?f(p)("Expired"):F.row.status),1)]),_:2},1032,["status"]),F.row.status==="scheduled"?(A(),U(v,{key:0,effect:"dark",placement:"top","popper-class":"fct-label-hint-popover fct-tooltip","show-after":400,"hide-after":0},{content:r(()=>[O(m(f(p)("Available On: %s",f(Ps)(F.row.start_date,!0))),1)]),default:r(()=>[o(z,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):x("",!0)]),_:2},1032,["to"])]),_:1},8,["label"]),o(h,{label:f(p)("Expiry Date"),width:120},{default:r(F=>[o(wt,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[i("span",null,[isNaN(Date.parse(F.row.end_date))?(A(),_(H,{key:1},[O("n/a")],64)):(A(),U(Lt,{key:0,"date-time":F.row.end_date,"with-time":!0},null,8,["date-time"]))])]),_:2},1032,["to"])]),_:1},8,["label"]),f(t).isColumnVisible("actions")?(A(),U(h,{key:2,label:f(p)("Actions"),width:100,align:"right",fixed:"right"},{default:r(F=>[o(w,{trigger:"click",class:"fct-more-option-wrap","popper-class":"fct-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:r(()=>[o(B,null,{default:r(()=>[F.row.id?(A(),U(g,{key:0,class:"item-link"},{default:r(()=>[o(y,{to:{name:"add_or_edit_coupon",params:{coupon_id:F.row.id,action:"edit"}}},{default:r(()=>[o(z,{name:"Edit"}),O(" "+m(f(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):x("",!0),o(g,{command:{action:"delete",coupon:F.row},class:"item-destructive"},{default:r(()=>[o(z,{name:"Delete"}),O(" "+m(f(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:r(()=>[i("span",gle,[o(z,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])):x("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])])]),_:1})}}},vle={class:"fct-add-edit-coupon-wrapper fct-layout-width"},yle={class:"single-page-header"},ble={class:"single-page-body"},wle={class:"fct-add-edit-coupon"},Cle={class:"fct-add-edit-coupon-main"},Ble={class:"fct-add-edit-coupon-aside"},kle={class:"fct-admin-sidebar"},Fle={__name:"SingleCouponLoader",setup(e){return(t,a)=>{const s=b("el-skeleton-item"),n=b("el-skeleton"),l=b("el-breadcrumb-item"),d=b("el-breadcrumb");return A(),_("div",vle,[i("div",yle,[o(d,{"separator-icon":f(la)},{default:r(()=>[o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),o(l,null,{default:r(()=>[o(n,{animated:!0},{template:r(()=>[o(s,{variant:"p",class:"w-[60px] h-4"})]),_:1})]),_:1})]),_:1},8,["separator-icon"])]),i("div",ble,[i("div",wle,[i("div",Cle,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Discount Value"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"}),o(s,{variant:"p",class:"max-w-[400px] h-4"}),o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})]),i("div",Ble,[i("div",kle,[o(re,null,{default:r(()=>[o(Ae,{title:f(p)("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),o(le,null,{default:r(()=>[o(n,{animated:!0,class:"flex flex-col gap-3"},{template:r(()=>[o(s,{variant:"p",class:"w-full h-4"}),o(s,{variant:"p",class:"w-2/3 h-4"}),o(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})])])])])])}}};ke.extend(Qu);ke.extend(Du);const xle={name:"AddOrEditCoupon",props:{coupon_id:{type:[String,Number],required:!0}},components:{CardContainer:re,CardHeader:Ae,CardBody:le,LabelHint:Ge,ValidationError:st,CopyToClipboard:ma,DynamicTemplates:kn,SaveBar:wn,ProductVariationSelector:Iu,SingleCouponLoader:Fle,Activity:wp},data(){return{changes_made:0,creating:!1,updating:!1,keyboardShortcuts:null,coupon:{type:"fixed",status:"active",stackable:"no",show_on_checkout:"no",title:"",code:"",priority:0,amount:0,start_date:"",end_date:"",notes:"",conditions:{buy_quantity:1,get_quantity:1,excluded_categories:[],included_categories:[],excluded_products:[],included_products:[],min_purchase_amount:"",max_purchase_amount:"",allowed_user_ids:[],allowed_user_roles:[],apply_to_quantity:"no",apply_to_whole_cart:"yes",max_per_customer:"",max_discount_amount:"",max_uses:"",buy_products:[],get_products:[],is_recurring:"no"}},validationErrors:{},minQuantity:1,maxQuantity:100,minPurchaseAmount:0,maxPurchaseAmount:1e4,minDiscountAmount:0,minLimit:0,maxLimit:1e3,categories:[],usageError:!1,isEndDateEnabled:!1,fetchingCoupon:!1,isInitialLoading:!1,showDynamicTemplates:!1,showManageActivity:!1}},methods:{translate:p,generateRandomCouponCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let a=0;a<8;a++)t+=e.charAt(Math.floor(Math.random()*e.length));this.coupon.code=t},onChangeCouponInput(e,t){if(t=parseInt(t),isNaN(t)||t===""){this.coupon[e]="";return}if(e==="priority"&&(t<0||t>100)){this.coupon[e]=0;return}if((e==="buy_quantity"||e==="get_quantity")&&(t<this.minQuantity||t>this.maxQuantity)){this.coupon[e]=this.minQuantity;return}if((e==="min_purchase_amount"||e==="max_discount_amount")&&(t<this.minPurchaseAmount||t>this.maxPurchaseAmount)){this.coupon.conditions[e]=this.minPurchaseAmount;return}if(e==="amount"){if(this.coupon.type==="fixed"&&(t<this.minDiscountAmount||t>this.maxDiscountAmount)){this.coupon[e]=this.minDiscountAmount;return}if(this.coupon.type==="percentage"&&(t<this.minDiscountAmount||t>this.maxDiscountAmount)){this.coupon[e]=this.minDiscountAmount;return}}if((e==="max_uses"||e==="max_per_customer")&&(t<this.minLimit||t>this.maxLimit)){this.coupon[e]=this.minLimit;return}},preventInvalidChars(e,t=!1){let a=["-",".","+"];t&&(a=["-","+"]),a.includes(e.key)&&e.preventDefault()},handleChangesMade(){this.changes_made++},setDefaultStatus(){const e=new Date,t=this.coupon.start_date?new Date(this.coupon.start_date):null,a=this.coupon.end_date?new Date(this.coupon.end_date):null;this.coupon.status!=="disabled"&&(a===null&&(this.isEndDateEnabled=!1),!t&&!a?this.coupon.status="active":t&&e<t?this.coupon.status="scheduled":a&&e>a?this.coupon.status="expired":this.coupon.status="active")},disabledStartDate(e){const t=new Date;return t.setHours(0,0,0,0),e&&e.getTime()<t.getTime()},disabledEndDate(e){const t=this.coupon.start_date?new Date(this.coupon.start_date):new Date;return t.setHours(0,0,0,0),e&&e.getTime()<t.getTime()},formatDate(e){return!e||e==="0000-00-00 00:00:00"?null:ke(e).format("YYYY-MM-DD HH:mm:ssZ")},formatAmount(){this.coupon.amount!==null&&(this.coupon.type!=="percentage"&&(this.coupon.amount=lt(this.coupon.amount,!1)),this.coupon.conditions.min_purchase_amount!==null&&(this.coupon.conditions.min_purchase_amount?this.coupon.conditions.min_purchase_amount=lt(this.coupon.conditions.min_purchase_amount,!1):this.coupon.conditions.min_purchase_amount=""),this.coupon.conditions.max_discount_amount!==null&&(this.coupon.conditions.max_discount_amount?this.coupon.conditions.max_discount_amount=lt(this.coupon.conditions.max_discount_amount,!1):this.coupon.conditions.max_discount_amount=""),this.coupon.conditions.max_purchase_amount||(this.coupon.conditions.max_purchase_amount=""),this.coupon.conditions.max_uses||(this.coupon.conditions.max_uses=""),this.coupon.conditions.max_per_customer||(this.coupon.conditions.max_per_customer=""),this.coupon.conditions.min_purchase_amount||(this.coupon.conditions.min_purchase_amount=""))},parseProductIds(e){return Array.isArray(e)?e.map(t=>parseInt(t,10)):[]},reloadPage(){return window.location.reload()},validateAndFormatDate(e){let t=this.formatDate(e);return t!==null&&t!=="Invalid date"?t:null},validateDate(){this.coupon.start_date=this.validateAndFormatDate(this.coupon.start_date),this.coupon.end_date=this.validateAndFormatDate(this.coupon.end_date)},fetchTerms(){se.get("products/fetch-term").then(e=>{this.categories=e.taxonomies["product-categories"].terms}).catch(e=>{var t;e.status_code=="422"?Y.validationErrors(e):Y.error((t=e.data)==null?void 0:t.message)}).finally(()=>{})},fetchCoupon(){this.fetchingCoupon=!0,this.isInitialLoading=!0,se.get(`coupons/${this.coupon_id}`,{}).then(e=>{var s,n;const t=(s=e==null?void 0:e.coupon)==null?void 0:s.start_date,a=(n=e==null?void 0:e.coupon)==null?void 0:n.end_date;t&&t!=="0000-00-00 00:00:00"&&(e.coupon.start_date=ke.utc(t).tz(ke.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),a&&a!=="0000-00-00 00:00:00"&&(e.coupon.end_date=ke.utc(a).tz(ke.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),e=e.coupon,this.coupon=e,this.coupon.start_date=this.formatDate(this.coupon.start_date),this.coupon.end_date=this.formatDate(this.coupon.end_date),this.coupon.end_date!==null&&(this.isEndDateEnabled=!0),this.coupon.end_date=this.coupon.end_date!==null&&this.coupon.end_date!=="Invalid date"?this.coupon.end_date:null,this.coupon.conditions.excluded_products=this.parseProductIds(e.conditions.excluded_products),this.coupon.conditions.included_products=this.parseProductIds(e.conditions.included_products),this.formatAmount(),this.setDefaultStatus(),this.showDynamicTemplates=!0}).catch(e=>{var t;errors.status_code=="422"?Y.validationErrors(errors):Y.error((t=errors.data)==null?void 0:t.message),console.error("Error fetching coupon: ",e)}).finally(()=>{this.fetchingCoupon=!1,this.isInitialLoading=!1,this.changes_made=0})},updateCoupon(){var e,t;this.updating=!0,this.validateDate(),(e=this.$refs.dynamic_templates)==null||e.beforeUpdatingData({data:{coupon:this.coupon}}),se.put(`coupons/${this.coupon_id}`,{...this.coupon,metaValue:(t=this.$refs.dynamic_templates)==null?void 0:t.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),Y.success(a.message),this.validationErrors={},this.setDefaultStatus(),this.changes_made=0}).catch(a=>{var s;a.status_code=="422"?(Y.validationErrors(a),this.validationErrors=a):Y.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.updating=!1,this.changes_made=0})},addCoupon(){var e,t;this.creating=!0,this.validateDate(),(e=this.$refs.dynamic_templates)==null||e.beforeUpdatingData({data:{coupon:this.coupon}}),se.post("coupons",{...this.coupon,metaValue:(t=this.$refs.dynamic_templates)==null?void 0:t.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),Y.success(a.message),this.$router.push({name:"coupons"}),this.validationErrors={}}).catch(a=>{var s;a.status_code=="422"?(Y.validationErrors(a),this.validationErrors=a):Y.error((s=a.data)==null?void 0:s.message)}).finally(()=>{this.creating=!1})}},computed:{ArrowRight(){return la},maxDiscountAmount(){return this.coupon.type==="percentage"?100:999999}},watch:{coupon:{handler(){this.handleChangesMade()},deep:!0}},mounted(){this.keyboardShortcuts=Ao(),this.fetchTerms(),this.coupon_id?(this.fetchCoupon(),this.keyboardShortcuts.bind(["mod+s"],e=>{e.preventDefault(),this.updateCoupon()}),window.onbeforeunload=()=>{if(this.changes_made>1)return!0}):this.keyboardShortcuts.bind(["mod+s"],e=>{e.preventDefault(),this.addCoupon()})},beforeRouteLeave(e,t,a){var s;(s=this.keyboardShortcuts)!=null&&s.unbind&&this.keyboardShortcuts.unbind("mod+s"),a()}},Ule={class:"fct-add-edit-coupon-wrapper fct-layout-width"},Sle={class:"single-page-header"},Ele={class:"single-page-body"},Qle={class:"fct-add-edit-coupon"},Dle={class:"fct-add-edit-coupon-main"},Ile={class:"flex gap-2 items-center justify-between w-full mb-2.5"},$le={class:"form-note"},Tle=["innerHTML"],Mle={key:1},Vle=["innerHTML"],Lle=["innerHTML"],Ole=["innerHTML"],Hle={class:"fct-add-edit-coupon-aside"},Rle={class:"fct-admin-sidebar"},Ple={class:"fct-admin-sidebar-item"},Kle={key:0,class:"flex items-center gap-1"},Nle={class:"text-sm font-medium text-system-dark dark:text-gray-300"},Gle={key:1},zle={class:"fct-admin-sidebar-item mt-5 hidden"},jle={class:"sidebar-title mb-3"},Yle={class:"fct-bullet-lists"},qle={class:"fct-admin-sidebar-item mt-5 hidden"},Wle={class:"sidebar-title mb-3"},Xle={class:"fct-bullet-lists"},Jle={key:0};function Zle(e,t,a,s,n,l){const d=b("SaveBar"),u=b("SingleCouponLoader"),c=b("el-breadcrumb-item"),h=b("el-breadcrumb"),v=b("CardHeader"),y=b("el-input"),g=b("validation-error"),B=b("el-form-item"),w=b("el-col"),C=b("LabelHint"),F=b("el-row"),S=b("CardBody"),E=b("CardContainer"),k=b("el-option"),Q=b("el-select"),I=b("ProductVariationSelector"),D=b("el-checkbox"),M=b("el-radio"),$=b("el-radio-group"),V=b("el-form"),L=b("CopyToClipboard"),R=b("el-date-picker"),K=b("DynamicTemplates"),J=b("Activity");return A(),_("div",Ule,[o(d,{isActive:n.changes_made>0?"is-active":"",loading:a.coupon_id?n.updating:n.creating,onSave:t[0]||(t[0]=W=>a.coupon_id?l.updateCoupon():l.addCoupon()),onDiscard:l.reloadPage,"show-cmnd-icon":!0,saveButtonText:a.coupon_id?l.translate("Update"):l.translate("Create"),loadingText:a.coupon_id?l.translate("Updating"):l.translate("Creating")},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"]),n.fetchingCoupon?(A(),U(u,{key:0})):x("",!0),n.fetchingCoupon?x("",!0):(A(),_(H,{key:1},[i("div",Sle,[o(h,{"separator-icon":l.ArrowRight},{default:r(()=>[o(c,{to:{name:"coupons"}},{default:r(()=>[O(m(l.translate("Coupons")),1)]),_:1}),o(c,null,{default:r(()=>[O(m(a.coupon_id?l.translate("Edit Coupon"):l.translate("Add Coupon")),1)]),_:1}),a.coupon_id?(A(),U(c,{key:0},{default:r(()=>[O(m(n.coupon.title),1)]),_:1})):x("",!0)]),_:1},8,["separator-icon"])]),i("div",Ele,[i("div",Qle,[i("div",Dle,[o(V,{model:n.coupon,"label-position":"top","require-asterisk-position":"right"},{default:r(()=>[o(E,null,{default:r(()=>[o(v,{title:l.translate("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:24},{default:r(()=>[o(B,{label:l.translate("Title"),required:""},{default:r(()=>{var W,ae;return[o(y,{modelValue:n.coupon.title,"onUpdate:modelValue":t[1]||(t[1]=Z=>n.coupon.title=Z),placeholder:l.translate("Enter title"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("title")?"is-error":""),maxlength:"50",id:"title"},null,8,["modelValue","placeholder","class"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("title")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"title"},null,8,["validation-errors"])):x("",!0)]}),_:1},8,["label"])]),_:1}),o(w,{lg:12},{default:r(()=>[o(B,null,{default:r(()=>{var W,ae;return[i("div",Ile,[o(C,{title:l.translate("Code"),required:""},null,8,["title"]),i("span",{class:"text-system-dark text-xs cursor-pointer hover:underline dark:text-gray-50 underline",onClick:t[2]||(t[2]=(...Z)=>l.generateRandomCouponCode&&l.generateRandomCouponCode(...Z))},m(l.translate("Generate Random Code")),1)]),o(y,{modelValue:n.coupon.code,"onUpdate:modelValue":t[3]||(t[3]=Z=>n.coupon.code=Z),placeholder:l.translate("Eg. COUPON10"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("code")?"is-error":""),maxlength:"20"},null,8,["modelValue","placeholder","class"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("code")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"code"},null,8,["validation-errors"])):x("",!0),i("div",$le,[i("p",null,m(l.translate("Customers must enter this code at checkout.")),1)])]}),_:1})]),_:1}),o(w,{lg:12},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("Coupon Priority"),content:l.translate("Coupons will be calculated based on their priority. The lower the number the higher the priority is.")},null,8,["title","content"])]),default:r(()=>{var W,ae;return[o(y,{modelValue:n.coupon.priority,"onUpdate:modelValue":t[4]||(t[4]=Z=>n.coupon.priority=Z),type:"number",placeholder:l.translate("Enter priority"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("priority")?"is-error":""),min:"0",max:"100",onInput:t[5]||(t[5]=Z=>{l.onChangeCouponInput("priority",Z)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","onKeypress"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("priority")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"priority"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(E,null,{default:r(()=>[o(v,{title:l.translate("Discount Details"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:8},{default:r(()=>[o(B,{label:l.translate("Type"),required:""},{default:r(()=>{var W;return[o(Q,{modelValue:n.coupon.type,"onUpdate:modelValue":t[6]||(t[6]=ae=>n.coupon.type=ae),placeholder:l.translate("Select coupon type"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("type")?"is-error":""),"default-first-option":""},{default:r(()=>[o(k,{label:l.translate("Fixed"),value:"fixed"},null,8,["label"]),o(k,{label:l.translate("Percentage"),value:"percentage"},null,8,["label"])]),_:1},8,["modelValue","placeholder","class"])]}),_:1},8,["label"])]),_:1}),n.coupon.type==="fixed"||n.coupon.type==="percentage"?(A(),_(H,{key:0},[o(w,{lg:8},{default:r(()=>[o(B,{label:n.coupon.type==="percentage"?l.translate("Discount Percentage (%)"):l.translate("Discount Amount"),required:""},{default:r(()=>{var W;return[o(y,{modelValue:n.coupon.amount,"onUpdate:modelValue":t[7]||(t[7]=ae=>n.coupon.amount=ae),type:"number",placeholder:"0.00",min:n.minDiscountAmount,max:l.maxDiscountAmount,step:"0.01",onInput:t[8]||(t[8]=ae=>{l.onChangeCouponInput("amount",ae)}),onKeypress:t[9]||(t[9]=ae=>l.preventInvalidChars(ae,!0))},{prefix:r(()=>[n.coupon.type==="fixed"?(A(),_("span",{key:0,innerHTML:e.appVars.shop.currency_sign},null,8,Tle)):(A(),_("span",Mle,"%"))]),_:1},8,["modelValue","min","max"]),(W=n.validationErrors)!=null&&W.hasOwnProperty("amount")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"amount"},null,8,["validation-errors"])):x("",!0)]}),_:1},8,["label"])]),_:1}),n.coupon.type==="percentage"?(A(),U(w,{key:0,lg:8},{default:r(()=>[o(B,{label:l.translate("Max Discount Amount")},{default:r(()=>{var W;return[o(y,{modelValue:n.coupon.conditions.max_discount_amount,"onUpdate:modelValue":t[10]||(t[10]=ae=>n.coupon.conditions.max_discount_amount=ae),type:"number",placeholder:l.translate("leave empty or 0 for no max limit"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("max_discount_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:e.appVars.shop.currency_sign},null,8,Vle)]),_:1},8,["modelValue","placeholder","class"]),o(g,{"validation-errors":n.validationErrors,"field-key":"max_discount_amount"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})):x("",!0)],64)):x("",!0)]),_:1})]),_:1})]),_:1}),o(E,null,{default:r(()=>[o(v,{title:l.translate("Usage Restrictions"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:12},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("Min Spend Amount"),content:l.translate("Minimum spend (subtotal) allowed to use the coupon.")},null,8,["title","content"])]),default:r(()=>{var W,ae;return[o(y,{modelValue:n.coupon.conditions.min_purchase_amount,"onUpdate:modelValue":t[11]||(t[11]=Z=>n.coupon.conditions.min_purchase_amount=Z),type:"number",placeholder:"0.00",class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("min_purchase_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:e.appVars.shop.currency_sign},null,8,Lle)]),_:1},8,["modelValue","class"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("min_purchase_amount")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"min_purchase_amount"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(w,{lg:12},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("Max Spend Amount"),content:l.translate("Set the maximum spend (subtotal) allowed when using the coupon.")},null,8,["title","content"])]),default:r(()=>{var W,ae;return[o(y,{modelValue:n.coupon.conditions.max_purchase_amount,"onUpdate:modelValue":t[12]||(t[12]=Z=>n.coupon.conditions.max_purchase_amount=Z),type:"number",placeholder:l.translate("leave empty or 0 for no max limit"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("max_purchase_amount")?"is-error":"")},{prefix:r(()=>[i("span",{innerHTML:e.appVars.shop.currency_sign},null,8,Ole)]),_:1},8,["modelValue","placeholder","class"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("max_purchase_amount")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_purchase_amount"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(w,{md:12},{default:r(()=>[o(B,{label:l.translate("Include Categories")},{default:r(()=>[o(Q,{modelValue:n.coupon.conditions.included_categories,"onUpdate:modelValue":t[13]||(t[13]=W=>n.coupon.conditions.included_categories=W),multiple:"",placeholder:l.translate("Any Category"),filterable:"",remote:"","reserve-keyword":!1},{default:r(()=>[(A(!0),_(H,null,X(n.categories,W=>(A(),U(k,{key:W.value,label:W.label,value:W.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(w,{md:12},{default:r(()=>[o(B,{label:l.translate("Exclude Categories")},{default:r(()=>[o(Q,{modelValue:n.coupon.conditions.excluded_categories,"onUpdate:modelValue":t[14]||(t[14]=W=>n.coupon.conditions.excluded_categories=W),multiple:"",placeholder:l.translate("No Categories"),filterable:"",remote:"","reserve-keyword":!1},{default:r(()=>[(A(!0),_(H,null,X(n.categories,W=>(A(),U(k,{key:W.value,label:W.label,value:W.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(w,{md:24},{default:r(()=>[o(B,{label:l.translate("Include Products")},{default:r(()=>[o(I,{modelValue:n.coupon.conditions.included_products,"onUpdate:modelValue":t[15]||(t[15]=W=>n.coupon.conditions.included_products=W)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(w,{md:24},{default:r(()=>[o(B,{label:l.translate("Excluded Products")},{default:r(()=>[o(I,{modelValue:n.coupon.conditions.excluded_products,"onUpdate:modelValue":t[16]||(t[16]=W=>n.coupon.conditions.excluded_products=W)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(w,{md:24},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("By Email Address"),content:l.translate("List of email addresses that can use the coupon. Separate multiple emails with commas. You may also use regular expressions.")},null,8,["title","content"])]),default:r(()=>{var W;return[o(y,{autocomplete:"off",modelValue:n.coupon.conditions.email_restrictions,"onUpdate:modelValue":t[17]||(t[17]=ae=>n.coupon.conditions.email_restrictions=ae),type:"text",placeholder:l.translate("email1@domain.com, *@special.com, ... or regex pattern")},null,8,["modelValue","placeholder"]),(W=n.validationErrors)!=null&&W.hasOwnProperty("email_restrictions")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"email_restrictions"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(w,{md:24},{default:r(()=>{var W;return[o(B,null,{label:r(()=>[o(C,{title:l.translate("Recurring Coupon"),content:l.translate("Mark this coupon as recurring to apply it automatically to every future subscription order. This discount will automatically apply on every renewal. However, the coupon will not be applied if it reduces the payable amount to zero.")},null,8,["title","content"])]),default:r(()=>[o(D,{modelValue:n.coupon.conditions.is_recurring,"onUpdate:modelValue":t[18]||(t[18]=ae=>n.coupon.conditions.is_recurring=ae),label:l.translate("Make this coupon recurring"),"true-value":"yes","false-value":"no"},null,8,["modelValue","label"])]),_:1}),(W=n.validationErrors)!=null&&W.hasOwnProperty("is_recurring")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"is_recurring"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}),o(E,null,{default:r(()=>[o(v,{title:l.translate("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:12},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("Total Limit"),content:l.translate("Total number of times this coupon can be redeemed across the entire store.")},null,8,["title","content"])]),default:r(()=>{var W,ae;return[o(y,{modelValue:n.coupon.conditions.max_uses,"onUpdate:modelValue":t[19]||(t[19]=Z=>n.coupon.conditions.max_uses=Z),type:"number",placeholder:l.translate("Total limit"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("max_uses")?"is-error":n.usageError),min:n.minLimit,max:n.maxLimit,onInput:t[20]||(t[20]=Z=>{l.onChangeCouponInput("max_uses",Z)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),(ae=n.validationErrors)!=null&&ae.hasOwnProperty("max_uses")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"max_uses"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1}),o(w,{lg:12},{default:r(()=>[o(B,null,{label:r(()=>[o(C,{title:l.translate("Per User Limit"),content:l.translate("Maximum an user can use. 0 means unlimited")},null,8,["title","content"])]),default:r(()=>[o(y,{modelValue:n.coupon.conditions.max_per_customer,"onUpdate:modelValue":t[21]||(t[21]=W=>n.coupon.conditions.max_per_customer=W),type:"number",placeholder:l.translate("Max limit per user"),class:oe(n.validationErrors.hasOwnProperty("max_per_customer")?"is-error":""),min:n.minLimit,max:n.maxLimit,onInput:t[22]||(t[22]=W=>{l.onChangeCouponInput("max_per_customer",W)}),onKeypress:l.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),o(g,{"validation-errors":n.validationErrors,"field-key":"max_per_customer"},null,8,["validation-errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(E,null,{default:r(()=>[o(v,{title:l.translate("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:24},{default:r(()=>[o(B,{label:l.translate("Status")},{default:r(()=>[o($,{modelValue:n.coupon.status,"onUpdate:modelValue":t[23]||(t[23]=W=>n.coupon.status=W)},{default:r(()=>[o(M,{value:"active",label:l.translate("Active")},null,8,["label"]),o(M,{value:"disabled",label:l.translate("Disabled")},null,8,["label"]),o(M,{disabled:"",value:"expired",label:l.translate("Expired")},null,8,["label"])]),_:1},8,["modelValue"]),o(g,{"validation-errors":n.validationErrors,"field-key":"status"},null,8,["validation-errors"])]),_:1},8,["label"])]),_:1}),o(w,{lg:24},{default:r(()=>[o(B,{label:l.translate("Internal Notes")},{default:r(()=>{var W;return[o(y,{modelValue:n.coupon.notes,"onUpdate:modelValue":t[24]||(t[24]=ae=>n.coupon.notes=ae),type:"textarea",placeholder:l.translate("Enter note"),class:oe((W=n.validationErrors)!=null&&W.hasOwnProperty("notes")?"is-error":"")},null,8,["modelValue","placeholder","class"]),o(g,{"validation-errors":n.validationErrors,"field-key":"notes"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),o(w,{lg:24},{default:r(()=>{var W;return[o(B,null,{label:r(()=>[o(C,{title:l.translate("Stackable"),content:l.translate("Yes means the coupon can be applied with other coupons")},null,8,["title","content"])]),default:r(()=>[o($,{modelValue:n.coupon.stackable,"onUpdate:modelValue":t[25]||(t[25]=ae=>n.coupon.stackable=ae)},{default:r(()=>[o(M,{value:"yes"},{default:r(()=>[O(m(l.translate("Yes")),1)]),_:1}),o(M,{value:"no"},{default:r(()=>[O(m(l.translate("No")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(W=n.validationErrors)!=null&&W.hasOwnProperty("stackable")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"stackable"},null,8,["validation-errors"])):x("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",Hle,[i("div",Rle,[o(E,null,{default:r(()=>[o(v,{title:l.translate("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,null,{default:r(()=>[i("div",Ple,[n.coupon.code?(A(),_("div",Kle,[i("span",Nle,m(l.translate("Coupon code"))+": "+m(n.coupon.code),1),o(L,{text:n.coupon.code,showMode:"basic_copy_btn",tooltipText:l.translate("Copy discount code")},null,8,["text","tooltipText"])])):(A(),_("div",Gle,m(l.translate("No discount code yet")),1))]),i("div",zle,[i("h4",jle,m(l.translate("Type & Method")),1),i("ul",Yle,[i("li",null,[i("span",null,m(l.translate("Amount off Products")),1)]),i("li",null,[i("span",null,m(l.translate("Code")),1)])])]),i("div",qle,[i("h4",Wle,m(l.translate("Details")),1),i("ul",Xle,[i("li",null,[i("span",null,m(l.translate("For Online Store")),1)]),i("li",null,[i("span",null,m(l.translate("No Min Purchase Requirement")),1)]),i("li",null,[i("span",null,m(l.translate("All Customers")),1)])])])]),_:1})]),_:1}),o(E,null,{default:r(()=>[o(v,{title:l.translate("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,{class:"pb-1.5"},{default:r(()=>[o(V,{"label-position":"top"},{default:r(()=>[o(F,{gutter:20},{default:r(()=>[o(w,{lg:24},{default:r(()=>[o(B,{label:l.translate("Start Date & Time")},{default:r(()=>[o(R,{modelValue:n.coupon.start_date,"onUpdate:modelValue":t[26]||(t[26]=W=>n.coupon.start_date=W),type:"datetime","value-format":"YYYY-MM-DDTHH:mm:ssZ",placeholder:l.translate("Start date & time"),onChange:l.setDefaultStatus,"disabled-date":l.disabledStartDate},null,8,["modelValue","placeholder","onChange","disabled-date"])]),_:1},8,["label"])]),_:1}),o(w,{lg:24},{default:r(()=>[o(B,null,{default:r(()=>[o(D,{modelValue:n.isEndDateEnabled,"onUpdate:modelValue":t[27]||(t[27]=W=>n.isEndDateEnabled=W),label:l.translate("Set end date & time"),onChange:t[28]||(t[28]=W=>{W||(n.coupon.end_date=null)})},null,8,["modelValue","label"])]),_:1})]),_:1}),n.isEndDateEnabled?(A(),U(w,{key:0,lg:24},{default:r(()=>[o(B,{label:l.translate("End Date & Time")},{default:r(()=>[o(R,{modelValue:n.coupon.end_date,"onUpdate:modelValue":t[29]||(t[29]=W=>n.coupon.end_date=W),type:"datetime","value-format":"YYYY-MM-DDTHH:mm:ssZ",placeholder:l.translate("End date & time"),onChange:l.setDefaultStatus,"disabled-date":l.disabledEndDate},null,8,["modelValue","placeholder","onChange","disabled-date"]),n.validationErrors.hasOwnProperty("end_date")?(A(),U(g,{key:0,"validation-errors":n.validationErrors,"field-key":"end_date"},null,8,["validation-errors"])):x("",!0)]),_:1},8,["label"])]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),n.showDynamicTemplates?(A(),_("div",Jle,[o(K,{filter:"fluent_cart_single_coupon_page",ref:"dynamic_templates",data:{coupon:n.coupon},widgetsQuery:{coupon_id:n.coupon.id},onChange:l.handleChangesMade},null,8,["data","widgetsQuery","onChange"])])):x("",!0),o(E,null,{default:r(()=>[o(v,{title:l.translate("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),o(S,null,{default:r(()=>[o(J,{onReload:l.fetchCoupon,activities:n.coupon.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})])])])],64))])}const ere=be(xle,[["render",Zle]]),tre={name:"CheckoutFields",components:{Animation:na,CardHeader:Ae,Card:re,CardBody:le,SettingsHeader:ea},data(){return{fields:{},settings:{},saving:!1,fetching:!1}},watch:{"settings.basic_info.last_name.enabled"(e){var t,a;e==="yes"&&((a=(t=this.settings.basic_info)==null?void 0:t.first_name)==null?void 0:a.enabled)==="no"&&(this.settings.basic_info.first_name.enabled="yes")}},methods:{translate:p,isFirstNameDisabled(e,t){var a,s;return e==="basic_info"&&t==="first_name"&&((s=(a=this.settings.basic_info)==null?void 0:a.last_name)==null?void 0:s.enabled)==="yes"},shouldDimLabel(e,t){var a,s,n,l,d,u,c;return((n=(s=(a=this.settings)==null?void 0:a[e])==null?void 0:s[t])==null?void 0:n.enabled)==="no"?!0:e==="basic_info"&&t==="full_name"?((d=(l=this.settings.basic_info)==null?void 0:l.first_name)==null?void 0:d.enabled)==="yes"||((c=(u=this.settings.basic_info)==null?void 0:u.last_name)==null?void 0:c.enabled)==="yes":!1},isVisible(e,t){var a,s,n,l;return t==="full_name"?((s=(a=this.settings.basic_info)==null?void 0:a.first_name)==null?void 0:s.enabled)!=="yes"&&((l=(n=this.settings.basic_info)==null?void 0:n.last_name)==null?void 0:l.enabled)!=="yes":!0},getFields(){this.fetching=!0,this.$get("checkout-fields/get-fields").then(e=>{this.fields=e.fields||{},this.settings=e.settings||{}}).catch(e=>{this.handleError(e)}).finally(()=>{this.fetching=!1})},saveFields(){this.saving=!0,this.$post("checkout-fields/save-fields",{settings:this.settings}).then(e=>{this.$notify.success(e.message||this.$t("Settings saved successfully!")),this.getFields()}).catch(e=>{this.handleError(e)}).finally(()=>{this.saving=!1})},formatSectionTitle(e){return e.replace("_"," ")}},mounted(){this.getFields()}},are={class:"setting-wrap"},sre={class:"setting-wrap-inner"},nre={class:"fct-checkout-fields-wrapp"},ore={class:"field-heading"},lre={class:"fct-checkout-fields"},rre={key:0,class:"fct-checkout-field"},ire={class:"fct-checkout-field-info"},Are={class:"fct-checkout-field-label-wrap"},dre={class:"fct-checkout-field-tags"},ure={key:0,class:"fct-checkout-field-info-desc"},cre={key:0,class:"fct-checkout-field-action"},pre={key:1,class:"fct-checkout-field-input"},fre={class:"fct-checkout-field-info"},hre={class:"fct-checkout-field-label-wrap"},mre={key:1,class:"fct-checkout-field-tags"},_re={key:0,class:"fct-checkout-field-info-desc"},gre={key:0,class:"fct-checkout-field-action"},vre={class:"form-section-save-action"};function yre(e,t,a,s,n,l){const d=b("SettingsHeader"),u=b("el-skeleton"),c=b("el-switch"),h=b("el-tag"),v=b("el-checkbox"),y=b("el-input"),g=b("CardBody"),B=b("Card"),w=b("el-button");return A(),_("div",are,[o(d,{heading:l.translate("Checkout Fields"),loading:n.saving,onOnSave:l.saveFields},null,8,["heading","loading","onOnSave"]),i("div",sre,[i("div",nre,[o(B,null,{default:r(()=>[o(g,null,{default:r(()=>[o(u,{loading:n.fetching,animated:"",rows:5},null,8,["loading"]),n.fetching?x("",!0):(A(!0),_(H,{key:0},X(n.fields,(C,F)=>(A(),_("div",{key:F,class:"fct-checkout-field-section"},[i("h3",ore,m(l.formatSectionTitle(F)),1),i("div",lre,[C.label?(A(),_("div",rre,[i("div",ire,[i("div",Are,[C.can_alter==="yes"?(A(),U(c,{key:0,modelValue:n.settings[F].enabled,"onUpdate:modelValue":S=>n.settings[F].enabled=S,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):x("",!0),i("span",{class:oe(`fct-checkout-field-label ${n.settings[F].enabled==="no"?"opacity-50":""}`)},m(C.label),3),i("div",dre,[C.can_alter!=="yes"&&n.settings[F].enabled==="yes"?(A(),U(h,{key:0,size:"small"},{default:r(()=>[O(m(l.translate("System")),1)]),_:1})):x("",!0),n.settings[F].required==="yes"&&n.settings[F].enabled==="yes"?(A(),U(h,{key:1,size:"small"},{default:r(()=>[O(m(l.translate("Required")),1)]),_:1})):x("",!0)])]),C.help_text?(A(),_("div",ure,m(C.help_text),1)):x("",!0)]),C.can_alter==="yes"?(A(),_("div",cre,[o(v,{modelValue:n.settings[F].required,"onUpdate:modelValue":S=>n.settings[F].required=S,"true-label":"yes","false-label":"no",disabled:n.settings[F].enabled!=="yes"},{default:r(()=>[O(m(l.translate("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0),n.settings[F].hasOwnProperty("text")&&n.settings[F].enabled==="yes"?(A(),_("div",pre,[o(y,{type:"textarea",modelValue:n.settings[F].text,"onUpdate:modelValue":S=>n.settings[F].text=S,disabled:n.settings[F].enabled!=="yes"},null,8,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0)])):(A(!0),_(H,{key:1},X(C,(S,E)=>(A(),_("div",{key:E,class:"fct-checkout-field"},[i("div",fre,[i("div",hre,[S.can_alter==="yes"?(A(),U(c,{key:0,modelValue:n.settings[F][E].enabled,"onUpdate:modelValue":k=>n.settings[F][E].enabled=k,"active-value":"yes","inactive-value":"no",disabled:l.isFirstNameDisabled(F,E)},null,8,["modelValue","onUpdate:modelValue","disabled"])):x("",!0),i("span",{class:oe(["fct-checkout-field-label",l.shouldDimLabel(F,E)?"opacity-50":""])},m(S.label),3),l.isVisible(S,E)?(A(),_("div",mre,[S.can_alter!=="yes"&&n.settings[F][E].enabled==="yes"?(A(),U(h,{key:0,size:"small"},{default:r(()=>[O(m(l.translate("System")),1)]),_:1})):x("",!0),n.settings[F][E].required==="yes"&&n.settings[F][E].enabled==="yes"?(A(),U(h,{key:1,size:"small"},{default:r(()=>[O(m(l.translate("Required")),1)]),_:1})):x("",!0)])):x("",!0)]),S.help_text?(A(),_("div",_re,m(S.help_text),1)):x("",!0)]),S.can_alter==="yes"&&E!=="first_name"?(A(),_("div",gre,[o(v,{modelValue:n.settings[F][E].required,"onUpdate:modelValue":k=>n.settings[F][E].required=k,"true-label":"yes","false-label":"no",disabled:n.settings[F][E].enabled!=="yes"},{default:r(()=>[O(m(l.translate("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):x("",!0)]))),128))])]))),128))]),_:1})]),_:1}),i("div",vre,[o(w,{type:"primary",onClick:l.saveFields,loading:n.saving},{default:r(()=>[O(m(n.saving?l.translate("Saving"):l.translate("Save")),1)]),_:1},8,["onClick","loading"])])])])])}const bre=be(tre,[["render",yre]]),Rp=De.get("payment_routes");for(const e of Rp)e.props=!0;const Pp=De.get("storage_driver_routes");for(const e of Pp)e.props=!0;var wre={dashboard:{name:"dashboard",path:"/",component:WC,meta:{active_menu:"dashboard",title:"Dashboard"}},orders:{path:"/orders",component:_4,meta:{active_menu:"orders",title:"Orders"},children:[{name:"orders",path:"",component:Ym,meta:{active_menu:"orders",title:"Orders",permission:"orders/view"}},{name:"view_order",path:":order_id(\\d+)/view",component:EI,props:!0,meta:{active_menu:"orders",title:"View Order",permission:["orders/view","orders/manage"]}},{name:"add_order",path:"add",component:l$,props:!0,meta:{active_menu:"orders",title:"Create Order",permission:"orders/create"}}]},products:{name:"products",path:"/products",component:tM,meta:{active_menu:"products",title:"Products",permission:"products/view"}},product_route:{path:"/products/:product_id(\\d+)",component:W$,name:"product_route",meta:{active_menu:"products",title:"Products",permission:["products/view","products/edit","integrations/manage"]},props:!0,children:[{name:"product_edit",path:"",props:!0,component:hO,meta:{active_menu:"products",title:"Product Edit",permission:"products/edit"}},{name:"product_integrations",path:"integrations",props:!0,component:au,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_integration_feed_editor",path:"integrations/:integration_id/:integration_name",component:Od,meta:{active_menu:"products",title:"Edit Integration",permission:"integrations/manage"}},{name:"SingleIntegration",path:"integrations/:integration_id",props:!0,component:BH,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_upgrade_paths",path:"upgrade-paths",props:!0,component:sH,meta:{active_menu:"products",title:"Upgrade Paths",permission:"integrations/manage"}},{name:"Integrations",path:"integrations",props:!0,component:au,meta:{active_menu:"integrations",title:"Product Integrations",permission:"integrations/manage"}}]},customers:{path:"/customers",component:n_,meta:{active_menu:"customers",permission:["customers/view","customers/manage"]},children:[{name:"customers",path:"/customers",component:nm,meta:{active_menu:"customers",title:"Customers",permission:"customers/view"}},{name:"view_customer",path:":customer_id(\\d+)/view",component:JU,props:!0,meta:{active_menu:"customers",title:"View Customer",permission:"customers/view"}}]},reports:{name:"reports",path:"/reports",component:aP,meta:{active_menu:"reports",permission:"reports/view"},children:[{name:"reports_overview",path:"overview",component:XX,meta:{title:"Overview",permission:"reports/view"}},{name:"reports_sales",path:"sales",component:DP,meta:{title:"Sales",permission:"reports/view"}},{name:"reports_orders",path:"orders",component:YG,meta:{title:"Orders",permission:"reports/view"}},{name:"reports_revenue",path:"revenue",component:UK,meta:{title:"Revenue",permission:"reports/view"}},{name:"reports_refunds",path:"refunds",component:Qz,meta:{title:"Refunds",permission:"reports/view"}},{name:"reports_subscriptions",path:"subscriptions",component:Cj,meta:{title:"Subscriptions",permission:"reports/view"}},{name:"subscriptions-retention",path:"subscriptions/subscriptions-retention",component:VY,meta:{title:"Retention",permission:"reports/view"}},{name:"subscriptions-cohorts",path:"subscriptions/subscriptions-cohorts",component:()=>Ze(()=>import("./chunks/Cohort.js?ver=1.3.11"),[],import.meta.url),meta:{title:"Cohorts",permission:"reports/view"}},{name:"future_renewals",path:"subscriptions/future-renewals",component:Pj,meta:{title:"Future Renewals",permission:"reports/view"}},{name:"reports_products",path:"products",component:nX,meta:{title:"Product",permission:"reports/view"}},{name:"reports_customer",path:"customer",component:iq,meta:{title:"Customer",permission:"reports/view"}},{name:"reports_sources",path:"sources",component:Tq,meta:{title:"Sources",permission:"reports/view"}}]},settings:{path:"/settings",component:Nx,meta:{active_menu:"settings",title:"Settings",permission:["store/settings","store/sensitive"]},children:[{name:"store_settings",path:"store-settings",component:_$,meta:{active_menu:"settings",title:"Settings",permission:"store/settings"},children:[{name:"store_setup",path:"",component:Go,meta:{title:"Store Setup"}},{name:"pages_setup",path:"pages_setup",component:Go,meta:{title:"Pages Setup"}},{name:"single_product_setup",path:"single_product_setup",component:Go,meta:{title:"Product Page"}},{name:"cart_and_checkout",path:"cart_and_checkout",component:Go,meta:{title:"Cart & Checkout"}},{name:"checkout_fields",path:"checkout_fields",component:bre,meta:{}}]},{name:"email_notifications",path:"email_notifications",component:$H,meta:{active_menu:"settings",title:"Notifications",permission:"store/sensitive"}},{name:"email_mailing_settings",path:"email_mailing_settings",component:WJ,meta:{active_menu:"settings",title:"Mailing Settings",permission:"store/sensitive"}},{path:"email_notifications/:name/",name:"email_notifications/edit",component:KH,meta:{active_menu:"settings",title:"Edit Notification",permission:"store/sensitive"},props:!0},{path:"email_notifications/add",name:"email_notifications/add",component:d7,meta:{active_menu:"settings",title:"Add Notification",permission:"store/sensitive"}},{name:"licensing",path:"licensing",component:H$,meta:{active_menu:"settings",title:"Licensing",permission:"store/sensitive"}},{name:"payments",path:"payments",component:fx,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"gateway",component:J8,path:"payments",children:Rp,props:!0,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"invoice-packing",path:"invoice-packing",component:e_,meta:{active_menu:"settings",title:"Invoice & Packing",permission:"is_super_admin"}},{name:"roles",path:"roles",component:Tx,meta:{active_menu:"settings",title:"Role Settings",permission:"is_super_admin"}},{name:"addons",path:"addons",component:yJ,meta:{active_menu:"settings",title:"Features & addon",permission:"is_super_admin"}},{name:"coupons",path:"coupons",component:iu,meta:{active_menu:"coupons",title:"Coupons Settings",permission:"is_super_admin"}},{name:"storage",path:"storage",component:e7,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"payment-design",path:"payments/:method/design",component:sF,meta:{active_menu:"settings",title:"Gateway",permission:"is_super_admin"},props:!0},{name:"drivers",component:n7,path:"storage",children:Pp,props:!0,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"tax_settings",path:"tax_settings",component:ZJ,meta:{active_menu:"settings",title:"Tax Settings",permission:"store/settings"},children:[{name:"tax_configurations",path:"",component:ree,meta:{}},{name:"tax_rates",path:"tax_rates",component:Pee,meta:{}},{name:"eu",path:"eu",component:sne,meta:{}},{name:"euo",path:"euo",component:Ioe,meta:{}},{name:"eu_country_tax_rates",path:"eu/:country/:group",component:lu,props:!0,meta:{}},{name:"tax-rates-country-single",path:"tax_rates_country_single/:country/:group",component:lu,props:!0,meta:{}}]}]},integrations:{name:"integrations",path:"/integrations",component:dk,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/view"}},global_feed_editor:{name:"feed_editor",path:"/global_integrations/:integration_id/:integration_name",component:Od,meta:{active_menu:"integrations",title:"Global Integrations",permission:"integrations/view"}},integration_editor:{name:"integration_editor",path:"/integrations/:integration_name",component:xF,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/manage"}},coupons:{name:"coupons",path:"/coupons",component:iu,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/view"}},logs:{name:"logs",path:"/logs",component:X7,meta:{active_menu:"logs",title:"Logs",permission:"is_super_admin"}},taxes:{name:"taxes",path:"/taxes",component:qte,meta:{active_menu:"taxes",title:"taxes",permission:"is_super_admin"}},add_or_edit_coupon_route:{name:"add_or_edit_coupon",path:"/coupons/add_or_edit_coupon/:coupon_id?",component:ere,props:!0,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/manage"}},onboarding:{path:"/onboarding",component:h4,name:"onboarding",meta:{active_menu:"dashboard",title:"Onboarding",permission:"is_super_admin"}}};const Cre={class:"fct-theme-button-container"},Bre={class:"theme-selected-button"},kre={__name:"ThemeToggle",setup(e){const t=T(pe.MODE_LIGHT),a=d=>{t.value!==d&&(t.value=d,pe.apply(d))},s=[{value:"light",label:p("Light"),icon:"Sun"},{value:"dark",label:p("Dark"),icon:"Moon"},{value:"system",label:p("System"),icon:"Tools"}];Ns(()=>{t.value=localStorage.getItem("fcart_admin_theme")??pe.MODE_SYSTEM,t.value.toString().startsWith(pe.MODE_SYSTEM)&&(t.value=pe.MODE_SYSTEM)});const n=d=>{de(()=>{t.value=pe.getCurrentTheme()})},l=d=>{a(d)};return he(()=>{window.addEventListener("onFluentCartThemeChange",n,!1)}),(d,u)=>{const c=b("el-dropdown-item"),h=b("el-dropdown-menu"),v=b("el-dropdown");return A(),_("div",Cre,[o(v,{placement:"bottom-end",trigger:"click","popper-class":"fct-dropdown",onCommand:l},{dropdown:r(()=>[o(h,null,{default:r(()=>[(A(),_(H,null,X(s,y=>o(c,{key:y.value,command:y.value,class:oe({active:t.value===y.value})},{default:r(()=>[o(z,{name:y.icon},null,8,["name"]),O(" "+m(y.label),1)]),_:2},1032,["command","class"])),64))]),_:1})]),default:r(()=>[i("div",Bre,[t.value==="light"?(A(),U(z,{key:0,name:"Sun"})):t.value==="dark"?(A(),U(z,{key:1,name:"Moon"})):t.value==="system"?(A(),U(z,{key:2,name:"Tools"})):x("",!0)])]),_:1})])}}};function us(e){return Array.isArray?Array.isArray(e):Gp(e)==="[object Array]"}function Fre(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function xre(e){return e==null?"":Fre(e)}function Na(e){return typeof e=="string"}function Kp(e){return typeof e=="number"}function Ure(e){return e===!0||e===!1||Sre(e)&&Gp(e)=="[object Boolean]"}function Np(e){return typeof e=="object"}function Sre(e){return Np(e)&&e!==null}function pa(e){return e!=null}function Nr(e){return!e.trim().length}function Gp(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ere="Incorrect 'index' type",Qre=e=>`Invalid value for key ${e}`,Dre=e=>`Pattern length exceeds max of ${e}.`,Ire=e=>`Missing ${e} property in key`,$re=e=>`Property 'weight' in key '${e}' must be a positive integer`,Au=Object.prototype.hasOwnProperty;class Tre{constructor(t){this._keys=[],this._keyMap={};let a=0;t.forEach(s=>{let n=zp(s);this._keys.push(n),this._keyMap[n.id]=n,a+=n.weight}),this._keys.forEach(s=>{s.weight/=a})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function zp(e){let t=null,a=null,s=null,n=1,l=null;if(Na(e)||us(e))s=e,t=du(e),a=Ei(e);else{if(!Au.call(e,"name"))throw new Error(Ire("name"));const d=e.name;if(s=d,Au.call(e,"weight")&&(n=e.weight,n<=0))throw new Error($re(d));t=du(d),a=Ei(d),l=e.getFn}return{path:t,id:a,weight:n,src:s,getFn:l}}function du(e){return us(e)?e:e.split(".")}function Ei(e){return us(e)?e.join("."):e}function Mre(e,t){let a=[],s=!1;const n=(l,d,u)=>{if(pa(l))if(!d[u])a.push(l);else{let c=d[u];const h=l[c];if(!pa(h))return;if(u===d.length-1&&(Na(h)||Kp(h)||Ure(h)))a.push(xre(h));else if(us(h)){s=!0;for(let v=0,y=h.length;v<y;v+=1)n(h[v],d,u+1)}else d.length&&n(h,d,u+1)}};return n(e,Na(t)?t.split("."):t,0),s?a:a[0]}const Vre={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Lre={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Ore={location:0,threshold:.6,distance:100},Hre={useExtendedSearch:!1,getFn:Mre,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Le={...Lre,...Vre,...Ore,...Hre};const Rre=/[^ ]+/g;function Pre(e=1,t=3){const a=new Map,s=Math.pow(10,t);return{get(n){const l=n.match(Rre).length;if(a.has(l))return a.get(l);const d=1/Math.pow(l,.5*e),u=parseFloat(Math.round(d*s)/s);return a.set(l,u),u},clear(){a.clear()}}}class BA{constructor({getFn:t=Le.getFn,fieldNormWeight:a=Le.fieldNormWeight}={}){this.norm=Pre(a,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((a,s)=>{this._keysMap[a.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Na(this.docs[0])?this.docs.forEach((t,a)=>{this._addString(t,a)}):this.docs.forEach((t,a)=>{this._addObject(t,a)}),this.norm.clear())}add(t){const a=this.size();Na(t)?this._addString(t,a):this._addObject(t,a)}removeAt(t){this.records.splice(t,1);for(let a=t,s=this.size();a<s;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(t,a){return t[this._keysMap[a]]}size(){return this.records.length}_addString(t,a){if(!pa(t)||Nr(t))return;let s={v:t,i:a,n:this.norm.get(t)};this.records.push(s)}_addObject(t,a){let s={i:a,$:{}};this.keys.forEach((n,l)=>{let d=n.getFn?n.getFn(t):this.getFn(t,n.path);if(pa(d)){if(us(d)){let u=[];const c=[{nestedArrIndex:-1,value:d}];for(;c.length;){const{nestedArrIndex:h,value:v}=c.pop();if(pa(v))if(Na(v)&&!Nr(v)){let y={v,i:h,n:this.norm.get(v)};u.push(y)}else us(v)&&v.forEach((y,g)=>{c.push({nestedArrIndex:g,value:y})})}s.$[l]=u}else if(Na(d)&&!Nr(d)){let u={v:d,n:this.norm.get(d)};s.$[l]=u}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function jp(e,t,{getFn:a=Le.getFn,fieldNormWeight:s=Le.fieldNormWeight}={}){const n=new BA({getFn:a,fieldNormWeight:s});return n.setKeys(e.map(zp)),n.setSources(t),n.create(),n}function Kre(e,{getFn:t=Le.getFn,fieldNormWeight:a=Le.fieldNormWeight}={}){const{keys:s,records:n}=e,l=new BA({getFn:t,fieldNormWeight:a});return l.setKeys(s),l.setIndexRecords(n),l}function Yo(e,{errors:t=0,currentLocation:a=0,expectedLocation:s=0,distance:n=Le.distance,ignoreLocation:l=Le.ignoreLocation}={}){const d=t/e.length;if(l)return d;const u=Math.abs(s-a);return n?d+u/n:u?1:d}function Nre(e=[],t=Le.minMatchCharLength){let a=[],s=-1,n=-1,l=0;for(let d=e.length;l<d;l+=1){let u=e[l];u&&s===-1?s=l:!u&&s!==-1&&(n=l-1,n-s+1>=t&&a.push([s,n]),s=-1)}return e[l-1]&&l-s>=t&&a.push([s,l-1]),a}const Vs=32;function Gre(e,t,a,{location:s=Le.location,distance:n=Le.distance,threshold:l=Le.threshold,findAllMatches:d=Le.findAllMatches,minMatchCharLength:u=Le.minMatchCharLength,includeMatches:c=Le.includeMatches,ignoreLocation:h=Le.ignoreLocation}={}){if(t.length>Vs)throw new Error(Dre(Vs));const v=t.length,y=e.length,g=Math.max(0,Math.min(s,y));let B=l,w=g;const C=u>1||c,F=C?Array(y):[];let S;for(;(S=e.indexOf(t,w))>-1;){let M=Yo(t,{currentLocation:S,expectedLocation:g,distance:n,ignoreLocation:h});if(B=Math.min(M,B),w=S+v,C){let $=0;for(;$<v;)F[S+$]=1,$+=1}}w=-1;let E=[],k=1,Q=v+y;const I=1<<v-1;for(let M=0;M<v;M+=1){let $=0,V=Q;for(;$<V;)Yo(t,{errors:M,currentLocation:g+V,expectedLocation:g,distance:n,ignoreLocation:h})<=B?$=V:Q=V,V=Math.floor((Q-$)/2+$);Q=V;let L=Math.max(1,g-V+1),R=d?y:Math.min(g+V,y)+v,K=Array(R+2);K[R+1]=(1<<M)-1;for(let W=R;W>=L;W-=1){let ae=W-1,Z=a[e.charAt(ae)];if(C&&(F[ae]=+!!Z),K[W]=(K[W+1]<<1|1)&Z,M&&(K[W]|=(E[W+1]|E[W])<<1|1|E[W+1]),K[W]&I&&(k=Yo(t,{errors:M,currentLocation:ae,expectedLocation:g,distance:n,ignoreLocation:h}),k<=B)){if(B=k,w=ae,w<=g)break;L=Math.max(1,2*g-w)}}if(Yo(t,{errors:M+1,currentLocation:g,expectedLocation:g,distance:n,ignoreLocation:h})>B)break;E=K}const D={isMatch:w>=0,score:Math.max(.001,k)};if(C){const M=Nre(F,u);M.length?c&&(D.indices=M):D.isMatch=!1}return D}function zre(e){let t={};for(let a=0,s=e.length;a<s;a+=1){const n=e.charAt(a);t[n]=(t[n]||0)|1<<s-a-1}return t}const Sl=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Yp{constructor(t,{location:a=Le.location,threshold:s=Le.threshold,distance:n=Le.distance,includeMatches:l=Le.includeMatches,findAllMatches:d=Le.findAllMatches,minMatchCharLength:u=Le.minMatchCharLength,isCaseSensitive:c=Le.isCaseSensitive,ignoreDiacritics:h=Le.ignoreDiacritics,ignoreLocation:v=Le.ignoreLocation}={}){if(this.options={location:a,threshold:s,distance:n,includeMatches:l,findAllMatches:d,minMatchCharLength:u,isCaseSensitive:c,ignoreDiacritics:h,ignoreLocation:v},t=c?t:t.toLowerCase(),t=h?Sl(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const y=(B,w)=>{this.chunks.push({pattern:B,alphabet:zre(B),startIndex:w})},g=this.pattern.length;if(g>Vs){let B=0;const w=g%Vs,C=g-w;for(;B<C;)y(this.pattern.substr(B,Vs),B),B+=Vs;if(w){const F=g-Vs;y(this.pattern.substr(F),F)}}else y(this.pattern,0)}searchIn(t){const{isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n}=this.options;if(t=a?t:t.toLowerCase(),t=s?Sl(t):t,this.pattern===t){let C={isMatch:!0,score:0};return n&&(C.indices=[[0,t.length-1]]),C}const{location:l,distance:d,threshold:u,findAllMatches:c,minMatchCharLength:h,ignoreLocation:v}=this.options;let y=[],g=0,B=!1;this.chunks.forEach(({pattern:C,alphabet:F,startIndex:S})=>{const{isMatch:E,score:k,indices:Q}=Gre(t,C,F,{location:l+S,distance:d,threshold:u,findAllMatches:c,minMatchCharLength:h,includeMatches:n,ignoreLocation:v});E&&(B=!0),g+=k,E&&Q&&(y=[...y,...Q])});let w={isMatch:B,score:B?g/this.chunks.length:1};return B&&n&&(w.indices=y),w}}class Es{constructor(t){this.pattern=t}static isMultiMatch(t){return uu(t,this.multiRegex)}static isSingleMatch(t){return uu(t,this.singleRegex)}search(){}}function uu(e,t){const a=e.match(t);return a?a[1]:null}class jre extends Es{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const a=t===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Yre extends Es{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class qre extends Es{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const a=t.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class Wre extends Es{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const a=!t.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,t.length-1]}}}class Xre extends Es{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const a=t.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Jre extends Es{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const a=!t.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,t.length-1]}}}class qp extends Es{constructor(t,{location:a=Le.location,threshold:s=Le.threshold,distance:n=Le.distance,includeMatches:l=Le.includeMatches,findAllMatches:d=Le.findAllMatches,minMatchCharLength:u=Le.minMatchCharLength,isCaseSensitive:c=Le.isCaseSensitive,ignoreDiacritics:h=Le.ignoreDiacritics,ignoreLocation:v=Le.ignoreLocation}={}){super(t),this._bitapSearch=new Yp(t,{location:a,threshold:s,distance:n,includeMatches:l,findAllMatches:d,minMatchCharLength:u,isCaseSensitive:c,ignoreDiacritics:h,ignoreLocation:v})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Wp extends Es{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let a=0,s;const n=[],l=this.pattern.length;for(;(s=t.indexOf(this.pattern,a))>-1;)a=s+l,n.push([s,a-1]);const d=!!n.length;return{isMatch:d,score:d?0:1,indices:n}}}const Qi=[jre,Wp,qre,Wre,Jre,Xre,Yre,qp],cu=Qi.length,Zre=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,eie="|";function tie(e,t={}){return e.split(eie).map(a=>{let s=a.trim().split(Zre).filter(l=>l&&!!l.trim()),n=[];for(let l=0,d=s.length;l<d;l+=1){const u=s[l];let c=!1,h=-1;for(;!c&&++h<cu;){const v=Qi[h];let y=v.isMultiMatch(u);y&&(n.push(new v(y,t)),c=!0)}if(!c)for(h=-1;++h<cu;){const v=Qi[h];let y=v.isSingleMatch(u);if(y){n.push(new v(y,t));break}}}return n})}const aie=new Set([qp.type,Wp.type]);class sie{constructor(t,{isCaseSensitive:a=Le.isCaseSensitive,ignoreDiacritics:s=Le.ignoreDiacritics,includeMatches:n=Le.includeMatches,minMatchCharLength:l=Le.minMatchCharLength,ignoreLocation:d=Le.ignoreLocation,findAllMatches:u=Le.findAllMatches,location:c=Le.location,threshold:h=Le.threshold,distance:v=Le.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n,minMatchCharLength:l,findAllMatches:u,ignoreLocation:d,location:c,threshold:h,distance:v},t=a?t:t.toLowerCase(),t=s?Sl(t):t,this.pattern=t,this.query=tie(this.pattern,this.options)}static condition(t,a){return a.useExtendedSearch}searchIn(t){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n,ignoreDiacritics:l}=this.options;t=n?t:t.toLowerCase(),t=l?Sl(t):t;let d=0,u=[],c=0;for(let h=0,v=a.length;h<v;h+=1){const y=a[h];u.length=0,d=0;for(let g=0,B=y.length;g<B;g+=1){const w=y[g],{isMatch:C,indices:F,score:S}=w.search(t);if(C){if(d+=1,c+=S,s){const E=w.constructor.type;aie.has(E)?u=[...u,...F]:u.push(F)}}else{c=0,d=0,u.length=0;break}}if(d){let g={isMatch:!0,score:c/d};return s&&(g.indices=u),g}}return{isMatch:!1,score:1}}}const Di=[];function nie(...e){Di.push(...e)}function Ii(e,t){for(let a=0,s=Di.length;a<s;a+=1){let n=Di[a];if(n.condition(e,t))return new n(e,t)}return new Yp(e,t)}const El={AND:"$and",OR:"$or"},$i={PATH:"$path",PATTERN:"$val"},Ti=e=>!!(e[El.AND]||e[El.OR]),oie=e=>!!e[$i.PATH],lie=e=>!us(e)&&Np(e)&&!Ti(e),pu=e=>({[El.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Xp(e,t,{auto:a=!0}={}){const s=n=>{let l=Object.keys(n);const d=oie(n);if(!d&&l.length>1&&!Ti(n))return s(pu(n));if(lie(n)){const c=d?n[$i.PATH]:l[0],h=d?n[$i.PATTERN]:n[c];if(!Na(h))throw new Error(Qre(c));const v={keyId:Ei(c),pattern:h};return a&&(v.searcher=Ii(h,t)),v}let u={children:[],operator:l[0]};return l.forEach(c=>{const h=n[c];us(h)&&h.forEach(v=>{u.children.push(s(v))})}),u};return Ti(e)||(e=pu(e)),s(e)}function rie(e,{ignoreFieldNorm:t=Le.ignoreFieldNorm}){e.forEach(a=>{let s=1;a.matches.forEach(({key:n,norm:l,score:d})=>{const u=n?n.weight:null;s*=Math.pow(d===0&&u?Number.EPSILON:d,(u||1)*(t?1:l))}),a.score=s})}function iie(e,t){const a=e.matches;t.matches=[],pa(a)&&a.forEach(s=>{if(!pa(s.indices)||!s.indices.length)return;const{indices:n,value:l}=s;let d={indices:n,value:l};s.key&&(d.key=s.key.src),s.idx>-1&&(d.refIndex=s.idx),t.matches.push(d)})}function Aie(e,t){t.score=e.score}function die(e,t,{includeMatches:a=Le.includeMatches,includeScore:s=Le.includeScore}={}){const n=[];return a&&n.push(iie),s&&n.push(Aie),e.map(l=>{const{idx:d}=l,u={item:t[d],refIndex:d};return n.length&&n.forEach(c=>{c(l,u)}),u})}class Fn{constructor(t,a={},s){this.options={...Le,...a},this.options.useExtendedSearch,this._keyStore=new Tre(this.options.keys),this.setCollection(t,s)}setCollection(t,a){if(this._docs=t,a&&!(a instanceof BA))throw new Error(Ere);this._myIndex=a||jp(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pa(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const a=[];for(let s=0,n=this._docs.length;s<n;s+=1){const l=this._docs[s];t(l,s)&&(this.removeAt(s),s-=1,n-=1,a.push(l))}return a}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:a=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:l,sortFn:d,ignoreFieldNorm:u}=this.options;let c=Na(t)?Na(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return rie(c,{ignoreFieldNorm:u}),l&&c.sort(d),Kp(a)&&a>-1&&(c=c.slice(0,a)),die(c,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(t){const a=Ii(t,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:l,i:d,n:u})=>{if(!pa(l))return;const{isMatch:c,score:h,indices:v}=a.searchIn(l);c&&n.push({item:l,idx:d,matches:[{score:h,value:l,norm:u,indices:v}]})}),n}_searchLogical(t){const a=Xp(t,this.options),s=(u,c,h)=>{if(!u.children){const{keyId:y,searcher:g}=u,B=this._findMatches({key:this._keyStore.get(y),value:this._myIndex.getValueForItemAtKeyId(c,y),searcher:g});return B&&B.length?[{idx:h,item:c,matches:B}]:[]}const v=[];for(let y=0,g=u.children.length;y<g;y+=1){const B=u.children[y],w=s(B,c,h);if(w.length)v.push(...w);else if(u.operator===El.AND)return[]}return v},n=this._myIndex.records,l={},d=[];return n.forEach(({$:u,i:c})=>{if(pa(u)){let h=s(a,u,c);h.length&&(l[c]||(l[c]={idx:c,item:u,matches:[]},d.push(l[c])),h.forEach(({matches:v})=>{l[c].matches.push(...v)}))}}),d}_searchObjectList(t){const a=Ii(t,this.options),{keys:s,records:n}=this._myIndex,l=[];return n.forEach(({$:d,i:u})=>{if(!pa(d))return;let c=[];s.forEach((h,v)=>{c.push(...this._findMatches({key:h,value:d[v],searcher:a}))}),c.length&&l.push({idx:u,item:d,matches:c})}),l}_findMatches({key:t,value:a,searcher:s}){if(!pa(a))return[];let n=[];if(us(a))a.forEach(({v:l,i:d,n:u})=>{if(!pa(l))return;const{isMatch:c,score:h,indices:v}=s.searchIn(l);c&&n.push({score:h,key:t,value:l,idx:d,norm:u,indices:v})});else{const{v:l,n:d}=a,{isMatch:u,score:c,indices:h}=s.searchIn(l);u&&n.push({score:c,key:t,value:l,norm:d,indices:h})}return n}}Fn.version="7.1.0";Fn.createIndex=jp;Fn.parseIndex=Kre;Fn.config=Le;Fn.parseQuery=Xp;nie(sie);const ps=De.get("admin_url"),uie=[{title:p("Dashboard"),data:{type:"link",url:ps,description:p("Go to dashboard"),show_description:!1}},{title:p("Orders"),data:{type:"link",url:ps+"orders",description:p("Go to order page"),show_description:!1}},{title:p("Customers"),data:{type:"link",url:ps+"customers",description:p("Go to customers page"),show_description:!1}},{title:p("Products"),data:{type:"link",new_tab:!0,url:ps+"products",description:p("Go to products page"),show_description:!1}},{title:p("Integrations"),data:{type:"link",url:ps+"integrations",description:p("Go to integrations page"),show_description:!1}},{title:p("Coupons"),data:{type:"link",url:ps+"coupons",description:p("Go to coupons page"),show_description:!0}},{title:p("Manage %s","PayPal"),data:{type:"link",new_tab:!1,url:ps+"settings/payments/paypal",description:p("Go to %s page","PayPal settings"),show_description:!1}},{title:p("Manage %s","Stripe"),data:{type:"link",new_tab:!1,url:ps+"settings/payments/stripe",description:p("Go to %s page","stripe settings"),show_description:!1}}],cie=[{title:"Theme",title_resolver:()=>{let t=(pe.isDark()?"dark":"light")==="light"?p("Dark"):p("Light");return p("Change theme to %s",t)},data:{type:"action",action:()=>{let t=(pe.isDark()?"dark":"light")==="light"?"dark":"light";pe.apply(t,{fromShortcut:!0})}}}];De.get("admin_url")+"";const fu={"/settings/store-settings":p("Store Setup"),"/settings/store-settings/pages_setup":p("Pages Setup"),"/settings/store-settings/single_product_setup":p("Single product & Order Setup"),"/settings/store-settings/cart_and_checkout":p("Cart and Checkout"),"/settings/store-settings/checkout_fields":p("Checkout Fields")};let Jp=[];Object.keys(fu).forEach(e=>{const t=fu[e];Jp.push({title:t,data:{type:"action",action:({router:a})=>{a.push({path:e})},description:p("Go to %s",t),show_description:!1}})});const pie={Menu:uie,Actions:cie,Settings:Jp},Mi=[];Object.entries(pie).forEach(([e,t])=>{t.forEach((a,s)=>{Mi.push({...a,id:`${e.toString().toLowerCase()}-${s}`,group:[e]})})});const fie=()=>({shouldSort:!0,threshold:.6,keys:[{name:"title",getFn:e=>e.title},{name:"data.description",getFn:e=>e.data.description},{name:"group",weight:2,getFn:e=>e.group}]}),hie={class:"navigable-list-container fct-global-search-result-container"},mie={key:0,class:"no-results fct-global-search-result-not-found"},_ie={key:1},gie=["tabindex","onClick","onKeydown"],vie={__name:"NavigableList",props:{items:{type:Array,required:!0,default:()=>[]},noResultsText:{type:String,default:p("No results found")},onAction:{type:Function,required:!0}},setup(e,{expose:t}){const a=e,s=T(-1),n=ff("listContainer"),l=T({}),d=(w,C)=>{C&&(l.value[w]=C)},u=w=>{const C=a.items.length;if(C===0)return;const F=C-1;w==="up"?s.value=s.value<=0?F:s.value-1:w==="down"&&(s.value=s.value>=F?0:s.value+1),c()},c=()=>{const w=n.value,C=l.value[s.value];C&&w&&(C.scrollIntoView({behavior:"smooth",block:"nearest"}),de(()=>{C.focus()}))},h=w=>{s.value=w,v(w)},v=w=>{w>=0&&w<a.items.length&&a.onAction(a.items[w],w)},y=()=>{s.value=-1};return t({focusList:w=>{w=w??a.items.length-1,w>=0&&(s.value=w,de(()=>{l.value[w]&&l.value[w].focus()}))},resetSelection:y,performFirstAction:()=>{a.items.length>0?(s.value=0,setTimeout(()=>{v(0)},200)):s.value=-1}}),fe(()=>a.items,w=>{y(),w.length>0&&de(()=>{})},{immediate:!0}),fe(s,()=>{}),(w,C)=>(A(),_("div",hie,[e.items.length===0?(A(),_("div",mie,[o(z,{name:"Empty/GlobalSearch"}),O(" "+m(e.noResultsText),1)])):(A(),_("div",_ie,[i("ul",{ref_key:"listContainer",ref:n,class:"navigable-list fct-global-search-result-list"},[(A(!0),_(H,null,X(e.items,(F,S)=>(A(),_("li",{key:S,ref_for:!0,ref:E=>d(S,E),class:oe({selected:S===s.value}),tabindex:S,onClick:E=>h(S),onKeydown:[C[0]||(C[0]=Ma(je(E=>u("up"),["prevent"]),["arrow-up"])),C[1]||(C[1]=Ma(je(E=>u("down"),["prevent"]),["arrow-down"])),Ma(E=>v(S),["enter"])]},[Ta(w.$slots,"default",{item:F,index:S,isSelected:S===s.value},void 0,!0)],42,gie))),128))],512)]))]))}},Vi=be(vie,[["__scopeId","data-v-2379fe26"]]),yie={key:0},bie={class:"action-icon"},wie={class:"recent-search-title"},Cie={key:0},Bie={class:"action-icon"},Gr="recent_actions",kie={__name:"ResultList",props:{query:{type:String,required:!0},searchResults:{type:Array,required:!0,default:()=>[]},onActionPerformed:{type:Function,required:!0},focusInput:{type:Function,required:!0},searchData:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:t}){const a=Va();Je().ctx;const s=e,n=T(0),l=T({}),d=T(),u=(F,S)=>{const k=F.item.data,Q=h(k.type);if(Q==="link"){let I=h(k.url);h(k.new_tab)?window.open(I,"_blank"):window.location.href=I}else Q==="action"&&h(k.action);c(F),s.onActionPerformed()},c=F=>{const S=F.item.id;let E=ze.get(Gr)||[];E=E.filter(k=>k!==S),E.unshift(S),E=E.slice(0,5),ze.set(Gr,E)},h=F=>typeof F=="function"?v(F):F,v=async F=>await F({query:s.query,router:a}),y=()=>{var F;(F=d.value)==null||F.resetSelection()},g=()=>{var F;(F=d.value)==null||F.focusList(0)},B=()=>{var F;(F=d.value)==null||F.performFirstAction()};fe(()=>s.searchResults,async()=>{l.value={},l.value=s.searchResults??{},n.value=Object.keys(l.value).length-1;let F=l.value;for(const S of Object.keys(F)){const E=F[S];E.item.title_resolver&&(F[S].item.title=await h(E.item.title_resolver))}l.value={...F}});const w=T([]),C=async()=>{const F=ze.get(Gr)||[];let S=ve.whereIn(s.searchData,"id",F),E=[];for(const k of S)typeof k.title_resolver=="function"&&(k.title=await h(k.title_resolver)),E.push({item:k});w.value=E};return he(()=>{C()}),t({focusList:g,resetSelection:y,performFirstAction:B,fetchRecentActions:C}),(F,S)=>(A(),_(H,null,[e.query||w.value.length<1?(A(),U(Vi,{key:0,items:e.searchResults,"on-action":u,"no-results-text":f(p)("No matches found"),ref_key:"navigableList",ref:d},{default:r(({item:E,index:k,isSelected:Q})=>{var I,D;return[i("span",null,[O(m(E.item.title)+" ",1),S[0]||(S[0]=i("br",null,null,-1)),((D=(I=E.item)==null?void 0:I.data)==null?void 0:D.show_description)===!0?(A(),_("span",yie,m(E.item.data.description),1)):x("",!0)]),i("div",bie,[o(z,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])):x("",!0),!e.query&&w.value.length>0?(A(),_(H,{key:1},[i("span",wie,m(f(p)("Recent Actions")),1),o(Vi,{items:w.value,"on-action":u,"no-results-text":f(p)("No matches found"),ref_key:"navigableList",ref:d},{default:r(({item:E,index:k,isSelected:Q})=>{var I,D;return[i("span",null,[O(m(E.item.title)+" ",1),S[1]||(S[1]=i("br",null,null,-1)),((D=(I=E.item)==null?void 0:I.data)==null?void 0:D.show_description)===!0?(A(),_("span",Cie,m(E.item.data.description),1)):x("",!0)]),i("div",Bie,[o(z,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])],64)):x("",!0)],64))}},Fie=be(kie,[["__scopeId","data-v-2bf1bb57"]]),xie={class:"fct-global-search-product-wrap"},Uie={class:"fct-global-search-product-left-info"},Sie={key:0,class:"type"},Eie={key:0,class:"price-and-status"},Qie={__name:"Product",props:{product:{type:Object,required:!0}},setup(e){const t=s=>s.min_price===s.max_price?lt(s.min_price,!0):`${lt(s.min_price,!0)} - ${lt(s.max_price,!0)}`,a=s=>s==="publish"?p("published"):s==="future"?p("scheduled"):s;return(s,n)=>(A(),_("div",xie,[i("div",Uie,[o(Ki,{product:e.product},null,8,["product"]),e.product.detail?(A(),_("span",Sie,[O(m(f(rt).headline(e.product.detail.variation_type))+" ",1),n[0]||(n[0]=i("br",null,null,-1)),O(" "+m(f(rt).headline(e.product.detail.fulfillment_type)),1)])):x("",!0)]),e.product.detail?(A(),_("span",Eie,[O(m(t(e.product.detail))+" ",1),(A(),U(ut,{key:e.product.ID,status:e.product.post_status},{default:r(()=>[O(m(a(e.product.post_status)),1)]),_:1},8,["status"]))])):x("",!0)]))}},Die={class:"fct-global-search-order-wrap"},Iie={class:"fct-global-search-order-header"},$ie={class:"fct-global-search-order-id"},Tie={class:"items"},Mie={class:"fct-global-search-order-header-meta"},Vie={class:"date"},Lie=["innerHTML"],Oie={class:"customer-name"},Hie={class:"fct-global-search-order-status-wrapper"},Rie=["src","alt"],Pie={__name:"Order",props:{order:{type:Object,required:!0}},setup(e){const t=a=>ve.get(window,"fluentCartAdminApp.payment_logos."+a);return(a,s)=>{var l;const n=b("el-tag");return A(),_("div",Die,[i("div",Iie,[i("div",$ie,[O(" #"+m(e.order.id)+" ",1),i("span",Tie,m(f(p)("%s Items",e.order.order_items.length)),1)]),i("div",Mie,[i("span",Vie,[o(Lt,{"date-time":e.order.created_at},null,8,["date-time"])]),s[0]||(s[0]=i("span",{class:"circle"},null,-1)),i("span",{class:"total-price",innerHTML:f(lt)(e.order.total_amount,!0,!1,e.order.currency)},null,8,Lie),s[1]||(s[1]=i("span",{class:"circle"},null,-1)),i("span",Oie,m(((l=e.order.customer)==null?void 0:l.full_name)||f(p)("No Name")),1)])]),i("div",Hie,[o(ut,{status:e.order.payment_status,"hide-icon":!0},null,8,["status"]),t(e.order.payment_method)?(A(),_("img",{key:0,src:t(e.order.payment_method),alt:f(rt).headline(e.order.payment_method)},null,8,Rie)):(A(),U(n,{key:1,type:"info",round:"",size:"small",class:"capitalize"},{default:r(()=>[O(m(f(rt).headline(e.order.payment_method)),1)]),_:1}))])])}}},Kie={class:"fct-global-search-customer-wrap"},Nie={class:"fct-customer-card"},Gie={class:"fct-customer-avatar"},zie=["src"],jie={class:"fct-customer-details"},Yie={class:"fct-customer-name"},qie={class:"fct-customer-id"},Wie={class:"fct-customer-email"},Xie={class:"purchase-count"},Jie={class:"date"},Zie={__name:"Customer",props:{customer:{type:Object,required:!0}},setup(e){return(t,a)=>(A(),_("div",Kie,[i("div",Nie,[i("div",Gie,[i("img",{src:e.customer.photo,alt:"avatar"},null,8,zie)]),i("div",jie,[i("div",Yie,[O(m(e.customer.full_name||t.$t("No Name"))+" ",1),i("span",qie,"#"+m(e.customer.id),1)]),i("div",Wie,[O(m(e.customer.email)+" ",1),a[0]||(a[0]=i("span",{class:"circle"},null,-1)),a[1]||(a[1]=O()),i("span",Xie,"Purchase: "+m(e.customer.purchase_count),1)])])]),i("span",Jie,[o(Lt,{"date-time":e.customer.last_purchase_date},null,8,["date-time"])])]))}},eAe={class:"fct-global-search-coupon-wrap"},tAe={class:"amount"},aAe={__name:"Coupon",props:{coupon:{type:Object,required:!0}},setup(e){return(t,a)=>(A(),_("div",eAe,[i("span",null,m(e.coupon.title),1),i("span",null,m(e.coupon.code),1),i("span",tAe,m(f(lt)(e.coupon.amount,!0)),1)]))}},sAe={class:"fct-global-remote-result-container"},nAe={class:"fct-global-remote-result-label"},oAe={class:"text"},lAe={class:"navigable-content"},rAe={class:"action-icon"},iAe={__name:"RemoteResult",emits:["close-modal","onRemoteSearchStateChange"],setup(e,{expose:t,emit:a}){const s=a,n=Va(),l=T({}),d=T(""),u=T(),c=T({}),h=T([]),v=M=>{y.value=!1,h.value=F.data.tableData,s("onRemoteSearchStateChange",!1)},y=T(!1),g={orders:Tu({fetch:!1}),products:Sp({fetch:!1}),customers:$u({fetch:!1}),coupons:Hp({fetch:!1})},B=()=>{},w=()=>{var M;(M=u.value)==null||M.focusList(0)},C=()=>{var M;(M=u.value)==null||M.performFirstAction()};Ns(()=>{for(const M of Object.keys(g))g[M].onDataLoaded(v)});let F=null;const S=()=>{F=g[l.value.key],F.data.search=d.value,y.value=!0,F.fetch(),s("onRemoteSearchStateChange",!0)},E=Wi.debounce(S,800),k=(M,$)=>{if(h.value=[],F&&(F.data.search=""),l.value=$,c.value={title:$.title,key:$.key},!M){d.value="";return}d.value=M,E()},Q=()=>{n.push({name:c.value.key,query:{search:d.value}}),s("close-modal")},I={orders:{name:"view_order",key:"order_id"},products:{name:"product_edit",key:"product_id"},customers:{name:"view_customer",key:"customer_id"},coupons:{name:"edit_coupon",key:"coupon_id"}},D=M=>{l.value.key in I&&(n.push({name:I[l.value.key].name,params:{[I[l.value.key].key]:M.id||M.ID,action:"edit"}}),s("close-modal"))};return t({fetchData:k,focusList:w,resetSelection:B,performFirstAction:C}),(M,$)=>(A(),_("div",sAe,[i("div",nAe,[i("span",oAe,m(l.value.title),1),c.value.key?(A(),_("span",{key:0,class:"view-all",onClick:Q},m(d.value?f(p)('Search "%1$s" in %2$s',d.value,c.value.title):f(p)("See All %s",c.value.title)),1)):x("",!0)]),o(Vi,{items:h.value,"on-action":V=>{D(V)},"no-results-text":d.value?f(p)("No matches found for %s",l.value.title):f(p)("Type something to find %s",l.value.title),ref_key:"navigableList",ref:u},{default:r(({item:V,index:L,isSelected:R})=>[i("div",lAe,[l.value.key==="products"?(A(),U(Qie,{key:0,product:V},null,8,["product"])):x("",!0),l.value.key==="orders"?(A(),U(Pie,{key:1,order:V},null,8,["order"])):x("",!0),l.value.key==="customers"?(A(),U(Zie,{key:2,customer:V},null,8,["customer"])):x("",!0),l.value.key==="coupons"?(A(),U(aAe,{key:3,coupon:V},null,8,["coupon"])):x("",!0)]),i("div",rAe,[o(z,{name:"Enter"})])]),_:1},8,["items","on-action","no-results-text"])]))}},AAe={class:"fct-global-search-input-wrap"},dAe={class:"fct-setting-search-icon"},uAe={class:"fct-global-search-input-container"},cAe={key:0,class:"searched-item"},pAe={class:"fct-global-searching-for"},fAe={class:"fct-global-searching-for-label"},hAe={class:"fct-global-searching-suggestion-list"},mAe=["onClick"],_Ae={class:"dialog-footer is-border"},gAe={class:"fct-search-commands"},vAe={class:"command-key"},yAe={class:"command-key"},bAe={class:"label"},wAe={class:"command-key"},CAe={class:"label"},BAe={__name:"GlobalSearch",setup(e){Je().ctx;const t=T(!1),a=T(""),s=T({}),n=T(),l=T(""),d=T([p("orders"),p("products"),p("customers"),p("coupons"),p("settings"),p("menus"),p("shortcuts...")]),u=T(0),c=T(!0),h=T(0),v=T(null),y=T(null),g=T(70),B=T(40),w=T(1700),C=()=>{},F=()=>{var ie,P;t.value?(ie=W.value)==null||ie.resetSelection():(P=k.value)==null||P.resetSelection(),D.value=!1,K.value=!1,E()},S=()=>{var ie;(ie=n.value)==null||ie.focus()},E=()=>{D.value=!1,s.value=[],t.value=!1,a.value="",M.value=null},k=T(),Q=ie=>{let P=ie.includes(","),j={},G=[];(P?ie.split(","):[ie]).forEach(ne=>{ne.includes(":")?I(ne,j,G):G.push(ne)});let ee=[];return Object.keys(j).forEach(ne=>{const Ce=j[ne];Ce.length>0?Ce.forEach(Qe=>{Qe.length>0?ee.push({group:"'"+ne,title:Qe}):ee.push({group:"'"+ne})}):ee.push({group:"'"+ne})}),G.forEach(ne=>{ne.length>0&&ee.push({title:ne})}),ee},I=(ie,P,j)=>{if(ie.length===1)return;let G=ie.split(":"),N=G[0],ee=G[1];N.length>0?(P.hasOwnProperty(N)||(P[N]=[]),ee.length>0&&P[N].push(ee)):j.push(ee)},D=T(!1),M=T(null),$=T({o:{key:"orders",title:p("Orders")},p:{key:"products",title:p("Products")},c:{key:"customers",title:p("Customers")},d:{key:"coupons",title:p("Coupons")}}),V=ie=>{M.value=ie,D.value=!0,s.value={},de(()=>{var P,j;(P=W.value)==null||P.fetchData(a.value,ie),(j=n.value)==null||j.focus()})},L=()=>{var ie;s.value=[],M.value=null,a.value="",D.value=!1,(ie=n.value)==null||ie.focus(),K.value=!1},R=()=>{var ie;(ie=W.value)==null||ie.fetchData(a.value,M.value)},K=T(!1),J=ie=>{K.value=ie,de(()=>{var P;(P=n.value)==null||P.focus()})},W=T(),ae=Ao();ae.bind("/",ie=>{t.value&&(ie.preventDefault(),S())}),ae.bind(["mod+k"],(ie,P)=>{var N;ie.preventDefault();let j=null;const G=["o","p","c","d"];ae.bind(G,ee=>{ee.preventDefault(),j=$.value[ee.key],j&&V(j)}),t.value=!0,(N=k.value)==null||N.fetchRecentActions(),setTimeout(()=>{S(),ae.unbind(G)},500)});const Z=()=>{if(v.value)return;const ie=()=>{if(n.value&&n.value.length>0)return;const j=d.value[u.value];if(c.value)h.value<j.length?(l.value=j.slice(0,h.value+1),h.value++):(c.value=!1,clearTimeout(y.value),y.value=setTimeout(()=>{y.value=null},w.value));else{if(y.value)return;h.value>0?(h.value--,l.value=j.slice(0,h.value)):(c.value=!0,u.value=(u.value+1)%d.value.length)}},P=()=>{ie();const j=c.value?g.value:y.value?120:B.value;v.value=setTimeout(P,j)};P()};let te;return he(()=>{Z(),te=new Fn(Mi,fie())}),(ie,P)=>{const j=b("el-input"),G=b("el-dialog");return A(),_(H,null,[(A(),U(Dl,{to:"#fct_admin_menu_search"},[i("div",AAe,[i("button",{onClick:P[0]||(P[0]=N=>t.value=!0),type:"button",class:"fct-setting-search-button","aria-label":"Search"},[i("span",dAe,[o(z,{name:"Search"})]),P[7]||(P[7]=i("span",{class:"fct-global-search-button-keys"},[i("kbd",{class:"fct-global-search-button-key"},""),i("kbd",{class:"fct-global-search-button-key"},"K")],-1))])])])),o(G,{modelValue:t.value,"onUpdate:modelValue":P[6]||(P[6]=N=>t.value=N),onOpened:C,onClosed:F,class:"fct-global-search-container","append-to-body":!0},{header:r(()=>[i("div",uAe,[o(z,{name:"Search",class:"search-icon"}),M.value!=null?(A(),_("div",cAe,[O(m(M.value.title)+" ",1),o(z,{name:"Cross",class:"searched-item-remove",onClick:L})])):x("",!0),o(j,{class:"mousetrap",placeholder:f(p)("Search for %s",l.value),autofocus:"",ref_key:"searchRef",ref:n,id:"fct-global-search-input",disabled:K.value,onKeydown:[P[1]||(P[1]=Ma(je(()=>{var N,ee;if(D.value){(N=W.value)==null||N.focusList();return}(ee=k.value)==null||ee.focusList()},["prevent"]),["arrow-down"])),P[2]||(P[2]=Ma(je(()=>{var N,ee;if(D.value){(N=W.value)==null||N.performFirstAction();return}(ee=k.value)==null||ee.performFirstAction()},["prevent"]),["enter"])),P[3]||(P[3]=Ma(()=>{a.value.length===0&&(M.value=null,D.value=!1)},["backspace"]))],onInput:P[4]||(P[4]=()=>{if(D.value){R();return}let N=a.value.includes(","),ee=a.value.includes(":");if(!N&&!ee)s.value.value=f(te).search(a.value);else{const ne=Q(a.value);s.value.value=f(te).search({$or:ne})}}),modelValue:a.value,"onUpdate:modelValue":P[5]||(P[5]=N=>a.value=N),clearable:""},null,8,["placeholder","disabled","modelValue"])])]),default:r(()=>[o(na,{visible:!M.value&&a.value.length===0,accordion:""},{default:r(()=>[i("div",pAe,[i("div",fAe,m(f(p)("Searching for")),1),i("div",hAe,[(A(!0),_(H,null,X($.value,N=>{var ee;return A(),_("div",{key:N.key,onClick:ne=>V(N),class:oe(["fct-global-searching-suggestion",((ee=M.value)==null?void 0:ee.key)===N.key?"active":""])},m(N.title),11,mAe)}),128))])])]),_:1},8,["visible"]),D.value?(A(),U(iAe,{key:0,ref_key:"remoteResultRef",ref:W,query:a.value,tag:M.value,onCloseModal:E,onOnRemoteSearchStateChange:J},null,8,["query","tag"])):(A(),U(Fie,{key:1,ref_key:"resultListRef",ref:k,query:a.value,"search-results":s.value.value,onActionPerformed:E,focusInput:S,searchData:f(Mi)},null,8,["query","search-results","searchData"])),i("div",_Ae,[i("ul",gAe,[i("li",null,[i("span",vAe,[o(z,{name:"ArrowUp"})]),i("span",yAe,[o(z,{name:"ArrowDown"})]),i("span",bAe,m(f(p)("To navigate")),1)]),i("li",null,[i("span",wAe,[o(z,{name:"Enter"})]),i("span",CAe,m(f(p)("To select")),1)])])])]),_:1},8,["modelValue"])],64)}}},kAe={class:"fl_app fluent-cart-admin-pages"},FAe=Object.assign({name:"DashboardApplication"},{__name:"Application",setup(e){const t=T("");he(()=>{jQuery(".notice:not(.fluent-cart), .error:not(.fluent-cart), #ehp-admin-cb").remove(),t.value=a();const d=document.querySelector(".fct_admin_menu_wrap"),u=()=>{window.scrollY>10?d==null||d.classList.add("scroll-header"):d==null||d.classList.remove("scroll-header")};window.addEventListener("scroll",u)});const a=()=>window.location.href,s=T(!1),n=oa();fe(()=>n.fullPath,async()=>{t.value=a(),s.value=!1,await de(()=>{setTimeout(()=>{s.value=!0},100)})});const l=q(()=>!(n.fullPath.includes("reports")||n.fullPath.includes("settings")));return(d,u)=>{const c=b("router-view");return A(),_("div",null,[o(BAe),l.value?(A(),U(gA,{key:0})):x("",!0),i("div",kAe,[o(c)]),(A(),U(Dl,{to:"#theme-button-container"},[o(kre)]))])}}});let hu=!1;function xAe(e){return{data:function(){return{appVars:window.fluentCartAdminApp}},methods:{$get:se.get,$post:se.post,$put:se.put,$del:se.delete,$t:p,$n:ao,formatMoney(t,a,s=!1){return!t&&s?"":(t||(t="0.00"),De.get("shop.currency_sign")+" "+t)},formatCents(t,a,s=!1){return!t&&s?"":(t?t=(t*100).toFixed(2):t="0.00",a?(t=new Intl.NumberFormat("en-US").format(t),De.get("shop.currency_sign")+" "+t):t)},formatNumber(t,a=!0,s=!1,n){return Be.formatNumber(t,a,s,n)},getAddress(t,a="billing"){let s=[t[a+"_address_1"],t[a+"_address_2"],t[a+"_city"],t[a+"_city"],t[a+"_state"],t[a+"_zip"],t[a+"_country"]];return s=s.filter(n=>!!n).join(", "),s||"no "+a+" address"},getOrderAddress(t,a="billing",s=!1){return zf(t,a,s)},changeTitle(t){jQuery("head title").text(t+" - FluentCart")},handleError(t){if(!t)return;let a="";typeof t=="string"?a=t:t&&t.message?a=t.message:a=t,typeof t=="object"&&(a=this.convertToText(t)),a||(a="Something is wrong!"),this.$notify({type:"error",title:"Error",message:a,dangerouslyUseHTMLString:!0})},convertToText(t){const a=[];if(typeof t=="object"&&t.join===void 0)for(const s in t)a.push(this.convertToText(t[s]));else if(typeof t=="object"&&t.join!==void 0)for(const s in t)a.push(this.convertToText(t[s]));else typeof t=="function"||typeof t=="string"&&a.push(t);return a.join("<br />")},handleSuccess:t=>{Y.success(t)},handleMessage:(t,a="info",s=40,n=1e3)=>{gf.show(t,a,s,n)},Storage:()=>ze,buildFormRendererValue(t,a){let s={};return Object.keys(t).forEach(n=>{let l=t[n];["grid"].includes(l.type??"")?s[n]=this.buildFormRendererValue(l.schema??{},a[n]??{}):s[n]=a[n]??""}),s},registerCopyAction(){hu||(hu=!0,document.addEventListener("click",t=>{t.target.matches(".copyable-content")&&Vl.copy(t.target.textContent)}))},currencySign(){return De.get("shop.currency_sign")},getPlaceholderImage(){return mn.getUrl("images/placeholder.svg")},saveLocal(t,a){ze.set(t,a)},getLocal(t){return ze.get(t)},hasPermission(t){return so.hasPermission(t)}}}}function UAe(e){e.beforeEach((t,a,s)=>{const n=ve.get(t,"meta.permission");return n?so.resolve({permission:n,permissionType:ve.get(t,"meta.permissionType")})?s():s({name:"unauthorized"}):(De.get("app_config.env")==="dev"&&console.warn(`[Permission] Route "${t.name||t.path}" is missing 'meta.permission'.`),s())})}function SAe(e){e.afterEach((t,a)=>{const s=t.meta.active_menu;jQuery(".fct_menu li").removeClass("active_admin_menu"),jQuery(".fct_menu li.fct_menu_item_"+s).addClass("active_admin_menu"),jQuery(".toplevel_page_fluent-cart li").removeClass("current"),jQuery(".toplevel_page_fluent-cart li.fluent_cart_"+s).addClass("current"),t.meta.title&&jQuery("head title").text(t.meta.title+" - FluentCart")})}const EAe={mounted(e,t){const a=t.value,s=1e3,n=0,l=performance.now(),d=()=>{const u=performance.now()-l,c=Math.min(u/s,1),h=(n+c*(a-n)).toFixed(2);e.textContent=h,c<1&&requestAnimationFrame(d)};d()},updated(e,t){const a=t.value,s=2e3,n=0,l=performance.now(),d=()=>{const u=performance.now()-l,c=Math.min(u/s,1),h=(n+c*(a-n)).toFixed(2);e.textContent=h,c<1&&requestAnimationFrame(d)};d()}},QAe={__name:"Unauthorized",setup(e){return(t,a)=>(A(),_("span",null,m(f(p)("You are not allowed")),1))}},DAe=window.fluent_cart_admin.hooks.applyFilters("fluent_cart_routes",wre);let mu=!1;document.addEventListener("fcart_renew_rest_nonce",function(e){mu||os.alert(p("Your session has expired due to inactivity. Please refresh the page to continue."),p("Session Expired"),{confirmButtonText:p("Reload"),callback:t=>{mu=!1,window.location.reload()}})});const IAe=[$f,Tf,Mf,Ts,Vf,ji,Lf,Of,Tl,Hf,Rf,xu],es=hf(FAe);es.config.globalProperties.appVars=De.get();es.provide("appVars",De.get());es.mixin(xAe());es.directive("loading",jf);es.directive("animate",EAe);Wf(es);const kA=mf({routes:[...Object.values(DAe),{path:"/unauthorized",name:"unauthorized",component:QAe,props:!0},{path:"/:path(.*)*",name:"NotFound",component:Ml,props:!0}],history:_f(),scrollBehavior(e,t,a){return a||{top:0,behavior:"smooth"}}});es.use(kA);UAe(kA);SAe(kA);IAe.forEach(e=>{es.component(e.name,e)});const FA=De.get("el_strings"),Zp=De.get("datei18");FA.el.datepicker.weeks=Zp.weekdaysShort;FA.el.datepicker.months=Zp.monthsShort;es.use(Yf,{locale:FA});es.mount("#fluent_cart_plugin_app");export{mo as E};
